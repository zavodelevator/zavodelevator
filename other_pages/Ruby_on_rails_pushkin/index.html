<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=utf-8">
	<TITLE></TITLE>
	<META NAME="GENERATOR" CONTENT="LibreOffice 4.1.6.2 (Linux)">
	<META NAME="CREATED" CONTENT="20170426;32400000000000">
	<META NAME="CHANGED" CONTENT="20170426;32400000000000">
	<META NAME="AppVersion" CONTENT="15.0000">
	<META NAME="DocSecurity" CONTENT="0">
	<META NAME="HyperlinksChanged" CONTENT="false">
	<META NAME="LinksUpToDate" CONTENT="false">
	<META NAME="ScaleCrop" CONTENT="false">
	<META NAME="ShareDoc" CONTENT="false">
	<link rel="stylesheet" href="css.css">
	
	<STYLE TYPE="text/css">
	
	<!--
		@page { size: 8.5in 11in; margin-left: 1in; margin-right: 1in; margin-top: 1in; margin-bottom: 0.5in }
		P { margin-bottom: 0.08in; direction: ltr; widows: 2; orphans: 2 }
		A:link { so-language: zxx }
	-->
	</STYLE>
</HEAD>
<BODY LANG="ru-RU" DIR="LTR" class="body">
<TABLE WIDTH=624 CELLPADDING=7 CELLSPACING=0 STYLE="page-break-before: always">
	<COL WIDTH=107>
	<COL WIDTH=489>
	<TR VALIGN=TOP>
		<TD WIDTH=107 HEIGHT=114 BGCOLOR="#ffffff" STYLE="border: none; padding: 0in">
			<P LANG="en" STYLE="border: none; padding: 0in; widows: 0; orphans: 0"><A NAME="_GoBack"></A>
			<BR>
			</P>
		</TD>
		<TD WIDTH=489 BGCOLOR="#ffffff" STYLE="border: none; padding: 0in">
			<P LANG="en" STYLE="margin-bottom: 0in"><BR>
			</P>
			<P><FONT COLOR="#222222"><FONT FACE="Arial, serif"><FONT SIZE=7><SPAN STYLE="background: #ffffff">Роман
			Пушкин</SPAN></FONT></FONT></FONT></P>
		</TD>
	</TR>
</TABLE>
<P LANG="en" ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%">
<BR>
</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><FONT SIZE=6 STYLE="font-size: 30pt"><SPAN LANG="en">Ruby</SPAN></FONT></FONT><FONT FACE="Arial, serif"><FONT SIZE=6 STYLE="font-size: 30pt">
для романтиков от новичка до профессионала</FONT></FONT></P>
<P ALIGN=CENTER STYLE="margin-top: 0.28in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_8lh4z12qlh0f"></A>
<FONT FACE="Arial, serif"><FONT SIZE=5 STYLE="font-size: 20pt"><SPAN LANG="en">Оглавление</SPAN></FONT></FONT></P>
<DIV ID="Table of Contents1" DIR="LTR">
	<P STYLE="margin-top: 0.06in; margin-bottom: 0in; line-height: 100%">
	<BR>
	</P>
</DIV>
<P LANG="en" STYLE="margin-top: 0.14in; margin-bottom: 0.06in; line-height: 100%">
<BR><BR>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P LANG="en" STYLE="margin-top: 0.28in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_mopd8l2fwkds"></A>
<BR><BR>
</P>
<P STYLE="margin-top: 0.28in; line-height: 115%; page-break-inside: avoid; page-break-before: always; page-break-after: avoid"><A NAME="_9irh7owq8di9"></A>
<FONT FACE="Arial, serif"><FONT SIZE=5 STYLE="font-size: 20pt">Вместо
предисловия</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">В
21 веке программирование стало одной из
важнейших наук в любой экономике.
Процессы, которые происходили раньше
без помощи компьютеров, были полностью
или частично оптимизированы. Бизнес и
простые люди увидели пользу электронных
машин, и началась эпоха расцвета
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">IT</SPAN></FONT><FONT FACE="Arial, serif">-индустрии.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Во
всем многообразии технологий образовались
отдельные направления. Определились
наиболее удобные инструменты для
выполнения той или иной задачи. Языки
программирования претерпели существенные
изменения. Разобраться во всех языках
и технологиях обычному читателю не так
просто, как это может показаться на
первый взгляд.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">В
какой-то момент стало очевидно, что
программист - одна из профессий 21-ого
века. Но как стать программистом? В каком
направлении приложить усилия? Что нужно
изучать, а что не нужно? Как наиболее
эффективно использовать время, чтобы
освоить какую-либо технологию?</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Прежде,
чем дать ответ на эти вопросы, нужно
ответить на самый главный вопрос: а
зачем нужно становиться программистом?
Какой в этом смысл?</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Кто-то
захочет стать программистом, чтобы
разрабатывать микропрограммы для
межконтинентальных баллистических
ракет и космической индустрии. Кто-то
хочет стать программистом для того,
чтобы создавать свои собственные игры.
Кто-то хочет освоить программирование
в электронных таблицах, чтобы эффективнее
считать налоги.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Но
задача именно этой книги более бытовая.
Автор подразумевает, что читатель на
вопрос “зачем нужно становиться
программистом?” даст ответ “чтобы быть
программистом и зарабатывать деньги”.
Обычно такой ответ дают люди, которые
уже попробовали себя в какой-либо
профессии и хотят более эффективно
использовать свое время и получать за
это деньги.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Также
это могут быть молодые люди, которые
вынуждены идти в ногу со временем и
осваивать технологии как можно быстрее,
и как можно быстрее получать результат
от своих знаний. Причем, результат не
только в виде самих знаний - как написать
ту или иную программу - а результат в
денежном эквиваленте.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Знание
какого-либо направления в программировании
подразумевает знакомство с основами
языка, с элементарной теорией (которая
отличается для каждого направления), с
основными понятиями и определениями,
а также знакомство с не основными
инструментами (такими как операционная
система, утилиты и дополнительные
программы).</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Направлений
существует огромное множество. Это и
разработка игр, и научные исследования,
и обработка и анализ данных, и
веб-программирование, и программирование
для мобильных устройств, и т.д. Быть
специалистом по всем направлениям сразу
невозможно.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Поэтому
человек, начинающий или желающий изучать
программирование, стоит перед выбором
- куда податься? Что учить?</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Если
вы являетесь научным сотрудником НИИ,
то выбор, скорее всего, падет на язык
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">python</SPAN></FONT><FONT FACE="Arial, serif">
или </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">c</SPAN></FONT><FONT FACE="Arial, serif">++,
так как для этих языков накоплено большое
количество библиотек для анализа и
обработки данных.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><BR>Если
вы, например, работаете сторожем и
полностью довольны своей работой, то
можно изучить какой-нибудь экзотический,
маловостребованный на рынке язык
программирования просто для того, чтобы
не было скучно.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><BR>Если
вы живете в обществе, где каждый месяц
нужно оплачивать счета, которые каждый
месяц становятся все больше и больше,
где нужно думать не только про сегодня,
но и про завтра - выбор уже будет другим.
Нужно будет изучить что-нибудь быстро,
очень востребованное, чтобы скорее
найти работу.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Язык
руби (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ruby</SPAN></FONT><FONT FACE="Arial, serif">
- англ.) и веб-программирование - это
нечто среднее между “поскорее найти
работу”, “выучить что-нибудь несложное
и интересное” и “чтобы также пригодилось
в будущем”. Руби не только позволяет
составлять скучные программы, работая
на кого-то в офисе, но также может быть
полезен дома, в быту (одна из моих
последних программ - обучение игре на
гитаре).</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Также
философия самого языка подразумевает,
что обучение и использование не будет
скучным. К примеру, один из принципов
языка - принцип наименьшего сюрприза
(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">principle</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">of</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">a</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">least</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">surprise</SPAN></FONT><FONT FACE="Arial, serif">),
который говорит буквально следующее:
“что бы вы ни делали - скорее всего у
вас получится”. Согласитесь, что это
уже вдохновляет!</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Существуют
также и другие языки программирования.
Автор ни в коем случае не утверждает,
что они плохие. Каждый язык хорош для
определенной задачи. Но вспомним про
нашу задачу и сравним с некоторыми
другими языками.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_eg6tzd9xpee4"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt">Руби
против ибур</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Язык
“ибур” это “руби” наоборот. Это
экзотический язык программирования,
который кроме меня никто не знает. Я его
сам только что придумал и я сам не знаю
что он делает. Давайте сравним ибур с
руби по трем параметрам, которые я описал
выше:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><I>Поскорее
найти работу:</I></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Руби
- очень популярный язык, легко найти
работу</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Ибур
- никто о нем не знает, работу найти
невозможно</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Остальные
параметры можно не сравнивать. Другими
словами, если вам важно не только
программирование в себе (что тоже
неплохо), но и возможность заработать
в обозримом будущем, то руби - неплохой
выбор. Язык довольно популярен. Конечно,
существуют и другие популярные языки
программирования. Скажем, </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">,
возможно, более популярен, но давайте
сравним </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">
и руби.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><I>Выучить
что-нибудь несложное и интересное:</I></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Руби
- principle of a least surprise, что уже довольно
неплохо.</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">
- изначально не создавался с идеей
“принципа наименьшего сюрприза”.
Сложнее, чем руби, так как является
полностью асинхронным (пока поверьте
мне на слово).</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Докажем,
что </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">
не такой уж и простой, как может показаться
на первый взгляд. Рассмотрим программу
на руби, которая сортирует числа:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">[11,
3, 2, 1].</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">sort</SPAN></FONT><FONT FACE="Arial, serif">()</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Программа
выше должна отсортировать числа 11, 3, 2,
1 в возрастающем порядке (пока не важно,
если этот синтаксис вам непонятен, мы
еще будем проходить эту тему). Результат
работы программы на руби: 1, 2, 3, 11. Без
сюрпризов! Но напишем ту же самую
программу на </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">[11,
3, 2, 1].</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">sort</SPAN></FONT><FONT FACE="Arial, serif">();</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Синтаксис
в этом случае очень похож и отличается
лишь точкой с запятой (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">semicolon</SPAN></FONT><FONT FACE="Arial, serif">)
в конце. Но каков будет результат? Не
всегда </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">
программисты с опытом могут дать
правильный ответ, ведь результат работы
программы довольно неожиданный: 1, 11, 2,
3. Почему это так - это вопрос уже к
истории. Но чтобы отсортировать числа
в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">,
надо написать:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">[11,
3, 2, 1].</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">sort</SPAN></FONT><FONT FACE="Arial, serif">((</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">a</SPAN></FONT><FONT FACE="Arial, serif">,
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">b</SPAN></FONT><FONT FACE="Arial, serif">)
=&gt; </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">a</SPAN></FONT><FONT FACE="Arial, serif">
- </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">b</SPAN></FONT><FONT FACE="Arial, serif">);</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Если
разобраться, то это несложно. Но вопрос
в другом. Нужно ли вам на начальном этапе
тратить время на такие тонкости?
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">
вполне востребован, и каждый руби-программист
должен знать его на минимальном уровне.
Но, признаться, быть </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">full</SPAN></FONT><FONT FACE="Arial, serif">-</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">time</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">
разработчиком я бы хотел только за очень
большие деньги.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">К
тому же “</FONT><FONT FACE="Arial, serif"><I>чтобы также
пригодилось в будущем</I></FONT><FONT FACE="Arial, serif">”
не очень подходит в случае с </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">.
Язык очень динамично развивается. Знания
полученные 10 лет назад уже не актуальны
(в данном случае я говорю про популярные
фреймворки - наборы инструментов). В
случае с руби фреймворк </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">rails</SPAN></FONT><FONT FACE="Arial, serif">
существует уже более 10 лет. Знания,
полученные 10 лет назад, до сих пор
применимы.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">К
слову, про применимость знаний стоит
сделать отдельное замечание. Знания
языков </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">shell</SPAN></FONT><FONT FACE="Arial, serif">-скриптинга
до сих пор применимы, через более чем
30 лет мало что изменилось. Знания основ
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Computer</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Science</SPAN></FONT><FONT FACE="Arial, serif">
- до сих пор применимо, на интервью и не
только, эти знания практически не
устаревают.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Про
применимость какого-либо языка в будущем
никто не может дать точных прогнозов.
Однако, можно посмотреть на статистику
последних лет. На момент написания этой
книги компания </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Microsoft</SPAN></FONT><FONT FACE="Arial, serif">
купила за 7.5 миллиардов долларов </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">GitHub</SPAN></FONT><FONT FACE="Arial, serif">,
который был написан как раз на языке
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ruby</SPAN></FONT><FONT FACE="Arial, serif">.
Другими словами, язык на сегодняшний
день находится в прекрасной форме.
Выпускаются обновления, улучшается
скорость и синтаксис. А количество
доступных библиотек позволяет быстро
решить практически любую задачу (в
рамках направления, которое называется
веб-программирование).</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_8ly9evm81x0t"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt">Для
фана</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">На
наш взгляд, язык программирования должен
не только решать какие-то бизнес-задачи,
но и быть приятным в использовании
настолько, чтобы его хотелось использовать
каждый день.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><BR>К
примеру, язык </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Java</SPAN></FONT><FONT FACE="Arial, serif">
является отличным инструментом для
решения бизнес-задач. Но требует к себе
уважения - язык является типизированным
(мы еще коснемся этой темы), необходимо
указывать точный тип данных с которыми
производятся различные операции. Это
требует времени и полностью оправдано
в бизнес-среде, где лучше потратить в
несколько раз больше времени на
разработку, чем платить потом за ошибки.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">В
случае с руби можно написать программу
быстро, “на коленке”. Нет очень большой
надежности (что тоже является проблемой),
но многие компании, особенно стартапы,
пришли к выводу, что надежность является
“достаточной”, а относительно невысокая
скорость выполнения не является
проблемой. Всё это с лихвой компенсируется
скоростью разработки. Ведь в современном
мире часто требуется сделать что-то
быстро, чтобы быстро получить инвестиции,
привлечь первых пользователей пока
другие долго думают.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">С
личной точки зрения автора, руби является
хорошим инструментом для того, чтобы
сделать что-то своё. Какой-то свой проект,
программу, которой можно поделиться с
окружающими, привлечь к себе внимание
или заработать денег.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Другими
словами, руби это эффективный, нескучный
язык не только для работы, но и для себя
лично - язык для романтиков.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_6j6qop1wgxmi"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt">Что
мы будем изучать</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Как
уже было замечено ранее, существует
множество направлений программирования.
Каждое направление уникально, и требует
своих собственных навыков. На взгляд
авторов на данный момент существует
два (возможно и больше) “проверенных”
направления в программировании, которые
дают максимальный результат за минимальный
срок. Под результатом тут понимается
как денежная компенсация, так и само
умение что-то сделать своими руками.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Первое
направление - это мобильная разработка:
программы для мобильных телефонов
(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Android</SPAN></FONT><FONT FACE="Arial, serif">,
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">iPhone</SPAN></FONT><FONT FACE="Arial, serif">),
планшетов (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">iPad</SPAN></FONT><FONT FACE="Arial, serif">)
и других устройств.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><BR>Второе
направление - веб-программирование.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Если
выбирать между мобильной разработкой
и веб-программированием, то “быстрота
освоения” любой из этих двух технологий
по количеству вложенных усилий примерно
одинакова. Однако, мобильная разработка
обладает своими минусами. Например,
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Java</SPAN></FONT><FONT FACE="Arial, serif">
- язык для составления программ для
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Android</SPAN></FONT><FONT FACE="Arial, serif">
- был уже упомянут выше. Нельзя сказать,
что он является “достаточно простым”
для новичка. Если честно, то с этим можно
жить. В </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Java</SPAN></FONT><FONT FACE="Arial, serif">
нет ничего такого, что является
непостижимым или очень сложным.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Однако,
сама мобильная разработка часто
подразумевает оптимизацию кода под
мобильные устройства любыми средствами.
Языки программирования и </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">SDK</SPAN></FONT><FONT FACE="Arial, serif">
(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">software</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">development</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">kit</SPAN></FONT><FONT FACE="Arial, serif">
- набор разработчика для определенной
платформы) очень часто навязывают
определенный стиль разработки. И этот
стиль сильно отличается от классического,
объектно-ориентированного, программирования
в сторону процедурного программирования.
Процедурное программирование не всегда
позволяет полностью использовать
возможности языка, хотя это и не всегда
важно, особенно если ваша задача -
получить зарплату.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Второй
момент в разработке программ для
мобильных устройств заключается в том,
что на данный момент существуют две
основных мобильных платформы. Одна
платформа принадлежит корпорации </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Apple</SPAN></FONT><FONT FACE="Arial, serif">,
другая - </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Google</SPAN></FONT><FONT FACE="Arial, serif">.
Как именно будут развиваться эти
платформы в будущем целиком зависит от
политики этих компаний.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> 
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">В
случае с веб-программированием на языке
руби все выглядит немного иначе. Сам
язык разрабатывается и поддерживается
сообществом программистов. Веб-фреймворк
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">rails</SPAN></FONT><FONT FACE="Arial, serif">,
о котором мы еще поговорим, также
поддерживается исключительно сообществом.
Это позволяет программистам со всего
света создавать удобный инструмент
именно таким, каким хочется, не оглядываясь
на политику какой-либо компании.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Более
того, программы на языке руби редко
исполняются на мобильных устройствах,
поэтому “специально” оптимизировать
их практически никогда не требуется.
Ну и основное отличие руби от языков
для мобильной разработки состоит в том,
что руби это динамический язык - не в
том смысле, что он динамично развивается
(и это тоже) - а в том, что в нем присутствует
так называемая динамическая типизация
данных, о которой было уже упомянуто
выше. Основное преимущество динамической
типизации по сравнению со статической
- меньше правил и меньше строгости, что
дает более высокую скорость разработки
приложений программистом (за счет более
медленного исполнения написанных
программ и “достаточной” надежности.
Но скорость исполнения нас не особо
интересует, ведь руби не используется
для разработки мобильных приложений,
хотя может работать ключевым звеном на
сервере и обеспечивать функционирование
мобильных приложений для </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">iOS</SPAN></FONT><FONT FACE="Arial, serif">,
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Android</SPAN></FONT><FONT FACE="Arial, serif">,
и т.д.).</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Несомненно,
существуют и другие направления в
программировании, которые не были
проверены авторами этой книги. Например,
разработка компьютерных игр. Наверное,
для того, чтобы “проверить” все
направления не хватит жизни, поэтому
мы оставим эту затею для пытливых умов,
и займемся тем, что точно востребовано
на рынке, дает возможность “быстрого
входа”, и является более или менее
интересным и нескучным. </FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_nbz4pr7rque2"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt">Веб-программирование
или что-то другое?</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Книга
“Руби для романтиков” разделена на
две части. В первой части (вы её сейчас
читаете) мы рассмотрим основы языка
руби и использование языка из т.н.
командной строки. Во второй части
(планируется) будет непосредственно
веб-программирование и фреймворк </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">rails</SPAN></FONT><FONT FACE="Arial, serif">.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Подождите,
- скажет наблюдательный читатель, - ведь
мы только что говорили про
веб-программирование, а оно будет только
во второй части?</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Всё
верно. Дело в том, что сам по себе язык
руби является довольно мощным инструментом.
Студенты руби-школы находили работу и
без знания веб-программирования. Основы
языка, умение находить и использовать
нужные библиотеки уже дают возможность
создавать вполне полезные приложения,
которые могут использоваться для
обработки данных (например, веб-скрейпинг),
для создания конфигурационных скриптов
и управлением операционной системой
(что обязательно пригодится любому
системному администратору), для работы
с файлами различного формата и так
далее.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Умение
использовать язык для разного рода
задач, не связанных с веб-программированием,
дает неоспоримое преимущество перед
тем, как вы начнете заниматься
программированием для веб. По сути, само
веб-программирование это знакомство с
определенными общепринятыми понятиями.
А задачи мы будем решать уже с помощью
инструмента, с которым мы научимся
обращаться.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_g48ts133v5xd"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt">Сколько
зарабатывают программисты?</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Этот
вопрос очень важен для тех, кто в
программировании совершенно не
разбирается. Но прежде, чем на него
ответить, я хочу сделать отступление.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Так
как руби это, в основном, язык для
веб-программирования, именно руби
программисты положили начало удаленной
(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">remote</SPAN></FONT><FONT FACE="Arial, serif">,
на расстоянии) работе. Культура работать
над одним проектом удаленно больше
всего выражена именно в веб-программировании.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Оно
и понятно - для создания программного
обеспечения, например, для самолетов,
наверное, полезнее находиться именно
в научном центре и работать рука об руку
со своими коллегами из научного центра.
Но в случае с веб-проектами, часто не
важно где именно находится разработчик.
Вклад в культуру удаленной разработки
сделала и команда “37 </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">signals</SPAN></FONT><FONT FACE="Arial, serif">”,
разработчики которой находятся в разных
частях света, и даже в разных временных
зонах. Именно в “37 </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">signals</SPAN></FONT><FONT FACE="Arial, serif">”
появилась первая версия, пожалуй, самого
популярного фреймворка для веб-разработки
(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">rails</SPAN></FONT><FONT FACE="Arial, serif">).</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">За
последние 10 лет было доказано, что
удаленная разработка возможна, что не
всегда нужно держать команду программистов
в одном офисе. Для любого руби программиста
это огромный плюс. Ведь это означает,
что руби программист не привязан к
какой-то конкретной местности: можно
работать на компанию в США из небольшого
города, например, в Казахстане. При этом
получать зарплату сильно выше любой
зарплаты, которую можно получить “на
месте”.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Если
взглянуть на статистику удаленных
работ, то язык руби занимает второе
место по количеству доступных вакансий
</FONT><A HREF="https://remoteok.io/stats.php"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>://</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>remoteok</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>.</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>io</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>/</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>stats</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>.</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>php</U></SPAN></FONT></FONT></A><FONT FACE="Arial, serif">.
Первое место удерживает </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">,
но только лишь из-за того, что минимальные
знания </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">
являются необходимостью и он требуется
в совокупности с остальными языками:
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Java</SPAN></FONT><FONT FACE="Arial, serif">,
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">PHP</SPAN></FONT><FONT FACE="Arial, serif">,
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Ruby</SPAN></FONT><FONT FACE="Arial, serif">
и т.д. А вот “чистый </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">”
для </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">full</SPAN></FONT><FONT FACE="Arial, serif">-</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">stack</SPAN></FONT><FONT FACE="Arial, serif">
программирования находится уже на
третьем месте (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Node</SPAN></FONT><FONT FACE="Arial, serif">.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">js</SPAN></FONT><FONT FACE="Arial, serif">).</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Хочется
заметить, что количество работ по
определенному языку не является самым
важным показателем, и вообще не может
быть никаких важных показателей, с
помощью которых можно сделать “точный
выбор” на всю оставшуюся жизнь. Мы лишь
говорим о том, что мы знаем сейчас.
Прогнозировать на несколько лет вперед
в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">IT</SPAN></FONT><FONT FACE="Arial, serif">-индустрии
очень сложно. Но, несомненно, хорошая
новость заключается в том, что вам не
нужны тысячи работ - достаточно найти
одну. Также обычно не очень важно сколько
именно времени вы потратите на поиск
работы - одну неделю, две недели или два
месяца.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Тут
мы подходим к статистике, которая была
собрана студентами руби-школы. Так
сколько же зарабатывают руби программисты?
Прежде чем ответить, сделаем оговорку,
что речь будет идти только про удаленную
работу. Рынок удаленных зарплат более
стабилен, он был уравновешен программистами
из разных стран, и на нем сформировалась
определенная цена. Нет смысла сравнивать
зарплату “на месте”, так как руби
программист может (и даже обязан) работать
удаленно, и в большинстве случаев это
более выгодно. Также подразумевается,
что программист имеет минимальные
знания английского языка, которые
позволяют ему общаться по переписке с
заказчиками из других стран.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Категории
зарплат можно условно разделить на три
части. В настоящее время стоимость часа
работы программиста с 1 годом опыта
составляет не более 10 долларов в час.
От 1 года до 3 лет - примерно от 10 до 25
долларов в час. От 3 до 7 лет - примерно
от 25 до 40 долларов в час. При достижении
цифры в 40 долларов в час все становится
очень индивидуально. К слову, стандартное
количество часов в месяц - 160.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Из
нашего опыта, вполне реально без особых
навыков за 1 год освоить программирование
на руби и найти первую удаленную работу.
Возможно, потребуется предрасположенность
(этот факт не был доказан) и знание или
желание выучить английский. Этот путь
прошли многие студенты руби-школы, и
подтверждение этим словам можно найти
в нашем чате </FONT><A HREF="https://t.me/rubyschool"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>://</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>t</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>.</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>me</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>/</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>rubyschool</U></SPAN></FONT></FONT></A></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_uwsmeklcpag2"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt">Ваше
преимущество</FONT></FONT></P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Прежде
чем мы приступим к созданию вашей первой
программы, важно будет упомянуть о том,
что к программированию не относится.
Любой человек имеет разный набор
жизненного опыта. Возможно кто-то пришел
в программирование из музыки, кто-то из
финансов. Любому музыканту будет в разы
проще написать программу для обучения
людей нотной грамоте. Финансисту будет
проще написать программу для учета
торгового баланса. В чем заключается
ваше преимущество?</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">По
мере изучения языка руби постоянно
будет возникать вопрос о создании вашей
собственной программы или серии программ
по вашим идеям. Это необходимо по
следующим причинам.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Во-первых,
любая программа обычно решает какую-то
бизнес-задачу. Программистам платят
деньги за то, что они оптимизируют
бизнес-процессы, упрощают реальную
жизнь, сокращают время, которые люди
тратят на какие-либо действия. Например,
представьте себе очередь в каком-нибудь
государственном учреждении в 1986 году.
Много людей собрались в зале ожидания
и ждут своей очереди. А теперь представим
что есть программист, который написал
программу “электронная очередь”. Через
сеть Интернет любой человек может
записаться на прием, прийти ровно к
назначенному времени, а время, которое
он провел в очереди, он потратит, например,
преподавая урок математики школьникам.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Экономическая
выгода очевидна: время, проведенное в
очереди, теперь тратится с пользой. А
все из-за того, что был создан какой-то
полезный сайт. То же самое и с вашими
знаниями. Знания какой-либо предметной
области уже являются ценным активом.
Попробуйте увидеть ваше преимущество,
подумать о том, каким образом вы могли
бы улучшить мир. Хорошо если у вас будет
несколько идей, записанных на бумаге.
По мере работы с этой книгой, вы можете
к ним возвращаться и задавать себе
вопрос: а могу ли я это реализовать с
помощью руби?</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Во-вторых,
используя свое преимущество в какой-либо
области, вы сможете создавать программы
просто для демонстрации своих знаний.
Даже самая простейшая программа, которую
может написать профессиональный
музыкант, будет вызывать восторг у
программистов с большим опытом, которые
музыкантами не являются.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Не
выбрасывайте свои программы, даже самые
наивные из них можно будет в будущем
улучшить. Они также пригодятся когда
вы будете искать работу, иметь на руках
хоть какой-то образец кода намного
лучше, чем вообще его не иметь. Ваши
программы могут казаться незначительными,
но при приеме на работу играет роль не
отдельная программа, а совокупность
всего, что вами было продемонстрировано:
знания программирования, написанные
программы, резюме, знания предметной
области, активный </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">GitHub</SPAN></FONT><FONT FACE="Arial, serif">
аккаунт, активный блог по программированию
в Интернете.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">В-третьих,
если вы не работаете над своим проектом,
то ваш успех зависит от случайности.
Сложно предсказать в какой именно
коллектив вы попадете, какие стандарты
качества создания программных продуктов
будут в вашей компании. Человеку
свойственно надеяться на лучшее, но
практика показывает, что в реальной
жизни все немного иначе, и успех часто
зависит от случайности.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Досадно
попасть в компанию с бюрократическими
сложностями, досадно попасть в коллектив
с низкой технической квалификацией.
Более того, начинающий программист
может даже не распознать эти признаки,
и как следствие - депрессия и разочарование
в выбранном пути. Но на самом деле
программирование должно доставлять
удовольствие. И свой собственный проект
— это ваш ориентир, показатель роста
вашего уровня и страховка от случайности.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">В
любой сложной ситуации на вашей новой
работе вы сможете сказать себе &quot;да,
может быть я не очень продуктивен на
этой работе, но вот мой проект, и вот
демонстрация моей технической
квалификации. Скорее всего дело не во
мне, а в чём-то другом&quot;. Более того,
этот аргумент можно всегда использовать
для диалога с вашим менеджером, а сам
проект добавить в резюме. Ваш проект
зависит только от вас, и существует
отличная от нуля вероятность, что ваш
собственный проект начнёт приносить
вам деньги.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
заведите блокнот с идеями. Записывайте
туда абсолютно все идеи, которые приходят
вам в голову. Возможно, вы вернетесь к
ним через неделю, месяц, или год.</FONT></P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_bdgrtvold8yv"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt">Среда
исполнения</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Среда
исполнения - важное понятие. В дальнейшем
вводится понятие среда/окружение
(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">environment</SPAN></FONT><FONT FACE="Arial, serif">),
но это не одно и то же. Среда исполнения
- это где и “кем” будут запускаться
ваши программы на языке руби. Скажем,
ученый-химик может делать эксперимент
в пробирке, в большой стеклянной банке,
и даже в собственной ванной. То же самое
справедливо и для программы на руби.
Она может быть исполнена разным
“интерпретатором” (программой для
запуска программ), в разных условиях -
на операционной системе </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Windows</SPAN></FONT><FONT FACE="Arial, serif">,
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Mac</SPAN></FONT><FONT FACE="Arial, serif">,
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Linux</SPAN></FONT><FONT FACE="Arial, serif">.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Когда
автор этих строк впервые познакомился
с компьютером, среда исполнения была
одна - не было никакого выбора. При
включении компьютера был виден курсор
и надпись “ОК”, которая означала что
можно вводить программу. Сейчас компьютеры
стали более умными и новичку еще предстоит
разобраться, как запускать программу,
где вводить текст программы, “чем”
запускать написанную программу, какая
среда исполнения лучше.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Кстати,
в какой именно операционной системе
запускается программа, для нас не очень
важно. На сегодняшний день программу,
написанную на любом из популярных языков
программирования, можно запустить на
трех ОС: </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Windows</SPAN></FONT><FONT FACE="Arial, serif">,
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">MacOS</SPAN></FONT><FONT FACE="Arial, serif">,
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Linux</SPAN></FONT><FONT FACE="Arial, serif">.
Обычно не требуется никаких изменений
в самой программе или эти изменения
минимальны.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Статистика
использования операционных систем
показывает, что наиболее популярной ОС
на сегодняшний день является ОС </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Windows</SPAN></FONT><FONT FACE="Arial, serif">.
Именно с </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Windows</SPAN></FONT><FONT FACE="Arial, serif">
мы и начнем, хотя это и не является лучшим
выбором. Причина нашего решения в том,
чтобы максимально быстро ввести вас в
курс дела, и любой начинающий программист
максимально быстро мог написать нужную
программу. Ведь настройка среды исполнения
обычно не очень простое дело для
начинающих, и кажущаяся “сложность”
может отпугнуть студента на первом
этапе.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Несмотря
на то, что мы начнем запускать наши
программы в ОС </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Windows</SPAN></FONT><FONT FACE="Arial, serif">,
в будущем настоятельно рекомендуется
не использовать ОС </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Windows</SPAN></FONT><FONT FACE="Arial, serif">
для запуска программ на языке руби.
Однако, эту ОС при желании можно
использовать для написания программ.
В любом случае, авторы рекомендуют как
можно быстрее установить </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Linux</SPAN></FONT><FONT FACE="Arial, serif">
(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Mint</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Cinnamon</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">edition</SPAN></FONT><FONT FACE="Arial, serif">,
как наиболее простой дистрибутив) и
использовать его. Если вы используете
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Mac</SPAN></FONT><FONT FACE="Arial, serif">,
то нет необходимости устанавливать
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Linux</SPAN></FONT><FONT FACE="Arial, serif">.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.22in; margin-bottom: 0.06in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_f8pta1q1mg76"></A>
<FONT COLOR="#434343"><FONT FACE="Arial, serif"><FONT SIZE=4>Настройка
</FONT></FONT></FONT><FONT COLOR="#434343"><FONT FACE="Arial, serif"><FONT SIZE=4><SPAN LANG="en">Windows</SPAN></FONT></FONT></FONT><FONT COLOR="#434343"><FONT FACE="Arial, serif"><FONT SIZE=4>
для запуска первой программы</FONT></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Терминал
(который также называют словами “консоль”,
“оболочка”, “шелл”, “командная
строка”) - друг любого руби-хакера. Чтобы
запускать программы, которые мы с вами
напишем, нужен какой-то центральный
пульт, откуда мы будем руководить
процессом. Этим пультом и служит терминал.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Ради
точности следует заметить, что терминал
- не совсем правильное слово. Но оно
часто используется. Программисты говорят
“запустить в терминале”, но если копнуть
глубже, то терминал - особая программа,
которая запускает оболочку (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">shell</SPAN></FONT><FONT FACE="Arial, serif">).
И на самом деле мы отправляем команды
в оболочку, где терминал служит лишь
транзитным звеном, удобной программой
для соединения с оболочкой.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Забегая
вперед, хочется заметить, что существуют
разные типы оболочек. Стандартной
оболочкой в индустрии является </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">bash</SPAN></FONT><FONT FACE="Arial, serif">.
Однако, авторы рекомендуют использовать
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">zsh</SPAN></FONT><FONT FACE="Arial, serif">
(читается как “зи-шелл”), в вариации
“</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Oh</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">My</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Zsh</SPAN></FONT><FONT FACE="Arial, serif">”.
Эта оболочка немного отличается от
стандарта, но дает более широкие
возможности и является более удобной.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Но
в ОС </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Windows</SPAN></FONT><FONT FACE="Arial, serif">
стандартная оболочка это </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">cmd</SPAN></FONT><FONT FACE="Arial, serif">.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">exe</SPAN></FONT><FONT FACE="Arial, serif">.
Если вы нажмете Пуск - Выполнить - </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">cmd</SPAN></FONT><FONT FACE="Arial, serif">.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">exe</SPAN></FONT><FONT FACE="Arial, serif">,
то увидите черный экран и “приглашение”
командной строки:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><IMG SRC="2eaec5a5667bec5b244b5f4a53e23318_html_44d6fc79.png" NAME="image13.png" ALIGN=BOTTOM HSPACE=12 VSPACE=12 WIDTH=624 HEIGHT=317 BORDER=0></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">“<FONT FACE="Arial, serif">Приглашение”
заканчивается символом &gt;, который
означает, что оболочка ожидает вашего
ввода. Стоит сразу запомнить неочевидный
момент - если что-то не получается,
необходимо попробовать перезапустить
оболочку. Это справедливо и для других
операционных систем и за свою карьеру
авторы наблюдали “магическое действие”
этого трюка на уже, казалось бы, очень
опытных программистах. Выйти из оболочки
можно словом </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">exit</SPAN></FONT><FONT FACE="Arial, serif">
или просто нажав на крестик вверху окна.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">В
ОС </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Linux</SPAN></FONT><FONT FACE="Arial, serif">
и </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Mac</SPAN></FONT><FONT FACE="Arial, serif">
терминал обычно доступен по-умолчанию
среди программ и можно запустить его
щелкнув по невзрачной иконке, скорее
всего в виде прямоугольника. В этих
операционных системах приглашение
командной строки принято обозначать
символом доллара $. Это не всегда правда,
но на будущее стоит запомнить - если вы
видите знак доллара где-нибудь в
документации и после этого знака идет
команда (например $ </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ls</SPAN></FONT><FONT FACE="Arial, serif">),
то знак доллара обычно вводить не надо.
Это просто индикатор того, что команду
надо выполнять в оболочке </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">bash</SPAN></FONT><FONT FACE="Arial, serif">
(или частично совместимой с ней </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">zsh</SPAN></FONT><FONT FACE="Arial, serif">).</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Неважно,
в какой оболочке вы сейчас находитесь,
введите команду </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ruby</SPAN></FONT><FONT FACE="Arial, serif">
и нажмите </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Enter</SPAN></FONT><FONT FACE="Arial, serif">.
В случае с </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Linux</SPAN></FONT><FONT FACE="Arial, serif">
и </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">MacOS</SPAN></FONT><FONT FACE="Arial, serif">
ошибки не будет, команда запустится и
тихо будет ожидать окончания ввода
программы. В </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Windows</SPAN></FONT><FONT FACE="Arial, serif">
должна быть ошибка, ведь язык руби
по-умолчанию не установлен, а это значит,
что нам надо его установить.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Тут
следует сделать отступление. Сейчас и
в будущем - если вы не знаете, что делать,
задайте вопрос гуглу. </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Например,
в нашем случае - “how to run ruby program on windows”.
</SPAN></FONT><FONT FACE="Arial, serif">Умение задавать
вопрос и искать ответ - половина дела.
Если честно, то только благодаря этому
умению можно научиться программировать.
Главное - мыслить последовательно и
логически. Если не получается, всегда
можно обратиться за помощью в чат
(</FONT><A HREF="https://t.me/rubyschool"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>://</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>t</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>.</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>me</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>/</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>rubyschool</U></SPAN></FONT></FONT></A><FONT FACE="Arial, serif">).</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Для
запуска программ на руби из ОС </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Windows</SPAN></FONT><FONT FACE="Arial, serif">
нужно запустить </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Ruby</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Installer</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><A HREF="https://rubyinstaller.org/"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>://</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>rubyinstaller</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>.</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>org</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>/</U></FONT></FONT></A><FONT FACE="Arial, serif">.
После того, как программа установлена,
можно вводить команду `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ruby</SPAN></FONT><FONT FACE="Arial, serif">`
в терминале (не запускается? Может,
попробовать перезапустить терминал?).
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><B>TODO</B></SPAN></FONT><FONT FACE="Arial, serif"><B>
про пути.</B></FONT><FONT FACE="Arial, serif"> </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Ruby</SPAN></FONT><FONT FACE="Arial, serif">
запустится “тихо”, и будет ожидать
вашего ввода. Введите `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Arial, serif">
1+1`, затем нажмите </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Enter</SPAN></FONT><FONT FACE="Arial, serif">,
а потом </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Ctrl</SPAN></FONT><FONT FACE="Arial, serif">+</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">D</SPAN></FONT><FONT FACE="Arial, serif">
(иногда </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Ctrl</SPAN></FONT><FONT FACE="Arial, serif">+</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">D</SPAN></FONT><FONT FACE="Arial, serif">
приходится нажимать два раза):</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">$
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ruby</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Arial, serif">
1+1 (нажмите </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Ctrl</SPAN></FONT><FONT FACE="Arial, serif">+</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">D</SPAN></FONT><FONT FACE="Arial, serif">
в этом месте)</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">2</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">$</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Что
мы видим на экране выше? Приглашение
командной строки ($), вводим </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ruby</SPAN></FONT><FONT FACE="Arial, serif">,
потом “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Arial, serif">
1+1”, потом </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Enter</SPAN></FONT><FONT FACE="Arial, serif">,
который переводит нас на следующую
строку, на которой мы нажимаем </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Ctrl</SPAN></FONT><FONT FACE="Arial, serif">+</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">D</SPAN></FONT><FONT FACE="Arial, serif">.
После этого “сама появляется” цифра
2. Что же тут произошло?</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Во-первых,
вы запустили программу для запуска
программ. </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Ruby</SPAN></FONT><FONT FACE="Arial, serif">
- это программа (интерпретатор), которая
позволяет запускать ваши, человечески
написанные, программы. Компьютер говорит
на языке нулей и единиц, и чтобы вас
понять, ему надо считать человеческий
язык - “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Arial, serif">
1+1”.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Комбинация
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Ctrl</SPAN></FONT><FONT FACE="Arial, serif">+</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">D</SPAN></FONT><FONT FACE="Arial, serif">
(обозначается также ^</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">D</SPAN></FONT><FONT FACE="Arial, serif">)
пригодится вам во всей вашей дальнейшей
жизни, она передает сигнал о том, что
“ввод закончен” (конец ввода, </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">of</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">input</SPAN></FONT><FONT FACE="Arial, serif">,
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">of</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">file</SPAN></FONT><FONT FACE="Arial, serif">,
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">EOF</SPAN></FONT><FONT FACE="Arial, serif">).
Это байт (его значение равно 4 - это
запоминать не надо), который говорит о
том, что наступил конец текстового
потока данных, данных больше не будет.
Интерпретатору </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ruby</SPAN></FONT><FONT FACE="Arial, serif">
ничего больше не остается - только
запустить то, что вы написали, что и было
сделано.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Набранная
вами команда “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Arial, serif">
1+1” - это ваша первая программа. Но мы
не сохраняли ее в файле, мы ввели эту
программу с клавиатуры и она “пропала”
после того, как была выполнена. Сожалеем,
что вы не сохранили свою первую программу.
Но ничего страшного, она занимала всего
лишь 8 байт, и восстановить ее - небольшая
проблема.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Что
же такое “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Arial, serif">
1+1”? Прежде чем ответить на этот вопрос,
выполните задание. Запустите программу
“1+1” (без </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Arial, serif">).
Мы увидим, что ничего не происходит. На
самом деле результат был посчитан, но
просто не выведен на экран. Возможен
вариант, когда вы зададите компьютеру
какую-нибудь сложную задачу и он будет
считать ее очень долго. Но если вы не
написали </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Arial, serif">,
то результат мы не узнаем.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Другими
словами, </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Arial, serif">
выводит результат. Это сокращение от
двух английских слов: </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">put</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">string</SPAN></FONT><FONT FACE="Arial, serif">
(вывести строку). В других языках были
приняты другие сокращения для вывода
строки, например в языке Бейсик это
“</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">print</SPAN></FONT><FONT FACE="Arial, serif">”.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Так
почему же надо писать </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Arial, serif">
вначале, а не в конце? Ведь сначала надо
посчитать, а потом уже выводить. Почему
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Arial, serif">
стоит вначале? Все просто, в этом случае
говорят: “метод (функция) принимает
параметр”. Т.е. сначала мы говорим, что
мы будем делать - выводить, а потом - что
именно мы хотим выводить. Нашу программу
можно также записать как “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Arial, serif">(1+1)”.
В этом случае видно, что в скобках -
параметр. Ведь в математике мы сначала
считаем то, что в скобках, а потом уже
выполняем остальные действия.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Кстати,
наши поздравления! Вы написали свою
первую программу.<BR><BR></FONT><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
остановитесь тут и попробуйте написать
программу, которая считает количество
миллисекунд в сутках. Следующий абзац
содержит ответ:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">$
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ruby</SPAN></FONT><FONT FACE="Arial, serif">
</FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Arial, serif">
60 * 60 * 24 * 1000</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">(нажмите
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Ctrl</SPAN></FONT><FONT FACE="Arial, serif">
+ </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">D</SPAN></FONT><FONT FACE="Arial, serif">)</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Задача
чисто математическая, количество секунд
в минуте умножаем на количество минут
в часе, умножаем на количество часов в
сутках. И, чтобы получились миллисекунды,
а не секунды, умножаем на 1000.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Далее,
попробуйте запустить следующую программу:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<TABLE WIDTH=624 CELLPADDING=7 CELLSPACING=0>
	<COL WIDTH=610>
	<TR>
		<TD WIDTH=610 VALIGN=TOP BGCOLOR="#f0f0f0" STYLE="border: none; padding: 0in">
			<P STYLE="border: none; padding: 0in; widows: 0; orphans: 0"><FONT COLOR="#444444"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">puts
			</SPAN></SPAN></FONT></FONT><FONT COLOR="#880000"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">5</SPAN></SPAN></FONT></FONT><FONT COLOR="#444444"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">**</SPAN></SPAN></FONT></FONT><FONT COLOR="#880000"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">5</SPAN></SPAN></FONT></FONT><FONT COLOR="#444444"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">
			* </SPAN></SPAN></FONT></FONT><FONT COLOR="#880000"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">4</SPAN></SPAN></FONT></FONT><FONT COLOR="#444444"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">**</SPAN></SPAN></FONT></FONT><FONT COLOR="#880000"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">4</SPAN></SPAN></FONT></FONT><FONT COLOR="#444444"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">
			* </SPAN></SPAN></FONT></FONT><FONT COLOR="#880000"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">3</SPAN></SPAN></FONT></FONT><FONT COLOR="#444444"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">**</SPAN></SPAN></FONT></FONT><FONT COLOR="#880000"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">3</SPAN></SPAN></FONT></FONT><FONT COLOR="#444444"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">
			* </SPAN></SPAN></FONT></FONT><FONT COLOR="#880000"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">2</SPAN></SPAN></FONT></FONT><FONT COLOR="#444444"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">**</SPAN></SPAN></FONT></FONT><FONT COLOR="#880000"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">2</SPAN></SPAN></FONT></FONT><FONT COLOR="#444444"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">
			* </SPAN></SPAN></FONT></FONT><FONT COLOR="#880000"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">1</SPAN></SPAN></FONT></FONT><FONT COLOR="#444444"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">**</SPAN></SPAN></FONT></FONT><FONT COLOR="#880000"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">1</SPAN></SPAN></FONT></FONT></P>
		</TD>
	</TR>
</TABLE>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Запись
** означает возведение в степень. Например,
3 ** 2 = 3 * 3 = 9. Удивительно, но результат
работы программы (5 в пятой степени
умноженное на 4 в четвертой и т.д.) выше
будет равен количеству миллисекунд в
сутках! Этому нет какого-то объяснения.
Совпадение? Может быть. Если вы знаете
объяснение, напишите нам на </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">email</SPAN></FONT><FONT FACE="Arial, serif">.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">В
качестве упражнения попробуйте написать
такую конструкцию </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">(подумайте,
что произойдет):</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<TABLE WIDTH=624 CELLPADDING=7 CELLSPACING=0>
	<COL WIDTH=610>
	<TR>
		<TD WIDTH=610 VALIGN=TOP BGCOLOR="#f0f0f0" STYLE="border: none; padding: 0in">
			<P STYLE="border: none; padding: 0in; widows: 0; orphans: 0"><FONT COLOR="#444444"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">puts
			</SPAN></SPAN></FONT></FONT><FONT COLOR="#880000"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">60</SPAN></SPAN></FONT></FONT><FONT COLOR="#444444"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">
			* </SPAN></SPAN></FONT></FONT><FONT COLOR="#880000"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">60</SPAN></SPAN></FONT></FONT><FONT COLOR="#444444"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">
			* </SPAN></SPAN></FONT></FONT><FONT COLOR="#880000"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">24</SPAN></SPAN></FONT></FONT><FONT COLOR="#444444"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">
			* </SPAN></SPAN></FONT></FONT><FONT COLOR="#880000"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">1000</SPAN></SPAN></FONT></FONT><FONT COLOR="#444444"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">
			== </SPAN></SPAN></FONT></FONT><FONT COLOR="#880000"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">5</SPAN></SPAN></FONT></FONT><FONT COLOR="#444444"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">**</SPAN></SPAN></FONT></FONT><FONT COLOR="#880000"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">5</SPAN></SPAN></FONT></FONT><FONT COLOR="#444444"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">
			* </SPAN></SPAN></FONT></FONT><FONT COLOR="#880000"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">4</SPAN></SPAN></FONT></FONT><FONT COLOR="#444444"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">**</SPAN></SPAN></FONT></FONT><FONT COLOR="#880000"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">4</SPAN></SPAN></FONT></FONT><FONT COLOR="#444444"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">
			* </SPAN></SPAN></FONT></FONT><FONT COLOR="#880000"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">3</SPAN></SPAN></FONT></FONT><FONT COLOR="#444444"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">**</SPAN></SPAN></FONT></FONT><FONT COLOR="#880000"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">3</SPAN></SPAN></FONT></FONT><FONT COLOR="#444444"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">
			* </SPAN></SPAN></FONT></FONT><FONT COLOR="#880000"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">2</SPAN></SPAN></FONT></FONT><FONT COLOR="#444444"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">**</SPAN></SPAN></FONT></FONT><FONT COLOR="#880000"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">2</SPAN></SPAN></FONT></FONT><FONT COLOR="#444444"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">
			* </SPAN></SPAN></FONT></FONT><FONT COLOR="#880000"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">1</SPAN></SPAN></FONT></FONT><FONT COLOR="#444444"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">**</SPAN></SPAN></FONT></FONT><FONT COLOR="#880000"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">1</SPAN></SPAN></FONT></FONT></P>
		</TD>
	</TR>
</TABLE>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.22in; margin-bottom: 0.06in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_j2iyakjpafht"></A>
<FONT COLOR="#434343"><FONT FACE="Arial, serif"><FONT SIZE=4><SPAN LANG="en">Здравствуйте,
я ваш REPL</SPAN></FONT></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">В
случае с “1+1” выше наш интерпретатор
выполняет два действия: </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">read</SPAN></FONT><FONT FACE="Arial, serif">
(прочитать), </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">evaluate</SPAN></FONT><FONT FACE="Arial, serif">
(выполнить). Так как не было третьего
действия “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">print</SPAN></FONT><FONT FACE="Arial, serif">”
(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Arial, serif">
в нашем случае), то не было и результата
на экране. То есть, чтобы мы видели
результат, надо выполнить </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">read</SPAN></FONT><FONT FACE="Arial, serif">
(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">R</SPAN></FONT><FONT FACE="Arial, serif">),
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">evaluate</SPAN></FONT><FONT FACE="Arial, serif">
(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">E</SPAN></FONT><FONT FACE="Arial, serif">),
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">print</SPAN></FONT><FONT FACE="Arial, serif">
(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">P</SPAN></FONT><FONT FACE="Arial, serif">).
Хорошо бы еще и не запускать </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ruby</SPAN></FONT><FONT FACE="Arial, serif">
каждый раз, чтобы программа в бесконечном
цикле (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">loop</SPAN></FONT><FONT FACE="Arial, serif">
- </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">L</SPAN></FONT><FONT FACE="Arial, serif">)
спрашивала нас “что хотите выполнить?”,
т.е. сразу принимала бы ввод без лишних
разговоров.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Из
начальных букв у нас получилось </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">REPL</SPAN></FONT><FONT FACE="Arial, serif">
- </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">read</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">evaluate</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">print</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">loop</SPAN></FONT><FONT FACE="Arial, serif">.
То есть </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">REPL</SPAN></FONT><FONT FACE="Arial, serif">
это такая программа, которая сначала
читает, потом исполняет, потом печатает
результат, и потом начинает все сначала.
Это понятие широко известно и используется
не только в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ruby</SPAN></FONT><FONT FACE="Arial, serif">.
А в руби </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">REPL</SPAN></FONT><FONT FACE="Arial, serif">-программа
называется </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">irb</SPAN></FONT><FONT FACE="Arial, serif">
(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">interactive</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ruby</SPAN></FONT><FONT FACE="Arial, serif">).</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Попробуйте
ввести </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">irb</SPAN></FONT><FONT FACE="Arial, serif">
и посмотрите что произойдет:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">$
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">irb</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">2.5.1
:001 &gt;</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Непонятные
цифры вначале - это версия руби. В нашем
случае 2.5.1 (то же самое покажет команда
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ruby</SPAN></FONT><FONT FACE="Arial, serif">
-</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">v</SPAN></FONT><FONT FACE="Arial, serif">).
001 это номер строки - первая строка. То
есть если </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">REPL</SPAN></FONT><FONT FACE="Arial, serif">
уже содержит “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">P</SPAN></FONT><FONT FACE="Arial, serif">”
(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">print</SPAN></FONT><FONT FACE="Arial, serif">),
то можно вводить “1+1” без </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Arial, serif">.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
посчитайте количество секунд в сутках,
не выводя результат на экран с помощью
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Arial, serif">.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Принцип
наименьшего сюрприза говорит нам о том,
что выход из </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">REPL</SPAN></FONT><FONT FACE="Arial, serif">
должен быть командой </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">exit</SPAN></FONT><FONT FACE="Arial, serif">.
Вводим </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">exit</SPAN></FONT><FONT FACE="Arial, serif">
- получилось!</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Тут
хочется заметить, что авторы редко
используют именно </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">irb</SPAN></FONT><FONT FACE="Arial, serif">
в роли </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">REPL</SPAN></FONT><FONT FACE="Arial, serif">.
Существуют более удобные инструменты
(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">pry</SPAN></FONT><FONT FACE="Arial, serif">
- </FONT><A HREF="http://pryrepl.org/"><FONT COLOR="#1155cc"><FONT FACE="Roboto, serif"><FONT SIZE=2><SPAN LANG="en"><U>http</U></SPAN></FONT></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Roboto, serif"><FONT SIZE=2><U>://</U></FONT></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Roboto, serif"><FONT SIZE=2><SPAN LANG="en"><U>pryrepl</U></SPAN></FONT></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Roboto, serif"><FONT SIZE=2><U>.</U></FONT></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Roboto, serif"><FONT SIZE=2><SPAN LANG="en"><U>org</U></SPAN></FONT></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Roboto, serif"><FONT SIZE=2><U>/</U></FONT></FONT></FONT></A><FONT FACE="Arial, serif">),
которые выполняют ту же самую функцию,
но имеют больше настроек. Этот инструмент
рассматривается дальше в этой книге.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.22in; margin-bottom: 0.06in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_cl3nmsq7fzi7"></A>
<FONT COLOR="#434343"><FONT FACE="Arial, serif"><FONT SIZE=4>Запуск
программы из файла</FONT></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Запуск
программы из файла ненамного сложнее.
Достаточно передать аргумент интерпретатору
руби с именем файла:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">$
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ruby</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">app</SPAN></FONT><FONT FACE="Arial, serif">.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">rb</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">В
этом случае интерпретатор считает
программу из файла </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">app</SPAN></FONT><FONT FACE="Arial, serif">.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">rb</SPAN></FONT><FONT FACE="Arial, serif">
и запустит ее так же, как если бы вы ввели
эту программу и нажали ^</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">D</SPAN></FONT><FONT FACE="Arial, serif">.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Но
возникает вопрос - как и где сохранить
эту программу, в чем ее набрать, какой
редактор кода использовать? Для начала
ответим на первый вопрос — “где”
сохранить программу, так как этот вопрос
подразумевает знакомство с файловой
системой и в нем есть некоторые подводные
камни.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Для
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Windows</SPAN></FONT><FONT FACE="Arial, serif">,
операционной системы, с которой вам
нужно как можно скорее уходить на </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Linux</SPAN></FONT><FONT FACE="Arial, serif">,
необходимо создать директорию (каталог,
папку) в разделе </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">C</SPAN></FONT><FONT FACE="Arial, serif">:
и назвать ее, например, </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">projects</SPAN></FONT><FONT FACE="Arial, serif">.
После этого нужно перейти в директорию,
создать там файл и запустить его.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Другими
словами, нужно уже уметь делать как
минимум четыре вещи:</FONT></P>
<OL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Создавать
	директорию </SPAN></FONT>
	</P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Переходить
	в директорию</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Создавать
	файл в директории и сохранять что-то в
	этот файл</FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Запускать
	файл (это мы уже умеем: </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ruby</SPAN></FONT><FONT FACE="Arial, serif">
	</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">app</SPAN></FONT><FONT FACE="Arial, serif">.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">rb</SPAN></FONT><FONT FACE="Arial, serif">)</FONT></P>
</OL>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Тут
можно было бы дать основные команды ОС
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Linux</SPAN></FONT><FONT FACE="Arial, serif">
для этих целей и не завязываться на ОС
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Windows</SPAN></FONT><FONT FACE="Arial, serif">.
Однако, рынок диктует свои условия -
большинство пользователей сейчас
работают на </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Windows</SPAN></FONT><FONT FACE="Arial, serif">,
а значит с большой долей вероятности и
у вас установлена эта операционная
система. Но не стоит отчаиваться, мы
исправим этот досадный факт, а пока
постараемся как можно быстрее настроить
нашу среду исполнения, чтобы мы могли
писать и запускать программы, а
исправлением займемся потом.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Умение
ориентироваться в файловой системе -
ключевой навык любого программиста.
Как библиотекарь должен знать, где какая
книга лежит, так и программист должен
знать (или уметь разобраться, найти),
где лежит тот или иной файл. Нужно всегда
иметь в голове примерную “картинку”
файловой системы.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Но
из практики обучения студентов этому,
казалось бы, простому делу выяснилось,
что не все представляют себе, что такое
файловая система и как эффективно
работать с файлами (создавать, находить,
переносить, переименовывать). Можно
было бы написать список команд и дать
задание запомнить эти команды. Но мы
пойдем более гуманным и проверенным
путем - мы познакомимся с файловым
менеджером.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_60x3y5upnfm4"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt">Я ваш
файловый менеджер</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Если
вы занимаетесь программированием более
20 лет, то вряд ли существует много
инструментов, которые были актуальны
тогда и сейчас. Именно поэтому мы изучаем
руби, т.к. знаем, что знания, полученные
10 лет назад, до сих пор не теряют свою
ценность. Но существуют также и другие
инструменты, которые используются и
сейчас, и пережили при этом не одно
поколение операционных систем.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Один
из таких инструментов - файловый менеджер:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><IMG SRC="2eaec5a5667bec5b244b5f4a53e23318_html_ad9209a3.png" NAME="image4.png" ALIGN=BOTTOM HSPACE=12 VSPACE=12 WIDTH=618 HEIGHT=397 BORDER=0></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Как
было уже замечено ранее, работа с файлами
- это ключевой навык программиста,
системного администратора или даже
любого эникейщика. В большинстве книг
по программированию (и не только) работа
с файлами не освещается достаточно
хорошо. Дается набор шелл-команд, но
никто не говорит, как работать с файлами
эффективно, быстро и просто. Последнее
- немаловажно для любого начинающего,
ведь наша задача - как можно эффективнее
потратить наше время на наиболее значимые
вопросы программирования, получить
работу, а потом уже “дотачивать” навык.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Поэтому
запоминать команды оболочки, приведенные
ниже, не стоит, они запомнятся сами.
Более того, команды будут даны для ОС
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Linux</SPAN></FONT><FONT FACE="Arial, serif">
(точнее, для оболочки, совместимой со
стандартной </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">bash</SPAN></FONT><FONT FACE="Arial, serif">).
А комбинации клавиш для ОС </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Windows</SPAN></FONT><FONT FACE="Arial, serif">,
т.к. </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Far</SPAN></FONT><FONT FACE="Arial, serif">
работает только в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Windows</SPAN></FONT><FONT FACE="Arial, serif">.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Подождите,
- скажет внимательный читатель, - мы
хотим уйти от </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Windows</SPAN></FONT><FONT FACE="Arial, serif">,
но также хотим научиться работать в
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Far</SPAN></FONT><FONT FACE="Arial, serif">?
Дело в том, что файловый менеджер - вещь
универсальная. Еще во времена </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">DOS</SPAN></FONT><FONT FACE="Arial, serif">
(уже малоизвестная операционная система
от </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Microsoft</SPAN></FONT><FONT FACE="Arial, serif">)
появился один из самых первых (самый
первый?) файловых менеджеров - </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Norton</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Commander</SPAN></FONT><FONT FACE="Arial, serif">.
Под операционной системой </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Linux</SPAN></FONT><FONT FACE="Arial, serif">
(а также и </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">MacOS</SPAN></FONT><FONT FACE="Arial, serif">)
существует </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Midnight</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Commander</SPAN></FONT><FONT FACE="Arial, serif">:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><IMG SRC="2eaec5a5667bec5b244b5f4a53e23318_html_c5ab8d4.png" NAME="image26.png" ALIGN=BOTTOM HSPACE=12 VSPACE=12 WIDTH=624 HEIGHT=408 BORDER=0></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Да
и кроме “синих экранов” существуют
различные варианты файловых менеджеров
на любой вкус и цвет. Однако, популярность
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Far</SPAN></FONT><FONT FACE="Arial, serif">’</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">a</SPAN></FONT><FONT FACE="Arial, serif">
настолько высока (из-за удобства прежде
всего), что некоторые программисты нашли
способ запустить его на </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Linux</SPAN></FONT><FONT FACE="Arial, serif">
и </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Mac</SPAN></FONT><FONT FACE="Arial, serif">
без использования эмулятора. Способ
установки </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Far</SPAN></FONT><FONT FACE="Arial, serif">
на </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Linux</SPAN></FONT><FONT FACE="Arial, serif">
и </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">MacOS</SPAN></FONT><FONT FACE="Arial, serif">
описан по ссылке </FONT><A HREF="https://github.com/elfmz/far2l"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>://</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>github</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>.</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>com</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>/</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>elfmz</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>/</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>far</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>2</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>l</U></SPAN></FONT></FONT></A><FONT FACE="Arial, serif">.
Начинающие программисты могут столкнуться
с трудностями, следуя инструкциям по
этой ссылке, но если у вас есть опыт или
время, мы настоятельно рекомендуем
установить </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Far</SPAN></FONT><FONT FACE="Arial, serif">
на </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Linux</SPAN></FONT><FONT FACE="Arial, serif">/</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">MacOS</SPAN></FONT><FONT FACE="Arial, serif">.
На </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">MacOS</SPAN></FONT><FONT FACE="Arial, serif">
этот файловый менеджер устанавливается
одной командой:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">brew</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">install</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">yurikoles</SPAN></FONT><FONT FACE="Courier New, serif">/</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">yurikoles</SPAN></FONT><FONT FACE="Courier New, serif">/</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">far</SPAN></FONT><FONT FACE="Courier New, serif">2</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">l</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Если
на вашей </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">MacOS</SPAN></FONT><FONT FACE="Arial, serif">
не установлен </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">HomeBrew</SPAN></FONT><FONT FACE="Arial, serif">,
то потребуется установить сначала эту
программу. Подробности см. по ссылке
</FONT><A HREF="https://brew.sh/"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>://</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>brew</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>.</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>sh</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>/</U></FONT></FONT></A><FONT FACE="Arial, serif">.
После установки вы сможете запустить
файловый менеджер командой `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">far</SPAN></FONT><FONT FACE="Arial, serif">2</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">l</SPAN></FONT><FONT FACE="Arial, serif">`.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><IMG SRC="2eaec5a5667bec5b244b5f4a53e23318_html_78fb9797.png" NAME="image30.png" ALIGN=BOTTOM HSPACE=12 VSPACE=12 WIDTH=624 HEIGHT=407 BORDER=0></P>
<P LANG="en" ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%">
<BR>
</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><I>Рис.
Far Manager запущен на MacOS</I></SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
если вы используете </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">MacOS</SPAN></FONT><FONT FACE="Arial, serif">
или </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Linux</SPAN></FONT><FONT FACE="Arial, serif">,
найдите и установите файловый менеджер.
Пример запроса в гугле: “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">file</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">manager</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">for</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">mac</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">os</SPAN></FONT><FONT FACE="Arial, serif">”.
Для </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Linux</SPAN></FONT><FONT FACE="Arial, serif">
семейства </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Ubuntu</SPAN></FONT><FONT FACE="Arial, serif">
установка обычно сводится к двум командам
в терминале:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
sudo apt-get update</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
sudo apt-get install mc</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">(после
этого можно вводить “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">mc</SPAN></FONT><FONT FACE="Arial, serif">”,
чтобы запустился </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Midnight</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Commander</SPAN></FONT><FONT FACE="Arial, serif">).</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Не
отчаивайтесь, если у вас ничего не
получилось. Имейте в виду, что если
что-то не работает локально, можно всегда
воспользоваться облаком. Например, сайт
</FONT><A HREF="https://repl.it/"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>://</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>repl</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>.</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>it</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>/</U></FONT></FONT></A><FONT FACE="Arial, serif">
предлагает на выбор множество языков
программирования, которые можно запустить
прямо в вашем браузере. Среди этих языков
есть и Руби. Конечно, это не путь настоящего
джедая, но как бэкап-план -- отличное
решение!</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.22in; margin-bottom: 0.06in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_6ldigafzmdg6"></A>
<FONT COLOR="#434343"><FONT FACE="Arial, serif"><FONT SIZE=4>Основы
работы с файловой системой</FONT></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Говорят,
что файловая система “древовидная”,
то есть её можно представить в виде
дерева. Каждая ветвь - это директория,
в которой может быть одна или несколько
других директорий (ветвей) или файлов
(листьев). Также директория может быть
пустой. Самую главную директорию называют
“корневой” (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">root</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">directory</SPAN></FONT><FONT FACE="Arial, serif">
- не надо путать с </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">root</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">home</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">directory</SPAN></FONT><FONT FACE="Arial, serif">
- это директория </FONT><FONT FACE="Arial, serif"><I>пользователя</I></FONT><FONT FACE="Arial, serif">
с именем </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">root</SPAN></FONT><FONT FACE="Arial, serif">).</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Уже
тут начинаются разногласия. Почему
структура древовидная, а главная
директория корневая, а не стволовая?
Ведь ветви растут от главного ствола!
Также, когда мы представляем дерево -
мы подразумеваем, что дерево растет
вверх. Хотя во всех файловых менеджерах
“корни” растут вниз - надо нажать кнопку
вниз, чтобы поставить курсор на 1
директорию ниже. Может тогда лучше
говорить, что структура не древовидная,
а корневидная?</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><IMG SRC="2eaec5a5667bec5b244b5f4a53e23318_html_d077d2a8.png" NAME="image33.png" ALIGN=BOTTOM HSPACE=12 VSPACE=12 WIDTH=624 HEIGHT=468 BORDER=0></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><I>Рис.
Детское творчество в одном из детских
садов в Кремниевой Долине. Любопытный
программист задаст вопрос - а где корень
у этого дерева? Дело в том, что корневой,
самый главный, узел (обычно обозначается
как </I></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>root</I></SPAN></FONT><FONT FACE="Arial, serif"><I>
- корень) находится в самом верху. Или
мы все-таки говорим про ветви, которые
растут снизу вверх? В этом вопросе есть
неопределенность, пусть она вас не
пугает.</I></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">В
любом случае, корневидная она или
древовидная, у дерева вверху намного
меньше ветвей, а внизу намного больше.
В файловой системе такого нет, все
директории и файлы по-умолчанию
отсортированы в алфавитном порядке.
Наверное, у человека не нашлось более
точной аналогии и было принято называть
файловую структуру “древовидной”.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Кстати,
одна из моих любимых сортировок файлов
и директорий в любом файловом менеджере
- по дате обновления в убывающем порядке.
Такой порядок позволяет в самом верху
видеть файлы, которые были обновлены
недавно. А человек обычно всегда работает
с самыми “свежими” файлами. Как только
вы прочувствуете это преимущество, вам
не захочется сортировать по-другому.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><IMG SRC="2eaec5a5667bec5b244b5f4a53e23318_html_f37bf33e.png" NAME="image23.png" ALIGN=BOTTOM HSPACE=12 VSPACE=12 WIDTH=389 HEIGHT=237 BORDER=0></P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><I>Рис.
Сортировка по дате обновления в убывающем
порядке в </I></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>Finder</I></SPAN></FONT><FONT FACE="Arial, serif"><I>
(</I></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>MacOS</I></SPAN></FONT><FONT FACE="Arial, serif"><I>)</I></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Те
программисты, которые постоянно
используют консоль (не пользуются
файловыми менеджерами) упускают это
очевидное преимущество. Нам достаточно
скачать проект любой сложности и мы уже
будем видеть, какие директории и файлы
были изменены недавно - над чем идет
работа, в курсе чего нужно быть. Так что,
пока не узнав ни одной команды, вы уже
получили знание, которое будет полезно
и которое также приобретается и осознается
не сразу даже опытными программистами
- озарение может наступить через несколько
лет.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.22in; margin-bottom: 0.06in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_9uhxb3rd5w8w"></A>
<FONT COLOR="#434343"><FONT FACE="Arial, serif"><FONT SIZE=4>Навигация</FONT></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Навигация
в файловой системе - это просто переход
из одного каталога в другой, чтобы
посмотреть, что там находится, какие
файлы. В </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Far</SPAN></FONT><FONT FACE="Arial, serif">
для навигации используются кнопки
вверх, вниз, </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Enter</SPAN></FONT><FONT FACE="Arial, serif">
(войти в директорию), </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">tab</SPAN></FONT><FONT FACE="Arial, serif">
(для перехода на соседнюю панель).</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">В
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">bash</SPAN></FONT><FONT FACE="Arial, serif">
для навигации существуют следующие
команды (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">cd</SPAN></FONT><FONT FACE="Arial, serif">
работает в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Windows</SPAN></FONT><FONT FACE="Arial, serif">,
а вот </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ls</SPAN></FONT><FONT FACE="Arial, serif">
уже не работает):</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">cd</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">my</SPAN></FONT><FONT FACE="Courier New, serif">_</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">dir</SPAN></FONT><FONT FACE="Courier New, serif">
# войти в директорию </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">my</SPAN></FONT><FONT FACE="Courier New, serif">_</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">dir</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">cd</SPAN></FONT><FONT FACE="Courier New, serif">
.. # подняться на уровень выше</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">ls</SPAN></FONT><FONT FACE="Courier New, serif">
# листинг (список файлов)</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">С
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">cd</SPAN></FONT><FONT FACE="Arial, serif">
вроде бы все понятно, но листинг обычно
не выдает полный список файлов.
Оказывается, что есть еще скрытые файлы
(в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Linux</SPAN></FONT><FONT FACE="Arial, serif">
и </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">MacOS</SPAN></FONT><FONT FACE="Arial, serif">
они начинаются с точки)! Поэтому команду
нужно изменить на `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ls</SPAN></FONT><FONT FACE="Arial, serif">
-</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">a</SPAN></FONT><FONT FACE="Arial, serif">`
чтобы вывести все файлы. </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">В
Far’е тоже есть такая настройка (в верхнем
меню Options-Panel Settings-Show hidden and system files).</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Авторы
редко используют `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ls</SPAN></FONT><FONT FACE="Arial, serif">`
или `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ls</SPAN></FONT><FONT FACE="Arial, serif">
-</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">a</SPAN></FONT><FONT FACE="Arial, serif">`.
Наиболее удобная команда консоли для
вывода всех файлов это `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ls</SPAN></FONT><FONT FACE="Arial, serif">
-</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">lah</SPAN></FONT><FONT FACE="Arial, serif">`:</FONT></P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Флаг
	`</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">l</SPAN></FONT><FONT FACE="Arial, serif">`
	указывает на то, что нам нужен вывод в
	виде расширенного списка (который
	содержит права на доступ к файлу, имя
	владельца, размер в байтах, дату
	обновления).</FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Флаг
	`</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">a</SPAN></FONT><FONT FACE="Arial, serif">`
	говорит о том, что надо выводить
	информацию обо всех файлах (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">all</SPAN></FONT><FONT FACE="Arial, serif">),
	в т.ч. скрытых.</FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Флаг
	`</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">h</SPAN></FONT><FONT FACE="Arial, serif">`
	говорит о том, что нужно выводить размера
	файла не в байтах, а в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">human</SPAN></FONT><FONT FACE="Arial, serif">-</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">readable</SPAN></FONT><FONT FACE="Arial, serif">
	формате, т.е. в формате, который понятен
	человеку (килобайты, мегабайты, гигабайты
	и т.д.)</FONT></P>
</UL>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Кстати,
флаг `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">h</SPAN></FONT><FONT FACE="Arial, serif">`
очень полезный и часто используется
для других команд. Например, `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">df</SPAN></FONT><FONT FACE="Arial, serif">
-</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">h</SPAN></FONT><FONT FACE="Arial, serif">`
(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><B>d</B></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">isk</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><B>f</B></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ilesystem</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">in</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><B>h</B></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">uman</SPAN></FONT><FONT FACE="Arial, serif">-</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">readable</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">format</SPAN></FONT><FONT FACE="Arial, serif">)
выводит статистику свободного места
на разделах вашего диска в гигабайтах.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">А
в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Far</SPAN></FONT><FONT FACE="Arial, serif">’</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">e</SPAN></FONT><FONT FACE="Arial, serif">
нужно для этого нажать </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Ctrl</SPAN></FONT><FONT FACE="Arial, serif">+</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">L</SPAN></FONT><FONT FACE="Arial, serif">
(^</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">L</SPAN></FONT><FONT FACE="Arial, serif">).
Чтобы скрыть нужно еще раз нажать ^</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">L</SPAN></FONT><FONT FACE="Arial, serif">.
Вообще программисты довольно ленивые
люди, поэтому чтобы что-то включить, а
потом выключить (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">toggle</SPAN></FONT><FONT FACE="Arial, serif">),
иногда нужно нажать одну и ту же комбинацию
клавиш. Например, просмотр файла в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Far</SPAN></FONT><FONT FACE="Arial, serif">
и </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Midnight</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">commander</SPAN></FONT><FONT FACE="Arial, serif">
это клавиша </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">F</SPAN></FONT><FONT FACE="Arial, serif">3,
а выход из просмотра тоже </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">F</SPAN></FONT><FONT FACE="Arial, serif">3
(кто не знает - тот обычно использует
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Escape</SPAN></FONT><FONT FACE="Arial, serif">
и тянется в конец клавиатуры).</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Мы
изучили пару шелл-команд (на самом деле
их не надо запоминать, просто сделайте
пометку в книге), но в файл-менеджере
это всего лишь несколько правильных
кнопок, которые позволяют не только
легче понять, как выглядит ваш проект
или файловая система целиком, но и дают
более наглядный результат.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Авторы
книги, несмотря на большой опыт
программирования и привычку делать все
из “черного экрана” - консоли, время
от времени все-таки запускают файловый
менеджер. Особенно это полезно делать
на новом проекте, который содержит много
файлов.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
“походите” по вашей файловой системе
и посмотрите, какие файлы и директории
в ней существуют. Директории из корневого
каталога (== “директории из корневой
директории”) будут часто встречаться
в будущем.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.22in; margin-bottom: 0.06in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_5vbdwgtgte6q"></A>
<FONT COLOR="#434343"><FONT FACE="Arial, serif"><FONT SIZE=4>Создание
файла</FONT></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><I>Один
программист из нашей компании написал
самый маленький в мире вирус, он занимал
0 байт и даже его создатель не знал, что
он делает (шутка).</I></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Комбинация
для создания файла в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Far</SPAN></FONT><FONT FACE="Arial, serif">
и </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">MC</SPAN></FONT><FONT FACE="Arial, serif">
(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Midnight</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Commander</SPAN></FONT><FONT FACE="Arial, serif">)
- </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Shift</SPAN></FONT><FONT FACE="Arial, serif">+</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">F</SPAN></FONT><FONT FACE="Arial, serif">4.
Разница между двумя менеджерами в том,
что первый спросит имя файла вначале
(перед созданием) а второй - в конце
(перед сохранением). В ОС </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Linux</SPAN></FONT><FONT FACE="Arial, serif">
и </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">MacOS</SPAN></FONT><FONT FACE="Arial, serif">
(далее мы будем говорить “линукс-совместимые”,
хотя это и не всегда правда и говорят
“юникс-совместимые”, или просто *</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">nix</SPAN></FONT><FONT FACE="Arial, serif">)
существует команда для создания пустого
файла:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">touch</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">app</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">rb</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Команда
выше создает пустой файл </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">app</SPAN></FONT><FONT FACE="Arial, serif">.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">rb</SPAN></FONT><FONT FACE="Arial, serif">
(если файл уже есть, команда меняет время
обновления файла на текущее).</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">По-умолчанию
файловый менеджер откроет встроенный
редактор, где вам будет предложено
ввести любой текст. Команда </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">touch</SPAN></FONT><FONT FACE="Arial, serif">
редактор не открывает, и, если вы
выполняете свои действия из консоли,
то вам потребуется запустить текстовый
редактор самостоятельно. Пока тему
текстовых редакторов кода опустим, ведь
для простейших программ мощный инструмент
не нужен.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">В
текстовом редакторе введите `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Arial, serif">
“</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">hello</SPAN></FONT><FONT FACE="Arial, serif">”`
и нажмите </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Esc</SPAN></FONT><FONT FACE="Arial, serif">.
Вам будет предложено сохранить файл.
Сохранить можно также с помощью </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">F</SPAN></FONT><FONT FACE="Arial, serif">2
(в редакторах кода это почти всегда ^</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">S</SPAN></FONT><FONT FACE="Arial, serif">).</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">У
вас появилась программа в текущем
каталоге среди остальных файлов, но мы
забыли создать директорию! Тут можно
сделать две вещи - удалить файл </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">F</SPAN></FONT><FONT FACE="Arial, serif">8,
создать директорию </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">F</SPAN></FONT><FONT FACE="Arial, serif">7
и повторить то же самое там. Или создать
директорию и скопировать, нажав клавишу
 </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">F</SPAN></FONT><FONT FACE="Arial, serif">5,
туда наш файл. Копирование производится
с одной панели на другую, поэтому на
одной панели нужно создать директорию,
потом переключиться на соседнюю (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Tab</SPAN></FONT><FONT FACE="Arial, serif">)
и оттуда уже скопировать. Можно было
переместить файл, нажав клавишу </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">F</SPAN></FONT><FONT FACE="Arial, serif">6,
чтобы скопированный файл потом не
удалять.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
разберитесь с созданием, копированием,
переносом файлов и директорий. Попробуйте
скопировать несколько файлов,
предварительно выделив их (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Ins</SPAN></FONT><FONT FACE="Arial, serif">).
Ведь это потребуется нам в дальнейшем,
а команды для копирования файлов и
директорий из консоли не такие очевидные.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.22in; margin-bottom: 0.06in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_jsakvwkhpo9h"></A>
<FONT COLOR="#434343"><FONT FACE="Arial, serif"><FONT SIZE=4>Консольный
ниндзя</FONT></FONT></FONT></P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Новичку
на первых порах лучше всего хорошо
разобраться с файловым менеджером. Мы
бы могли дать курс по консольным командам,
но сколько человек бы мы потеряли в бою,
если бы нужно было овладеть искусством
манипулирования файлов в консоли, прежде
чем написать первую программу? Ниже мы
разберем основные команды. Не все
программисты с опытом с ними знакомы,
поэтому запоминать их не стоит, но
сделать пометку в книге нужно обязательно.
Эти команды могут вам потребоваться
через год, два и более лет.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Создать</FONT><FONT FACE="Arial, serif"><SPAN LANG="en-US">
</SPAN></FONT><FONT FACE="Arial, serif">директорию</FONT><FONT FACE="Arial, serif"><SPAN LANG="en-US">
(</SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">make</SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en-US">
</SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">directory</SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en-US">)
“</SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">one</SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en-US">”:</SPAN></FONT></P>
<P LANG="en-US" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en-US">$
</SPAN></FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">mkdir</SPAN></FONT><FONT FACE="Courier New, serif"><SPAN LANG="en-US">
</SPAN></FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">one</SPAN></FONT></P>
<P LANG="en-US" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Создать
одну директорию “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">one</SPAN></FONT><FONT FACE="Arial, serif">”,
в ней другую “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">two</SPAN></FONT><FONT FACE="Arial, serif">”,
и и в ней третью </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">“three”.
Без флага `p` (path) не обойдешься:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
mkdir -p one/two/three</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Вывести
файл на экран:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">cat</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">file</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">txt</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Трюк:
существует альтернатива команде `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">cat</SPAN></FONT><FONT FACE="Arial, serif">`
(кошка), которая называется `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">bat</SPAN></FONT><FONT FACE="Arial, serif">`
(летучая мышь). На официальном сайте
</FONT><A HREF="https://github.com/sharkdp/bat"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>://</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>github</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>.</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>com</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>/</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>sharkdp</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>/</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>bat</U></SPAN></FONT></FONT></A><FONT FACE="Arial, serif">
говорится, что летучая мышь это кошка
с крыльями “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">A</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">cat</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">with</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">wings</SPAN></FONT><FONT FACE="Arial, serif">”.
Требуется установить </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">bat</SPAN></FONT><FONT FACE="Arial, serif">
перед использованием. Из коробки команда
позволяет выводить файлы с подсветкой
синтаксиса и номерами строк.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Обычно
вывод файла осуществляется другой
командой, ведь файл может быть большой.
Вывести первые 10 строк на экран:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">head</SPAN></FONT><FONT FACE="Courier New, serif">
-10 </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">file</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">txt</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Вывести
последние 10 строк на экран:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">tail</SPAN></FONT><FONT FACE="Courier New, serif">
-10 </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">file</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">txt</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Иногда
существует какой-то большой текстовый
файл, в который постоянно добавляются
данные. И вы хотите выводить на экран
обновления без перезапуска команды
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">tail</SPAN></FONT><FONT FACE="Arial, serif">.
В этом случае поможет флаг `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">f</SPAN></FONT><FONT FACE="Arial, serif">`
(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">follow</SPAN></FONT><FONT FACE="Arial, serif">
- следовать):</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">tail</SPAN></FONT><FONT FACE="Courier New, serif">
-</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">f</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">file</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">txt</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Выход
из этой команды осуществляется стандартной
комбинацией </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Ctrl</SPAN></FONT><FONT FACE="Arial, serif">+</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">C</SPAN></FONT><FONT FACE="Arial, serif">.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Для
переименования файла используется
команда `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">mv</SPAN></FONT><FONT FACE="Arial, serif">`
(в файл-менеджере </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">F</SPAN></FONT><FONT FACE="Arial, serif">6),
от слова `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">move</SPAN></FONT><FONT FACE="Arial, serif">`.
Для компьютера переименовать и переместить
файл это одно и то же. Дело в том, что в
таблице размещения файлов (практически
в любой стандартной файловой системе),
содержатся только структуры с метаданными
о файле (имя, размер, атрибуты и т.д.).
Содержимое размещено на диске. При
переносе или переименовании мы изменяем
только таблицу, хотя содержимое остается
на том же месте. Именно поэтому перенос
больших файлов (гигабайты) занимает
доли секунды, если операция выполняется
на том же диске. И минуты и часы, когда
операция выполняется на разных дисках
- ведь нужно “перенести” (на самом деле
скопировать и удалить) содержимое:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">mv</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">file</SPAN></FONT><FONT FACE="Courier New, serif">1.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">txt</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">file</SPAN></FONT><FONT FACE="Courier New, serif">2.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">txt</SPAN></FONT><FONT FACE="Courier New, serif">
# переименовать первый файл во второй</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Скопировать
файл (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><B>c</B></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">o</SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><B>p</B></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">y</SPAN></FONT><FONT FACE="Arial, serif">):</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">cp</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">file</SPAN></FONT><FONT FACE="Courier New, serif">1.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">txt</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">file</SPAN></FONT><FONT FACE="Courier New, serif">2.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">txt</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Скопировать
файл в директорию (попробуйте самостоятельно
перенести, </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">move</SPAN></FONT><FONT FACE="Arial, serif">,
файл в директорию):</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">cp</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">file</SPAN></FONT><FONT FACE="Courier New, serif">1.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">txt</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">my</SPAN></FONT><FONT FACE="Courier New, serif">_</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">directory</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Скопировать
файл в директорию на 1 уровень выше:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">cp</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">file</SPAN></FONT><FONT FACE="Courier New, serif">1.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">txt</SPAN></FONT><FONT FACE="Courier New, serif">
..</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Скопировать
файл в директорию на 2 уровня выше (то
же самое можно сделать и в файл-менеджере,
если указать в качестве назначения
директорию `../..`):</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">cp</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">file</SPAN></FONT><FONT FACE="Courier New, serif">1.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">txt</SPAN></FONT><FONT FACE="Courier New, serif">
../..</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Скопировать
несколько файлов в директорию. К слову,
тут уже у многих т.н. высокомерных
программистов, которые любят давать
советы, наступает клин. Можете использовать
этот вопрос “для проверки” - “а знаешь
ли ты какой командой можно скопировать
несколько файлов в директорию?”:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
cp {file1.txt,file2.txt} my_dir</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><BR>В
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Far</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Manager</SPAN></FONT><FONT FACE="Arial, serif">
для копирования нескольких файлов
необходимо их сначала выбрать. Это можно
сделать с помощью клавиши </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Insert</SPAN></FONT><FONT FACE="Arial, serif">
(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Ins</SPAN></FONT><FONT FACE="Arial, serif">).
Если клавиши </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Insert</SPAN></FONT><FONT FACE="Arial, serif">
на вашем компьютере нет (существует
только на расширенных клавиатурах), то
выбрать можно с помощью </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Shift</SPAN></FONT><FONT FACE="Arial, serif">
+ “стрелка вверх” или </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Shift</SPAN></FONT><FONT FACE="Arial, serif">
+ “стрелка вниз”. После этого для
копирования с одной панели на другую
нажать </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">F</SPAN></FONT><FONT FACE="Arial, serif">5.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Стоит
заметить, что если вы установили “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Oh</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">My</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Zsh</SPAN></FONT><FONT FACE="Arial, serif">”
вместо </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">bash</SPAN></FONT><FONT FACE="Arial, serif">,
то у вас доступна клавиша </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Tab</SPAN></FONT><FONT FACE="Arial, serif">,
которая очень помогает набирать имена
файлов. Например, вводите `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">cp</SPAN></FONT><FONT FACE="Arial, serif">
{</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">f</SPAN></FONT><FONT FACE="Arial, serif">`,
а потом </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Tab</SPAN></FONT><FONT FACE="Arial, serif">
и оболочка предложит вам список файлов,
которые можно включить в команду. Ничего
вводить с клавиатуры не нужно. Очень
полезно, когда имена файлов длинные.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Поиск
файла по имени (команда найдет все файлы
и директории с расширением `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">rb</SPAN></FONT><FONT FACE="Arial, serif">`):</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">find</SPAN></FONT><FONT FACE="Courier New, serif">
. -</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">name</SPAN></FONT><FONT FACE="Courier New, serif">
'*.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">rb</SPAN></FONT><FONT FACE="Courier New, serif">'
</FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Поиск
всех файлов в текущей директории, в
имени которых содержится строка `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">bla</SPAN></FONT><FONT FACE="Arial, serif">`:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">find</SPAN></FONT><FONT FACE="Courier New, serif">
. -</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">name</SPAN></FONT><FONT FACE="Courier New, serif">
'*</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">bla</SPAN></FONT><FONT FACE="Courier New, serif">*'
</FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Поиск
файлов (без директорий) с расширением
`</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">rb</SPAN></FONT><FONT FACE="Arial, serif">`:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
find . -name '*.rb' -type f</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Как
вы могли заметить, существует разные
способы поиска файлов в текущей
директории. Текущая директория
обозначается точкой. Двумя точками
обозначается директория уровнем выше.
Директория двумя уровнями выше
обозначается как `../..`. Небольшая справка
по разным обозначениям и примеры
использования </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">find</SPAN></FONT><FONT FACE="Arial, serif">:</FONT></P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">.
	</FONT><FONT FACE="Arial, serif">- текущая директория.
	Пример команды (ищет все файлы с
	расширением </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">log</SPAN></FONT><FONT FACE="Arial, serif">
	в текущей директории): </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">find</SPAN></FONT><FONT FACE="Courier New, serif">
	. -</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">name</SPAN></FONT><FONT FACE="Courier New, serif">
	'*.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">log</SPAN></FONT><FONT FACE="Courier New, serif">'</FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">..</FONT><FONT FACE="Arial, serif">
	- директория уровнем выше. Пример команды
	(ищет все файлы с расширением </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">log</SPAN></FONT><FONT FACE="Arial, serif">
	в директории уровнем выше): </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">find</SPAN></FONT><FONT FACE="Courier New, serif">
	.. -</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">name</SPAN></FONT><FONT FACE="Courier New, serif">
	'*.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">log</SPAN></FONT><FONT FACE="Courier New, serif">'</FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">../..</FONT><FONT FACE="Arial, serif">
	- директория двумя уровнями выше. Пример
	команды (ищет все файлы с расширением
	</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">log</SPAN></FONT><FONT FACE="Arial, serif">
	в директории уровнем выше): </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">find</SPAN></FONT><FONT FACE="Courier New, serif">
	../.. -</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">name</SPAN></FONT><FONT FACE="Courier New, serif">
	'*.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">log</SPAN></FONT><FONT FACE="Courier New, serif">'</FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">~</FONT><FONT FACE="Arial, serif">
	- домашняя (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">home</SPAN></FONT><FONT FACE="Arial, serif">)
	директория, т.е. личная директория
	текущего пользователя.  Пример команды
	(ищет все файлы с расширением </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">log</SPAN></FONT><FONT FACE="Arial, serif">
	в домашней директории): </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">find</SPAN></FONT><FONT FACE="Courier New, serif">
	~ -</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">name</SPAN></FONT><FONT FACE="Courier New, serif">
	'*.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">log</SPAN></FONT><FONT FACE="Courier New, serif">'</FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">/</FONT><FONT FACE="Arial, serif">
	- корневая (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">root</SPAN></FONT><FONT FACE="Arial, serif">)
	директория. Пример команды (ищет все
	файлы с расширением </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">log</SPAN></FONT><FONT FACE="Arial, serif">
	в корневой директории): </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">find</SPAN></FONT><FONT FACE="Courier New, serif">
	/ -</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">name</SPAN></FONT><FONT FACE="Courier New, serif">
	'*.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">log</SPAN></FONT><FONT FACE="Courier New, serif">'</FONT></P>
</UL>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">В
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Far</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Manager</SPAN></FONT><FONT FACE="Arial, serif">
можно искать файлы с помощью специального
диалога, который можно вызвать комбинацией
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Alt</SPAN></FONT><FONT FACE="Arial, serif">+</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">F</SPAN></FONT><FONT FACE="Arial, serif">7.
Визуально этот диалог более наглядный
и с ним проще работать. По-умолчанию
маска файла задана как </FONT><FONT FACE="Courier New, serif">*.*</FONT><FONT FACE="Arial, serif">
(все файлы, по аналогии с </FONT><FONT FACE="Courier New, serif">*.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">log</SPAN></FONT><FONT FACE="Arial, serif">
- файлы с расширением </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">log</SPAN></FONT><FONT FACE="Arial, serif">).
В этом диалоге можно также искать файлы
с определенной строкой (например, когда
требуется найти все файлы, в которых
встречается ваше имя).</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Поиск
по всем файлам определенной строки (в
нашем случае </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">something</SPAN></FONT><FONT FACE="Arial, serif">):</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
find . -name '*.rb' -type f | xargs grep something</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Команда
выше делает поиск, а потом перенаправляет
результат в команду </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">xargs</SPAN></FONT><FONT FACE="Arial, serif">,
которая для каждой полученной строки
запускает программу </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">grep</SPAN></FONT><FONT FACE="Arial, serif">
с аргументами: `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">grep</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">something</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">file</SPAN></FONT><FONT FACE="Arial, serif">1.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">rb</SPAN></FONT><FONT FACE="Arial, serif">`.
Не стоит переживать, если эта конструкция
непонятна - со временем все встанет на
свои места.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Иногда
полезно что-то быстро сохранить в файл
прямо из консоли. Когда ввод окончен,
нужно нажать </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Ctrl</SPAN></FONT><FONT FACE="Arial, serif">+</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">D</SPAN></FONT><FONT FACE="Arial, serif">.
Будьте осторожны, эта команда затрёт
предыдущее содержимое файла:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">cat</SPAN></FONT><FONT FACE="Courier New, serif">
&gt; </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">file</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">txt</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Добавить
в конец файла:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">cat</SPAN></FONT><FONT FACE="Courier New, serif">
&gt;&gt; </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">file</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">txt</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Немного
про саму файловую систему. Корневой
каталог обозначается как `/`. Есть также
такое понятие как “домашний каталог”
- это личный каталог текущего пользователя.
Узнать имя текущего пользователя можно
с помощью команды “кто я”:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">whoami</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">ninja</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Любопытно,
что в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">pry</SPAN></FONT><FONT FACE="Arial, serif">
(отладчик/дебаггер и </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">REPL</SPAN></FONT><FONT FACE="Arial, serif">,
рассматривается ниже) есть команда
`</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">whereami</SPAN></FONT><FONT FACE="Arial, serif">`
(где я). Она показывает, где вы находитесь
в текущем коде (разбирается далее в
книге).</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Вывести
текущую директорию на экран (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">PWD</SPAN></FONT><FONT FACE="Arial, serif">
- </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Print</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Working</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Directory</SPAN></FONT><FONT FACE="Arial, serif">
- напечатать рабочую директорию):</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">pwd</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">/</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">home</SPAN></FONT><FONT FACE="Courier New, serif">/</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">ninja</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Домашний
каталог обозначается тильдой `~`. Можно
вывести его на экран:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">echo</SPAN></FONT><FONT FACE="Courier New, serif">
~</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">/</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">home</SPAN></FONT><FONT FACE="Courier New, serif">/</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">ninja</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Или
совершить другие манипуляции:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">mkdir</SPAN></FONT><FONT FACE="Courier New, serif">
~/</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">tmp</SPAN></FONT><FONT FACE="Courier New, serif">
# создать директорию </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">tmp</SPAN></FONT><FONT FACE="Courier New, serif">
в домашнем каталоге</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">cp</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">file</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">txt</SPAN></FONT><FONT FACE="Courier New, serif">
~/</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">tmp</SPAN></FONT><FONT FACE="Courier New, serif">
# скопировать файл в созданную директорию</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Кстати,
создайте директорию ~/</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">tmp</SPAN></FONT><FONT FACE="Arial, serif">
- это удобно для хранения временных
файлов. Существует системная директория
/</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">tmp</SPAN></FONT><FONT FACE="Arial, serif">,
но все данные оттуда удаляются после
перезапуска компьютера (по-умолчанию).</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Удаление
файла, будьте осторожны (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><B>r</B></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">e</SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><B>m</B></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ove</SPAN></FONT><FONT FACE="Arial, serif">):</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">rm</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">file</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">txt</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Удаление
директории:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">rm</SPAN></FONT><FONT FACE="Courier New, serif">
-</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">r</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">my</SPAN></FONT><FONT FACE="Courier New, serif">_</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">dir</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Надо
заметить, что параметр `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">r</SPAN></FONT><FONT FACE="Arial, serif">`
универсальный для многих команд - он
указывает на то, что работа будет
производиться с директорией, рекурсивно
(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">recursive</SPAN></FONT><FONT FACE="Arial, serif">).</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">ВНИМАНИЕ!
Будьте осторожны с командой “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">rf</SPAN></FONT><FONT FACE="Arial, serif">”.
Существует самая опасная команда,
которую вы можете ввести: `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">rm</SPAN></FONT><FONT FACE="Arial, serif">
-</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">rf</SPAN></FONT><FONT FACE="Arial, serif">
/`. Эта команда удалит содержимое корневой
директории на вашем диске без какого-либо
подтверждения. Иногда в сети существуют
злые шутники, которые могут попросить
вас что-нибудь ввести. Всегда проверяйте,
что именно вы вводите.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Выше
мы рассмотрели команду копирования, но
есть еще одна, менее известная, команда
копирования, которая вам может пригодиться:
`</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">scp</SPAN></FONT><FONT FACE="Arial, serif">`.
Это команда копирует файлы с удаленного
сервера на локальный компьютер и обратно.
Например, на вашем сайте произошла
какая-то ошибка и вы хотите скачать файл
с описанием ошибок через </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">SSH</SPAN></FONT><FONT FACE="Arial, serif">-доступ.
Это можно сделать с помощью “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">scp</SPAN></FONT><FONT FACE="Arial, serif">”.
Останавливаться подробно пока на этом
не будем, при желании вы всегда можете
найти справку в Интернете.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">На
этом тренировка для настоящих ниндзя
окончена, время выпить чаю, да съесть
ещё этих французских булок.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_hb2hhm930aby"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt">Текстовые
редакторы</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Существует
много текстовых редакторов, но мы будем
говорить только про редакторы кода. Они
отличаются от текстовых редакторов
тем, что редакторы типа </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Word</SPAN></FONT><FONT FACE="Arial, serif">
сохраняют файлы не в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">plain</SPAN></FONT><FONT FACE="Arial, serif">
(чистом) формате. Нам нужен текстовый
редактор, который позволит сохранять
файлы </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">as</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">is</SPAN></FONT><FONT FACE="Arial, serif">
(так, как они есть, ну или почти): т.е. если
мы вводим 1 символ и нажимаем “Сохранить”,
то размер файла будет ровно 1 байт. Если
редактор очень простой, то он может быть
отнесен как к текстовым, так и к редакторам
кода.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Все
редакторы кода можно разделить на два
вида: консольные и графические. </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Самый
простой консольный редактор это nano:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">$
nano</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><IMG SRC="2eaec5a5667bec5b244b5f4a53e23318_html_4865b5f7.png" NAME="image28.png" ALIGN=BOTTOM HSPACE=12 VSPACE=12 WIDTH=624 HEIGHT=408 BORDER=0></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Подсказка
внизу - это основные команды. Существуют
и другие, более продвинутые редакторы
(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">vim</SPAN></FONT><FONT FACE="Arial, serif">,
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">emacs</SPAN></FONT><FONT FACE="Arial, serif">).
К сожалению, для овладения консольными
инструментами требуется больше времени.
Существует множество холиваров (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">holy</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">wars</SPAN></FONT><FONT FACE="Arial, serif">
- святые войны) на тему редакторов кода.
Авторы пришли к выводу, что не стоит
придавать выбору редактора очень большое
значение, т.к. редактор сам по себе не
имеет смысла без наличия знаний по
программированию.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Из
графических редакторов для руби следует
выделить четыре (в порядке преференций
авторов):</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">VsCode</SPAN></FONT><FONT FACE="Arial, serif">
	(также известный как </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Visual</SPAN></FONT><FONT FACE="Arial, serif">
	</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Studio</SPAN></FONT><FONT FACE="Arial, serif">
	</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Code</SPAN></FONT><FONT FACE="Arial, serif">,
	не путайте со средой разработки </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Visual</SPAN></FONT><FONT FACE="Arial, serif">
	</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Studio</SPAN></FONT><FONT FACE="Arial, serif">)</FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">RubyMine
	(платный)</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Atom</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Sublime
	Text (платный)</SPAN></FONT></P>
</UL>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">RubyMine</SPAN></FONT><FONT FACE="Arial, serif">
относится не к редактору, а к </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">IDE</SPAN></FONT><FONT FACE="Arial, serif">
- </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Interactive</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Development</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Environment</SPAN></FONT><FONT FACE="Arial, serif">,
это улучшенная версия редактора кода,
которую называют “среда разработки”.
Начинающему можно порекомендовать
любой из вышеперечисленных. Возможно,
кому-то понравится </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">RubyMine</SPAN></FONT><FONT FACE="Arial, serif">,
в котором наличие широких возможностей
облегчает отладку и написание программ,
особенно на первых порах. Однако, в этой
книге работа с тем или иным редактором
рассматриваться не будет. Вначале мы
будем использовать редактор, встроенный
 в ваш файловый менеджер (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Shift</SPAN></FONT><FONT FACE="Arial, serif">
+ </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">F</SPAN></FONT><FONT FACE="Arial, serif">4),
а в дальнейшем выбор редактора будет
только за вами.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Обычно
любой редактор при установке создает
команду для запуска редактора из консоли.
С помощью консольной команды можно
открыть редактор для текущей директории:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">code</SPAN></FONT><FONT FACE="Courier New, serif">
. # команда откроет редактор </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">VsCode</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Или
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Atom</SPAN></FONT><FONT FACE="Arial, serif">:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">atom</SPAN></FONT><FONT FACE="Courier New, serif">
.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Если
запустить команду без точки, то откроется
каталог по-умолчанию. На практике редко
приходится запускать редактор без
параметра.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
установить текстовый редактор. Попробовать
создать несколько файлов в текстовом
редакторе. В каждый файл запишите имя
человека, которого вы знаете. Удалите
файлы.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_wxgf4g2orzxn"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt">Первая
программа</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">На
самом деле нашей первой программой была
программа сложения двух чисел: “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Arial, serif">
1+1”. Давайте создадим новый файл с именем
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">app</SPAN></FONT><FONT FACE="Arial, serif">.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">rb</SPAN></FONT><FONT FACE="Arial, serif">
и запишем в него следующий код:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts
&quot;I would hug you, but I’m just a text&quot;</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Когда
файл создан и сохранен, из терминала
можно запустить программу:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
ruby app.rb</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">I
would hug you, but I’m just a text</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">В
файл-менеджере тоже можно ввести “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ruby</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">app</SPAN></FONT><FONT FACE="Arial, serif">.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">rb</SPAN></FONT><FONT FACE="Arial, serif">”.
Но что такое, если запустить программу
через файл-менеджер, то все пропадёт!
Тонкость в том, что программа запускается,
“отрабатывает” и управление переходит
обратно - в терминал или в нашем случае
в файловый менеджер. Поэтому чтобы
посмотреть “что же там было” после
того, как мы нажали </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Enter</SPAN></FONT><FONT FACE="Arial, serif">,
надо нажать ^</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">O</SPAN></FONT><FONT FACE="Arial, serif">.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Ура!
У нас получилась первая осмысленная
программа. </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Давайте
её немного улучшим:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts
&quot;I would hug you, but I’m just a text&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">gets</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Теперь
мы выводим на экран строку и вместо
того, чтобы выходить из программы -
ожидаем ввода. Но не просто ввода, а
ввода строки. Инструкция “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">gets</SPAN></FONT><FONT FACE="Arial, serif">”
это по сути “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">get</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">string</SPAN></FONT><FONT FACE="Arial, serif">”
- получить строку. Вот мы и пробуем
получить строку. Заметьте, что строка
может состоять из множества символов,
поэтому руби понимает окончание строки
только в том случае, если вы нажмете
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Enter</SPAN></FONT><FONT FACE="Arial, serif">.
Разумеется, можно просто нажать </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Enter</SPAN></FONT><FONT FACE="Arial, serif">,
тогда строка будет пустая (если честно,
то не совсем, но будет “казаться”, что
она пустая).</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Запустите
программу выше и попробуйте нажать
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Enter</SPAN></FONT><FONT FACE="Arial, serif">.
Если вы запускаете программу из
файл-менеджера, то результат не “пропадет”
и программа будет ждать вашего ввода.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Давайте
составим простейшую программу для
изучения иностранного языка. Возьмем
три слова: </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ball</SPAN></FONT><FONT FACE="Arial, serif">,
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">door</SPAN></FONT><FONT FACE="Arial, serif">,
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">peace</SPAN></FONT><FONT FACE="Arial, serif">.
Представим, что нам нужно выучить эти
слова. Мы напишем программу, которая
будет спрашивать - “Как переводится
слово </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">peace</SPAN></FONT><FONT FACE="Arial, serif">?”.
В этот момент подразумевается, что
пользователь должен дать ответ вслух:
мяч, дверь, мир. Т.к. с остальными
операторами языка мы не знакомы, то
обойдемся тем, что есть:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<TABLE WIDTH=624 CELLPADDING=7 CELLSPACING=0>
	<COL WIDTH=610>
	<TR>
		<TD WIDTH=610 VALIGN=TOP BGCOLOR="#f0f0f0" STYLE="border: none; padding: 0in">
			<P STYLE="border: none; padding: 0in; widows: 0; orphans: 0"><FONT COLOR="#444444"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">puts
			</SPAN></SPAN></FONT></FONT><FONT COLOR="#880000"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">&quot;How
			to translate ball?&quot;</SPAN></SPAN></FONT></FONT><FONT COLOR="#444444"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0"><BR>gets<BR>puts
			</SPAN></SPAN></FONT></FONT><FONT COLOR="#880000"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">&quot;How
			to translate door?&quot;</SPAN></SPAN></FONT></FONT><FONT COLOR="#444444"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0"><BR>gets<BR>puts
			</SPAN></SPAN></FONT></FONT><FONT COLOR="#880000"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">&quot;How
			to translate peace?&quot;</SPAN></SPAN></FONT></FONT><FONT COLOR="#444444"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0"><BR>gets</SPAN></SPAN></FONT></FONT></P>
		</TD>
	</TR>
</TABLE>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Попробуем
запустить - работает! Это не очень
удобное, но рабочее и полезное приложение.
Оно не выводит ответы, но уже задает
вопросы. Другими словами, с помощью двух
операторов </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Arial, serif">
и </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">gets</SPAN></FONT><FONT FACE="Arial, serif">
мы смогли написать что-то интересное.
Что же будет дальше! Для играющих на
гитаре предлагаем программу для изучения
нот на первой струне:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<TABLE WIDTH=624 CELLPADDING=7 CELLSPACING=0>
	<COL WIDTH=610>
	<TR>
		<TD WIDTH=610 VALIGN=TOP BGCOLOR="#f0f0f0" STYLE="border: none; padding: 0in">
			<P STYLE="border: none; padding: 0in; widows: 0; orphans: 0"><FONT COLOR="#444444"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">puts
			</SPAN></SPAN></FONT></FONT><FONT COLOR="#880000"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">&quot;Say
			a note on a 0 fret?&quot;</SPAN></SPAN></FONT></FONT><FONT COLOR="#444444"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">
			</SPAN></SPAN></FONT></FONT><FONT COLOR="#888888"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">#
			Подразумевается, что мы скажем
			E</SPAN></SPAN></FONT></FONT><FONT COLOR="#444444"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0"><BR>gets<BR>puts
			</SPAN></SPAN></FONT></FONT><FONT COLOR="#880000"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">&quot;Say
			a note on a 1st fret?&quot;</SPAN></SPAN></FONT></FONT><FONT COLOR="#444444"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">
			</SPAN></SPAN></FONT></FONT><FONT COLOR="#888888"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">#
			Подразумевается, что мы скажем
			F</SPAN></SPAN></FONT></FONT><FONT COLOR="#444444"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0"><BR>gets<BR>puts
			</SPAN></SPAN></FONT></FONT><FONT COLOR="#880000"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">&quot;Say
			a note on a 2nd fret?&quot;</SPAN></SPAN></FONT></FONT><FONT COLOR="#444444"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">
			</SPAN></SPAN></FONT></FONT><FONT COLOR="#888888"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">#
			На втором ладу находится нота
			F#</SPAN></SPAN></FONT></FONT><FONT COLOR="#444444"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0"><BR>gets<BR>puts
			</SPAN></SPAN></FONT></FONT><FONT COLOR="#880000"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">&quot;Say
			a note on a 3rd fret?&quot;</SPAN></SPAN></FONT></FONT><FONT COLOR="#444444"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">
			</SPAN></SPAN></FONT></FONT><FONT COLOR="#888888"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">#
			G</SPAN></SPAN></FONT></FONT><FONT COLOR="#444444"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0"><BR>gets</SPAN></SPAN></FONT></FONT></P>
		</TD>
	</TR>
</TABLE>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">И
так далее, до 12 лада (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">E</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">F</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">F</SPAN></FONT><FONT FACE="Arial, serif">#
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">G</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">G</SPAN></FONT><FONT FACE="Arial, serif">#
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">A</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">A</SPAN></FONT><FONT FACE="Arial, serif">#
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">B</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">C</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">C</SPAN></FONT><FONT FACE="Arial, serif">#
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">D</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">D</SPAN></FONT><FONT FACE="Arial, serif">#
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">E</SPAN></FONT><FONT FACE="Arial, serif">).
Напишите программу самостоятельно,
если тема музыки вам не интересна,
сделайте программу для изучения 10 слов.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">По
поводу листинга выше можно сделать
несколько замечаний. Во-первых, вы
наверное уже заметили, что после строки
можно оставить любой комментарий,
достаточно ввести # (решётка, </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">hash</SPAN></FONT><FONT FACE="Arial, serif">,
иногда говорят </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">pound</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">sign</SPAN></FONT><FONT FACE="Arial, serif">).
Можно оставлять комментарий и на новой
строке. Можно оставлять сколько угодно
комментариев и пустых строк, на работу
программы это не влияет.<BR><BR></FONT><FONT FACE="Arial, serif"><B>Задание</B></FONT><FONT FACE="Arial, serif">:
попробуйте оставить комментарии к своей
программе и добавить пустые строки
после </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">gets</SPAN></FONT><FONT FACE="Arial, serif">,
чтобы визуально программа выглядела
“легче”.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Второе
замечание - поддержка русского языка,
а точнее правильной кодировки. В ОС
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Windows</SPAN></FONT><FONT FACE="Arial, serif">
скорее всего возникнут проблемы с
русской кодировкой. Это одна из причин
почему не стоит использовать </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Windows</SPAN></FONT><FONT FACE="Arial, serif">
и нужно переходить на </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">MacOS</SPAN></FONT><FONT FACE="Arial, serif">
или </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Linux</SPAN></FONT><FONT FACE="Arial, serif">
- на этих операционных системах проблем
с кодировкой нет. К счастью, проблема
кодировки очень просто исправляется,
если в самое начало файла добавить:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<TABLE WIDTH=624 CELLPADDING=7 CELLSPACING=0>
	<COL WIDTH=610>
	<TR>
		<TD WIDTH=610 VALIGN=TOP BGCOLOR="#f0f0f0" STYLE="border: none; padding: 0in">
			<P STYLE="border: none; padding: 0in; widows: 0; orphans: 0"><FONT COLOR="#888888"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">#
			encoding: cp866</SPAN></SPAN></FONT></FONT></P>
		</TD>
	</TR>
</TABLE>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Разумеется,
файл должен быть тоже сохранен в этой
кодировке в текстовом редакторе. Другими
словами, мы “дружим” руби и текстовый
редактор. Интерпретатору руби говорим
в какой кодировке будет этот файл, а в
редакторе выбираем эту самую кодировку
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">CP</SPAN></FONT><FONT FACE="Arial, serif">866
(также она может называться </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">DOS</SPAN></FONT><FONT FACE="Arial, serif">
кодировкой). После этого можно писать
по-русски.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">В
“нормальных” операционных системах
этих трюков проделывать не нужно. Если
можете, переключайтесь на них как можно
скорее. В дальнейшем таких сложных
трюков быть не должно, но помните - если
что-то не получается, то ошибка может
заключаться в том, что вы используете
неправильную операционную систему.
Несмотря на то, что руби должен без
проблем работать в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Windows</SPAN></FONT><FONT FACE="Arial, serif">,
для этой операционной системы он не
предназначался. А авторы популярных
библиотек не тестируют свои программы
на </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Windows</SPAN></FONT><FONT FACE="Arial, serif">.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
если у вас установлена ОС </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Windows</SPAN></FONT><FONT FACE="Arial, serif">,
</FONT><FONT FACE="Arial, serif"><I>попробуйте</I></FONT><FONT FACE="Arial, serif">
скачать </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">VMWare</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Workstation</SPAN></FONT><FONT FACE="Arial, serif">
(платная программа) или </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">VirtualBox</SPAN></FONT><FONT FACE="Arial, serif">
(бесплатная). Это виртуальная машина -
программа для запуска операционных
систем внутри вашей ОС. Попробуйте
запустить виртуальную машину и установить
в ней </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Linux</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Mint</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Cinnamon</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">edition</SPAN></FONT><FONT FACE="Arial, serif">.
Попробуйте написать первую программу
в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Linux</SPAN></FONT><FONT FACE="Arial, serif">!
Если не получится - ничего страшного,
продолжайте обучение дальше, можно
будет вернуться к этому позднее.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_2mwogww7mnke"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt">Переменные
в языке Руби</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Переменная
- это область памяти в компьютере, куда
мы можем сохранить значение во время
исполнения программы. Возникает вопрос
- а зачем его сохранять? А как раз для
того, чтобы его потом изменить. В этом
и заключается суть переменных - это
ячейки памяти, куда мы можем что-то
записать и, при желании, изменить.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Но
не обязательно менять значения переменных,
можно создавать переменные для удобства.
Правда, в этом случае переменные часто
называют константами - ведь они не
меняются! Поэтому в современном языке
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">
для создания переменных есть два ключевых
слова: </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">let</SPAN></FONT><FONT FACE="Arial, serif">
для создания переменной, и </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">const</SPAN></FONT><FONT FACE="Arial, serif">
для создания константы. Но в руби все
проще.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Попробуем
“объявить” (создать, </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">define</SPAN></FONT><FONT FACE="Arial, serif">,
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">declare</SPAN></FONT><FONT FACE="Arial, serif">,
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">create</SPAN></FONT><FONT FACE="Arial, serif">,
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">make</SPAN></FONT><FONT FACE="Arial, serif">)
простую переменную:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<TABLE WIDTH=624 CELLPADDING=7 CELLSPACING=0>
	<COL WIDTH=610>
	<TR>
		<TD WIDTH=610 VALIGN=TOP BGCOLOR="#f0f0f0" STYLE="border: none; padding: 0in">
			<P STYLE="border: none; padding: 0in; widows: 0; orphans: 0"><FONT COLOR="#444444"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">puts
			</SPAN></SPAN></FONT></FONT><FONT COLOR="#880000"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">&quot;Your
			age?&quot;</SPAN></SPAN></FONT></FONT><FONT COLOR="#444444"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0"><BR>age
			= gets<BR>puts </SPAN></SPAN></FONT></FONT><FONT COLOR="#880000"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">&quot;Your
			age is&quot;</SPAN></SPAN></FONT></FONT><FONT COLOR="#444444"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0"><BR>puts
			age</SPAN></SPAN></FONT></FONT></P>
		</TD>
	</TR>
</TABLE>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">В
программе выше мы спрашиваем возраст.
После того, как возраст указан, программа
выведет на экран ответ:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<TABLE WIDTH=624 CELLPADDING=7 CELLSPACING=0>
	<COL WIDTH=610>
	<TR>
		<TD WIDTH=610 VALIGN=TOP BGCOLOR="#f0f0f0" STYLE="border: none; padding: 0in">
			<P STYLE="border: none; padding: 0in; widows: 0; orphans: 0"><FONT COLOR="#444444"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">Your
			age?<BR></SPAN></SPAN></FONT></FONT><FONT COLOR="#880000"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">20</SPAN></SPAN></FONT></FONT><FONT COLOR="#444444"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0"><BR>Your
			age is<BR></SPAN></SPAN></FONT></FONT><FONT COLOR="#880000"><FONT FACE="Consolas, serif"><SPAN LANG="en"><SPAN STYLE="background: #f0f0f0">20</SPAN></SPAN></FONT></FONT></P>
		</TD>
	</TR>
</TABLE>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Возраст,
который мы вводим сохраняется в переменную
`</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">age</SPAN></FONT><FONT FACE="Arial, serif">`.
Мы бы могли назвать ее другим именем
(например, `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">a</SPAN></FONT><FONT FACE="Arial, serif">`),
но в этом случае и на четвертой строке
пришлось бы писать &quot;</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">a</SPAN></FONT><FONT FACE="Arial, serif">&quot;.
Существуют т.н. </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">naming</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">conventions</SPAN></FONT><FONT FACE="Arial, serif">
- соглашения о наименовании - их достаточно
просто найти: ввести в поисковой системе
запрос “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">naming</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">conventions</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">variables</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ruby</SPAN></FONT><FONT FACE="Arial, serif">”.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">В
языках программирования </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Ruby</SPAN></FONT><FONT FACE="Arial, serif">
и </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">
мы столкнемся с тремя основными </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">naming</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">conventions</SPAN></FONT><FONT FACE="Arial, serif">:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Snake</SPAN></FONT><FONT FACE="Arial, serif">
	</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">case</SPAN></FONT><FONT FACE="Arial, serif">
	(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">snake</SPAN></FONT><FONT FACE="Arial, serif">
	- змея), между словами ставится знак
	подчеркивания </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">underscore</SPAN></FONT><FONT FACE="Arial, serif">
	(`_`). </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Переменные
	именуются следующим образом: client_age,
	user_password, user_password_expiration_date. Используется
	в руби, а также в базах данных.</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Camel
	case (camel - верблюд), слово начинается с
	маленькой буквы, слова разделяются с
	помощью больших букв: clientAge, userPassword,
	userPasswordExpirationDate. Используется в JavaScript.</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Kebab
	case (kebab - шашлык), слова разделяются
	дефисом: client-age, user-password,
	user-password-expiration-date. Иногда используется
	в HTML, в т.н. data-атрибутах. Например:
	`&lt;input type=&quot;text&quot; name=&quot;login&quot;
	data-error-highlight-color=&quot;red&quot;&gt;`.</SPAN></FONT></P>
</UL>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Пока
запомним только первый вариант, для
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Ruby</SPAN></FONT><FONT FACE="Arial, serif">.
Если переменная имеет длинное название,
то слова разделяем нижним подчеркиванием.
Нужно заметить, что чем короче названия
переменных, тем лучше. Всегда нужно
стремиться писать код так, чтобы названия
переменных не были слишком длинными.
Однако, для начинающих эта задача не
всегда по силам. Придумать хорошее
название для переменной не всегда
просто, среди программистов ходит даже
такая шутка:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">&gt;
There are only two hard things in Computer Science: cache
invalidation and naming things.</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">&gt;
(Дословно: существуют две сложные
проблемы в Компьютерной Науке: инвалидация
кеша и именование вещей).</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Если
название переменной получается слишком
длинным, не стоит его “искусственно”
занижать (например, переименовав
`</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">client</SPAN></FONT><FONT FACE="Arial, serif">_</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">password</SPAN></FONT><FONT FACE="Arial, serif">_</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">expiration</SPAN></FONT><FONT FACE="Arial, serif">_</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">date</SPAN></FONT><FONT FACE="Arial, serif">`
в `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">cped</SPAN></FONT><FONT FACE="Arial, serif">`).
Обычно это свидетельство того, что
контекст решаемой проблемы слишком
широкий, и пришла пора разбить
функциональность на малозависимые друг
от друга классы/объекты. Однако, это
задача для другой книги. На данном этапе
можете называть переменные так, как вам
хочется.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Кроме
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">naming</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">conventions</SPAN></FONT><FONT FACE="Arial, serif">
существуют правила: в руби переменные
должны начинаться всегда с буквы,
переменные могут содержать цифры и/или
знак подчеркивания.  </FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
написать программу, которая подряд
спрашивает год рождения, место рождения,
номер телефона трех клиентов, после
чего выводит полученную информацию
полностью в виде “карточек” (в англ.языке
это бы называлось </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">baseball</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">card</SPAN></FONT><FONT FACE="Arial, serif">,
аналогия в русском языке - карточка из
картотеки). </FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Так
как придумать названия на первом этапе
на английском языке может быть сложно
(а для переменных желательно, но не
обязательно использовать английский
язык, а не траснлит), приведем перевод.
Год рождения - </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">year</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">of</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">birth</SPAN></FONT><FONT FACE="Arial, serif">,
место рождения - </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">place</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">of</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">birth</SPAN></FONT><FONT FACE="Arial, serif">,
телефонный номер - </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">phone</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">number</SPAN></FONT><FONT FACE="Arial, serif">.
На будущее при возникновении вопросов
об именовании переменных, рекомендуется
заглянуть в словарь:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><A HREF="https://www.multitran.ru/"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>://</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>www</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>.</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>multitran</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>.</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>ru</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>/</U></FONT></FONT></A><FONT FACE="Arial, serif">
	- русско-английский и англо-русский
	словарь</FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><A HREF="http://context.reverso.net/"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>http</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>://</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>context</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>.</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>reverso</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>.</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>net</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>/</U></FONT></FONT></A><FONT FACE="Arial, serif">
	- альтернативный словарь с контекстом</FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><A HREF="http://www.thesaurus.com/"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>http</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>://</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>www</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>.</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>thesaurus</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>.</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>com</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>/</U></FONT></FONT></A><FONT FACE="Arial, serif">
	- поиск синонимов англ.языка</FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><A HREF="https://translate.google.com/"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>://</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>translate</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>.</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>google</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>.</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>com</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>/</U></FONT></FONT></A><FONT FACE="Arial, serif">
	- переводчик на все случаи жизни</FONT></P>
</UL>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_96gte6qim57k"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt">Сложение
и умножение строк</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> 
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Давайте
посмотрим на нашу программу, что мы
можем в ней улучшить?</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts
&quot;Your age?&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">age
= gets</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts
&quot;Your age is&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">age</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Две
последние строки можно сократить до
одной:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts
&quot;Your age?&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">age
= gets</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts
&quot;Your age is&quot; + age</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Результат
работы программы:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">Your</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">age</SPAN></FONT><FONT FACE="Courier New, serif">?</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">30</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">Your</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">age</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">is</SPAN></FONT><FONT FACE="Courier New, serif">30</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Чего-то
не хватает? Правильно, пробела после
слова “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">is</SPAN></FONT><FONT FACE="Arial, serif">”.
Как вы уже увидели из примера выше, мы
можем складывать строки. С точки зрения
математики это не имеет никакого смысла,
зато строки в памяти компьютера
объединяются. Запустите такой код в
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">REPL</SPAN></FONT><FONT FACE="Arial, serif">
или в виде программы:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&quot;My
name is &quot; + &quot;Roman&quot; + &quot; and my age is &quot; +
&quot;30&quot;</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Результат:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&quot;My
name is Roman and my age is 30&quot;</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Попробуйте
теперь сложить два числа в виде строк
следующим образом, постарайтесь понять
каким будет ответ:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&quot;100&quot;
+ &quot;500&quot;</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Спойлер:
ответ будет “100500”. Другими словами,
если число представлено в виде строки
(взято в кавычки), Руби будет понимать
это число как строку. Если бы напишем
`100 + 500` (не берем в двойные кавычки каждое
число), то результат будет 600. </FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Оказывается,
что строки можно не только складывать,
но и умножать. Только строку нужно
умножать на число, в примере ниже нельзя
взять второе число в кавычки:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&quot;10&quot;
* 5</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Courier New, serif">=&gt;
&quot;1010101010&quot;</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Получили
число 10 повторенное 5 раз. Если мы поставим
после 10 пробел, результат будет более
наглядным:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&quot;10
&quot; * 5</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Courier New, serif">=&gt;
&quot;10 10 10 10 10 &quot;</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Как
было уже замечено, `10 ` это всего лишь
строка, можно подставить любую строку:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&quot;Я
молодец! &quot; * 10</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Courier New, serif">=&gt;
&quot;Я молодец! Я молодец! Я молодец! Я
молодец! Я молодец! Я молодец! Я молодец!
Я молодец! Я молодец! Я молодец! &quot;</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">На
практике приходится часто умножать `=`
или `-` на 80 (стандартная ширина экрана
в символах, принятая за стандарт), чтобы
визуально отличить одну часть от другой.
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Например:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts
&quot;Your age?&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">age
= gets</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts
&quot;=&quot; * 80</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts
&quot;Your age is &quot; + age</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Результат:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">Your
age?</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">30</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">======================================================================</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">Your
age is 30</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_4avu5av2xnsw"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt">Типы
данных</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Мы
уже разобрались, что две строки можно
складывать с помощью `+`. Также мы знаем,
что строку можно умножить на число. С
помощью этих экспериментов мы выяснили,
что существует как минимум два типа
данных: строка и число. Причем, само
число, взятое в кавычки это строка.
Давайте посмотрим на то, как руби понимает
что такое число, а что такое строка:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
irb</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&gt;
&quot;blabla&quot;.class</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Courier New, serif"><SPAN LANG="en">=&gt;
String</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&gt;
&quot;123&quot;.class</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Courier New, serif"><SPAN LANG="en">=&gt;
String</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;
123.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">class</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Courier New, serif">=&gt;
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">Integer</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Говорят,
что все в руби - объект (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Object</SPAN></FONT><FONT FACE="Arial, serif">).
В результате любой операции получается
объект. Каждый объект “реализует метод”
`</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">class</SPAN></FONT><FONT FACE="Arial, serif">`.
Выражение “реализует метод” означает,
что какой-то программист, разработчик
языка руби, сделал специальную небольшую
подпрограмму, которую мы с вами можем
запускать, если знаем имя этой подпрограммы.
Чтобы вызвать подпрограмму для какого-либо
объекта, нужно ввести точку и написать
имя этой подпрограммы.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">В
нашем случае имя этой подпрограммы
(говорят “имя метода” или “имя функции”,
метод и функция - синонимы) это `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">class</SPAN></FONT><FONT FACE="Arial, serif">`.
Кстати, не надо путать имя метода `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">class</SPAN></FONT><FONT FACE="Arial, serif">`
с ключевым словом `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">class</SPAN></FONT><FONT FACE="Arial, serif">`,
которое определяет т.н. класс - мы будем
проходить это позднее. Если бы в реальной
жизни у объектов были методы, то мы бы
с вами могли увидеть следующее:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Яблоко.разрезать</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Яблоко.количество_семян</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Яблоко.количество_червей</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Река.температура_воды</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Река.количество_рыбы</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">И
так далее. Так вот, в каждом объекте
определен метод `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">class</SPAN></FONT><FONT FACE="Arial, serif">`:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">Object</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">class</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">В
нашем случае `123` (без кавычек) и `&quot;</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">blabla</SPAN></FONT><FONT FACE="Arial, serif">&quot;`
это объекты. Тип объекта `123` - </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Integer</SPAN></FONT><FONT FACE="Arial, serif">
(целое число). Тип объекта `&quot;</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">blabla</SPAN></FONT><FONT FACE="Arial, serif">&quot;`
- </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">String</SPAN></FONT><FONT FACE="Arial, serif">
(строка). Тип любого объекта можно
получить добавив в конце `.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">class</SPAN></FONT><FONT FACE="Arial, serif">`.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Конечно,
для каждого объекта существует
документация о том, какие методы
поддерживаются. Настоятельно рекомендуется
смотреть документацию для каждого типа
с которым вы работаете. </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Пример
документации для разных типов:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><A HREF="https://ruby-doc.org/core-2.5.1/Object.html"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https://ruby-doc.org/core-2.5.1/Object.html</U></SPAN></FONT></FONT></A><FONT FACE="Arial, serif"><SPAN LANG="en">
	- тип Object</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><A HREF="https://ruby-doc.org/core-2.5.1/String.html"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https://ruby-doc.org/core-2.5.1/String.html</U></SPAN></FONT></FONT></A><FONT FACE="Arial, serif"><SPAN LANG="en">
	- тип String</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><A HREF="https://ruby-doc.org/core-2.5.1/Integer.html"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https://ruby-doc.org/core-2.5.1/Integer.html</U></SPAN></FONT></FONT></A><FONT FACE="Arial, serif"><SPAN LANG="en">
	- тип Integer</SPAN></FONT></P>
</UL>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Документацию
легко найти по поисковому запросу,
например “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ruby</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">object</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">docs</SPAN></FONT><FONT FACE="Arial, serif">”
или “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ruby</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">string</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">docs</SPAN></FONT><FONT FACE="Arial, serif">”.
В документации описано все, что мы можем
делать с объектом. Это настоящая кладезь
информации, документация должна стать
вашим лучшим другом. Программист, который
не поглядывает в официальную документацию
по мере разработки и обучения, вряд ли
добьется успеха. В документации указаны
все возможные операции, которые можно
выполнять с тем или иным объектом.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Пример
документации к `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Object</SPAN></FONT><FONT FACE="Arial, serif">.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">class</SPAN></FONT><FONT FACE="Arial, serif">`:
</FONT><A HREF="https://ruby-doc.org/core-2.5.1/Object.html#method-i-class"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>://</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>ruby</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>-</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>doc</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>.</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>org</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>/</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>core</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>-2.5.1/</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>Object</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>.</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>html</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>#</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>method</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>-</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>i</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>-</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>class</U></SPAN></FONT></FONT></A></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">А
вот про пример умножения строки на
число: </FONT><A HREF="https://ruby-doc.org/core-2.5.1/String.html#method-i-2A"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>://</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>ruby</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>-</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>doc</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>.</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>org</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>/</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>core</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>-2.5.1/</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>String</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>.</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>html</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>#</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>method</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>-</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>i</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>-2</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>A</U></SPAN></FONT></FONT></A><FONT FACE="Arial, serif">
- в документации дан любопытный пример
умножения строки на ноль (возвращается
пустая строка).</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Существуют
и другие типы данных, мы рассмотрим их
в этой книге в следующих главах.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
Узнайте какой тип данных у `</FONT><FONT FACE="Courier New, serif">&quot;&quot;</FONT><FONT FACE="Arial, serif">`.
А какой тип данных у `0` (ноль)? Какой тип
данных у минус единицы? Какой тип данных
у округленного числа “Пи” `3.14`?</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
Известно, что метод `.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">class</SPAN></FONT><FONT FACE="Arial, serif">`
для любого объекта возвращает результат.
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">REPL</SPAN></FONT><FONT FACE="Arial, serif">
читает (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">read</SPAN></FONT><FONT FACE="Arial, serif">),
выполняет (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">evaluate</SPAN></FONT><FONT FACE="Arial, serif">)
и </FONT><FONT FACE="Arial, serif"><B>печатает</B></FONT><FONT FACE="Arial, serif">
(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">print</SPAN></FONT><FONT FACE="Arial, serif">)
этот результат на экран. Но если все в
руби объект, то какого типа возвращается
сам результат, когда мы пишем `.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">class</SPAN></FONT><FONT FACE="Arial, serif">`?
Вот этот метод `.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">class</SPAN></FONT><FONT FACE="Arial, serif">`
- результат какого типа он возвращает?
Видно ли это из документации? Проверьте.
Попробуйте написать `123.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">class</SPAN></FONT><FONT FACE="Arial, serif">.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">class</SPAN></FONT><FONT FACE="Arial, serif">`
- первое выражение `123.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">class</SPAN></FONT><FONT FACE="Arial, serif">`
вернет результат, а следующий `.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">class</SPAN></FONT><FONT FACE="Arial, serif">`
вычислит тип этого результата.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_e7o1tlnl1jsu"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt">Докажем,
что все в руби - объект</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Известно,
что `123.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">class</SPAN></FONT><FONT FACE="Arial, serif">`
возвращает </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Integer</SPAN></FONT><FONT FACE="Arial, serif">,
`&quot;</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">blabla</SPAN></FONT><FONT FACE="Arial, serif">&quot;.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">class</SPAN></FONT><FONT FACE="Arial, serif">`
возвращает </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">String</SPAN></FONT><FONT FACE="Arial, serif">.
Но у объекта (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Object</SPAN></FONT><FONT FACE="Arial, serif">)
существует также метод `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">is</SPAN></FONT><FONT FACE="Arial, serif">_</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">a</SPAN></FONT><FONT FACE="Arial, serif">?`,
который возвращает истину или ложь,
если передать определенный параметр в
этот метод:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">irb</SPAN></FONT></P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;
123.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">is</SPAN></FONT><FONT FACE="Courier New, serif">_</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">a</SPAN></FONT><FONT FACE="Courier New, serif">?(</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">Integer</SPAN></FONT><FONT FACE="Courier New, serif">)</FONT></P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Courier New, serif">=&gt;
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">true</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">В
примере выше для объекта `123` мы вызвали
метод `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">is</SPAN></FONT><FONT FACE="Arial, serif">_</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">a</SPAN></FONT><FONT FACE="Arial, serif">?`
с параметром </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Integer</SPAN></FONT><FONT FACE="Arial, serif">.
Метод вернул результат </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">true</SPAN></FONT><FONT FACE="Arial, serif">
(истина). Т.е. 123 является типом </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Integer</SPAN></FONT><FONT FACE="Arial, serif">
(целое число). Если мы проверим, является
ли `123` строкой, то ответ будет “ложь”:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">irb</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;
123.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">is</SPAN></FONT><FONT FACE="Courier New, serif">_</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">a</SPAN></FONT><FONT FACE="Courier New, serif">?(</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">String</SPAN></FONT><FONT FACE="Courier New, serif">)</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Courier New, serif">=&gt;
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">false</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Но
для строки ответ будет “истина”:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
irb</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&gt;
&quot;blabla&quot;.is_a?(String)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Courier New, serif">=&gt;
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">true</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Кстати,
“</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">is</SPAN></FONT><FONT FACE="Arial, serif">_</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">a</SPAN></FONT><FONT FACE="Arial, serif">?”
не какое-то магическое выражение, а
“калька” с английского языка. Мы как
бы спрашиваем “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><B>Is</B></SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">this</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">object</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><B>a</B></SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">string</SPAN></FONT><FONT FACE="Arial, serif"><B>?</B></FONT><FONT FACE="Arial, serif">”
(является ли этот объект строкой?).</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Выше
мы убедились, что 123 это число, а “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">blabla</SPAN></FONT><FONT FACE="Arial, serif">”
это строка. Но является ли число и строка
объектом? </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Давайте
проверим:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
irb</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&gt;
123.is_a?(Object)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Courier New, serif"><SPAN LANG="en">=&gt;
true</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&gt;
&quot;blabla&quot;.is_a?(Object)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Courier New, serif">=&gt;
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">true</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Оказывается,
что да! Число и строка являются объектами.
123 это одновременно число и объект.
“</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">blabla</SPAN></FONT><FONT FACE="Arial, serif">”
это одновременно строка и объект.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Что
такое объект - мы разберем дальше. На
этом этапе нет необходимости запоминать
метод “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">is</SPAN></FONT><FONT FACE="Arial, serif">_</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">a</SPAN></FONT><FONT FACE="Arial, serif">?”,
принцип его работы, как правильно его
вызывать и что он возвращает (говорят
- “сигнатуру” или “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">API</SPAN></FONT><FONT FACE="Arial, serif">”).
Наверное, стоит в уме держать только
`.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">class</SPAN></FONT><FONT FACE="Arial, serif">`
- возможность проверить, какого </FONT><FONT FACE="Arial, serif"><I>типа</I></FONT><FONT FACE="Arial, serif">
результат выполнения того или иного
действия может пригодится в будущем.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_himzpwyr55ul"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt"><SPAN LANG="en">Приведение
типов</SPAN></FONT></FONT></P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">(англ:
converting types или type casting)</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Давайте
попробуем написать программу, которая
считает, сколько вам месяцев. Мы будем
вводить возраст человека, а программа
будет считать этот возраст в месяцах.
Учитывая то, что мы прошли в предыдущих
главах, вырисовывается такой код:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts
&quot;Your age?&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">age
= gets</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">age_months
= age * 12</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts
&quot;Your age is &quot; + age_months</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Выше
мы объявили переменную </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">age</SPAN></FONT><FONT FACE="Arial, serif">_</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">months</SPAN></FONT><FONT FACE="Arial, serif">,
в которую записываем значение переменной
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">age</SPAN></FONT><FONT FACE="Arial, serif">,
умноженное на 12. Сможете ли вы заметить,
что в этой программе не так?</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Результат
работы программы:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">Your</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">age</SPAN></FONT><FONT FACE="Courier New, serif">?</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">30</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">Your
age is 30</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">30</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">30</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">30</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">30</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">30</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">30</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">30</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">30</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">30</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">30</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">30</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">О-оу!
</SPAN></FONT><FONT FACE="Arial, serif">В программу
закралась ошибка. Оказывается, что мы
умножаем строку на число. Попробуйте
запустить программу еще раз и ввести
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">blabla</SPAN></FONT><FONT FACE="Arial, serif">:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">Your</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">age</SPAN></FONT><FONT FACE="Courier New, serif">?</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">blabla</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">Your
age is blabla</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">blabla</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">blabla</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">blabla</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">blabla</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">blabla</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">blabla</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">blabla</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">blabla</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">blabla</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">blabla</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">blabla</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Переменная
age имеет тип String. </SPAN></FONT><FONT FACE="Arial, serif">И
когда мы умножаем </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">String</SPAN></FONT><FONT FACE="Arial, serif">
на </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Integer</SPAN></FONT><FONT FACE="Arial, serif">,
мы получаем длинную строку, которую мы
повторили с помощью нашей программы 12
раз. Чтобы программа работала правильно,
нам нужно умножать </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Integer</SPAN></FONT><FONT FACE="Arial, serif">
на </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Integer</SPAN></FONT><FONT FACE="Arial, serif">
(число на число). Мы уже делали это, когда
считали количество миллисекунд в сутках
- тогда у нас все работало правильно.
Чтобы программа работала правильно в
этот раз, нужно чтобы вместо </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">String</SPAN></FONT><FONT FACE="Arial, serif">
был тип </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Integer</SPAN></FONT><FONT FACE="Arial, serif">.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Что
мы можем тут сделать? Если посмотреть
документацию к функции (или методу, не
забыли что функция и метод это синонимы?)
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">gets</SPAN></FONT><FONT FACE="Arial, serif">,
то мы увидим, что </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">gets</SPAN></FONT><FONT FACE="Arial, serif">
возвращает тип </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">String</SPAN></FONT><FONT FACE="Arial, serif">.
Оно и понятно, </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">gets</SPAN></FONT><FONT FACE="Arial, serif">
это сокращение от “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">get</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">string</SPAN></FONT><FONT FACE="Arial, serif">”.
Все что нам нужно - это функция “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">get</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">integer</SPAN></FONT><FONT FACE="Arial, serif">”,
если мы верим в принцип наименьшего
сюрприза и предсказуемость языка руби,
то это будет “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">geti</SPAN></FONT><FONT FACE="Arial, serif">”:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
irb</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">geti</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">NameError
(undefined local variable or method `geti' for main:Object</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">Did
you mean?  gets)</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Упс!
</SPAN></FONT><FONT FACE="Arial, serif">Не получилось. Но
у нас была честная попытка. Такого метода
не существует, но что-то нам подсказывает,
что он может появиться в будущем. Будем
думать дальше, как же нам исправить нашу
программу?</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">В
языке </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">
(про который каждый руби-программист
должен немного думать) существует способ
“превратить” строку в число путем
умножения строки на единицу (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">node</SPAN></FONT><FONT FACE="Arial, serif">
ниже это интерпретатор </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">,
работает если у вас установлен </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Node</SPAN></FONT><FONT FACE="Arial, serif">.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">js</SPAN></FONT><FONT FACE="Arial, serif">):</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">node</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;
&quot;123&quot; * 1</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">123</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Получится
ли это проделать в руби?</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;
&quot;123&quot; * 1</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Courier New, serif">=&gt;
&quot;123&quot;</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;
(&quot;123&quot; * 1).</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">class</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Courier New, serif">=&gt;
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">String</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Не
получилось. Значит должны быть другие
способы. Открываем документацию класса
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">String</SPAN></FONT><FONT FACE="Arial, serif">
и видим целую серию методов, которые
начинаются со слова “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">to</SPAN></FONT><FONT FACE="Arial, serif">”
(от англ. </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">convert</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><B>to</B></SPAN></FONT><FONT FACE="Arial, serif">
- конвертировать </FONT><FONT FACE="Arial, serif"><B>в</B></FONT><FONT FACE="Arial, serif">...).
Среди этих методов есть прекрасный
метод “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">to</SPAN></FONT><FONT FACE="Arial, serif">_</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">i</SPAN></FONT><FONT FACE="Arial, serif">”,
который означает “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">to</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Integer</SPAN></FONT><FONT FACE="Arial, serif">”,
“в число”. Если бы мы записывали методы
по-русски, то название было бы “в_ч”.
Не очень очевидно, но видимо программистам
хотелось дать короткое название, ведь
функция конвертации строки в число
встречается довольно часто, и теперь
мы имеем `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">to</SPAN></FONT><FONT FACE="Arial, serif">_</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">i</SPAN></FONT><FONT FACE="Arial, serif">`
вместо `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">to</SPAN></FONT><FONT FACE="Arial, serif">_</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">integer</SPAN></FONT><FONT FACE="Arial, serif">`.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Т.е.
для преобразования строки в число будем
использовать функцию </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">to</SPAN></FONT><FONT FACE="Arial, serif">_</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">i</SPAN></FONT><FONT FACE="Arial, serif">:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&gt;
&quot;123&quot;.to_i</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Courier New, serif"><SPAN LANG="en">=&gt;
123</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&gt;
&quot;123&quot;.to_i.class</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Courier New, serif"><SPAN LANG="en">=&gt;
Integer</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Кстати,
существует аналогичная функция у класса
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Integer</SPAN></FONT><FONT FACE="Arial, serif">
для преобразования числа (и других
типов) в строку: </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">to</SPAN></FONT><FONT FACE="Arial, serif">_</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">s</SPAN></FONT><FONT FACE="Arial, serif">
(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">to</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">string</SPAN></FONT><FONT FACE="Arial, serif">).</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Попробуем
переписать нашу программу для подсчета
возраста в месяцах:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts
&quot;Your age?&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">age
= gets</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">age_months
= age.to_i * 12</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts
&quot;Your age is &quot; + age_months</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Снова
получаем ошибку, да что же это такое!</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">app.rb:4:in
`+': no implicit conversion of Integer into String (TypeError)</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">В
этот раз ошибка на четвертой строке. Но
ошибка уже нам понятна - не можем
преобразовать число в строку. Т.е. в
четвертой строке мы складываем строку
и число. Умножать строку на число можно,
а складывать почему-то нельзя. Ну ничего
страшного, попробуем сделать “приведение
типов” еще раз:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
&quot;</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">Your</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">age</SPAN></FONT><FONT FACE="Courier New, serif">?&quot;</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">age
= gets</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">age_months
= age.to_i * 12</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts
&quot;Your age is &quot; + age_months.to_s</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Попробуем
запустить:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">Your
age?</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">30</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">Your
age is 360</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Заработало!
Существует несколько других способов
написать эту программу и все они
правильные. Например, можно “привести
к типу </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Integer</SPAN></FONT><FONT FACE="Arial, serif">”
на второй строке (третью оставить без
изменений):</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts
&quot;Your age?&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">age
= gets.to_i</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">age_months
= age * 12</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts
&quot;Your age is &quot; + age_months.to_s</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Или
можно переопределить значение переменной
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">age</SPAN></FONT><FONT FACE="Arial, serif">,
добавив одну строку:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts
&quot;Your age?&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">age
= gets</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">age
= age.to_i</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">age_months
= age * 12</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts
&quot;Your age is &quot; + age_months.to_s</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Или
можно вообще обойтись без переменной
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">age</SPAN></FONT><FONT FACE="Arial, serif">_</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">months</SPAN></FONT><FONT FACE="Arial, serif">.
Попробуйте написать такую программу
самостоятельно.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_tur5x2tdytgi"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt">Дробные
числа</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Рассмотрим
некоторые популярные приведения типов,
с которыми мы уже столкнулись. Тот или
иной объект может реализовывать один
или несколько следующих методов:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">`.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">to</SPAN></FONT><FONT FACE="Arial, serif">_</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">i</SPAN></FONT><FONT FACE="Arial, serif">`
	- перевод чего-либо в число (например,
	строки)</FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">`.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">to</SPAN></FONT><FONT FACE="Arial, serif">_</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">s</SPAN></FONT><FONT FACE="Arial, serif">`
	- перевод чего-либо в строку (например,
	числа)</FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">`.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">to</SPAN></FONT><FONT FACE="Arial, serif">_</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">f</SPAN></FONT><FONT FACE="Arial, serif">`
	- перевод чего-либо в дробь (например,
	перевод строки в дробь)</FONT></P>
</UL>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Запустим
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">REPL</SPAN></FONT><FONT FACE="Arial, serif">
чтобы посмотреть что такое дробь:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">irb</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;
3.14.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">class</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Courier New, serif">=&gt;
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">Float</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Мы
ввели число 3,14 (обратите внимание - через
точку). А тип, который представляет
дробь, называется </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Float</SPAN></FONT><FONT FACE="Arial, serif">.
Мы также “имеем право” представить
любое целое число не только в виде
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Integer</SPAN></FONT><FONT FACE="Arial, serif">,
но и в виде </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Float</SPAN></FONT><FONT FACE="Arial, serif">:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
irb</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&gt;
123.class</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Courier New, serif"><SPAN LANG="en">=&gt;
Integer</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&gt;
123.0.class</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Courier New, serif"><SPAN LANG="en">=&gt;
Float</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Так
зачем нужен тип Float? </SPAN></FONT><FONT FACE="Arial, serif">Затем
же, зачем нужна и сама дробь - в основном
для приблизительных математических
расчетов (для более точных есть тип
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">BigDecimal</SPAN></FONT><FONT FACE="Arial, serif">,
альтернативное “более точное”
представление дроби, которое работает
несколько медленнее, но точнее, чем
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Float</SPAN></FONT><FONT FACE="Arial, serif">).
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Посчитаем
30% налог на вводимую зарплату:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts
&quot;Your salary?&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">salary
= gets.to_i</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">tax_rate
= 0.3</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts
&quot;Tax:&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts
salary * tax_rate</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Запустите
эту программу и проверьте как она
работает.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_1zxv14xc47iw"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt">Интерполяция
строк</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Читаемость
программы можно значительно улучшить,
добавив интерполяцию строк:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts
&quot;Your age?&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">age
= gets.to_i</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">age_months
= age * 12</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts
&quot;Your age is #{age_months}&quot;</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">В
последней строке нам не пришлось
заниматься приведением типов. Каждый
объект в руби может быть преобразован
в строку (см.метод </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">to</SPAN></FONT><FONT FACE="Arial, serif">_</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">s</SPAN></FONT><FONT FACE="Arial, serif">
у класса </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Object</SPAN></FONT><FONT FACE="Arial, serif">).
Поэтому существует универсальный
синтаксис для любого типа - интерполяция.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Хитрость
интерполяции в том, что вычисляется
выражение внутри фигурных скобок и
результат вычисления приводится к
строке. Мы попробовали одно выражение
`</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">age</SPAN></FONT><FONT FACE="Arial, serif">_</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">months</SPAN></FONT><FONT FACE="Arial, serif">`,
результат этого выражения - значение
переменной. Но мы можем изменить нашу
программу и попробовать интерполяцию
поинтереснее:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts
&quot;Your age?&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">age
= gets.to_i</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts
&quot;Your age is #{age * 12}&quot;</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Нет
необходимости в создании еще одной
переменной, мы можем посчитать выражение
прямо внутри фигурных скобок. Результат
работы программы будет одинаковым.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">На
первый взгляд может показаться, что
интерполяция - незначительное улучшение.
Даже в старых версиях языка </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">
можно было пользоваться простым знаком
плюс:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
node</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&gt;
&quot;Your age is &quot; + 30 * 12</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">'Your
age is 360'</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Но
в новой версии </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">
(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ES</SPAN></FONT><FONT FACE="Arial, serif">
6 и выше) тоже появилась интерполяция
строк, несмотря на то, что она в общем-то
и не нужна. Просто эта функциональность
значительно облегчает работу программиста:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">node</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;
`</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">Your</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">age</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">is</SPAN></FONT><FONT FACE="Courier New, serif">
${30 * 12}`</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">'</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">Your</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">age</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">is</SPAN></FONT><FONT FACE="Courier New, serif">
360'</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Обратите
внимание, что в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">
для интерполяции используются обратные
кавычки (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">backticks</SPAN></FONT><FONT FACE="Arial, serif">),
а в руби - двойные.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Интерполяция
строк полезна, когда нам приходится
иметь дело с несколькими переменными.
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Рассмотрим
программу:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts
&quot;Your name?&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">name
= gets</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts
&quot;Your age?&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">age
= gets.to_i</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts
&quot;Your city?&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">city
= gets</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts
&quot;=&quot; * 80</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts
&quot;You are #{name}, your age in months is #{age * 12}, and you are
from #{city}&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Результат
работы программы:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">Your</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">name</SPAN></FONT><FONT FACE="Courier New, serif">?</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">Roman</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">Your
age?</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">30</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">Your
city?</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">San
Francisco</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">======================================================================</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">You
are Roman</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">,
your age in months is 360, and you are from San Francisco</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Почти
получилось. Мы использовали интерполяцию
строк и после визуального разделителя
вывели все с помощью одной строки.
Однако, что-то пошло не так. Мы видим,
что после слова “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Roman</SPAN></FONT><FONT FACE="Arial, serif">”
идет перенос строки. В чем же дело? Дело
в том, что функция </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">gets</SPAN></FONT><FONT FACE="Arial, serif">
возвращает строку с символом “\</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">n</SPAN></FONT><FONT FACE="Arial, serif">”.
На самом деле это один символ с порядковым
номером 10 в стандартной таблице всех
символов. Была договоренность, что если
этот символ выводится на консоль, то
последующий вывод будет начинаться с
новой строки. </FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Давайте
докажем, что </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">gets</SPAN></FONT><FONT FACE="Arial, serif">
возвращает не просто строку. Выполним
в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">REPL</SPAN></FONT><FONT FACE="Arial, serif">:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">irb</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">x</SPAN></FONT><FONT FACE="Courier New, serif">
= </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">gets</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">Hi</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Courier New, serif"><SPAN LANG="en">=&gt;
&quot;Hi\n&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&gt;
x.class</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Courier New, serif"><SPAN LANG="en">=&gt;
String</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">x</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">size</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Courier New, serif">=&gt;
3</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```<BR><BR>Мы
попробовали присвоить переменной </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">x</SPAN></FONT><FONT FACE="Arial, serif">
значение </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">gets</SPAN></FONT><FONT FACE="Arial, serif">.
Т.к. </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">REPL</SPAN></FONT><FONT FACE="Arial, serif">
печатает результат выражения, то мы
видим “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Hi</SPAN></FONT><FONT FACE="Arial, serif">\</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">n</SPAN></FONT><FONT FACE="Arial, serif">”.
Т.е. </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">REPL</SPAN></FONT><FONT FACE="Arial, serif">
уже нам говорит о том, что в конце стоит
управляющий символ. Далее мы проверили
тип с помощью `.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">class</SPAN></FONT><FONT FACE="Arial, serif">`
- строка. И потом обратились к методу
`.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">size</SPAN></FONT><FONT FACE="Arial, serif">`,
который возвращает длину строки. Несмотря
на то, что мы ввели строку из двух
символов, размер строки равен трем.
Потому что оператор </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">gets</SPAN></FONT><FONT FACE="Arial, serif">
“записал” в строку еще управляющий
символ перевода строки.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Когда
мы делали интерполяцию выше, этот перевод
никуда не делся и добавился в результат
вычисления строки. Поэтому в нас произошел
переход на следующую строку и вывод
получился неаккуратным. </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Исправим
это недоразумение:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts
&quot;Your name?&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">name
= gets.chomp</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts
&quot;Your age?&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">age
= gets.to_i</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts
&quot;Your city?&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">city
= gets.chomp</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts
&quot;=&quot; * 80</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts
&quot;You are #{name}, your age in months is #{age * 12}, and you are
from #{city}&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Проверим
работу программы:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```<BR></FONT><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">ruby</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">app</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">rb</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">Your
name?</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">Roman</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">Your
age?</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">30</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">Your
city?</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">San
Francisco</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">======================================================================</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">You
are Roman, your age in months is 360, and you are from San Francisco</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Заработало!
Метод `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">chomp</SPAN></FONT><FONT FACE="Arial, serif">`
класса </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">String</SPAN></FONT><FONT FACE="Arial, serif">
отрезает ненужный нам перевод строки.
Важно отметить, что интерполяция строк
работает только с двойными кавычками.
Одинарные кавычки могут использоваться
наравне с двойными за тем исключением,
что интерполяция строк в них намеренно
не поддерживается. Более того, инструменты
статического анализа кода (например,
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Rubocop</SPAN></FONT><FONT FACE="Arial, serif">)
выводят предупреждение, если вы
используете двойные кавычки и не
используете интерполяцию. В дальнейшем
мы будем использовать одинарные кавычки,
если интерполяция строк не нужна.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Задание
1: посмотрите документацию к методу
“</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">chomp</SPAN></FONT><FONT FACE="Arial, serif">”
и “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">size</SPAN></FONT><FONT FACE="Arial, serif">”
класса </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">String</SPAN></FONT><FONT FACE="Arial, serif">.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Задание
2: напишите программу для подсчета
годовой зарплаты. Пользователь вводит
размер заработной платы в месяц, а
программа выводит размер заработной
платы в год. Допустим, что пользователь
каждый месяц хочет откладывать 15% своей
зарплаты. Измените программу, чтобы она
выводила не только размер заработной
платы, но и размер отложенных за год
средств. Измените программу, чтобы она
выводила размер отложенных средств за
5 лет.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> 
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_1w0jax2waarz"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt"><SPAN LANG="en">Bang</SPAN></FONT></FONT><FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt">!</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Есть
одна любопытная деталь в языке руби на
которой стоит остановиться отдельно,
это </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">bang</SPAN></FONT><FONT FACE="Arial, serif">,
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">exclamation</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">mark</SPAN></FONT><FONT FACE="Arial, serif">,
восклицательный знак или просто `!` в
конце какого-либо метода. Рассмотрим
программу (некоторые фразы в программе
могут быть на русском языке, который
по-умолчанию плохо поддерживается в
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Windows</SPAN></FONT><FONT FACE="Arial, serif">,
мы еще раз рекомендуем вам переходить
на </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Linux</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Mint</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Cinnamon</SPAN></FONT><FONT FACE="Arial, serif">
или </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">MacOS</SPAN></FONT><FONT FACE="Arial, serif">):</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">x</SPAN></FONT><FONT FACE="Courier New, serif">
= 'Я МОЛОДЕЦ'</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">x</SPAN></FONT><FONT FACE="Courier New, serif">
= </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">x</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">downcase</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">x</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Вывод
программы:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">ruby</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">app</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">rb</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">я
молодец</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Мы
объявили переменную и присвоили ей
значение “Я МОЛОДЕЦ”, заглавными
буквами. На второй строчке мы переопределили
переменную, присвоив ей значение
“</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">x</SPAN></FONT><FONT FACE="Arial, serif">.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">downcase</SPAN></FONT><FONT FACE="Arial, serif">”.
Т.к. переменная “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">x</SPAN></FONT><FONT FACE="Arial, serif">”
имеет тип </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">String</SPAN></FONT><FONT FACE="Arial, serif">
(тип “строка”, этот тип приобретают
все переменные, когда мы присваиваем
им значение в кавычках), то мы имеем
право вызвать метод “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">downcase</SPAN></FONT><FONT FACE="Arial, serif">”
для типа </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">String</SPAN></FONT><FONT FACE="Arial, serif">
(документация
</FONT><A HREF="https://ruby-doc.org/core-2.5.1/String.html#method-i-downcase"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>://</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>ruby</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>-</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>doc</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>.</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>org</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>/</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>core</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>-2.5.1/</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>String</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>.</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>html</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>#</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>method</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>-</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>i</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>-</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>downcase</U></SPAN></FONT></FONT></A><FONT FACE="Arial, serif">).
Этот метод преобразует заглавные буквы
в строчные, и мы видим на экране вывод
маленькими буквами.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Больше
всего нас интересует вторая строка “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">x</SPAN></FONT><FONT FACE="Arial, serif">
= </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">x</SPAN></FONT><FONT FACE="Arial, serif">.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">downcase</SPAN></FONT><FONT FACE="Arial, serif">”.
В языке руби было принято соглашение
для удобства, если требуется изменить
значение самой переменной, не обязательно
ее “переопределять” вот таким образом.
Можно написать “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">x</SPAN></FONT><FONT FACE="Arial, serif">.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">downcase</SPAN></FONT><FONT FACE="Arial, serif">!”
и руби будет знать, что операцию </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">downcase</SPAN></FONT><FONT FACE="Arial, serif">
нужно проделать не “просто так” и
вернуть результат, а проделать заменить
значение самой переменной.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Не
для каждого метода существует эта
функциональность, в каждом отдельном
случае требуется смотреть документацию.
В руби вызов метода с восклицательным
знаком считается “опасным”, т.к. меняется
состояние (значение) объекта. Что же тут
опасного - скажет читатель, ведь мы
просто меняем значение! Но не все так
просто.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Рассмотрим
такую программу (без каких-либо хитрых
трюков, просто попробуйте догадаться,
что будет на экране):</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">a
= 'HI'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">b
= a</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">a
= 'xxx'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">b</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">У
нас две переменных: </FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>a</I></SPAN></FONT><FONT FACE="Arial, serif">
и </FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>b</I></SPAN></FONT><FONT FACE="Arial, serif">.
На второй строке переменной </FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>b</I></SPAN></FONT><FONT FACE="Arial, serif">
присваиваем значение </FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>a</I></SPAN></FONT><FONT FACE="Arial, serif">.
Т.е. переменная </FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>b</I></SPAN></FONT><FONT FACE="Arial, serif">
приобретает значение “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">HI</SPAN></FONT><FONT FACE="Arial, serif">”.
Далее мы “забиваем” значение переменной
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>a</I></SPAN></FONT><FONT FACE="Arial, serif">
иксами (потому что можем, далее будет
понятно почему). Что будет на экране? Да
ничего необычного, переменную </FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>b</I></SPAN></FONT><FONT FACE="Arial, serif">
мы не трогали и мы увидим “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">HI</SPAN></FONT><FONT FACE="Arial, serif">”.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Теперь
перепишем программу немного иначе:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">a
= 'HI'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">b
= a</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">a.downcase!</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">b</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Почти
то же самое, отличается только третья
строка. С переменной </FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>b</I></SPAN></FONT><FONT FACE="Arial, serif">
мы ничего не делали. Но зато сделали с
переменной </FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>a</I></SPAN></FONT><FONT FACE="Arial, serif">
“опасную операцию”. Что будет выведено
на экран? Оказывается, что “опасная
операция” поменяет значение </FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>b</I></SPAN></FONT><FONT FACE="Arial, serif">.
Попробуйте сами, вы увидите “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">hi</SPAN></FONT><FONT FACE="Arial, serif">”.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Объяснение
этому кроется в том, как именно работает
язык руби. Для начинающего вряд ли есть
большой смысл вдаваться в эти детали.
Вкратце лишь заметим, что каждая
переменная - это просто адрес (число от
1 до какого-то большого значения, например
123456789). А вот само значение находится
где-то далеко в памяти по этому адресу.
</FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Аналогия
может быть с квартирным домом. В
многоквартирном доме висит несколько
звонков, у каждого звонка свой номер.
Когда мы создаем новую переменную, то
мы создаем новый звонок, который ведет
к какой-то новой квартире. Когда
присваиваем “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">b</SPAN></FONT><FONT FACE="Arial, serif">
= </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">a</SPAN></FONT><FONT FACE="Arial, serif">”,
то новый звонок </FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>b</I></SPAN></FONT><FONT FACE="Arial, serif">
ведет к той же самой квартире и все
работает. Но когда мы выполняем “опасную
операцию”, то мы меняем не звонки, а
содержимое самой квартиры.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">В
методе с восклицательным знаком нет
ничего магического. Когда мы научимся
создавать свои классы и объекты, вы сами
сможете написать свой </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">bang</SPAN></FONT><FONT FACE="Arial, serif">-метод.
В некоторых популярных фреймворках эти
методы также присутствуют. Например, в
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">rails</SPAN></FONT><FONT FACE="Arial, serif">
(веб-фреймворк, который мы будем изучать)
существует популярный метод “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">save</SPAN></FONT><FONT FACE="Arial, serif">!”,
который сохраняет объект. Восклицательный
знак “намекает” на то, что 1) операция
опасная, меняется внутреннее состояние
объекта 2) если что-то пойдет не так, то
может возникнуть исключение (об
исключениях мы еще поговорим ниже).</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
посмотрите какие еще существуют
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">bang</SPAN></FONT><FONT FACE="Arial, serif">-методы
у класса </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">String</SPAN></FONT><FONT FACE="Arial, serif">.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_523ahbsjew5q"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt">Блоки</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">В
руби существует свое собственное понятие
блока кода. Обычно, когда мы видим
какой-либо код, то мы можем визуально
разделить его на блоки или участки.
Например: первые три строки отвечают
за ввод информации, следующие пять строк
за вывод и так далее. Несмотря на то, что
мы можем называть эти участки кода
блоками кода с чисто визуальной точки
зрения, понятие “блок кода” в руби
имеет свое собственное значение.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Блок
кода (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">block</SPAN></FONT><FONT FACE="Arial, serif">,
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">code</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">block</SPAN></FONT><FONT FACE="Arial, serif">)
в руби это какая-то часть программы,
которую мы куда-то передаем для
последующего исполнения. Возникает
вопрос - а зачем передавать, когда блок
может исполниться вот тут сразу? На
самом деле передача блока кода может
иметь смысл в следующих случаях:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Код
	должен исполниться какое-то определенное
	количество раз. Скажем, мы хотим вывести
	“Спартак- чемпион!” 10 раз подряд. Вместо
	того, чтобы 10 раз писать </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Arial, serif">,
	мы можем написать </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Arial, serif">
	в одном блоке и передать этот блок для
	исполнения (далее вы узнаете как это
	делать). В этом случае программа может
	занимать одну строку вместо десяти.</FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Код
	может исполниться, а может и не исполниться
	при каких-либо обстоятельствах. Причем,
	решение об этом часто принимаем не мы,
	а “кто-нибудь еще”. Другими словами,
	если мы видим блок, то это еще не означает,
	что он будет обязательно исполнен.</FONT></P>
</UL>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Записать
блок в руби можно двумя способами:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">В
	несколько строк, между ключевыми словами
	`</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">do</SPAN></FONT><FONT FACE="Arial, serif">`
	и `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT><FONT FACE="Arial, serif">`</FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">В
	одну строку, между фигурными скобками:
	`{` и `}`</FONT></P>
</UL>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Результат
выполнения блока не зависит от того,
как вы записали блок. Фигурные скобки
предназначены для записи простых
конструкций. Между `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">do</SPAN></FONT><FONT FACE="Arial, serif">`
и `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT><FONT FACE="Arial, serif">`
мы можем записать подпрограммы (блоки
кода) в несколько строк. На самом деле
размер блока в строках кода неограничен.
Но обычно 1 файл в языках </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ruby</SPAN></FONT><FONT FACE="Arial, serif">
и </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">
не должен быть более 250 строк. Если
больше, то это индикатор того, что вы
что-то делаете не так.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Попробуем
записать простой блок и посмотрим на
результат выполнения:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">irb</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;
10.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">times</SPAN></FONT><FONT FACE="Courier New, serif">
{ </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
'Спартак - чемпион!' }</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Спартак
- чемпион!</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Спартак
- чемпион!</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Спартак
- чемпион!</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Спартак
- чемпион!</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Спартак
- чемпион!</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Спартак
- чемпион!</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Спартак
- чемпион!</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Спартак
- чемпион!</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Спартак
- чемпион!</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Спартак
- чемпион!</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```<BR></FONT><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Давайте
разберемся, что же тут произошло. Что
такое 10? С каким классом мы имеем дело?
Правильно, </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Integer</SPAN></FONT><FONT FACE="Arial, serif">.
Смотрим документацию по </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Integer</SPAN></FONT><FONT FACE="Arial, serif">
(запрос в гугле “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ruby</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Integer</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">docs</SPAN></FONT><FONT FACE="Arial, serif">”).
Далее ищем метод “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">times</SPAN></FONT><FONT FACE="Arial, serif">”
</FONT><A HREF="https://ruby-doc.org/core-2.5.1/Integer.html#method-i-times"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>://</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>ruby</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>-</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>doc</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>.</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>org</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>/</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>core</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>-2.5.1/</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>Integer</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>.</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>html</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>#</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>method</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>-</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>i</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>-</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>times</U></SPAN></FONT></FONT></A><FONT FACE="Arial, serif">.
Из документации видно, что метод
“принимает блок”. На самом деле блок
можно передать любому методу, даже тому,
который “не принимает блок”. Вопрос
лишь в том, будет ли этот блок запущен.
Метод </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">times</SPAN></FONT><FONT FACE="Arial, serif">
запускает блок.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Что
же мы имеем? Мы имеем объект “10”, который
знает о том, что он 10. Существует метод
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">times</SPAN></FONT><FONT FACE="Arial, serif">,
который написал какой-то программист
(разработчик языка), и этот метод запускает
переданный ему блок 10 раз.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Запомните,
что блок можно передать любому методу.
Вопрос лишь в том, что будет делать этот
метод с блоком. А что он будет делать -
нужно смотреть в документации. Например,
следующая конструкция полностью валидна:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```<BR>$
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">irb</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">gets</SPAN></FONT><FONT FACE="Arial, serif">
{ </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Arial, serif">
'</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">OK</SPAN></FONT><FONT FACE="Arial, serif">'
}</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Ошибки
не будет, но программа не имеет смысла.
“</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">gets</SPAN></FONT><FONT FACE="Arial, serif">”
не знает что делать с блоком и просто
его проигнорирует.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Попробуем
записать блок в несколько строк:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">10.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">times</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">do</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
&quot;Спартак - чемпион!&quot;</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
&quot;(и Динамо тоже)&quot;</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Запустите
программу и посмотрите что будет. Что
происходит в программе выше:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Есть
	объект “10” типа Integer.</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Мы
	вызываем метод “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">times</SPAN></FONT><FONT FACE="Arial, serif">”
	у этого объекта.</FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Мы
	передаем методу “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">times</SPAN></FONT><FONT FACE="Arial, serif">”
	блок кода, который состоит из двух
	строк.</FONT></P>
</UL>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">История
от автора: когда мне было около 8 лет, на
советском компьютере Корвет мой отец
показал мне первую программу на языке
Бейсик:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">10
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">PRINT</SPAN></FONT><FONT FACE="Courier New, serif">
&quot;Рома &quot;;</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">20
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">GOTO</SPAN></FONT><FONT FACE="Courier New, serif">
10</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Эта
программа в бесконечном цикле выводила
мое имя. Но из-за того, что не происходило
перехода на новую строку, возникал
любопытный визуальный эффект - экран
наполнялся словом “Рома” и “ехал
вбок”. Можете попробовать сделать то
же самое на языке руби:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">loop</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">do</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">print</SPAN></FONT><FONT FACE="Courier New, serif">
'Рома '</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Программа
выше выполняет операцию в бесконечном
цикле. Функция “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">print</SPAN></FONT><FONT FACE="Arial, serif">”
отличается от “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Arial, serif">”
тем, что не переводит курсор на следующую
строку.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_4f56o9l8381i"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt">Блоки
и параметры</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Тот
объект (ниже это объект “24”, класс
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Integer</SPAN></FONT><FONT FACE="Arial, serif">),
который запускает ваш блок, может
передать в ваш блок параметр. Что делать
с параметром - зависит уже от вас, т.е.
от вашего блока. Параметр в блоке - это
обычно какая-то полезная информация.
Вы можете использовать этот параметр
или игнорировать его. До сих пор мы
игнорировали параметр. Это происходило
неявно, параметр на самом деле передавался.
Давайте теперь сделаем с параметром
что-нибудь интересное.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Напишем
программу “бабушка”. Бабушка каждый
месяц будет принимать от нас определенную
сумму денег и складывать в свой сундучок
(надеемся, что бабушка потом отдаст нам
накопленные средства). Программа должна
выводить сколько денег бабушка накопит
в течение следующих 24 месяцев.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">sum
= 0</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">24.times
do |n|</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">sum
= sum + 500</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
&quot;Месяц #{</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">n</SPAN></FONT><FONT FACE="Courier New, serif">},
у бабушки в сундуке #{</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">sum</SPAN></FONT><FONT FACE="Courier New, serif">}&quot;</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Результат:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Месяц
0, у бабушки в сундуке 500</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Месяц
1, у бабушки в сундуке 1000</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Месяц
2, у бабушки в сундуке 1500</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Месяц
3, у бабушки в сундуке 2000</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">...<BR>Месяц
21, у бабушки в сундуке 11000</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Месяц
22, у бабушки в сундуке 11500</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Месяц
23, у бабушки в сундуке 12000</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Мы
получили не совсем предсказуемый
результат, хотя в общем-то программа
верна. По какой-то причине отсчет начался
с нуля! На самом деле все в порядке, за
исключением одного момента. То, что
отсчет начинается с нуля - ожидаемо. Это
описано в документации, и в этом нет
ничего плохого. Однако то, как мы назвали
переменную, может смутить некоторых
опытных программистов.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Дело
в том, что для натуральных чисел обычно
используют переменные </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">n</SPAN></FONT><FONT FACE="Arial, serif">,
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">m</SPAN></FONT><FONT FACE="Arial, serif">
и т.д. Если речь идет об индексе (а индекс
начинается с нуля), используют переменные
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">i</SPAN></FONT><FONT FACE="Arial, serif">,
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">j</SPAN></FONT><FONT FACE="Arial, serif">
и т.д. Нет большой ошибки если вы назвали
переменную неправильно - ведь это не
повлияет на результат. Однако, у кода
есть два читателя - компьютер и человек.
Человек - не только вы, но и кто-то другой,
и он будет смотреть на ваш код (если вы
пишете только для себя, то этот человек
- вы в будущем). Поэтому нужно писать как
можно более предсказуемый код. Тем более
в языке руби, который исповедует принцип
наименьшего сюрприза.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Мы
можем переписать нашу программу следующим
образом:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">sum
= 0</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">24.times
do |i|</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">sum
= sum + 500</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
&quot;Месяц #{</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">i</SPAN></FONT><FONT FACE="Courier New, serif">},
у бабушки в сундуке #{</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">sum</SPAN></FONT><FONT FACE="Courier New, serif">}&quot;</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Т.е.
просто переименовать переменную. Также
с практической точки зрения, “нулевой
месяц” не имеет смысла. Мы же не считаем
количество яблок, начиная с нуля? Поэтому
можно добавить “+1” и наш вывод примет
более человеческий вид:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">sum
= 0</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">24.times
do |i|</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">sum
= sum + 500</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
&quot;Месяц #{</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">i</SPAN></FONT><FONT FACE="Courier New, serif">
+ 1}, у бабушки в сундуке #{</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">sum</SPAN></FONT><FONT FACE="Courier New, serif">}&quot;</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Ради
эксперимента давайте представим, что
нам досталась не просто бабушка, а очень
заботливая бабушка, которая все наши
сбережения решила отнести в АО “МММ”
(авторы книги настоятельно не рекомендуют
относить туда свои сбережения). Посчитаем,
сколько денег у нас будет через 24 месяца,
если АО “МММ” будет начислять еще 10%
ежемесячно:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">sum
= 0</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">24.times
do |i|</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">sum
= sum + 500 + sum * 0.1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
&quot;Месяц #{</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">i</SPAN></FONT><FONT FACE="Courier New, serif">
+ 1}, у бабушки в сундуке #{</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">sum</SPAN></FONT><FONT FACE="Courier New, serif">}&quot;</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">В
нашу программу мы добавили только `+ </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">sum</SPAN></FONT><FONT FACE="Arial, serif">
* 0.1`. Давайте посмотрим на результат:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Месяц
1, у бабушки в сундуке 500.0</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Месяц
2, у бабушки в сундуке 1050.0</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Месяц
3, у бабушки в сундуке 1655.0</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">...</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Месяц
22, у бабушки в сундуке 35701.37469341988</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Месяц
23, у бабушки в сундуке 39771.512162761865</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Месяц
24, у бабушки в сундуке 44248.66337903805</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Другими
словами, если мы отдаем бабушке 500 рублей
ежемесячно, а она кладет их под 10%
ежемесячно в АО “МММ”, к концу 24 месяца
мы будем иметь в сундуке чуть более 44
тысяч рублей.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
известно, что стоимость дома - 500 тысяч
долларов. Человек берет дом в рассрочку
на 30 лет. Чтобы выплатить дом за 30 лет,
нужно платить 16666 долларов в год (это
легко посчитать, разделив 500 тысяч на
30). Написать программу, которая для
каждого года выводит сумму, которую
осталось выплатить.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
измените программу из предыдущего
задания со следующими условиями: человек
берет дом не в рассрочку, а в кредит по
ставке 4% годовых на оставшуюся сумму.
Для каждого года посчитайте, сколько
денег нужно заплатить за этот год за
использование кредита.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
посчитайте количество денег (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">total</SPAN></FONT><FONT FACE="Arial, serif">),
которые мы заплатим только в виде
процентов по кредиту за 30 лет.</FONT></P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_3ir2er1jmer6"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt">Любопытные
методы класса </FONT></FONT><FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt"><SPAN LANG="en">Integer</SPAN></FONT></FONT></P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Методов
для класса </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Integer</SPAN></FONT><FONT FACE="Arial, serif">
не так много, и стоит посмотреть
документацию, чтобы иметь понятие о
том, что там вообще есть. </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">На
некоторых из них мы остановимся подробно.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">`</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">even</SPAN></FONT><FONT FACE="Arial, serif">?`
	и `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">odd</SPAN></FONT><FONT FACE="Arial, serif">?`
	- четный или нечетный</FONT></P>
</UL>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Мы
можем проверить любое целое число на
четность (делится ли оно на два без
остатка) с помощью этих двух методов.
Так как знак вопроса в конце метода
встречается нам впервые, то остановимся
на нем подробнее.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Знак
вопроса в конце метода говорит лишь о
том, что метод возвращает значение типа
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Boolean</SPAN></FONT><FONT FACE="Arial, serif">
(в языке руби нет отдельного типа для
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Boolean</SPAN></FONT><FONT FACE="Arial, serif">,
поэтому это либо </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">TrueClass</SPAN></FONT><FONT FACE="Arial, serif">
тип, либо </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">FalseClass</SPAN></FONT><FONT FACE="Arial, serif">
тип). Другими словами, значение либо
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">true</SPAN></FONT><FONT FACE="Arial, serif">,
либо </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">false</SPAN></FONT><FONT FACE="Arial, serif">.
Например, метод, который определяет,
беременна ли девушка, можно записать
только со знаком вопроса в конце, потому
что результат или </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">true</SPAN></FONT><FONT FACE="Arial, serif">
(истина), или ложь (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">false</SPAN></FONT><FONT FACE="Arial, serif">).
Часто такие методы начинаются со слова
“</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">is</SPAN></FONT><FONT FACE="Arial, serif">”:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">girl</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">is</SPAN></FONT><FONT FACE="Courier New, serif">_</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">little</SPAN></FONT><FONT FACE="Courier New, serif">_</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">bit</SPAN></FONT><FONT FACE="Courier New, serif">_</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">pregnant</SPAN></FONT><FONT FACE="Courier New, serif">?</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Знак
вопроса опционален и остается на совести
программиста. Когда мы научимся объявлять
свои собственные методы, вы сможете
создать метод со знаком вопроса или без
него. Но правила хорошего тона говорят
о том, что если результат или </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">true</SPAN></FONT><FONT FACE="Arial, serif">
или </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">false</SPAN></FONT><FONT FACE="Arial, serif">,
надо ставить знак вопроса. Посмотрим,
как это работает на числах:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">irb</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;
1.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">even</SPAN></FONT><FONT FACE="Courier New, serif">?</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">false</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;
1.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">odd</SPAN></FONT><FONT FACE="Courier New, serif">?</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">true</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;
2.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">even</SPAN></FONT><FONT FACE="Courier New, serif">?</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">true</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;
2.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">odd</SPAN></FONT><FONT FACE="Courier New, serif">?</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">false</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;
10 % 2 == 0 # наша собственная реализация
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">even</SPAN></FONT><FONT FACE="Courier New, serif">?</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">true</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">`</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">upto</SPAN></FONT><FONT FACE="Arial, serif">`
	- вверх до, `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">downto</SPAN></FONT><FONT FACE="Arial, serif">`
	- вниз до</FONT></P>
</UL>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Эти
методы принимают параметр, и вызывают
блок определенное количество раз. До
этого мы использовали </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">times</SPAN></FONT><FONT FACE="Arial, serif">,
который вел отсчет с нуля. Чтобы посчитать
от нуля до 10 можно использовать или
`</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">times</SPAN></FONT><FONT FACE="Arial, serif">`
или `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">upto</SPAN></FONT><FONT FACE="Arial, serif">`:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;
3.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">times</SPAN></FONT><FONT FACE="Courier New, serif">
{ |</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">i</SPAN></FONT><FONT FACE="Courier New, serif">|
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
&quot;Я робот #{</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">i</SPAN></FONT><FONT FACE="Courier New, serif">}&quot;
}</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Я
робот 0</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Я
робот 1</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Я
робот 2</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">...</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;
0.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">upto</SPAN></FONT><FONT FACE="Courier New, serif">(2)
{ |</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">i</SPAN></FONT><FONT FACE="Courier New, serif">|
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
&quot;Я робот #{</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">i</SPAN></FONT><FONT FACE="Courier New, serif">}&quot;
}</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Я
робот 0</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Я
робот 1</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Я
робот 2</FONT><FONT FACE="Arial, serif"><BR>```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Вывод
идентичный, но конструкция “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">upto</SPAN></FONT><FONT FACE="Arial, serif">”
более гибкая. Можно задавать интервал
“от” и “до”. Например:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;
1000.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">upto</SPAN></FONT><FONT FACE="Courier New, serif">(1002)
{ |</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">i</SPAN></FONT><FONT FACE="Courier New, serif">|
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
&quot;Я робот #{</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">i</SPAN></FONT><FONT FACE="Courier New, serif">}&quot;
}</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Я
робот 1000</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Я
робот 1001</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Я
робот 1002</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Конструкция
“</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">downto</SPAN></FONT><FONT FACE="Arial, serif">”
аналогичная, но отсчет ведется в обратную
сторону:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
&quot;Запускаем ракеты...&quot;</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">5.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">downto</SPAN></FONT><FONT FACE="Courier New, serif">(1)
{ |</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">i</SPAN></FONT><FONT FACE="Courier New, serif">|
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
&quot;Осталось #{</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">i</SPAN></FONT><FONT FACE="Courier New, serif">}
секунд&quot; }</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
&quot;Ба-бах!&quot;</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Результат
работы программы:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">ruby</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">app</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">rb</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Запускаем
ракеты...</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Осталось
5 секунд</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Осталось
4 секунд</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Осталось
3 секунд</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Осталось
2 секунд</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Осталось
1 секунд</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Ба-бах!</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Разумеется,
блок можно написать с помощью </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">do</SPAN></FONT><FONT FACE="Arial, serif">...</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT><FONT FACE="Arial, serif">,
результат от этого не изменится:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
&quot;Запускаем ракеты...&quot;</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">5.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">downto</SPAN></FONT><FONT FACE="Courier New, serif">(0)
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">do</SPAN></FONT><FONT FACE="Courier New, serif">
|</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">i</SPAN></FONT><FONT FACE="Courier New, serif">|</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
&quot;Осталось #{</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">i</SPAN></FONT><FONT FACE="Courier New, serif">}
секунд&quot;</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
&quot;Ба-бах!&quot;</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
вывести на экран числа от 50 до 100.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
вывести на экран числа от 50 до 100, и если
число четное - рядом с ним написать
`</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">true</SPAN></FONT><FONT FACE="Arial, serif">`,
если нечетное - `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">false</SPAN></FONT><FONT FACE="Arial, serif">`.</FONT></P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_kapviqf1ni8o"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt">Сравнение
переменных и ветвление</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Одна
из основ программирования - сравнение
переменных (или значений). В зависимости
от результата сравнения мы можем
выполнять ту или иную часть программы.
Например: если возраст пользователя
меньше 18, то ограничить доступ к этому
интересному сайту и не показывать
содержимое.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Когда
сравнивают переменные, употребляют
такие выражения как:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%">“<FONT FACE="Arial, serif">Бранчинг”,
	“ветвление” - от англ.слова </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">branch</SPAN></FONT><FONT FACE="Arial, serif">
	- ветвь. Подразумевается, что существует
	одна или более “ветвей” - участков
	кода, которые выполняются в зависимости
	от результата какого-либо сравнения.
	</FONT><FONT FACE="Arial, serif"><I>Примечание: в
	дальнейшем мы будем изучать работу с
	</I></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>git</I></SPAN></FONT><FONT FACE="Arial, serif"><I>,
	системой контроля версий, там тоже есть
	свои ветки, которые называют “бранчи”.
	</I></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>Это
	немного другое.</I></SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%">“<FONT FACE="Arial, serif">Ветка”,
	“блок”, “бранч” - участок кода, который,
	возможно, будет исполнен при соблюдении
	некоторого условия.</FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%">“<FONT FACE="Arial, serif">Сравнение”,
	“тест” - непосредственно сама процедура
	сравнения. От программистов с опытом
	можно услышать слово “тест”:
	“тестирование” переменной на
	определенное значение. В *</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">nix</SPAN></FONT><FONT FACE="Arial, serif">-оболочках
	можно ввести команду получения мануала
	(руководства) по тестированию переменных
	(это документация по тестированию
	переменных непосредственно для вашей
	оболочки, а не для языка руби):<BR><BR>$ </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">man</SPAN></FONT><FONT FACE="Arial, serif">
	</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">test</SPAN></FONT><FONT FACE="Arial, serif"><BR>…<BR></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">test</SPAN></FONT><FONT FACE="Arial, serif">
	- </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">check</SPAN></FONT><FONT FACE="Arial, serif">
	</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">file</SPAN></FONT><FONT FACE="Arial, serif">
	</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">types</SPAN></FONT><FONT FACE="Arial, serif">
	</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">and</SPAN></FONT><FONT FACE="Arial, serif">
	</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">compare</SPAN></FONT><FONT FACE="Arial, serif">
	</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">values</SPAN></FONT><FONT FACE="Arial, serif"><BR><BR></FONT><FONT FACE="Arial, serif"><I>Примечание:
	в дальнейшем мы затронем тему тестирования
	наших программ и написание тестов. Это
	тоже будут тесты, но в другом смысле.
	Отличить одни тесты от других очень
	просто. Если речь идет об одной строке
	- значит это тест в смысле “сравнение”,
	“тестирование переменной на определенное
	условие”. Если речь идет о файле с
	тестом, значит это тестирование какой-то
	функциональности большой программы.</I></FONT></P>
</UL>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Давайте
напишем простейшее сравнение:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
'</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">Your</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">age</SPAN></FONT><FONT FACE="Courier New, serif">?'</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">age
= gets.to_i</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">if
age &gt; 18</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
'</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">Access</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">granted</SPAN></FONT><FONT FACE="Courier New, serif">'</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Результат
работы программы:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
ruby app.rb</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">Your
age?</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">20</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">Access
granted</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en"><BR>$
ruby app.rb</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">Your
age?</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">10</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Для
сравнения мы использовали оператор
“</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">if</SPAN></FONT><FONT FACE="Arial, serif">”
(если), после которого мы пишем выражение,
в нашем случае “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">age</SPAN></FONT><FONT FACE="Arial, serif">
&gt; 18”. Если это выражение является
истиной (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">true</SPAN></FONT><FONT FACE="Arial, serif">),
то мы исполняем блок - все то, что следует
до слова </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT><FONT FACE="Arial, serif">.
Если выражение является ложью (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">false</SPAN></FONT><FONT FACE="Arial, serif">),
то блок внутри не исполняется. Блоки
принято делать с отступами (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">indentation</SPAN></FONT><FONT FACE="Arial, serif">),
2 пробела для одного уровня вложенности
являются стандартом в руби. Сами по себе
отступы обычно не влияют на работу
программы, однако инструменты статического
анализа типа </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Rubocop</SPAN></FONT><FONT FACE="Arial, serif">
могут выдавать предупреждения, если вы
не соблюдаете правильный </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">indentation</SPAN></FONT><FONT FACE="Arial, serif">.
 </FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Тут
мы плавно подходим к следующему типу
данных. Чтобы узнать какой это будет
тип данных, давайте сделаем эксперимент
в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">REPL</SPAN></FONT><FONT FACE="Arial, serif">:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">$
irb</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">&gt;
true.class</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Arial, serif"><SPAN LANG="en">=&gt;
TrueClass</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">&gt;
false.class</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Arial, serif"><SPAN LANG="en">=&gt;
FalseClass</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">&gt;
true.is_a?(Boolean)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">[</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ERROR</SPAN></FONT><FONT FACE="Arial, serif">]</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">У-у-упс!
Оказывается, что нет единого типа данных
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Boolean</SPAN></FONT><FONT FACE="Arial, serif">!
Есть тип </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">TrueClass</SPAN></FONT><FONT FACE="Arial, serif">
и есть </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">FalseClass</SPAN></FONT><FONT FACE="Arial, serif">.
Однако, полезно держать в голове мысль
о том, что </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">true</SPAN></FONT><FONT FACE="Arial, serif">
и </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">false</SPAN></FONT><FONT FACE="Arial, serif">
это почти одно и то же. В языке
программирования Си </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">true</SPAN></FONT><FONT FACE="Arial, serif">
и </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">false</SPAN></FONT><FONT FACE="Arial, serif">
это просто значения типа </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">int</SPAN></FONT><FONT FACE="Arial, serif">.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Сравнивать
переменные или значения можно по-разному.
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Существует
несколько операторов сравнения:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">`&gt;`
	- больше</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">`&lt;`
	- меньше</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">`==`
	- равно</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">`!=`
	- не равно</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">`&gt;=`
	- больше или равно</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">`&lt;=`
	- меньше или равно</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">`&lt;=&gt;`
	- (только руби) космический корабль
	(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">spaceship</SPAN></FONT><FONT FACE="Arial, serif">
	</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">operator</SPAN></FONT><FONT FACE="Arial, serif">.
	Да, и такое бывает). Мы не будем
	рассматривать этот оператор, но он
	может вам пригодиться когда вы будете
	делать кастомную сортировку в руби.
	Например, создадите класс животных и
	захотите отсортировать их по количеству
	ушей.</FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">`===`
	- (только javascript) точно равно</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">`!==`
	- (только javascript) точно не равно</SPAN></FONT></P>
</UL>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">
любопытен по своей природе. Не будем
специально останавливаться, заметим
лишь, что бывает точное сравнение, а
бывает не точное. При обычном сравнении
в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">
вы можете сравнивать “слонов и мух”
(число в виде строки и просто число) и
вы получите положительный результат:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">node</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;
'5' == 5</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">true</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">В
случае строгого сравнения в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">
мы получим “более предсказуемый”
результат - “слонов и мух” сравнивать
нельзя:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">node</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;
'5' === 5</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">false</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">В
руби трюк со “слонами и мухами” не
сработает. Если вы сравниваете переменные
разных типов, то результат всегда будет
ложь:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">irb</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;
'5' == 5</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Courier New, serif">=&gt;
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">false</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Кстати,
в нашей программе вначале этой главы
была допущена ошибка при сравнении
возраста. Сможете ли вы ее увидеть? Наше
условие было “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">age</SPAN></FONT><FONT FACE="Arial, serif">
&gt; 18”, когда на самом деле мы хотим
проверить “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">age</SPAN></FONT><FONT FACE="Arial, serif">
&gt;= 18”, ведь восемнадцатилетие - это
возраст совершеннолетия, после которого
можно пускать пользователя на интересные
сайты.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Если
условие простое, из него можно также
сделать </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">one</SPAN></FONT><FONT FACE="Arial, serif">-</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">liner</SPAN></FONT><FONT FACE="Arial, serif">
(условие в 1 строку):</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">exit</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">if</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">age</SPAN></FONT><FONT FACE="Courier New, serif">
&lt; 18</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Т.е.
если возраст пользователя менее 18 лет,
то происходит выход из программы. Правда,
в нашем случае мы не выдаем на экран
никакого сообщения - ведь мы хотим
написать все в 1 строку, поэтому используем
только “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">exit</SPAN></FONT><FONT FACE="Arial, serif">”
для выхода из программы. Если нужно
выводить сообщение, то условие должно
записываться в 2 строки:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">if
age &lt; 18</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">puts
'Доступ запрещен'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">exit</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```
</FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Иногда
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">one</SPAN></FONT><FONT FACE="Arial, serif">-</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">liner</SPAN></FONT><FONT FACE="Arial, serif">’ы
облегчают читаемость программы и имеют
смысл. Более того, они прекрасно читаются,
ведь они очень точно повторяют речь
человека: “выход если возраст меньше
18”. Что может быть проще?</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
попробуйте написать следующие сравнения
в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">REPL</SPAN></FONT><FONT FACE="Arial, serif">
и догадаться, каков будет результат для
языка руби. </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Заполните
таблицы:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<TABLE WIDTH=624 CELLPADDING=7 CELLSPACING=0>
	<COL WIDTH=89>
	<COL WIDTH=90>
	<COL WIDTH=90>
	<COL WIDTH=90>
	<COL WIDTH=90>
	<COL WIDTH=89>
	<TR VALIGN=TOP>
		<TD WIDTH=89 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P STYLE="border: none; padding: 0in; widows: 0; orphans: 0"><FONT FACE="Arial, serif"><SPAN LANG="en">Выражение:</SPAN></FONT></P>
		</TD>
		<TD WIDTH=90 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P ALIGN=CENTER STYLE="border: none; padding: 0in; widows: 0; orphans: 0">
			<FONT FACE="Arial, serif"><SPAN LANG="en">1 &gt; 1</SPAN></FONT></P>
		</TD>
		<TD WIDTH=90 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P ALIGN=CENTER STYLE="border: none; padding: 0in; widows: 0; orphans: 0">
			<FONT FACE="Arial, serif"><SPAN LANG="en">1 &lt; 1</SPAN></FONT></P>
		</TD>
		<TD WIDTH=90 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P ALIGN=CENTER STYLE="border: none; padding: 0in; widows: 0; orphans: 0">
			<FONT FACE="Arial, serif"><SPAN LANG="en">1 &gt;= 2</SPAN></FONT></P>
		</TD>
		<TD WIDTH=90 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P ALIGN=CENTER STYLE="border: none; padding: 0in; widows: 0; orphans: 0">
			<FONT FACE="Arial, serif"><SPAN LANG="en">1 == 1</SPAN></FONT></P>
		</TD>
		<TD WIDTH=89 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P ALIGN=CENTER STYLE="border: none; padding: 0in; widows: 0; orphans: 0">
			<FONT FACE="Arial, serif"><SPAN LANG="en">1 != 1</SPAN></FONT></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=89 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P STYLE="border: none; padding: 0in; widows: 0; orphans: 0"><FONT FACE="Arial, serif"><SPAN LANG="en">Результат:</SPAN></FONT></P>
		</TD>
		<TD WIDTH=90 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P LANG="en" STYLE="border: none; padding: 0in; widows: 0; orphans: 0">
			<BR>
			</P>
		</TD>
		<TD WIDTH=90 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P LANG="en" STYLE="border: none; padding: 0in; widows: 0; orphans: 0">
			<BR>
			</P>
		</TD>
		<TD WIDTH=90 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P LANG="en" STYLE="border: none; padding: 0in; widows: 0; orphans: 0">
			<BR>
			</P>
		</TD>
		<TD WIDTH=90 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P LANG="en" STYLE="border: none; padding: 0in; widows: 0; orphans: 0">
			<BR>
			</P>
		</TD>
		<TD WIDTH=89 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P LANG="en" STYLE="border: none; padding: 0in; widows: 0; orphans: 0">
			<BR>
			</P>
		</TD>
	</TR>
</TABLE>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<TABLE WIDTH=624 CELLPADDING=7 CELLSPACING=0>
	<COL WIDTH=89>
	<COL WIDTH=90>
	<COL WIDTH=90>
	<COL WIDTH=90>
	<COL WIDTH=90>
	<COL WIDTH=89>
	<TR VALIGN=TOP>
		<TD WIDTH=89 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P STYLE="widows: 0; orphans: 0"><FONT FACE="Arial, serif"><SPAN LANG="en">Выражение:</SPAN></FONT></P>
		</TD>
		<TD WIDTH=90 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P ALIGN=CENTER STYLE="widows: 0; orphans: 0"><FONT FACE="Arial, serif"><SPAN LANG="en">1
			&gt; 2</SPAN></FONT></P>
		</TD>
		<TD WIDTH=90 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P ALIGN=CENTER STYLE="widows: 0; orphans: 0"><FONT FACE="Arial, serif"><SPAN LANG="en">1
			&lt; 2</SPAN></FONT></P>
		</TD>
		<TD WIDTH=90 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P ALIGN=CENTER STYLE="widows: 0; orphans: 0"><FONT FACE="Arial, serif"><SPAN LANG="en">1
			&lt;= 2</SPAN></FONT></P>
		</TD>
		<TD WIDTH=90 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P ALIGN=CENTER STYLE="widows: 0; orphans: 0"><FONT FACE="Arial, serif"><SPAN LANG="en">1
			== 2</SPAN></FONT></P>
		</TD>
		<TD WIDTH=89 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P ALIGN=CENTER STYLE="widows: 0; orphans: 0"><FONT FACE="Arial, serif"><SPAN LANG="en">1
			!= 2</SPAN></FONT></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=89 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P STYLE="widows: 0; orphans: 0"><FONT FACE="Arial, serif"><SPAN LANG="en">Результат:</SPAN></FONT></P>
		</TD>
		<TD WIDTH=90 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P LANG="en" STYLE="widows: 0; orphans: 0"><BR>
			</P>
		</TD>
		<TD WIDTH=90 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P LANG="en" STYLE="widows: 0; orphans: 0"><BR>
			</P>
		</TD>
		<TD WIDTH=90 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P LANG="en" STYLE="widows: 0; orphans: 0"><BR>
			</P>
		</TD>
		<TD WIDTH=90 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P LANG="en" STYLE="widows: 0; orphans: 0"><BR>
			</P>
		</TD>
		<TD WIDTH=89 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P LANG="en" STYLE="widows: 0; orphans: 0"><BR>
			</P>
		</TD>
	</TR>
</TABLE>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<TABLE WIDTH=624 CELLPADDING=7 CELLSPACING=0>
	<COL WIDTH=89>
	<COL WIDTH=90>
	<COL WIDTH=90>
	<COL WIDTH=90>
	<COL WIDTH=90>
	<COL WIDTH=89>
	<TR VALIGN=TOP>
		<TD WIDTH=89 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P STYLE="widows: 0; orphans: 0"><FONT FACE="Arial, serif"><SPAN LANG="en">Выражение:</SPAN></FONT></P>
		</TD>
		<TD WIDTH=90 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P ALIGN=CENTER STYLE="widows: 0; orphans: 0"><FONT FACE="Arial, serif"><SPAN LANG="en">true
			&gt; false</SPAN></FONT></P>
		</TD>
		<TD WIDTH=90 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P ALIGN=CENTER STYLE="widows: 0; orphans: 0"><FONT FACE="Arial, serif"><SPAN LANG="en">false
			&gt; true</SPAN></FONT></P>
		</TD>
		<TD WIDTH=90 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P ALIGN=CENTER STYLE="widows: 0; orphans: 0"><FONT FACE="Arial, serif"><SPAN LANG="en">true
			== true</SPAN></FONT></P>
		</TD>
		<TD WIDTH=90 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P ALIGN=CENTER STYLE="widows: 0; orphans: 0"><FONT FACE="Arial, serif"><SPAN LANG="en">false
			== false</SPAN></FONT></P>
		</TD>
		<TD WIDTH=89 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P ALIGN=CENTER STYLE="widows: 0; orphans: 0"><FONT FACE="Arial, serif"><SPAN LANG="en">false
			!= true</SPAN></FONT></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=89 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P STYLE="widows: 0; orphans: 0"><FONT FACE="Arial, serif"><SPAN LANG="en">Результат:</SPAN></FONT></P>
		</TD>
		<TD WIDTH=90 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P LANG="en" STYLE="widows: 0; orphans: 0"><BR>
			</P>
		</TD>
		<TD WIDTH=90 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P LANG="en" STYLE="widows: 0; orphans: 0"><BR>
			</P>
		</TD>
		<TD WIDTH=90 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P LANG="en" STYLE="widows: 0; orphans: 0"><BR>
			</P>
		</TD>
		<TD WIDTH=90 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P LANG="en" STYLE="widows: 0; orphans: 0"><BR>
			</P>
		</TD>
		<TD WIDTH=89 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P LANG="en" STYLE="widows: 0; orphans: 0"><BR>
			</P>
		</TD>
	</TR>
</TABLE>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid">
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt"><SPAN LANG="en">Комбинирование
условий</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_kivl8zxelrus"></A>
<BR><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Условия
после оператора </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">if</SPAN></FONT><FONT FACE="Arial, serif">
можно комбинировать. Иногда в одной
строке необходимо делать несколько
сравнений:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">if</SPAN></FONT></FONT><FONT FACE="Courier New, serif"><FONT SIZE=2>
есть_в_кармане_пачка_сигарет </FONT></FONT><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">and</SPAN></FONT></FONT><FONT FACE="Courier New, serif"><FONT SIZE=2>
билет_на_самолет_с_серебристым_крылом</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">puts</SPAN></FONT></FONT><FONT FACE="Courier New, serif"><FONT SIZE=2>
'Всё не так уж плохо на сегодняшний день'</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">end</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">(Минздрав
предупреждает - курение опасно для
вашего здоровья). Существуют два варианта
комбинации условий: И и ИЛИ. Каждый
вариант может выражаться или словом
(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">and</SPAN></FONT><FONT FACE="Arial, serif">
и </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">or</SPAN></FONT><FONT FACE="Arial, serif">
соответственно) или в виде специальных
символов: &amp;&amp; и ||. Последний символ
называется </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">pipe</SPAN></FONT><FONT FACE="Arial, serif">
(труба) </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">operator</SPAN></FONT><FONT FACE="Arial, serif">,
т.к. он двойной, то можно сказать </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">double</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">pipe</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">operator</SPAN></FONT><FONT FACE="Arial, serif">.
Пример в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">REPL</SPAN></FONT><FONT FACE="Arial, serif">:<BR><BR>```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">irb</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;
1 == 1 &amp;&amp; 2 == 2</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Courier New, serif">=&gt;
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">true</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;
1 == 5 &amp;&amp; 2 == 2</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Courier New, serif">=&gt;
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">false</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;
1 == 5 || 2 == 2</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Courier New, serif">=&gt;
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">true</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Существует
также возможность использовать `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">and</SPAN></FONT><FONT FACE="Arial, serif">`
вместо `&amp;&amp;` и `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">or</SPAN></FONT><FONT FACE="Arial, serif">`
вместо `||`. Несмотря на то, что при этом
читаемость программы улучшается, утилита
статического анализа кода </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Rubocop</SPAN></FONT><FONT FACE="Arial, serif">
“ругается” на такой синтаксис. Мы
рекомендуем использовать общепринятые
`&amp;&amp;` и `||`. См.
</FONT><A HREF="https://github.com/rubocop-hq/ruby-style-guide#no-and-or-or"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>://</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>github</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>.</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>com</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>/</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>rubocop</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>-</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>hq</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>/</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>ruby</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>-</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>style</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>-</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>guide</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>#</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>no</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>-</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>and</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>-</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>or</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>-</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>or</U></SPAN></FONT></FONT></A><FONT FACE="Arial, serif">
</FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Первый
пример понятен: мы проверяем “1 == 1 И 2
== 2”. Единица равна единице, а двойка
равна двойке. Во втором примере мы
проверяем “1 == 5 И 2 == 2”. Двойка равна
двойке как и в предыдущем примере, но
единица пяти не равна. Т.к. мы комбинируем
условие с помощью “И”, то мы и получаем
результат “ложь”. Если бы мы комбинировали
результат с помощью “ИЛИ”, то это была
бы правда - должно выполняться только
одно из условий (что и демонстрирует
третий пример).</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Рассмотрим
комбинирование условий на практике:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
'Сколько вам лет?'</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">age</SPAN></FONT><FONT FACE="Courier New, serif">
= </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">gets</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">to</SPAN></FONT><FONT FACE="Courier New, serif">_</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">i</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
'Являетесь ли вы членом партии Единая
Россия? </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">(y/n)'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">answer
= gets.chomp.downcase</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">if
age &gt;= 18 &amp;&amp; answer == 'y'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">puts
'Вход на сайт разрешен'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Запустим
программу:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">ruby</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">app</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">rb</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Сколько
вам лет?</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">19</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Являетесь
ли вы членом партии Единая Россия? </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">(y/n)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">n</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
ruby app.rb</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Сколько
вам лет?</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">19</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Являетесь
ли вы членом партии Единая Россия? (</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">y</SPAN></FONT><FONT FACE="Courier New, serif">/</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">n</SPAN></FONT><FONT FACE="Courier New, serif">)</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">y</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Вход
на сайт разрешен</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Т.е.
для посещения (воображаемого) сайта
пользователь должен ввести свой возраст.
Далее мы выполняем проверку: если возраст
больше или равен 18 и если пользователь
- член партии Единая Россия, то разрешить
доступ. Заметьте, что “больше или равен”
мы указываем с помощью “&gt;=”. Мы также
могли бы написать:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">...<BR>if
(age &gt; 18 || age == 18) &amp;&amp; answer == 'y'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">...</SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><BR></SPAN></FONT><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
попробуйте написать следующие сравнения
в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">REPL</SPAN></FONT><FONT FACE="Arial, serif">
и догадаться, каков будет результат для
языка руби. </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Заполните
таблицы:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<TABLE WIDTH=624 CELLPADDING=7 CELLSPACING=0>
	<COL WIDTH=141>
	<COL WIDTH=142>
	<COL WIDTH=142>
	<COL WIDTH=141>
	<TR VALIGN=TOP>
		<TD WIDTH=141 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P STYLE="border: none; padding: 0in; widows: 0; orphans: 0"><FONT FACE="Arial, serif"><SPAN LANG="en">Выражение:</SPAN></FONT></P>
		</TD>
		<TD WIDTH=142 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P ALIGN=CENTER STYLE="border: none; padding: 0in; widows: 0; orphans: 0">
			<FONT FACE="Arial, serif"><SPAN LANG="en">0 == 0 &amp;&amp; 2 + 2
			== 4</SPAN></FONT></P>
		</TD>
		<TD WIDTH=142 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P ALIGN=CENTER STYLE="border: none; padding: 0in; widows: 0; orphans: 0">
			<FONT FACE="Arial, serif"><SPAN LANG="en">1 == 2 &amp;&amp; 2 == 1</SPAN></FONT></P>
		</TD>
		<TD WIDTH=141 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P ALIGN=CENTER STYLE="border: none; padding: 0in; widows: 0; orphans: 0">
			<FONT FACE="Arial, serif"><SPAN LANG="en">1 == 2 || 2 == 1</SPAN></FONT></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=141 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P STYLE="border: none; padding: 0in; widows: 0; orphans: 0"><FONT FACE="Arial, serif"><SPAN LANG="en">Результат:</SPAN></FONT></P>
		</TD>
		<TD WIDTH=142 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P LANG="en" STYLE="border: none; padding: 0in; widows: 0; orphans: 0">
			<BR>
			</P>
		</TD>
		<TD WIDTH=142 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P LANG="en" STYLE="border: none; padding: 0in; widows: 0; orphans: 0">
			<BR>
			</P>
		</TD>
		<TD WIDTH=141 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P LANG="en" STYLE="border: none; padding: 0in; widows: 0; orphans: 0">
			<BR>
			</P>
		</TD>
	</TR>
</TABLE>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
напишите программу, которая спрашивает
логин и пароль пользователя в консоли.
Если имя “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">admin</SPAN></FONT><FONT FACE="Arial, serif">”
и пароль “12345”, программа должна выводить
на экран “Доступ к банковской ячейке
разрешен”.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
известно, что на Луне продают участки.
Любой участок менее 50 квадратных метров
стоит 1000 долларов. Участок площадью от
50 до 100 квадратных метров стоит 1500
долларов. От 100 и выше - по 25 долларов за
квадратный метр. Напишите программу,
которая запрашивает длину и ширину
участка и выводит на экран его стоимость.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
напишите программу “иммигрант”.
Программа должна задавать следующие
вопросы: “У вас есть высшее образование?
(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">y</SPAN></FONT><FONT FACE="Arial, serif">/</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">n</SPAN></FONT><FONT FACE="Arial, serif">)”,
“У вас есть опыт работы программистом?
(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">y</SPAN></FONT><FONT FACE="Arial, serif">/</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">n</SPAN></FONT><FONT FACE="Arial, serif">)”,
“У вас более трех лет опыта? (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">y</SPAN></FONT><FONT FACE="Arial, serif">/</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">n</SPAN></FONT><FONT FACE="Arial, serif">)”.
За каждый положительный ответ начисляется
1 балл (переменную можно назвать </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">score</SPAN></FONT><FONT FACE="Arial, serif">).
Если набралось 2 или более баллов
программа должна выводить на экран
“Добро пожаловать в США”.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_xlbnv9da5sgv"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt">Некоторые
полезные функции языка руби</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Arial, serif">В
предыдущих главах мы рассматривали
программу:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
&quot;Запускаем ракеты...&quot;</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">5.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">downto</SPAN></FONT><FONT FACE="Courier New, serif">(0)
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">do</SPAN></FONT><FONT FACE="Courier New, serif">
|</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">i</SPAN></FONT><FONT FACE="Courier New, serif">|</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
&quot;Осталось #{</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">i</SPAN></FONT><FONT FACE="Courier New, serif">}
секунд&quot;</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
&quot;Ба-бах!&quot;</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Однако,
эта программа исполняется моментально,
вывод на экран происходит мгновенно.
Давайте исправим программу, чтобы в ней
была настоящая задержка:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
&quot;Запускаем ракеты...&quot;</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">5.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">downto</SPAN></FONT><FONT FACE="Courier New, serif">(1)
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">do</SPAN></FONT><FONT FACE="Courier New, serif">
|</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">i</SPAN></FONT><FONT FACE="Courier New, serif">|</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
&quot;Осталось #{</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">i</SPAN></FONT><FONT FACE="Courier New, serif">}
секунд&quot;</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">sleep
1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts
&quot;Ба-бах!&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Т.е.
“</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">sleep</SPAN></FONT><FONT FACE="Arial, serif">”
принимает параметр - количество секунд,
которые программа должна “спать”.
Можно также задавать дробное значение.
Например `0.5` для половины секунды (500
мсек).</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">В
реальных программах “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">sleep</SPAN></FONT><FONT FACE="Arial, serif">”
используется не часто - ведь программы
должны исполняться как можно быстрее.
Но иногда эта конструкция может
использоваться при тестировании
веб-приложений. Например “ввести логин,
пароль, нажать на кнопку и подождать 10
секунд”. Но и тут существует много
мнений. Некоторые программисты утверждают,
что если в тестах нужен “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">sleep</SPAN></FONT><FONT FACE="Arial, serif">”,
то тест написан неправильно. Но за
многолетнюю практику автора, от “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">sleep</SPAN></FONT><FONT FACE="Arial, serif">”
абсолютно во всех местах избавиться не
удалось.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Любопытная
деталь заключается в том, что в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">
не существует “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">sleep</SPAN></FONT><FONT FACE="Arial, serif">”,
т.к. этот язык является асинхронным по
своей природе. Другими словами, нельзя
приостановить программу. Несмотря на
то, что для этого есть решение, это
добавляет определенной сложности.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Если
программа в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">
не может прерываться, то это справедливо
не только для “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">sleep</SPAN></FONT><FONT FACE="Arial, serif">”,
а вообще для всего. Например, нужно
прочитать в память большой файл. Но
прерываться нельзя. На практике понятно,
что чтение больших файлов занимает
время. Поэтому в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">
было введено понятие </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">callback</SPAN></FONT><FONT FACE="Arial, serif">’ов
(обратных вызовов) и потом уже </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Promises</SPAN></FONT><FONT FACE="Arial, serif">.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Пример
неправильной программы на </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">console</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">log</SPAN></FONT><FONT FACE="Courier New, serif">('Запуск
ракеты!');</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">setTimeout</SPAN></FONT><FONT FACE="Courier New, serif">(</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">function</SPAN></FONT><FONT FACE="Courier New, serif">()
{</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> 
<FONT FACE="Courier New, serif"><SPAN LANG="en">console</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">log</SPAN></FONT><FONT FACE="Courier New, serif">('Прошла
одна секунда, запускаем');</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">},
1000);</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">console.log('Ба-бах!');</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Вывод:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```<BR></FONT><FONT FACE="Courier New, serif">Запуск
ракеты!</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Ба-бах!</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Прошла
одна секунда, запускаем</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Т.е.
предупреждаем о запуске, ракета уже
взорвалась, а через секунду мы ее хотим
запустить. Непорядок! Поэтому в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">
следует мыслить асинхронно. Это несложно,
и этот концепт понимается легко. Например,
для правильного запуска ракеты нужно
перенести последнюю строку внутрь
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">setTimeout</SPAN></FONT><FONT FACE="Arial, serif">.
Тогда все будет работать верно. Но в
этом случае весь остальной код нам нужно
будет писать с отступами и внутри
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">setTimeout</SPAN></FONT><FONT FACE="Arial, serif">,
ведь мы хотим сначала подождать, а потом
делать все остальное. Если подождать 2
раза, то будет двойной уровень вложенности.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">На
помощь пришло ключевое слово “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">await</SPAN></FONT><FONT FACE="Arial, serif">”,
которое частично решает проблему. Но и
в этом случае необходимо иметь в голове
представление о том, как работает
асинхронный код. </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">
неплохой язык с декларативным уклоном.
Если бы браузеры создавались сегодня,
то этого языка бы не было. Но сейчас мы
вынуждены работать с тем, что есть,
история диктует свои правила.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Для
руби-программиста язык </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">
не является большой проблемой. Освоить
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JS</SPAN></FONT><FONT FACE="Arial, serif">
в минимальном варианте, который необходим
для работы, можно за относительно
короткое время. Хорошая новость в том,
что вместе с руби </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">
используется только на клиентской части
(т.е. в браузере пользователя, а не на
сервере). Поэтому клиентские скрипты
обычно небольшие. А если большие, то для
этого часто нанимают отдельного </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">front</SPAN></FONT><FONT FACE="Arial, serif">-</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT><FONT FACE="Arial, serif">
разработчика.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Из
практики разработки авторы книги пришли
к выводу, что человеку проще создавать
программы не на асинхронных языках типа
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">,
а на языках “обычных”, синхронных:
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ruby</SPAN></FONT><FONT FACE="Arial, serif">,
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">go</SPAN></FONT><FONT FACE="Arial, serif">,
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">python</SPAN></FONT><FONT FACE="Arial, serif">
и т.д. Несмотря на то, что ничего сложного
в асинхронных языках нет, начинающим
программистам бывает сложно понять
асинхронные конструкции, не зная
синхронных.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_uvym8l6qe9ot"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt">Генерация
случайных чисел</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Про
генерацию достоверно-случайных чисел
написано много научных трудов. Ведь
компьютер - это что-то математическое
и точное, каким образом в нем может быть
случайность? На более ранних компьютерах
случайные числа генерировались совсем
не случайно - после каждого перезапуска
компьютер выдавал одну и ту же
последовательность. Поэтому в игру
“Морской бой” начинающие программисты
научились выигрывать после нескольких
попыток - было заранее известно, где
компьютер расположит свои корабли.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Объяснение
этому простое - нужно было где-то взять
случайные данные, а взять их было негде.
В современных операционных системах
генератор случайных чисел учитывает
множество параметров: паузы между
нажатиями клавиш, движения мыши, сетевые
события и так далее - вся эта информация,
собранная из реального мира, помогает
компьютеру генерировать случайные
числа.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Но
что, если этой информации недостаточно?
Что, если мы только что включили компьютер,
сделали несколько движений мышью и
нажали несколько кнопок, и хотим получить
комбинацию из миллиардов случайных
чисел? Конечно, на основе полученной
информации из реального мира алгоритм
задает вектор, но какое количество
векторов в этом случае возможно?</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Кажется,
что много, пока дело не доходит до
реальных проблем программирования.
История из жизни: на одном сайте был
опубликован алгоритм перемешивания
карт в игре “Онлайн Покер”. </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Алгоритм
выглядел следующим образом:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">for
i := 1 to 52 do begin</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">r
:= random(51) + 1;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">swap
:= card[r];</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">card[r]
:= card[i];</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">card[i]
:= swap;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT><FONT FACE="Courier New, serif">;</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">В
общем-то ничего необычного на первый
взгляд, но программа содержит четыре
ошибки. Первая ошибка - значение индекса
на второй строке никогда не будет равно
нулю. Вторая ошибка - выбранный алгоритм
не гарантирует равномерного распределения
карт - эту ошибку сложнее всего заметить.
Кстати, в руби имеется встроенный метод
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">shuffle</SPAN></FONT><FONT FACE="Arial, serif">
для массивов данных, который перемешивает
правильным алгоритмом.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Но
основная ошибка в том, что </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">random</SPAN></FONT><FONT FACE="Arial, serif">()
использует 32-битное посевное значение
(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">seed</SPAN></FONT><FONT FACE="Arial, serif">),
которое может гарантировать “всего”
2 в 32 степени (примерно 4 миллиарда)
уникальных комбинаций. Тогда как
настоящее количество комбинаций это
факториал 52 (намного больше 2^32). Т.к. в
качестве </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">seed</SPAN></FONT><FONT FACE="Arial, serif">
используется количество миллисекунд
после полуночи, то мы имеем всего 86.4
миллиона возможных комбинаций. Получается,
что после пяти карт и синхронизации
времени с сервером можно предсказать
все карты в реальной игре.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Пример
выше лишь демонстрирует уязвимость
алгоритмов для генерации случайных
чисел. Если вы разрабатываете что-то
важное, то стоит всерьез задуматься о
“надежной” генерации случайных чисел
(например, с помощью специальных
устройств, которые можно подключить к
компьютеру). Но для учебных целей нам
подойдут встроенные функции руби -- эти
функции используют ядро вашей операционной
системы для генерации “достаточно”
случайных чисел:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```<BR></FONT><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">irb</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">rand</SPAN></FONT><FONT FACE="Courier New, serif">(1..5)</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">4</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">rand</SPAN></FONT><FONT FACE="Courier New, serif">(1..5)</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">1</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">В
функцию </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">rand</SPAN></FONT><FONT FACE="Arial, serif">
можно “хитрым образом” передать
параметр, который задает диапазон
(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">range</SPAN></FONT><FONT FACE="Arial, serif">)
значений - в нашем случае от одного до
пяти. При каждом вызове мы получаем
случайное число из этого диапазона.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Хитрость
состоит в том, что мы передаем не два
параметра, а один (хотя кажется, что
два). Если передать два параметра, то
будет ошибка:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```<BR></FONT><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">irb</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">rand</SPAN></FONT><FONT FACE="Courier New, serif">(1,
5)</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">[</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">ERROR</SPAN></FONT><FONT FACE="Courier New, serif">
- функция не принимает 2 значения]</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Так
что же такое `1..5` ? Давайте проверим:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">irb</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;
(1..5).</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">class</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">=&gt;
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">Range</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Так
вот оно что! Это определенный класс в
языке руби, который отвечает за диапазон,
и называется этот класс </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Range</SPAN></FONT><FONT FACE="Arial, serif">.
На самом деле этот класс довольно
полезный. Документация
</FONT><A HREF="https://ruby-doc.org/core-2.2.0/Range.html"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>://</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>ruby</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>-</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>doc</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>.</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>org</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>/</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>core</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>-2.2.0/</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>Range</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>.</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>html</U></SPAN></FONT></FONT></A><FONT FACE="Arial, serif">
по этому классу выдает много интересного,
но давайте для начала убедимся, что это
никакая не магия, и этот объект можно
инициализировать, как и любую другую
переменную:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">irb</SPAN></FONT><FONT FACE="Courier New, serif"><BR>&gt;
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">x</SPAN></FONT><FONT FACE="Courier New, serif">
= 1..5</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">=&gt;
1..5</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">rand</SPAN></FONT><FONT FACE="Courier New, serif">(</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">x</SPAN></FONT><FONT FACE="Courier New, serif">)</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">=&gt;
4</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Теперь
понятно, что “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">rand</SPAN></FONT><FONT FACE="Arial, serif">”
принимает один параметр. Попробуем
скомбинировать </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">rand</SPAN></FONT><FONT FACE="Arial, serif">
и </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">sleep</SPAN></FONT><FONT FACE="Arial, serif">:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">irb</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">sleep</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">rand</SPAN></FONT><FONT FACE="Courier New, serif">(1..5)</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Программа
будет ждать какое-то случайное количество
секунд, от 1 до 5. Кстати, передать параметр
в любой метод в языке руби можно как со
скобками, так и без. Вот эти конструкции
будут идентичны:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">irb</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">sleep</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">rand</SPAN></FONT><FONT FACE="Courier New, serif">(1..5)</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">sleep</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">rand</SPAN></FONT><FONT FACE="Courier New, serif">
1..5</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">sleep</SPAN></FONT><FONT FACE="Courier New, serif">(</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">rand</SPAN></FONT><FONT FACE="Courier New, serif">(1..5))</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Последняя
строка наиболее наглядно демонстрирует,
что желает получить программист от
языка руби: 1) сначала выполняется
конструкция `1..5`, с помощью которой
создается объект </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Range</SPAN></FONT><FONT FACE="Arial, serif">;
2) затем вычисляется случайное значение
в диапазоне `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">rand</SPAN></FONT><FONT FACE="Arial, serif">(...)`;
3) затем ожидаем определенное количество
секунд - т.е. то количество секунд, которое
вернула функция </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">rand</SPAN></FONT><FONT FACE="Arial, serif">.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Использовать
скобки или нет - личное предпочтение
программиста. Чтобы не возникало
путаницы, статические анализаторы кода
(напр. </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Rubocop</SPAN></FONT><FONT FACE="Arial, serif">)
выдают предупреждения, если ваш стиль
сильно отличается от общепринятого
стандарта.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Отдельно
хочется отметить возможность вычислять
случайные дробные значения:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```<BR></FONT><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">irb</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">rand</SPAN></FONT><FONT FACE="Courier New, serif">(0.03..0.09)</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">=&gt;
0.03920647825951599</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">rand</SPAN></FONT><FONT FACE="Courier New, serif">(0.03..0.09)</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">=&gt;
0.06772359081051581</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
посмотрите документацию по классу </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Range</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><A HREF="https://ruby-doc.org/core-2.5.1/Range.html"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>://</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>ruby</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>-</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>doc</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>.</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>org</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>/</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>core</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>-2.5.1/</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>Range</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>.</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>html</U></SPAN></FONT></FONT></A></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
напишите программу, которая будет
выводить случайное число от 500 до 510.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
напишите программу, которая будет
выводить случайное число с дробью от 0
до 1. Например, 0.54321 или 0.123456</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
напишите программу, которая будет
выводить случайное число с дробью от 2
до 4.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_jliu7zyo6ru9"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt">Угадай
число</FONT></FONT></P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Давайте
закрепим наши знания на практике и
напишем что-нибудь интересное - например,
программу “угадай число”. Компьютер
загадывает число, а пользователю нужно
это число угадать. В дальнейшем улучшим
эту программу:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">number</SPAN></FONT><FONT FACE="Courier New, serif">
= </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">rand</SPAN></FONT><FONT FACE="Courier New, serif">(1..10)</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">print</SPAN></FONT><FONT FACE="Courier New, serif">
'Привет! Я загадал число от 1 до 10,
попробуйте угадать: '</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">loop
do</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">input
= gets.to_i</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">if
input == number</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">puts
'Правильно!'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">exit</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">if
input != number</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">print
'Неправильно, попробуйте еще раз: '</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">На
этом этапе у вас должно быть достаточно
знаний для того, чтобы понять что здесь
происходит. Попробуйте догадаться, как
работает эта программа. Результат работы
программы:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Привет!
Я загадал число от 1 до 10, попробуйте
угадать: 2</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Неправильно,
попробуйте еще раз: 7</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Неправильно,
попробуйте еще раз: 8</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Неправильно,
попробуйте еще раз: 9</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Неправильно,
попробуйте еще раз: 10</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Правильно!</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Первая
строка “загадывает” число и сохраняет
значение в переменную `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">number</SPAN></FONT><FONT FACE="Arial, serif">`.
Чуть ниже мы объявляем бесконечный цикл
с помощью конструкции `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">loop</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">do</SPAN></FONT><FONT FACE="Arial, serif">…
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT><FONT FACE="Arial, serif">`.
Сразу внутри “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">loop</SPAN></FONT><FONT FACE="Arial, serif">”
мы объявляем переменную “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">input</SPAN></FONT><FONT FACE="Arial, serif">”,
в которой мы сохраняем ввод пользователя.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Ввод
пользователя имеет тип </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Integer</SPAN></FONT><FONT FACE="Arial, serif">,
как и загаданное компьютером число.
Поэтому в первом блоке мы “имеем право”
произвести сравнение (в руби не будет
ошибки, если вы будете сравнивать
переменные разных типов, просто они
никогда не будут равны). Несмотря на то,
что цикл бесконечный - мы из него все
равно выходим, но только при одном
условии - когда угадали число. Это
проверяется условием “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">input</SPAN></FONT><FONT FACE="Arial, serif">
== </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">number</SPAN></FONT><FONT FACE="Arial, serif">”.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Т.к.
мы пока не умеем объявлять собственные
методы (функции), то мы используем </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">exit</SPAN></FONT><FONT FACE="Arial, serif">
для того, чтобы выйти из программы. С
более глубокими знаниями Руби мы бы
могли, например, спросить пользователя
- хочет ли он сыграть еще раз?</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Следующий
блок “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">if</SPAN></FONT><FONT FACE="Arial, serif">”
содержит тест “если загаданное число
НЕ равно вводу пользователя”. Обратите
внимание, что мы используем “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">print</SPAN></FONT><FONT FACE="Arial, serif">”,
а не “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Arial, serif">”,
т.к. “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Arial, serif">”
переводит строку, а нам этого не надо
(если это непонятно, попробуйте заменить
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">print</SPAN></FONT><FONT FACE="Arial, serif">
на </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Arial, serif">).</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">В
этой простой программе можно кое-что
улучшить:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">number</SPAN></FONT><FONT FACE="Courier New, serif">
= </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">rand</SPAN></FONT><FONT FACE="Courier New, serif">(1..10)</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">print</SPAN></FONT><FONT FACE="Courier New, serif">
'Привет! Я загадал число от 1 до 10,
попробуйте угадать: '</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">loop
do</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">input
= gets.to_i</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">if
input == number</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">puts
'Правильно!'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">exit</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">else</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">print</SPAN></FONT><FONT FACE="Courier New, serif">
'Неправильно, попробуйте еще раз: '</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Мы
объединили два блока “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">if</SPAN></FONT><FONT FACE="Arial, serif">”
в один с помощью ключевого слова “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">else</SPAN></FONT><FONT FACE="Arial, serif">”
(иначе). В самом деле - зачем делать
дополнительную проверку, если у нас
всего два возможных варианта развития:
или угадал число, или (иначе) не угадал.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
измените программу, чтобы она загадывала
число от 1 до 1_000_000 (1 миллиона). Чтобы
можно было угадать это число, программа
должна сравнивать текущий ответ
пользователя и искомое число: 1) если
ответ пользователя больше, то программа
должна выводить на экран “Искомое число
меньше вашего ответа”; 2) иначе “Искомое
число больше вашего ответа”. Может
показаться, что угадать это число
невозможно, однако математический
расчет показывает, что угадать число в
этом случае можно не более, чем за 20
попыток. </FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_i93407ta81iq"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt">Тернарный
оператор</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Тернарный
оператор (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ternary</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">operator</SPAN></FONT><FONT FACE="Arial, serif">)
встречается довольно часто и обычно
является однострочной альтернативой
(иногда говорят &quot;</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">one</SPAN></FONT><FONT FACE="Arial, serif">-</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">liner</SPAN></FONT><FONT FACE="Arial, serif">&quot;)
конструкции &quot;</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">if</SPAN></FONT><FONT FACE="Arial, serif">...</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">else</SPAN></FONT><FONT FACE="Arial, serif">&quot;.
Многие программисты успешно применяют
этот оператор, но не знают как он
называется. Мы рекомендуем запомнить
это название, потому что всегда приятнее
сказать коллеге: &quot;уважаемый коллега,
давайте заменим это прекрасное ветвление
на тернарный оператор!&quot;.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Несмотря
на страшное название, синтаксис у
тернарного оператора очень простой:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">something_is_truthy
? do_this() : else_this()</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Например:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">is_it_raining?
? stay_home() : go_party()</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Что
аналогично такой же записи, но с
использованием &quot;</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">if</SPAN></FONT><FONT FACE="Arial, serif">...</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">else</SPAN></FONT><FONT FACE="Arial, serif">&quot;:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">if
is_it_raining?</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">stay_home()</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">else</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">go</SPAN></FONT><FONT FACE="Courier New, serif">_</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">party</SPAN></FONT><FONT FACE="Courier New, serif">()</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Пустые
скобки в том и другом случае можно
опустить. Обратите внимание на двойной
знак вопроса. Он появился из-за того,
что авторы предполагают, что &quot;</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">is</SPAN></FONT><FONT FACE="Arial, serif">_</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">it</SPAN></FONT><FONT FACE="Arial, serif">_</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">raining</SPAN></FONT><FONT FACE="Arial, serif">?&quot;
это метод, который возвращает тип </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Boolean</SPAN></FONT><FONT FACE="Arial, serif">
(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">TrueClass</SPAN></FONT><FONT FACE="Arial, serif">
или </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">FalseClass</SPAN></FONT><FONT FACE="Arial, serif">).
А правило хорошего тона говорит о том,
что все методы, возвращающие этот тип
должны заканчиваться знаком вопроса.
Если бы результат зависел от какой-либо
переменной, то запись имела бы более
&quot;понятный&quot; вид:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">x
? stay_home() : go_party()</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Или:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">x
? stay_home : go_party</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Как
видно из примера, тернарный оператор
имеет более компактный вид и позволяет
сэкономить несколько строк на экране.
Недостаток (и одновременно преимущество)
тернарного оператора в том, что он
выглядит хорошо только тогда, когда
нужно выполнить только одну инструкцию.
Для нескольких методов подряд лучше
использовать конструкцию &quot;</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">if</SPAN></FONT><FONT FACE="Arial, serif">...</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">else</SPAN></FONT><FONT FACE="Arial, serif">&quot;.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Результат
выражения с тернарным оператором можно
также записать в переменную. </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Например:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">x
= is_it_raining?</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">result
= x ? stay_home : go_party</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">`</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">result</SPAN></FONT><FONT FACE="Arial, serif">`
будет содержать результат выполнения
операции `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">stay</SPAN></FONT><FONT FACE="Arial, serif">_</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">home</SPAN></FONT><FONT FACE="Arial, serif">`
или `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">go</SPAN></FONT><FONT FACE="Arial, serif">_</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">party</SPAN></FONT><FONT FACE="Arial, serif">`.
Это также справедливо и для конструкции
&quot;</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">if</SPAN></FONT><FONT FACE="Arial, serif">...</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">else</SPAN></FONT><FONT FACE="Arial, serif">&quot;:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">x</SPAN></FONT><FONT FACE="Courier New, serif">
= </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">is</SPAN></FONT><FONT FACE="Courier New, serif">_</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">it</SPAN></FONT><FONT FACE="Courier New, serif">_</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">raining</SPAN></FONT><FONT FACE="Courier New, serif">?</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">result
= if x</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">stay_home</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">else</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">go</SPAN></FONT><FONT FACE="Courier New, serif">_</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">party</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">В
примерах выше результат выполнения
метода `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">stay</SPAN></FONT><FONT FACE="Arial, serif">_</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">home</SPAN></FONT><FONT FACE="Arial, serif">`
или `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">go</SPAN></FONT><FONT FACE="Arial, serif">_</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">party</SPAN></FONT><FONT FACE="Arial, serif">`
будет записан в переменную `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">result</SPAN></FONT><FONT FACE="Arial, serif">`.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
запишите следующие примеры при помощи
тернарного оператора:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Пример</FONT><FONT FACE="Arial, serif"><SPAN LANG="en-US">
1:</SPAN></FONT></P>
<P LANG="en-US" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">if
friends_are_also_coming?</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">go_party</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">else</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">stay_home</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Пример
2:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">if
friends_are_also_coming? &amp;&amp; !is_it_raining</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">go_party</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">else</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">stay</SPAN></FONT><FONT FACE="Courier New, serif">_</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">home</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_rks0p78rc152"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt">Индикатор
загрузки</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Индикатор
загрузки (который также называют
“</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Progress</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">bar</SPAN></FONT><FONT FACE="Arial, serif">”)
это просто один из самых простых
визуальных способов показать пользователю,
что выполняется какое-то действие.
Например, скачивание файла или
форматирование жесткого диска занимает
определенное время, но для того, чтобы
пользователь знал, что компьютер не
завис используют </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Progress</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Bar</SPAN></FONT><FONT FACE="Arial, serif">.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Для
закрепления полученных знаний напишем
программу, которая будет выводить на
экран сообщение о форматировании диска
(не переживайте, самого форматирования
диска не будет - только визуальная
часть):</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">print
'Formatting hard drive'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">100_000.times
do</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">print
'.'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">sleep
rand(0.05..0.5)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Из-за
случайной задержки от 0,05 до 0,5 секунд
визуальный эффект выглядит довольно
правдоподобно. Как было замечено ранее,
функция “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">print</SPAN></FONT><FONT FACE="Arial, serif">”
в отличие от “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Arial, serif">”
не переводит курсор на следующую строку.
А теперь загадка: что напечатает программа
ниже:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">print</SPAN></FONT><FONT FACE="Courier New, serif">
&quot;</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">one</SPAN></FONT><FONT FACE="Courier New, serif">\</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">rtwo</SPAN></FONT><FONT FACE="Courier New, serif">&quot;</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">(заметьте,
что используются двойные кавычки).
Правильный ответ: “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">two</SPAN></FONT><FONT FACE="Arial, serif">”.
Что же тут произошло? Все просто: сначала
компьютер вывел на экран слово “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">one</SPAN></FONT><FONT FACE="Arial, serif">”,
потом курсор переместился в начало
строки, и потом на экране появилось
слово “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">two</SPAN></FONT><FONT FACE="Arial, serif">”.
Говорят, что “\</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">r</SPAN></FONT><FONT FACE="Arial, serif">”
(от слова </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">return</SPAN></FONT><FONT FACE="Arial, serif">
- возврат) -- </FONT><FONT FACE="Arial, serif"><I>управляющий
символ</I></FONT><FONT FACE="Arial, serif">. </FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
с помощью символов “/”, “-”, “\”, “|”
сделайте анимацию - индикатор загрузки.
Если выводить эти символы по-очереди
на одном и том же месте, возникает
ощущение вращающегося символа.</FONT></P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_kgejlk20wfto"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt">Методы</FONT></FONT></P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Методы
(или функции, реже - подпрограммы) - это
небольшие участки программы, которые
можно использовать повторно. До сих пор
мы не использовали написанный код
повторно (за исключением случаев, когда
код находился внутри, например, </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">loop</SPAN></FONT><FONT FACE="Arial, serif">),
но методы позволяют существенно упростить
вашу программу, разбив ее на несколько
логических блоков.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Методы
не обязательно “должны” сделать
программу меньше в размере. Основная
задача - выделить какие-то логические
блоки и сделать программу более читаемой
для человека.  Часто такой процесс
называется рефакторингом (а эту технику
рефакторинга - “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">extract</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">method</SPAN></FONT><FONT FACE="Arial, serif">”,
выделить метод): есть большая программа
и вот эта часть делает определенную
функциональность, которую можно выделить
отдельно, давайте ее выделим. В результате
рефакторинга большой участок программы
разбивается на два маленьких.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Но
методы можно писать и просто для удобства.
Чуть выше мы использовали такую
конструкцию:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">age</SPAN></FONT><FONT FACE="Courier New, serif">
= </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">gets</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">to</SPAN></FONT><FONT FACE="Courier New, serif">_</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">i</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Назначение
этого кода в том, чтобы считать ввод
пользователя и сконвертировать </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">String</SPAN></FONT><FONT FACE="Arial, serif">
в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Integer</SPAN></FONT><FONT FACE="Arial, serif">
(с помощью “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">to</SPAN></FONT><FONT FACE="Arial, serif">_</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">i</SPAN></FONT><FONT FACE="Arial, serif">”).
Конструкция не очень понятна тем, кто
смотрит на код впервые. Чтобы она стала
более понятной, сделаем рефакторинг и
выделим метод:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">def
get_number</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">gets.to_i</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">age
= get_number</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">С
помощью </SPAN></FONT><FONT FACE="Arial, serif">“</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">def</SPAN></FONT><FONT FACE="Arial, serif">...</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT><FONT FACE="Arial, serif">”
мы “объявили” метод. Теперь мы можем
смело писать “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">age</SPAN></FONT><FONT FACE="Arial, serif">
= </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">get</SPAN></FONT><FONT FACE="Arial, serif">_</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">number</SPAN></FONT><FONT FACE="Arial, serif">”,
с точки зрения программиста это выглядит
более понятно, особенно когда речь идет
про несколько переменных:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">age
= get_number</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">salary
= get_number</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">rockets</SPAN></FONT><FONT FACE="Courier New, serif">
= </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">get</SPAN></FONT><FONT FACE="Courier New, serif">_</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">number</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Методы
в руби всегда возвращают значение, даже
если кажется, что они его не возвращают.
Результат выполнения последней строки
метода (в примере выше она же и первая)
это и есть возвращаемое значение. Если
мы по какой-то причине хотим вернуть
значение в середине метода (и прекратить
дальнейшее выполнение), мы можем
использовать ключевое слово </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">return</SPAN></FONT><FONT FACE="Arial, serif">:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">def
check_if_world_is_crazy?</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">if
2 + 2 == 4</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">return
false</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">puts
&quot;Jesus, I can't believe that&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">true</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Последнюю
строку можно записать как “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">return</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">true</SPAN></FONT><FONT FACE="Arial, serif">”,
но это необязательно. Метод, как и любой
блок, может содержать несколько строк
подряд. Также метод может принимать
параметры:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">def</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">get</SPAN></FONT><FONT FACE="Courier New, serif">_</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">number</SPAN></FONT><FONT FACE="Courier New, serif">(</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">what</SPAN></FONT><FONT FACE="Courier New, serif">)</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">print</SPAN></FONT><FONT FACE="Courier New, serif">
&quot;Введите #{</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">what</SPAN></FONT><FONT FACE="Courier New, serif">}:
&quot;</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">gets.to_i</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">age
= get_number('возраст')</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">salary
= get_number('зарплату')</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">rockets
= get_number('количество ракет для запуска')</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Результат
работы программы:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Введите
возраст: 10</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Введите
зарплату: 3000</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Введите
количество ракет для запуска: 5</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Согласитесь,
что программа выше выглядит намного
проще, чем она могла бы выглядеть без
метода </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">get</SPAN></FONT><FONT FACE="Arial, serif">_</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">number</SPAN></FONT><FONT FACE="Arial, serif">:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">print
'Введите возраст:'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">age
= gets.to_i</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">print
'Введите зарплату:'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">salary
= gets.to_i</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">print</SPAN></FONT><FONT FACE="Courier New, serif">
'Введите количество ракет для запуска:'</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">rockets</SPAN></FONT><FONT FACE="Courier New, serif">
= </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">gets</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">to</SPAN></FONT><FONT FACE="Courier New, serif">_</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">i</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Более
того, представьте, что мы решили задать
вопрос немного иначе: &quot;Введите,
пожалуйста&quot; вместо &quot;Введите&quot;. В
случае с методом нам нужно сделать
исправление только в одном месте. А если
программа не разделена на логические
блоки и &quot;идет сплошной простынёй&quot;,
исправления надо сделать сразу в трех
местах.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Начинающему
может показаться что это совсем
незначительные улучшения. Однако, на
практике следует выполнять рефакторинг
постоянно. Когда код хорошо организован,
писать программы одно удовольствие! К
сожалению, организация кода не такая
простая задача, как может показаться
на первый взгляд. Существует много
техник рефакторинга, шаблонов
проектирования и так далее. Но главное,
конечно - желание программиста поддерживать
порядок.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
напишите метод, который выводит на экран
пароль, но в виде звездочек. Например,
если пароль “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">secret</SPAN></FONT><FONT FACE="Arial, serif">”,
метод должен вывести “Ваш пароль:
******”.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.22in; margin-bottom: 0.06in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_qfj0a5lejhw6"></A>
<FONT COLOR="#434343"><FONT FACE="Arial, serif"><FONT SIZE=4>Эмулятор
судного дня</FONT></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Для
закрепления знаний давайте напишем
эмулятор судного дня. Машины захватили
мир, идет борьба за выживание. Кто выживет
человечество или машины - покажет судьба.
Точнее, генератор случайных чисел.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Программа
будет выводить на экран поток случайных
сообщений, которые будут представлять
какие-либо события в мире. Если бы это
была графическая программа, было бы
интереснее. Но в текстовом виде степень
интересности зависит лишь от воображения
зрителя. Возможно, кому-то понравится
наша программа и пользователи поставят
ее как </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">screen</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">saver</SPAN></FONT><FONT FACE="Arial, serif">.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Важное
примечание: написать программу можно
и проще, и лучше. Но не весь язык руби мы
пока изучили. Поэтому ограничимся тем,
что есть.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Для
начала условимся, что людей и машин
осталось поровну: по 10000 с каждой стороны.
В каждом цикле программы будет происходить
одно случайное событие. И с одинаковой
долей вероятности число людей или машин
будет убавляться. Победа наступает в
том случае, когда или людей, или машин
не осталось. Приступим.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Во-первых,
сформулируем правило победы. У нас будет
главный цикл и две переменных:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">humans
= 10_000</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">machines
= 10_000</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">loop
do</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">if
check_victory?</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">exit</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif">...</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Две
переменные `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">humans</SPAN></FONT><FONT FACE="Arial, serif">`
и `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">machines</SPAN></FONT><FONT FACE="Arial, serif">`
будут хранить значение о количестве
выживших.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Метод
`</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">check</SPAN></FONT><FONT FACE="Arial, serif">_</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">victory</SPAN></FONT><FONT FACE="Arial, serif">?`
будет возвращать значение типа </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Boolean</SPAN></FONT><FONT FACE="Arial, serif">
и если наступила победа одной из сторон
(не важно какой), то производится выход
из программы. Если победы не наступило,
борьба продолжается. Пусть этот метод
также выводит сообщение о том, кто в
итоге выиграл.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Теперь
нужно определить несколько событий,
которые могут случится. Назовем их
`</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">event</SPAN></FONT><FONT FACE="Arial, serif">1`,
`</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">event</SPAN></FONT><FONT FACE="Arial, serif">2`
и `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">event</SPAN></FONT><FONT FACE="Arial, serif">3`.
В зависимости от случайного значения
будет вызываться тот или иной метод.
Будем подбрасывать игральную кость
(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">dice</SPAN></FONT><FONT FACE="Arial, serif">),
которая пока будет принимать значение
от 1 до 3:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">def
event1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">#
...</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">def
event2</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">#
...</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">def
event3</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">#
...</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">#
...</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">dice
= rand(1..3)</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">if
dice == 1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">event1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">elsif
dice == 2</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">event2</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">elsif
dice == 3</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">event3</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Мы
применили новое ключевое слово &quot;</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">elsif</SPAN></FONT><FONT FACE="Arial, serif">&quot;
(слово </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">else</SPAN></FONT><FONT FACE="Arial, serif">
нам уже знакомо). </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Elsif</SPAN></FONT><FONT FACE="Arial, serif">
это, пожалуй, самое неочевидное сокращение
в языке руби, которое означает &quot;</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">else</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">if</SPAN></FONT><FONT FACE="Arial, serif">&quot;
(иначе если...).</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Ну
и завершим цикл конструкцией </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">sleep</SPAN></FONT><FONT FACE="Arial, serif">,
которая будет ждать случайное количество
секунд (от 0.3 до 1.5):</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">sleep</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">rand</SPAN></FONT><FONT FACE="Arial, serif">(0.3..1.5)</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Готовая
программа:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">########################################</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">#
ОПРЕДЕЛЯЕМ ПЕРЕМЕННЫЕ</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">########################################</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">@</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">humans</SPAN></FONT><FONT FACE="Arial, serif">
= 10_000</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">@</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">machines</SPAN></FONT><FONT FACE="Arial, serif">
= 10_000</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">########################################</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">#
ВСПОМОГАТЕЛЬНЫЕ МЕТОДЫ</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">########################################</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">#
Метод возвращает случайное значение:
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">true</SPAN></FONT><FONT FACE="Arial, serif">
или </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">false</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">def
luck?</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">rand(0..1)
== 1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">def
boom</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">diff
= rand(1..5)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">if
luck?</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Arial, serif"><SPAN LANG="en">@machines
-= diff</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Arial, serif"><SPAN LANG="en">puts
&quot;#{diff} машин уничтожено&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">else</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Arial, serif"><SPAN LANG="en">@humans
-= diff</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Arial, serif"><SPAN LANG="en">puts
&quot;#{diff} людей погибло&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">#
Метод возвращает случайное название
города</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">def</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">random</SPAN></FONT><FONT FACE="Arial, serif">_</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">city</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">dice
= rand(1..5)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">if
dice == 1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Arial, serif"><SPAN LANG="en">'Москва'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">elsif
dice == 2</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Arial, serif"><SPAN LANG="en">'Лос-Анджелес'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">elsif
dice == 3</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Arial, serif"><SPAN LANG="en">'Пекин'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">elsif
dice == 4</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Arial, serif"><SPAN LANG="en">'Лондон'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">else</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Arial, serif"><SPAN LANG="en">'Сеул'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">def
random_sleep</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">sleep
rand(0.3..1.5)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">def
stats</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">puts
&quot;Осталось #{@humans} людей и #{@machines} машин&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">########################################</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">#
СОБЫТИЯ</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">########################################</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">def
event1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">puts
&quot;Запущена ракета по городу #{random_city}&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">random_sleep</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">boom</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">def
event2</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Arial, serif">
&quot;Применено радиоактивное оружие в
городе #{</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">random</SPAN></FONT><FONT FACE="Arial, serif">_</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">city</SPAN></FONT><FONT FACE="Arial, serif">}&quot;</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">random_sleep</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">boom</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">def
event3</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Arial, serif">
&quot;Группа солдат прорывает оборону
противника в городе #{</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">random</SPAN></FONT><FONT FACE="Arial, serif">_</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">city</SPAN></FONT><FONT FACE="Arial, serif">}&quot;</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">random_sleep</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">boom</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">########################################</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">#
ПРОВЕРКА ПОБЕДЫ</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">########################################</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">def
check_victory?</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">false</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">########################################</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">#
ГЛАВНЫЙ ЦИКЛ</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">########################################</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">loop
do</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">if
check_victory?</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Arial, serif"><SPAN LANG="en">exit</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">dice
= rand(1..3)</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">if
dice == 1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Arial, serif"><SPAN LANG="en">event1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">elsif
dice == 2</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Arial, serif"><SPAN LANG="en">event2</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">elsif
dice == 3</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Arial, serif"><SPAN LANG="en">event3</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">stats</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">random</SPAN></FONT><FONT FACE="Arial, serif">_</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">sleep</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Результат
работы:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Запущена
ракета по городу Сеул</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">1
машин уничтожено</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Осталось
10000 людей и 9999 машин</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Применено
радиоактивное оружие в городе Пекин</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">4
людей погибло</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Осталось
9996 людей и 9999 машин</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Применено
радиоактивное оружие в городе Лос-Анджелес</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">4
машин уничтожено</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Осталось
9996 людей и 9995 машин</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Группа
солдат прорывает оборону противника в
городе Лондон</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">...</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
реализуйте метод “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">check</SPAN></FONT><FONT FACE="Arial, serif">_</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">victory</SPAN></FONT><FONT FACE="Arial, serif">?”
(сейчас он просто возвращает значение
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">false</SPAN></FONT><FONT FACE="Arial, serif">).
В случае победы или поражения необходимо
выводить полученный результат на экран.
Измените 10_000 на 10 чтобы легче было
отлаживать программу.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
посмотрите документацию к &quot;</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ruby</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">case</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">statements</SPAN></FONT><FONT FACE="Arial, serif">&quot;
и замените конструкцию &quot;</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">if</SPAN></FONT><FONT FACE="Arial, serif">...</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">elsif</SPAN></FONT><FONT FACE="Arial, serif">&quot;
на &quot;</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">case</SPAN></FONT><FONT FACE="Arial, serif">...</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">when</SPAN></FONT><FONT FACE="Arial, serif">&quot;.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
сделать так, чтобы цикл был теоретически
бесконечным. Т.е. чтобы равновероятно
на свет появлялись люди и машины.
Количество появившихся людей или машин
должно равняться количеству погибших
людей или машин. Несмотря на то, что
теоретически борьба может быть
бесконечной, на практике может наступить
ситуация, в которой та или иная сторона
выигрывает. Проверьте программу на
практике, попробуйте разные значения
`</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">humans</SPAN></FONT><FONT FACE="Arial, serif">`
и `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">machines</SPAN></FONT><FONT FACE="Arial, serif">`
(1000, 100, 10).</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
улучшите программу, добавьте как минимум
еще 3 события, которые могут влиять на
результат судного дня.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_iybrqfyrtcwi"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt">Переменные
экземпляра и локальные переменные</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Внимательный
читатель уже обратил внимание на странный
префикс `@` перед именем переменной. В
языке руби нельзя получить доступ к
переменным, объявленным вне метода.
Исключение составляют лишь </FONT><FONT FACE="Arial, serif"><I>переменные
экземпляра</I></FONT><FONT FACE="Arial, serif"> класса
(что такое “экземпляр” рассказывается
позднее, пока можете представлять их
как “почти глобальные”). Например,
следующий код не будет исполнен и
интерпретатор руби выдаст ошибку:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">x
= 123</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">def
print_x</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">puts
x</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">print_x</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Текст
ошибки “undefined local variable or method `x' for
main:Object (NameError)”. </SPAN></FONT><FONT FACE="Arial, serif">Но
что же такое </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">main</SPAN></FONT><FONT FACE="Arial, serif">?
Оказывается, любая программа в руби
“оборачивается” в класс “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">main</SPAN></FONT><FONT FACE="Arial, serif">”.
Это легко доказать, достаточно запустить
вот такую программу:<BR><BR>```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">self</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">self</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">class</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Вывод:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">main</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">Object</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Другими
словами, это </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">top</SPAN></FONT><FONT FACE="Arial, serif">-</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">level</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">scope</SPAN></FONT><FONT FACE="Arial, serif">
в языке руби. Не стоит особо волноваться
на этот счет до тех пор, пока вы не начнете
изучать внутренние особенности языка.
Но зная об этой особенности, становится
проще понять почему метод не имеет
доступ к переменной. Эта переменная не
является </FONT><FONT FACE="Arial, serif"><I>локальной</I></FONT><FONT FACE="Arial, serif">
(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">local</SPAN></FONT><FONT FACE="Arial, serif">)
для метода. Локальная - это любая
переменная, объявленная внутри метода.
К локальным переменным можно обратиться
обычным способом:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">def</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">calc</SPAN></FONT><FONT FACE="Courier New, serif">_</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">something</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">x</SPAN></FONT><FONT FACE="Courier New, serif">
= 2 + 2</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">x</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Но
для доступа к переменным экземпляра,
они должны быть объявлены специальным
образом: с помощью префикса `@`. Другими
словами, мы можем переписать наш код с
учетом этой особенности:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">@x
= 123</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">def
print_x</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">puts
@x</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">print</SPAN></FONT><FONT FACE="Courier New, serif">_</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">x</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Теперь
метод `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">print</SPAN></FONT><FONT FACE="Arial, serif">_</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">x</SPAN></FONT><FONT FACE="Arial, serif">`
может получить доступ к этой переменной.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">В
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">
все немного иначе. Метод может “видеть”
переменную, объявленную в своем
“родительском” методе. Такая конструкция
называется замыканием (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">closure</SPAN></FONT><FONT FACE="Arial, serif">):</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">x</SPAN></FONT><FONT FACE="Courier New, serif">
= 123</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">function</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">printX</SPAN></FONT><FONT FACE="Courier New, serif">()
{</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">console</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">log</SPAN></FONT><FONT FACE="Courier New, serif">(</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">x</SPAN></FONT><FONT FACE="Courier New, serif">);</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">}</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">printX</SPAN></FONT><FONT FACE="Courier New, serif">();</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```
</FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Как
вы уже могли заметить, в разных языках
есть разные особенности. Эти особенности
определены чаще всего природой языка
программирования: для какой цели был
создан тот или иной язык. </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">
это событийный асинхронный язык и
замыкания - простые функции, имеющие
доступ к переменным, объявленным вне
себя - очень удобны, когда возникают
какие-либо события (например, пользователь
щелкает на каком-либо элементе).</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.22in; margin-bottom: 0.06in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_r10ypxajjp2z"></A>
<FONT COLOR="#434343"><FONT FACE="Arial, serif"><FONT SIZE=4>Однорукий
бандит (слот-машина)</FONT></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Для
закрепления материала напишем на этот
раз игру попроще: “Однорукий бандит”.
Положим деньги в банк, дернем виртуальную
ручку и посмотрим на результат.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Прикинем
наш план. За деньги в банке будет отвечать
отдельная переменная “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">balance</SPAN></FONT><FONT FACE="Arial, serif">”.
В игре будут три места под игровые
символы. Традиционными символами для
слот-машин являются изображения фруктов,
вишни, колокола и цифры “7”. В нашем
случае это будут просто цифры от 0 до 5.
Пусть переменные “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">x</SPAN></FONT><FONT FACE="Arial, serif">”,
“</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">y</SPAN></FONT><FONT FACE="Arial, serif">”
и “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">z</SPAN></FONT><FONT FACE="Arial, serif">”
будут представлять игровые символы.
Значение этих переменных будет задаваться
через генератор случайных чисел.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Определимся
с понятием выигрыша и проигрыша. Пусть
совпадение всех трех переменных что-то
означает. </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Например:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Если
	все переменные равны нулю, баланс
	обнуляется</FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Если
	все переменные равны 1, на счет добавляется
	10 долларов</FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Если
	все переменные равны 2, на счет добавляется
	20 долларов</FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Иначе
	со счета списывается 50 центов</SPAN></FONT></P>
</UL>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Программа
должна работать до тех пор, пока на
балансе есть деньги. Начнем с элементарной
проверки возраста игрока:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">print</SPAN></FONT><FONT FACE="Courier New, serif">
'Ваш возраст: '</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">age</SPAN></FONT><FONT FACE="Courier New, serif">
= </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">gets</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">to</SPAN></FONT><FONT FACE="Courier New, serif">_</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">i</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">if</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">age</SPAN></FONT><FONT FACE="Courier New, serif">
&lt; 18</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
'Сожалеем, но вам нет 18'</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">exit</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Переменная
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">balance</SPAN></FONT><FONT FACE="Arial, serif">
будет хранить баланс в 20 долларов, плюс
определим бесконечный цикл:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">balance</SPAN></FONT><FONT FACE="Courier New, serif">
= 20</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">loop</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">do</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif">#
..</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Внутри
цикла стандартным способом ожидаем
нажатия </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Enter</SPAN></FONT><FONT FACE="Arial, serif">:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
'Нажмите </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">Enter</SPAN></FONT><FONT FACE="Courier New, serif">,
чтобы дернуть ручку...'</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">gets</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Зададим
значения переменных “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">x</SPAN></FONT><FONT FACE="Arial, serif">”,
“</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">y</SPAN></FONT><FONT FACE="Arial, serif">”
и “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">z</SPAN></FONT><FONT FACE="Arial, serif">”:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">x
= rand(0..5)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">y
= rand(0..5)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">z
= rand(0..5)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Выводим
результат розыгрыша:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
&quot;Результат: #{</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">x</SPAN></FONT><FONT FACE="Courier New, serif">}
#{</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">y</SPAN></FONT><FONT FACE="Courier New, serif">}
#{</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">z</SPAN></FONT><FONT FACE="Courier New, serif">}&quot;</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Проверим
первое условие “Если все переменные
равны нулю, баланс обнуляется”:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">if
x == 0 &amp;&amp; y == 0 &amp;&amp; z == 0</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">balance
= 0</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
'Ваш баланс обнулен'</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Проверим
второе условие “Если все переменные
равны 1, на счет добавляется 10 долларов”
и объединим несколько условий в один
блок </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">if</SPAN></FONT><FONT FACE="Arial, serif">
с помощью “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">elsif</SPAN></FONT><FONT FACE="Arial, serif">”:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en-US">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">elsif</SPAN></FONT><FONT FACE="Courier New, serif"><SPAN LANG="en-US">
</SPAN></FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">x</SPAN></FONT><FONT FACE="Courier New, serif"><SPAN LANG="en-US">
== 1 &amp;&amp; </SPAN></FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">y</SPAN></FONT><FONT FACE="Courier New, serif"><SPAN LANG="en-US">
== 1 &amp;&amp; </SPAN></FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">z</SPAN></FONT><FONT FACE="Courier New, serif"><SPAN LANG="en-US">
== 1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">balance</SPAN></FONT><FONT FACE="Courier New, serif"><SPAN LANG="en-US">
+= 10</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
'Баланс увеличился на 10 долларов'</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Добавим
третье “Если все переменные равны 2, на
счет добавляется 20 долларов” и четвертое
“Иначе со счета списывается 50 центов”
условия. Вот как выглядит участок кода
со всеми условиями:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">if</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">x</SPAN></FONT><FONT FACE="Courier New, serif">
== 0 &amp;&amp; </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">y</SPAN></FONT><FONT FACE="Courier New, serif">
== 0 &amp;&amp; </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">z</SPAN></FONT><FONT FACE="Courier New, serif">
== 0</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">balance</SPAN></FONT><FONT FACE="Courier New, serif">
= 0</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
'Ваш баланс обнулен'</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">elsif</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">x</SPAN></FONT><FONT FACE="Courier New, serif">
== 1 &amp;&amp; </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">y</SPAN></FONT><FONT FACE="Courier New, serif">
== 1 &amp;&amp; </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">z</SPAN></FONT><FONT FACE="Courier New, serif">
== 1</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">balance</SPAN></FONT><FONT FACE="Courier New, serif">
+= 10</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
'Баланс увеличился на 10 долларов'</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">elsif
x == 2 &amp;&amp; y == 2 &amp;&amp; z == 2</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">balance
+= 20</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
'Баланс увеличился на 20 долларов'</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">else</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">balance</SPAN></FONT><FONT FACE="Courier New, serif">
-= 0.5</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
'Баланс уменьшился на 50 центов'</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Под
конец выведем результат на экран:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
&quot;Ваш баланс: #{</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">balance</SPAN></FONT><FONT FACE="Courier New, serif">}
долларов&quot;  </FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Код
программы целиком:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">print</SPAN></FONT><FONT FACE="Courier New, serif">
'Ваш возраст: '</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">age
= gets.to_i</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">if
age &lt; 18</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
'Сожалеем, но вам нет 18'</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">exit</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">balance
= 20</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">loop
do</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">puts
'Нажмите Enter, чтобы дернуть ручку...'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">gets</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">x
= rand(0..5)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">y
= rand(0..5)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">z
= rand(0..5)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">puts
&quot;Результат: #{x} #{y} #{z}&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">if
x == 0 &amp;&amp; y == 0 &amp;&amp; z == 0</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">balance
= 0</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">puts
'Ваш баланс обнулен'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">elsif
x == 1 &amp;&amp; y == 1 &amp;&amp; z == 1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">balance</SPAN></FONT><FONT FACE="Courier New, serif">
+= 10</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
'Баланс увеличился на 10 долларов'</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">elsif
x == 2 &amp;&amp; y == 2 &amp;&amp; z == 2</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">balance
+= 20</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
'Баланс увеличился на 20 долларов'</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">else</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">balance</SPAN></FONT><FONT FACE="Courier New, serif">
-= 0.5</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
'Баланс уменьшился на 50 центов'</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
&quot;Ваш баланс: #{</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">balance</SPAN></FONT><FONT FACE="Courier New, serif">}
долларов&quot;  </FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Результат
работы программы:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Ваш
возраст: 20</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Нажмите
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Enter</SPAN></FONT><FONT FACE="Arial, serif">,
чтобы дернуть ручку...</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Результат:
1 2 4</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Баланс
уменьшился на 50 центов</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Ваш
баланс: 19.5 долларов</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Нажмите
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Enter</SPAN></FONT><FONT FACE="Arial, serif">,
чтобы дернуть ручку...</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">…</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Результат:
1 1 1</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Баланс
увеличился на 10 долларов</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Ваш
баланс: 15.5 долларов</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Нажмите
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Enter</SPAN></FONT><FONT FACE="Arial, serif">,
чтобы дернуть ручку...</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Программа
работает, согласитесь, что в ней нет
ничего сложного? С помощью полученных
знаний мы можем составлять простейшие
игры, расчеты, делать другие полезные
приложения. Программы на руби получаются
небольшими, элегантными и самое главное
- понятными. Ведь это именно то, что
делает программирование нескучным.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Когда
мы изучим некоторые популярные структуры
данных, узнаем, что такое классы и
объекты, освоим работу с некоторыми
инструментами - у нас будет минимальная
теоретическая база, с помощью которой
можно делать удивительные вещи. </FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
определите метод, который будет вычислять
случайный номер с анимацией (используйте
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">sleep</SPAN></FONT><FONT FACE="Arial, serif">
со случайной задержкой). </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Примените
анимацию к переменным “x”, “y”, “z”.</SPAN></FONT></P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><IMG SRC="2eaec5a5667bec5b244b5f4a53e23318_html_14dcba88.gif" NAME="image9.gif" ALIGN=BOTTOM HSPACE=12 VSPACE=12 WIDTH=480 HEIGHT=92 BORDER=0></P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><I>Рис.
Пример анимации </I></FONT><A HREF="https://goo.gl/hpk49x"><FONT COLOR="#1155cc"><FONT FACE="Roboto, serif"><FONT SIZE=2><SPAN LANG="en"><I><U>https</U></I></SPAN></FONT></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Roboto, serif"><FONT SIZE=2><I><U>://</U></I></FONT></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Roboto, serif"><FONT SIZE=2><SPAN LANG="en"><I><U>goo</U></I></SPAN></FONT></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Roboto, serif"><FONT SIZE=2><I><U>.</U></I></FONT></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Roboto, serif"><FONT SIZE=2><SPAN LANG="en"><I><U>gl</U></I></SPAN></FONT></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Roboto, serif"><FONT SIZE=2><I><U>/</U></I></FONT></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Roboto, serif"><FONT SIZE=2><SPAN LANG="en"><I><U>hpk</U></I></SPAN></FONT></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Roboto, serif"><FONT SIZE=2><I><U>49</U></I></FONT></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Roboto, serif"><FONT SIZE=2><SPAN LANG="en"><I><U>x</U></I></SPAN></FONT></FONT></FONT></A><FONT COLOR="#444444"><FONT FACE="Roboto, serif"><FONT SIZE=2><I>
</I></FONT></FONT></FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
добавьте больше условий в игру “Однорукий
бандит”, используйте свое воображение.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
(если вы используете </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">MacOS</SPAN></FONT><FONT FACE="Arial, serif">)
вместо цифр в консоли используйте
эмодзи. Пусть каждой цифре соответствует
определенная картинка. Вы можете найти
эмодзи на сайте </FONT><A HREF="https://emojipedia.org/"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>://</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>emojipedia</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>.</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>org</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>/</U></FONT></FONT></A><FONT FACE="Arial, serif">.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_jpffe8r42s4t"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt">Массивы</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Массив
(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">array</SPAN></FONT><FONT FACE="Arial, serif">)
- это просто какой-то набор данных.
Например, массив имен жильцов, проживающих
в подъезде. Или массив чисел, где каждое
число может иметь какое-то значение
(например, зарплата сотрудника). Или
массив объектов - работники предприятия,
где у каждого работника может быть
указана зарплата, возраст, имя.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Причем,
в руби данные в массиве не обязательно
должны быть одного типа. Т.е. массив это
такая корзина, куда мы можем запихать
яблоки, груши, какие-то цифровые записи,
и парочку пароходов. Но обычно массивы
однородны, т.е. все </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">item</SPAN></FONT><FONT FACE="Arial, serif">’ы
(предметы, элементы) имеют одинаковый
тип.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Возникает
вопрос - а зачем нам использовать массивы?
Зачем нам может потребоваться помещать
что-то в массив? Ответ довольно простой
- массивы удобны тем, что они представляют
какой-то набор данных и с этими данными
можно производить какие-то действия.
Допустим, у нас есть массив посещенных
городов:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Courier New, serif">
= ['Сан-Франциско', 'Москва', 'Лондон',
'Нью-Йорк']</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```
</FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Мы
объявили массив, одновременно поместив
в него 4 элемента типа </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">String</SPAN></FONT><FONT FACE="Arial, serif">.
Руби знает, что это массив, потому что
мы использовали квадратные скобки для
его объявления. С этим массивом мы можем
проделать большое количество различных
полезных операций. Например, получить
количество элементов (посещенных
городов):</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">irb</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">...</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">size</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">=&gt;
4</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Или
отсортировать массив в алфавитном
порядке:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">irb</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">...</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">sort</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">=&gt;
[&quot;Лондон&quot;, &quot;Москва&quot;, &quot;Нью-Йорк&quot;,
&quot;Сан-Франциско&quot;]</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Можем
сделать итерацию (проход) по каждому
элементу массива:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Courier New, serif">
= ['Сан-Франциско', 'Москва', 'Лондон',
'Нью-Йорк']</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">each</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">do</SPAN></FONT><FONT FACE="Courier New, serif">
|</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">word</SPAN></FONT><FONT FACE="Courier New, serif">|</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
&quot;В слове #{</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">word</SPAN></FONT><FONT FACE="Courier New, serif">}
#{</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">word</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">size</SPAN></FONT><FONT FACE="Courier New, serif">}
букв&quot;</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Результат
работы программы:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">В
слове Сан-Франциско 13 букв</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">В
слове Москва 6 букв</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">В
слове Лондон 6 букв</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">В
слове Нью-Йорк 8 букв</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Конечно,
ничто не мешает нам объявить пустой
массив:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Courier New, serif">
= []</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Но
зачем он нужен? Затем же, зачем нужна
пустая корзина - что-нибудь туда положить.
Положить объект (все в руби - объект) в
массив можно несколькими способами,
обычно используется два основных:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">`</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Arial, serif">.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">push</SPAN></FONT><FONT FACE="Arial, serif">(123)`
	- метод </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">push</SPAN></FONT><FONT FACE="Arial, serif">
	также реализован в языке </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">,
	поэтому многие веб-программисты
	предпочитают использовать его</FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">`</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Arial, serif">
	&lt;&lt; 123` - с помощью “двойной стрелки”,
	которая как бы говорит “положить туда”</FONT></P>
</UL>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Например,
простейшая программа “записная книжка”
могла бы выглядеть так:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Courier New, serif">
= []</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">loop</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">do</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">print</SPAN></FONT><FONT FACE="Courier New, serif">
'Введите имя и телефон человека (</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">Enter</SPAN></FONT><FONT FACE="Courier New, serif">
для окончания ввода): '</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">entry
= gets.chomp</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">break
if entry.empty?</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">arr
&lt;&lt; entry</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts
'Ваша записная книжка:'</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr.each
do |element|</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">puts
element</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Результат
работы программы:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2 STYLE="font-size: 9pt">Введите
имя и телефон человека (</FONT></FONT><FONT FACE="Courier New, serif"><FONT SIZE=2 STYLE="font-size: 9pt"><SPAN LANG="en">Enter</SPAN></FONT></FONT><FONT FACE="Courier New, serif"><FONT SIZE=2 STYLE="font-size: 9pt">
для окончания ввода): Геннадий 12345</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2 STYLE="font-size: 9pt">Введите
имя и телефон человека (</FONT></FONT><FONT FACE="Courier New, serif"><FONT SIZE=2 STYLE="font-size: 9pt"><SPAN LANG="en">Enter</SPAN></FONT></FONT><FONT FACE="Courier New, serif"><FONT SIZE=2 STYLE="font-size: 9pt">
для окончания ввода): Мама (555) 111-22-33</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2 STYLE="font-size: 9pt">Введите
имя и телефон человека (</FONT></FONT><FONT FACE="Courier New, serif"><FONT SIZE=2 STYLE="font-size: 9pt"><SPAN LANG="en">Enter</SPAN></FONT></FONT><FONT FACE="Courier New, serif"><FONT SIZE=2 STYLE="font-size: 9pt">
для окончания ввода): Любимая (555) 12345</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2 STYLE="font-size: 9pt">Введите
имя и телефон человека (</FONT></FONT><FONT FACE="Courier New, serif"><FONT SIZE=2 STYLE="font-size: 9pt"><SPAN LANG="en">Enter</SPAN></FONT></FONT><FONT FACE="Courier New, serif"><FONT SIZE=2 STYLE="font-size: 9pt">
для окончания ввода): Любимая 2 (555) 98765</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2 STYLE="font-size: 9pt">Введите
имя и телефон человека (</FONT></FONT><FONT FACE="Courier New, serif"><FONT SIZE=2 STYLE="font-size: 9pt"><SPAN LANG="en">Enter</SPAN></FONT></FONT><FONT FACE="Courier New, serif"><FONT SIZE=2 STYLE="font-size: 9pt">
для окончания ввода):</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2 STYLE="font-size: 9pt">Ваша
записная книжка:</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2 STYLE="font-size: 9pt">Геннадий
12345</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2 STYLE="font-size: 9pt">Мама
(555) 111-22-33</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2 STYLE="font-size: 9pt">Любимая
(555) 12345</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2 STYLE="font-size: 9pt">Любимая
2 (555) 98765</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Конечно,
наша записная книжка пока имеет
минимальный функционал. Когда программа
завершается, данные не сохраняются на
диск. Нет поиска по имени и номеру
телефона. Но зато мы уже умеем кое-что
делать с массивами. Мы можем отсортировать
записи и поиск в записной книжке будет
удобнее!</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_54r19z6y545r"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt">Немного
про </FONT></FONT><FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt"><SPAN LANG="en">each</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Массив
представлен типом </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Array</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><A HREF="https://ruby-doc.org/core-2.2.0/Array.html"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>://</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>ruby</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>-</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>doc</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>.</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>org</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>/</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>core</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>-2.2.0/</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>Array</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>.</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>htm</U></SPAN></FONT></FONT></A><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U><A HREF="https://ruby-doc.org/core-2.2.0/Array.html">l</A></U></SPAN></FONT></FONT><FONT FACE="Arial, serif">
- и в этом типе реализован метод </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">each</SPAN></FONT><FONT FACE="Arial, serif">
(каждый). Вы уже познакомились с этим
методом, когда для каждого элемента
массива мы выполняли какое-то действие.
Технически метод “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">each</SPAN></FONT><FONT FACE="Arial, serif">”
</FONT><FONT FACE="Arial, serif"><I>принимает блок</I></FONT><FONT FACE="Arial, serif">.
Как уже было сказано ранее, мы можем
передать блок в любой метод, дальнейшее
поведение программы зависит от того,
что “под капотом” у этого метода.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Так
вот, метод </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">each</SPAN></FONT><FONT FACE="Arial, serif">
запускает то, что внутри блока для
каждого элемента массива. Другими
словами, маленькую подпрограмму для
каждого элемента (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">element</SPAN></FONT><FONT FACE="Arial, serif">,
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">item</SPAN></FONT><FONT FACE="Arial, serif">):</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">each</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">do</SPAN></FONT><FONT FACE="Courier New, serif">
|</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">item</SPAN></FONT><FONT FACE="Courier New, serif">|</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif">#
внутри блока идет подпрограмма</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif">#
может занимать несколько строк</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Или
в одну строку:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">each</SPAN></FONT><FONT FACE="Courier New, serif">
{ |</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">item</SPAN></FONT><FONT FACE="Courier New, serif">|
...или одну строку... }</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">В
блок последовательно передается параметр
- очередной элемент массива. Т.е. то, что
вы написали внутри “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">each</SPAN></FONT><FONT FACE="Arial, serif">”
между “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">do</SPAN></FONT><FONT FACE="Arial, serif">”
и “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT><FONT FACE="Arial, serif">”
это и есть блок. Таким образом в руби
реализован обход массива (иногда говорят
“итерация массива”, “итерация через
массив”, “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">array</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">iteration</SPAN></FONT><FONT FACE="Arial, serif">”,
“</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">iteration</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">over</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">array</SPAN></FONT><FONT FACE="Arial, serif">”,
реже - “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">array</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">traversal</SPAN></FONT><FONT FACE="Arial, serif">”).</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Имя
параметра мы можем задать любое. В
примере из предыдущей главы мы задавали
имя “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">word</SPAN></FONT><FONT FACE="Arial, serif">”,
когда считали количество букв в слове.
В записной книжке у нас был “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">element</SPAN></FONT><FONT FACE="Arial, serif">”.
Мы можем указать любое имя, желательно
только чтобы оно было понятно программисту.
Работа </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">each</SPAN></FONT><FONT FACE="Arial, serif">
(и любого другого метода, который работает
с блоками) похожа на запуск вашего
собственного метода:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">def
my_method(word)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">puts
&quot;В слове #{word} #{word.size} букв&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Только
с блоком это выглядит немного иначе:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">each</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">do</SPAN></FONT><FONT FACE="Courier New, serif">
|</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">word</SPAN></FONT><FONT FACE="Courier New, serif">|</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
&quot;В слове #{</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">word</SPAN></FONT><FONT FACE="Courier New, serif">}
#{</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">word</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">size</SPAN></FONT><FONT FACE="Courier New, serif">}
букв&quot;</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Жаль,
что в руби нельзя передать название
метода для запуска:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">each</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">my</SPAN></FONT><FONT FACE="Courier New, serif">_</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">method</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Было
бы более понятно. Примечание: на самом
деле можно записать эту конструкцию
похожим образом, но 1) не совсем так 2) с
ограничениями 3) никто так все равно не
делает.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Метод
“</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">each</SPAN></FONT><FONT FACE="Arial, serif">”
реализован также в некоторых других
типах. Обход чего-либо в общем и целом
является довольно популярной операцией
в программировании, поэтому “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">each</SPAN></FONT><FONT FACE="Arial, serif">”
можно увидеть даже там, где его, казалось
бы, быть не может. Вариация “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">each</SPAN></FONT><FONT FACE="Arial, serif">”
для типа </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">String</SPAN></FONT><FONT FACE="Arial, serif">:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">irb</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;
'</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">hello</SPAN></FONT><FONT FACE="Courier New, serif">'.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">each</SPAN></FONT><FONT FACE="Courier New, serif">_</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">char</SPAN></FONT><FONT FACE="Courier New, serif">
{ |</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">x</SPAN></FONT><FONT FACE="Courier New, serif">|
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">x</SPAN></FONT><FONT FACE="Courier New, serif">
}</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">h</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">e</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">l</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">l</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">o</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Метод
“</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">each</SPAN></FONT><FONT FACE="Arial, serif">”
для типа </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Range</SPAN></FONT><FONT FACE="Arial, serif">:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">(1001..1005).each
do |x|</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">puts
&quot;Я робот #{x}&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Результат:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Я
робот 1001</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Я
робот 1002</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Я
робот 1003</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Я
робот 1004</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Я
робот 1005</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_pbqcy7nfok95"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt">Инициализация
массива</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Мы
уже попробовали инициализировать массив
с помощью такой конструкции:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Arial, serif">
= []</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```
</FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Если
мы предварительно хотим что-то поместить
в массив, то конструкция выглядит немного
иначе:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Arial, serif">
= ['</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">one</SPAN></FONT><FONT FACE="Arial, serif">',
'</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">two</SPAN></FONT><FONT FACE="Arial, serif">',
'</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">three</SPAN></FONT><FONT FACE="Arial, serif">']</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Можно
также получить размер массива с помощью
“</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Arial, serif">.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">size</SPAN></FONT><FONT FACE="Arial, serif">”.
Обратите внимание, что названия методов
в руби повторяются. У класса </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">String</SPAN></FONT><FONT FACE="Arial, serif">
есть метод </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">size</SPAN></FONT><FONT FACE="Arial, serif">,
который возвращает длину строки, а у
массива метод </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">size</SPAN></FONT><FONT FACE="Arial, serif">
возвращает размер массива, т.е. количество
элементов. У класса </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">String</SPAN></FONT><FONT FACE="Arial, serif">
метод “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">each</SPAN></FONT><FONT FACE="Arial, serif">_</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">char</SPAN></FONT><FONT FACE="Arial, serif">”
используется для итерации по каждому
символу в строке, и у массива метод
“</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">each</SPAN></FONT><FONT FACE="Arial, serif">”
используется для итерации по каждому
элементу. Другими словами, часто работает
принцип наименьшего сюрприза и о
некоторых методах можно догадаться. В
будущем, когда нам встретятся новые
типы, попробуйте догадаться о том, какое
значение может возвращать метод “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">size</SPAN></FONT><FONT FACE="Arial, serif">”.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">К
сожалению или к счастью, инициализировать
массив в руби можно разными способами,
которые являются совершенно идентичными:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Arial, serif">
= []</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Или
альтернативная запись:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Arial, serif">
= </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Array</SPAN></FONT><FONT FACE="Arial, serif">.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">new</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">На
наш взгляд это недоработка языка, ведь
начинающему придется знакомиться сразу
с двумя идентичными конструкциями, но
не бывает единого мнения! Кто-то считает
что это правильно, кто-то нет, и это
абсолютно нормально. У вас, как у
начинающего, может быть свое собственное
мнение.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Преимущество
полной записи в том, что методу </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">new</SPAN></FONT><FONT FACE="Arial, serif">
(на самом деле это метод </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">initialize</SPAN></FONT><FONT FACE="Arial, serif">,
но мы поговорим об этом позже) можно
передать параметр - размер массива:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```<BR>$
irb</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">&gt;
arr = Array.new(10)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">=&gt;
[nil, nil, nil, nil, nil, nil, nil, nil, nil, nil]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">По-умолчанию
он заполняются пустым значением (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">nil</SPAN></FONT><FONT FACE="Arial, serif">).
Но мы также можем инициализировать
массив каким-либо значением. Представим,
что в компьютерной игре ноль представляет
пустое место, а единица - одного солдата.
Мы хотим создать взвод солдат, мы можем
сделать это с помощью следующей
конструкции (попробуйте самостоятельно
в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">REPL</SPAN></FONT><FONT FACE="Arial, serif">):</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Array</SPAN></FONT><FONT FACE="Arial, serif">.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">new</SPAN></FONT><FONT FACE="Arial, serif">(10,
1)</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Конструкция
создаст массив размером 10, где каждый
элемент будет равен единице:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">[1,
1, 1, 1, 1, 1, 1, 1, 1, 1]</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_2ddxjzo1nhtu"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt">Обращение
к массиву</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">До
сих пор мы рассматривали итерацию по
массиву. Но давайте посмотрим, как мы
можем обратиться к определенному
элементу массива. Обратиться, т.е.
получить доступ - для чтения или записи
- можно с помощью индекса. Индекс довольно
хитрая штука, но в то же время очень
простая. Это порядковый номер минус
один, элементы массива считаются, начиная
с нулевого, а не с первого. Т.е. если мы
хотим обратиться к пятому элементу, нам
нужен четвертый индекс. Попробуем
создать массив строк на пять элементов
в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">REPL</SPAN></FONT><FONT FACE="Arial, serif">:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">&gt;
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Arial, serif">
= %</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">w</SPAN></FONT><FONT FACE="Arial, serif">(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">one</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">two</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">three</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">four</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">five</SPAN></FONT><FONT FACE="Arial, serif">)</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">=&gt;
[&quot;one&quot;, &quot;two&quot;, &quot;three&quot;, &quot;four&quot;,
&quot;five&quot;]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Попробуем
получить размер:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">&gt;
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Arial, serif">.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">size</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">=&gt;
5</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Размер
массива - 5. Т.е. в массиве пять элементов.
Попробуем получить пятый элемент. Для
того, чтобы его получить, нужно использовать
четвертый индекс:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">&gt;
arr[4]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">=&gt;
&quot;five&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Другими
словами:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">`arr[0]`
	вернет “one”</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">`arr[1]`
	вернет “two”</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">`arr[2]`
	вернет “three”</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">`arr[3]`
	вернет “four”</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">`arr[4]`
	вернет “five”</SPAN></FONT></P>
</UL>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Разумеется,
когда мы умеем вычислять это выражение,
мы можем его использовать совместно с
другими функциями:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Arial, serif">[4]</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Передавать
в наш собственный метод:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">my_own_method(arr[4])</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">И
так далее. </SPAN></FONT><FONT FACE="Arial, serif">Т.е.
делать все то же самое, что мы уже умеем
делать с переменной. Например, можно
присвоить какому-нибудь элементу массива
другое значение:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Arial, serif">[1]
= 'двундель'</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Например,
программа:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">arr
= %w(one two three four five)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">arr[1]
= 'двундель'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">arr.each
do |word|</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">word</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Выведет
на экран:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">one</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">двундель</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">three</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">four</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">five</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Мы
могли бы записать эту программу иначе,
это не было бы ошибкой (для небольшого
числа элементов):</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">arr
= %w(one two three four five)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">arr[1]
= 'двундель'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">puts
arr[0]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">puts
arr[1]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">puts
arr[2]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">puts
arr[3]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">puts
arr[4]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.22in; margin-bottom: 0.06in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_is7tl2pzfxs4"></A>
<FONT COLOR="#434343"><FONT FACE="Arial, serif"><FONT SIZE=4>Битва
роботов</FONT></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Для
закрепления материала давайте напишем
простейшую игру “битва роботов”.
Возьмем 20 роботов и разделим их на 2
команды, в каждой команде по 10. Каждую
команду будет представлять отдельный
массив размером 10. Ячейка массива может
принимать два значения:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Ноль
	- когда робот уничтожен</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Единица
	- когда робот еще жив</SPAN></FONT></P>
</UL>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Объявим
два массива. Единица говорит о том, что
мы объявляем массивы с живыми роботами:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">arr1
= Array.new(10, 1)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">arr2
= Array.new(10, 1)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Каждые
команды будут стрелять по-очереди.
Определимся с термином “стрелять”,
что это значит? Если ноль в массиве это
уничтоженный робот, а единица - живой,
то стрелять значит “изменить значение
с единицы на ноль для определенной
ячейки массива”. Но как мы будем
определять какую ячейку менять? Тут
есть два варианта:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Менять
	ячейку подряд. Т.е. сначала уничтожаем
	первого робота во второй команде (первая
	команда делает ход), потом первого
	робота в первой и т.д. Побеждает всегда
	тот, кто первый начал. </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Это
	не интересно.</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Намного
	интереснее выбирать </FONT><FONT FACE="Arial, serif"><I>индекс</I></FONT><FONT FACE="Arial, serif">
	от 0 до 9 каждый раз случайно. Случайность
	не гарантирует того, что индекс не
	повторится. Поэтому одна команда может
	“стрельнуть” по одному и тому же месту.
	Например, через пять ходов вторая
	команда бьет в пятую ячейку, а выстрел
	по ней уже был до этого. Следовательно,
	выстрел не попал в цель, ячейка уже
	равна нулю, и количество убитых роботов
	не изменилось. Т.е. результат сражения
	заранее не гарантирован и зависит от
	везения.</FONT></P>
</UL>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Выберем
второй вариант. Определять случайный
индекс от 0 до 9 мы уже умеем:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">i</SPAN></FONT><FONT FACE="Arial, serif">
= </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">rand</SPAN></FONT><FONT FACE="Arial, serif">(0..9)</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Далее
осталось только обратиться к ячейке
массива и, если она равна единице, то
присвоить ей значение ноль. А если ячейка
уже равна нулю, значит выстрел по этому
месту уже был:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">if
arr[i] == 1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">arr[i]
= 0</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Arial, serif">
&quot;Робот по индексу #{</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">i</SPAN></FONT><FONT FACE="Arial, serif">}
убит&quot;</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">else</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">puts
'Промазали!'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Выигрывает
та команда, в которой остался хотя бы
один робот. Также было бы полезно узнать,
сколько именно роботов осталось. Как
же нам это сделать? Представим, что у
нас есть массив:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Arial, serif">
= [1, 0, 1, 0, 1, 1]</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Как
определить количество элементов, равных
единице? Мы можем использовать уже
знакомый нам метод “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">each</SPAN></FONT><FONT FACE="Arial, serif">”,
делать сравнение и записывать результат
в переменную:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">arr
= [1, 0, 1, 0, 1, 1]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">x
= 0</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">arr.each
do |element|</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">if
element == 1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Arial, serif"><SPAN LANG="en">x
+= 1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">puts
&quot;В массиве #{x} единиц&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Программа
работает, но есть способ проще. Метод
“</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">count</SPAN></FONT><FONT FACE="Arial, serif">”
класса </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Array</SPAN></FONT><FONT FACE="Arial, serif">
(обязательно посмотрите документацию)
делает то же самое, но выглядит намного
проще:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">arr
= [1, 0, 1, 0, 1, 1]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">x
= arr.count do |x|</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">x</SPAN></FONT><FONT FACE="Arial, serif">
== 1</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Arial, serif">
&quot;В массиве #{</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">x</SPAN></FONT><FONT FACE="Arial, serif">}
единиц&quot;</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Или
более короткий способ записи:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">arr
= [1, 0, 1, 0, 1, 1]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">x
= arr.count { |x| x == 1 }</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Arial, serif">
&quot;В массиве #{</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">x</SPAN></FONT><FONT FACE="Arial, serif">}
единиц&quot;</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">На
данном этапе у нас есть все, что нужно.
Две команды роботов, стрелять будут по
очереди, индекс выбирается случайно,
проигрывает тот, у кого не осталось ни
одного робота. Можно писать эту игру.
Т.к. игра не требует ввода пользователя,
мы будем на нее только смотреть.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
напишите эту игру самостоятельно.
Сравните свой результат с программой
ниже. Внимание: есть вероятность, что у
вас что-то не получится, в данном случае
неважно, сможете ли вы написать эту
программу или нет, важен процесс и работа
над ошибками.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Код
программы:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">###############################</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">#
ОБЪЯВЛЯЕМ МАССИВЫ</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">###############################</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">#
массив для первой команды</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">@</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Arial, serif">1
= </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Array</SPAN></FONT><FONT FACE="Arial, serif">.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">new</SPAN></FONT><FONT FACE="Arial, serif">(10,
1)</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">#
массив для второй команды</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">@</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Arial, serif">2
= </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Array</SPAN></FONT><FONT FACE="Arial, serif">.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">new</SPAN></FONT><FONT FACE="Arial, serif">(10,
1)</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">###############################</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">#
АТАКА</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">###############################</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">#
Метод принимает массив для атаки</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">def</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">attack</SPAN></FONT><FONT FACE="Arial, serif">(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Arial, serif">)</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">sleep</SPAN></FONT><FONT FACE="Arial, serif">
1 # добавим </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">sleep</SPAN></FONT><FONT FACE="Arial, serif">
для красоты</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">i
= rand(0..9)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">if
arr[i] == 1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Arial, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Arial, serif">[</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">i</SPAN></FONT><FONT FACE="Arial, serif">]
= 0</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Arial, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Arial, serif">
&quot;Робот по индексу #{</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">i</SPAN></FONT><FONT FACE="Arial, serif">}
уничтожен&quot;</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">else</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Arial, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Arial, serif">
&quot;Промазали по индексу #{</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">i</SPAN></FONT><FONT FACE="Arial, serif">}&quot;</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">sleep</SPAN></FONT><FONT FACE="Arial, serif">
1 # еще один </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">sleep</SPAN></FONT><FONT FACE="Arial, serif">
для красоты вывода</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">###############################</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">#
ПРОВЕРКА ПОБЕДЫ</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">###############################</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">def</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">victory</SPAN></FONT><FONT FACE="Arial, serif">?</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">robots_left1
= @arr1.count { |x| x == 1 }</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">robots_left2
= @arr2.count { |x| x == 1 }</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">if</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">robots</SPAN></FONT><FONT FACE="Arial, serif">_</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">left</SPAN></FONT><FONT FACE="Arial, serif">1
== 0</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Arial, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Arial, serif">
&quot;Команда 2 победила, в команде осталось
#{</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">robots</SPAN></FONT><FONT FACE="Arial, serif">_</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">left</SPAN></FONT><FONT FACE="Arial, serif">2}
роботов&quot;</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Arial, serif"><SPAN LANG="en">return
true</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">if
robots_left2 == 0</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Arial, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Arial, serif">
&quot;Команда 1 победила, в команде осталось
#{</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">robots</SPAN></FONT><FONT FACE="Arial, serif">_</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">left</SPAN></FONT><FONT FACE="Arial, serif">1}
роботов&quot;</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Arial, serif"><SPAN LANG="en">return
false</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">false</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">###############################</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">#
СТАТИСТИКА</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">###############################</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">def</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">stats</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif">#
количество живых роботов для первой и
второй команды</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">cnt</SPAN></FONT><FONT FACE="Arial, serif">1
= @</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Arial, serif">1.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">count</SPAN></FONT><FONT FACE="Arial, serif">
{ |</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">x</SPAN></FONT><FONT FACE="Arial, serif">|
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">x</SPAN></FONT><FONT FACE="Arial, serif">
== 1 }</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">cnt</SPAN></FONT><FONT FACE="Arial, serif">2
= @</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Arial, serif">2.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">count</SPAN></FONT><FONT FACE="Arial, serif">
{ |</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">x</SPAN></FONT><FONT FACE="Arial, serif">|
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">x</SPAN></FONT><FONT FACE="Arial, serif">
== 1 }</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Arial, serif">
&quot;1-ая команда: #{</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">cnt</SPAN></FONT><FONT FACE="Arial, serif">1}
роботов в строю&quot;</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Arial, serif">
&quot;2-ая команда: #{</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">cnt</SPAN></FONT><FONT FACE="Arial, serif">2}
роботов в строю&quot;</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">###############################</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">#
ГЛАВНЫЙ ЦИКЛ</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">###############################</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">loop</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">do</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Arial, serif">
'Первая команда наносит удар...'</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">attack(@arr2)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">exit
if victory?</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">stats</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">sleep</SPAN></FONT><FONT FACE="Arial, serif">
3</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Arial, serif">
# пустая строка</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Arial, serif">
'Вторая команда наносит удар...'</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">attack(@arr1)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">exit
if victory?</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">stats</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">sleep
3</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">puts
# пустая строка</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Результат
работы программы:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Первая
команда наносит удар...</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Робот
по индексу 2 уничтожен</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">1-ая
команда: 10 роботов в строю</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">2-ая
команда: 9 роботов в строю</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Вторая
команда наносит удар...</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Робот
по индексу 8 уничтожен</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">1-ая
команда: 9 роботов в строю</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">2-ая
команда: 9 роботов в строю</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">…</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Первая
команда наносит удар...</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Робот
по индексу 7 уничтожен</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">1-ая
команда: 1 роботов в строю</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">2-ая
команда: 2 роботов в строю</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Вторая
команда наносит удар...</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Робот
по индексу 2 уничтожен</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Команда
2 победила, в команде осталось 2 роботов</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
чтобы статистика была более наглядной,
добавьте в программу выше вывод двух
массивов.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
вместо бинарного значения ноль или
единица пусть каждый робот имеет уровень
жизни, который выражается целым числом
от 1 до 100 (в самом начале это значение
должно быть установлено в 100). Пусть
каждая атака отнимает случайную величину
жизни у робота от 30 до 100. Если уровень
жизни ниже или равен нулю, робот считается
уничтоженным.  </FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_ghlqs12tcmxu"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt">Массивы
массивов (двумерные массивы)</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">При
объявлении массива мы можем указать
любой тип. </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Например,
String:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">$
irb</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">&gt;
Array.new(10, 'hello')</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">=&gt;
[&quot;hello&quot;, &quot;hello&quot;, &quot;hello&quot;, &quot;hello&quot;,
&quot;hello&quot;, &quot;hello&quot;, &quot;hello&quot;, &quot;hello&quot;,
&quot;hello&quot;, &quot;hello&quot;]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Или
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Boolean</SPAN></FONT><FONT FACE="Arial, serif">
(несуществующий тип, созданный нами
намеренно. Этот тип представлен двумя
типами </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">TrueClass</SPAN></FONT><FONT FACE="Arial, serif">
и </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">FalseClass</SPAN></FONT><FONT FACE="Arial, serif">):</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">$
irb</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">&gt;
Array.new(10, true)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">=&gt;
[true, true, true, true, true, true, true, true, true, true]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Или
Integer:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">$
irb</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">&gt;
Array.new(10, 123)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">=&gt;
[123, 123, 123, 123, 123, 123, 123, 123, 123, 123]</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Другими
словами, элемент массива это любой
объект. Если элемент массива любой
объект и сам по себе массив это объект,
значит мы можем объявить массив массивов:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">irb</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">Array</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">new</SPAN></FONT><FONT FACE="Courier New, serif">(10,
[])</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Courier New, serif">=&gt;
[[], [], [], [], [], [], [], [], [], []]</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Если
мы обратимся по какому-либо индексу, то
мы получим массив внутри массива.
Например, индекс 4 выбирает пятый по
счету элемент.  Давайте попробуем
обратиться к элементу по индексу 4:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
irb</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&gt;
arr = Array.new(10, [])</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Courier New, serif"><SPAN LANG="en">=&gt;
[[], [], [], [], [], [], [], [], [], []]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&gt;
element = arr[4]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Courier New, serif">=&gt;
[]</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">element</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">class</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Courier New, serif">=&gt;
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">Array</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Мы
видим, что этот элемент - массив, тип
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Array</SPAN></FONT><FONT FACE="Arial, serif">.
Массив этот пустой. Когда мы ввели
`</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">element</SPAN></FONT><FONT FACE="Arial, serif">
= </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Arial, serif">[4]`,
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">REPL</SPAN></FONT><FONT FACE="Arial, serif">
посчитал нам это выражение и ответил
`[]` (к слову, если бы это была последняя
строка метода, то метод вернул бы `[]`).
Что мы можем сделать с пустым массивом?
Добавить туда что-нибудь. Давайте это
сделаем:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">element</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">push</SPAN></FONT><FONT FACE="Courier New, serif">('</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">something</SPAN></FONT><FONT FACE="Courier New, serif">')</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Вот
такой результат мы ожидаем в переменной
`</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Arial, serif">`
- массив массивов, где четвертый по
индексу (и пятый по порядковому номеру)
элемент что-то содержит наше значение:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">[[],
[], [], [], ['something'], [], [], [], [], []]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Проверим
в REPL:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&gt;
arr</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">=&gt;
[[&quot;something&quot;], [&quot;something&quot;], [&quot;something&quot;],
[&quot;something&quot;], [&quot;something&quot;], [&quot;something&quot;],
[&quot;something&quot;], [&quot;something&quot;], [&quot;something&quot;],
[&quot;something&quot;]]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Ой-ой-ой!
Что-то пошло не так! Посмотрим на текст
программы целиком, что же в ней неправильно:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr
= Array.new(10, [])</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">element
= arr[4]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">element</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">push</SPAN></FONT><FONT FACE="Courier New, serif">('</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">something</SPAN></FONT><FONT FACE="Courier New, serif">')</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">inspect</SPAN></FONT><FONT FACE="Courier New, serif">
# способ вывести информацию на экран
так же, как ее выводит </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">REPL</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Где
ошибка? Слово знатокам, время пошло!
Это, кстати, может быть хитрым вопросом
на интервью. Вопрос не самый простой и
подразумевает знакомство и понимание
принципов работы языка руби, что такое
объект, что такое ссылка. Помните, мы с
вами немного говорили про ссылки? Когда
есть подъезд и каждый звонок ведет в
собственную квартиру? Мы можем повторить
такой же фокус с классом </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">String</SPAN></FONT><FONT FACE="Arial, serif">:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Courier New, serif">
= </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">Array</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">new</SPAN></FONT><FONT FACE="Courier New, serif">(10,
'</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">something</SPAN></FONT><FONT FACE="Courier New, serif">')</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">element</SPAN></FONT><FONT FACE="Courier New, serif">
= </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Courier New, serif">[4]</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">element</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">upcase</SPAN></FONT><FONT FACE="Courier New, serif">!</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">inspect</SPAN></FONT><FONT FACE="Courier New, serif">
# способ вывести информацию на экран
также, как ее выводит </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">REPL</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Ожидаемый
результат:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">[&quot;something&quot;,
&quot;something&quot;, &quot;something&quot;, &quot;something&quot;,
&quot;SOMETHING&quot;, &quot;something&quot;, &quot;something&quot;,
&quot;something&quot;, &quot;something&quot;, &quot;something&quot;]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Реальный
результат:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">[&quot;SOMETHING&quot;,
&quot;SOMETHING&quot;, &quot;SOMETHING&quot;, &quot;SOMETHING&quot;,
&quot;SOMETHING&quot;, &quot;SOMETHING&quot;, &quot;SOMETHING&quot;,
&quot;SOMETHING&quot;, &quot;SOMETHING&quot;, &quot;SOMETHING&quot;]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Что
же тут происходит? А дело в том, что при
инициализации массива мы передаем
</FONT><FONT FACE="Arial, serif"><I>ссылку</I></FONT><FONT FACE="Arial, serif">
(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">reference</SPAN></FONT><FONT FACE="Arial, serif">)
на один объект. Т.к. мы передаем параметр
один раз, то и объект в массиве всегда
“размножается по ссылке”. Т.е. на самом
деле при такой инициализации массива,
ячейки содержат не сам объект, а ссылку
на объект. Чтобы этого не происходило,
нужно чтобы ссылки на объекты были
разные. При этом, конечно, и сами объекты
будут разные - они будут располагаться
в разных областях памяти, и если мы
что-то изменим, то это не изменит </FONT><FONT FACE="Arial, serif"><I>состояние</I></FONT><FONT FACE="Arial, serif">
(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">state</SPAN></FONT><FONT FACE="Arial, serif">)
других объектов.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Если
проводить аналогию с подъездом и жильцами
дальше, то можно представить следующее.
Мы принесли большую распределительную
коробку (массив) и хотим поместить туда
10 звонков. Звонки поместили, но все
провода идут к одной квартире. Поэтому,
когда мы звоним в любой звонок, нам
отвечают одни и те же жильцы. Нам просто
нужны ссылки на разные квартиры и тогда
все будет работать. Поэтому конструкция
с массивом массивов неправильная,
никогда так не делайте:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Courier New, serif">
= </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">Array</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">new</SPAN></FONT><FONT FACE="Courier New, serif">(10,
[])</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```
</FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Просто
потому, что массив внутри массива
предназначен для того, чтобы меняться.
Зачем нам пустой массив? Ведь мы захотим
когда-нибудь туда что-то записать. В
случае со строками все немного проще,
такая конструкция допустима:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Arial, serif">
= </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Array</SPAN></FONT><FONT FACE="Arial, serif">.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">new</SPAN></FONT><FONT FACE="Arial, serif">(10,
'</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">something</SPAN></FONT><FONT FACE="Arial, serif">')</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```
</FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Но
при одной оговорке - что мы не будем
использовать опасные (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">danger</SPAN></FONT><FONT FACE="Arial, serif">)
методы. Т.е. методы класса </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">String</SPAN></FONT><FONT FACE="Arial, serif">
с восклицательным знаком на конце,
которые меняют состояние объекта. Теперь
вы понимаете почему они опасные? В случае
с числами все еще проще:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Courier New, serif">
= </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">Array</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">new</SPAN></FONT><FONT FACE="Courier New, serif">(10,
123)</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```
</FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">В
классе </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Integer</SPAN></FONT><FONT FACE="Arial, serif">
нет опасных методов, поэтому, даже если
у вас есть доступ к объекту, вы не сможете
его изменить (но сможете заменить). Если
вы напишите `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Arial, serif">[4]
= 124`, то вы замените ссылку в массиве на
новый объект, который будет представлять
число “124”. Ссылки на один и тот же
объект “123” в других частях массива
сохранятся. Т.е. мы и получим то, что
ожидаем:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">irb</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Courier New, serif">
= </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">Array</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">new</SPAN></FONT><FONT FACE="Courier New, serif">(10,
123)</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Courier New, serif">=&gt;
[123, 123, 123, 123, 123, 123, 123, 123, 123, 123]</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Courier New, serif">[4]
= 124</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Courier New, serif">=&gt;
124</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">arr</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Courier New, serif">=&gt;
[123, 123, 123, 123, 124, 123, 123, 123, 123, 123]</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Ничего
страшного, если эти детали вам покажутся
сложными. На практике редко приходится
работать с очень сложными вещами, обычно
требуется понимание этих принципов,
способность разобраться или найти
решение в Интернет. Некоторым опытным
программистам это высказывание может
не понравиться, но авторы книги рекомендуют
не обращать внимание на чье-либо мнение,
скорее находить удаленную работу и
учиться уже на практике. Опыт учеников
“руби школы” показывает, что этот путь
верный.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Но
как же нам все-таки объявить двумерный
массив? Представим, что нам нужно сделать
игру “Морской бой”, где каждую строку
на поле битвы представляет отдельный
массив (ну а столбец - это индекс в этом
отдельном массиве). Если бы у нас была
одна строка на 10 клеток, то можно было
бы обойтись одним массивом, но нам нужно
10 строк по 10 клеток. Как объявить такой
массив, чтобы каждый элемент массива
представлял собой ссылку на другой,
совершенно отдельный элемент?</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Для
объявления двумерного массива в языке
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">C</SPAN></FONT><FONT FACE="Arial, serif">#
используется довольно простая конструкция:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">var
arr = new int[10, 10];</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Для
типа “string”:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">var
arr = new string[10, 10];</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr[9,
9] = &quot;something&quot;;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Но
в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Ruby</SPAN></FONT><FONT FACE="Arial, serif">
и </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">
это, на удивление, делается немного
сложнее. Правильный синтаксис для
объявления двумерного массива 10 на 10 в
руби (массив будет заполнен </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">nil</SPAN></FONT><FONT FACE="Arial, serif">
- объектом, представляющим пустое
значение):</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">arr
= Array.new(10) { Array.new(10) }</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Вау!
Но почему так? Давайте разберемся. Метод
“</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">new</SPAN></FONT><FONT FACE="Arial, serif">”
(на самом деле это метод “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">initialize</SPAN></FONT><FONT FACE="Arial, serif">”,
но это пока не важно) принимает один
параметр и один блок. Первый параметр
- фиксированный, это количество элементов
массива. А второй параметр - блок, который
надо исполнить для каждого элемента.
Результат выполнения этого блока и
будет новым элементом. Блок будет
запускаться 10 раз (в нашем случае). Ничто
не мешает написать нам блок таким
образом:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Courier New, serif">
= </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">Array</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">new</SPAN></FONT><FONT FACE="Courier New, serif">(10)
{ '</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">something</SPAN></FONT><FONT FACE="Courier New, serif">'
}</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Результат
будет аналогичен уже известному нам
коду:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Courier New, serif">
= </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">Array</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">new</SPAN></FONT><FONT FACE="Courier New, serif">(10,
'</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">something</SPAN></FONT><FONT FACE="Courier New, serif">')</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">В
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">REPL</SPAN></FONT><FONT FACE="Arial, serif">
и тот, и другой вариант выглядят одинаково:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
irb</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&gt;
arr1 = Array.new(10) { 'something' }</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Courier New, serif"><SPAN LANG="en">=&gt;
[&quot;something&quot;, &quot;something&quot;, &quot;something&quot;,
&quot;something&quot;, &quot;something&quot;, &quot;something&quot;,
&quot;something&quot;, &quot;something&quot;, &quot;something&quot;,
&quot;something&quot;]</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&gt;
arr2 = Array.new(10, 'something')</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Courier New, serif"><SPAN LANG="en">=&gt;
[&quot;something&quot;, &quot;something&quot;, &quot;something&quot;,
&quot;something&quot;, &quot;something&quot;, &quot;something&quot;,
&quot;something&quot;, &quot;something&quot;, &quot;something&quot;,
&quot;something&quot;]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Но
есть одна существенная разница. Первая
конструкция при инициализации вызывает
блок. В результате вызова блока каждый
раз создается новое значение “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">something</SPAN></FONT><FONT FACE="Arial, serif">”
в новой области памяти. А во втором
случае (когда мы создаем `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Arial, serif">2`)
берется “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">something</SPAN></FONT><FONT FACE="Arial, serif">”,
который мы передали через параметр. Он
создается в области памяти перед тем,
как параметр будет передан в метод </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">new</SPAN></FONT><FONT FACE="Arial, serif">,
и используется для всех ячеек массива,
всегда один и тот же.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Это
очень просто доказать. Для людей,
недостаточно знакомых с языком руби,
это кажется волшебным трюком. Модифицируем
элемент по индексу 0 в первом массиве,
где каждый элемент это всегда ссылка
на отдельную строку, для каждого элемента
массива ссылка разная.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Courier New, serif">1[0].</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">upcase</SPAN></FONT><FONT FACE="Courier New, serif">!</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Выведем
результат вычисления `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Arial, serif">1`
на экран:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&gt;
arr1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Courier New, serif"><SPAN LANG="en">=&gt;
[&quot;SOMETHING&quot;, &quot;something&quot;, &quot;something&quot;,
&quot;something&quot;, &quot;something&quot;, &quot;something&quot;,
&quot;something&quot;, &quot;something&quot;, &quot;something&quot;,
&quot;something&quot;]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Изменилось
только первое значение, что доказывает,
что ссылка везде разная. Если же проделать
точно такой же трюк со вторым массивом,
то поменяется массив целиком, потому
что ссылка на элемент во всех ячейках
массива одинаковая:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&gt;
arr2[0].upcase!</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Courier New, serif"><SPAN LANG="en">=&gt;
&quot;SOMETHING&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&gt;
arr2</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Courier New, serif"><SPAN LANG="en">=&gt;
[&quot;SOMETHING&quot;, &quot;SOMETHING&quot;, &quot;SOMETHING&quot;,
&quot;SOMETHING&quot;, &quot;SOMETHING&quot;, &quot;SOMETHING&quot;,
&quot;SOMETHING&quot;, &quot;SOMETHING&quot;, &quot;SOMETHING&quot;,
&quot;SOMETHING&quot;]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Если
бы мы перед “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">upcase</SPAN></FONT><FONT FACE="Arial, serif">!”
переинициализировали какой-либо элемент,
то этот элемент не был бы затронут:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&gt;
arr2[4] = 'something'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Courier New, serif"><SPAN LANG="en">=&gt;
&quot;something&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&gt;
arr2[0].upcase!</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Courier New, serif"><SPAN LANG="en">=&gt;
&quot;SOMETHING&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&gt;
arr2</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Courier New, serif"><SPAN LANG="en">=&gt;
[&quot;SOMETHING&quot;, &quot;SOMETHING&quot;, &quot;SOMETHING&quot;,
&quot;SOMETHING&quot;, &quot;something&quot;, &quot;SOMETHING&quot;,
&quot;SOMETHING&quot;, &quot;SOMETHING&quot;, &quot;SOMETHING&quot;,
&quot;SOMETHING&quot;]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Обратите
внимание, что в примере выше элемент с
индексом 4 не был затронут операцией
“</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">upcase</SPAN></FONT><FONT FACE="Arial, serif">!”,
т.к. это совершенно другой объект, хотя
при выводе на экран нам кажется что все
одинаково. Поэтому правильная инициализация
массива массивов выглядит так:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Courier New, serif">
= </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">Array</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">new</SPAN></FONT><FONT FACE="Courier New, serif">(10)
{ </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">Array</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">new</SPAN></FONT><FONT FACE="Courier New, serif">(10)
}</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Если
нужно заполнить массив значением,
отличным от </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">nil</SPAN></FONT><FONT FACE="Arial, serif">,
передаем его во второй конструктор:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr
= Array.new(10) { Array.new(10, 123) }</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Заполнить
двумерный массив значением “0”:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Courier New, serif">
= </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">Array</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">new</SPAN></FONT><FONT FACE="Courier New, serif">(10)
{ </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">Array</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">new</SPAN></FONT><FONT FACE="Courier New, serif">(10,
0) }</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Создать
массив в 4 строки и 10 столбцов и заполнить
его значением “0”:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr
= Array.new(4) { Array.new(10, 0) }</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Создать
массив в 2 строки и 3 столбца и заполнить
каждую строку одинаковым объектом
“</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">something</SPAN></FONT><FONT FACE="Arial, serif">”:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr
= Array.new(2) { Array.new(3, 'something') }</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Создать
массив в 3 строки и 2 столбца и заполнить
каждую строку одинаковым объектом
“</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">something</SPAN></FONT><FONT FACE="Arial, serif">”:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr
= Array.new(3) { Array.new(2, 'something') }</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Надеемся,
что с созданием двумерных массивов
проблем не будет. Когда у нас есть
понимание того, что такое массив, что
такое двумерный массив, есть смысл
остановиться на способе записи двумерного
массива с какими либо </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">pre</SPAN></FONT><FONT FACE="Arial, serif">-</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">defined</SPAN></FONT><FONT FACE="Arial, serif">
(предопределенными) значениями. Одномерный
массив записать просто, это массив
каких-либо объектов:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Courier New, serif">
= [1, 2, 3]</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Или:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr
= ['one', 'two', 'three']</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Т.е.
массив содержит объекты. Двумерный
массив это тот же самый массив, который
содержит объекты, с той лишь разницей,
что все эти объекты типа </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Array</SPAN></FONT><FONT FACE="Arial, serif">,
а не </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Integer</SPAN></FONT><FONT FACE="Arial, serif">
или </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">String</SPAN></FONT><FONT FACE="Arial, serif">.
Чтобы создать массив из трех строк, нам
нужно написать:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Courier New, serif">
= [..., ..., ...]</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Но
если необходимо создать массив пустых
массивов, вместо троеточия нужно просто
написать определение пустого массива:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Courier New, serif">
= [[], [], []]</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Давайте
определим массив 3 на 3 для игры в крестики
нолики, где ноль это нолик, единица -
крестик, а пустая клетка это </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">nil</SPAN></FONT><FONT FACE="Arial, serif">.
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Для такой
матрицы:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<TABLE WIDTH=135 CELLPADDING=7 CELLSPACING=0>
	<COL WIDTH=27>
	<COL WIDTH=34>
	<COL WIDTH=30>
	<TR VALIGN=TOP>
		<TD WIDTH=27 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P ALIGN=CENTER STYLE="border: none; padding: 0in; widows: 0; orphans: 0">
			<FONT FACE="Arial, serif"><SPAN LANG="en">O</SPAN></FONT></P>
		</TD>
		<TD WIDTH=34 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P ALIGN=CENTER STYLE="border: none; padding: 0in; widows: 0; orphans: 0">
			<FONT FACE="Arial, serif"><SPAN LANG="en">O</SPAN></FONT></P>
		</TD>
		<TD WIDTH=30 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P ALIGN=CENTER STYLE="border: none; padding: 0in; widows: 0; orphans: 0">
			<FONT FACE="Arial, serif"><SPAN LANG="en">X</SPAN></FONT></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=27 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P LANG="en" ALIGN=CENTER STYLE="border: none; padding: 0in; widows: 0; orphans: 0">
			<BR>
			</P>
		</TD>
		<TD WIDTH=34 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P ALIGN=CENTER STYLE="border: none; padding: 0in; widows: 0; orphans: 0">
			<FONT FACE="Arial, serif"><SPAN LANG="en">O</SPAN></FONT></P>
		</TD>
		<TD WIDTH=30 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P LANG="en" ALIGN=CENTER STYLE="border: none; padding: 0in; widows: 0; orphans: 0">
			<BR>
			</P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=27 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P ALIGN=CENTER STYLE="border: none; padding: 0in; widows: 0; orphans: 0">
			<FONT FACE="Arial, serif"><SPAN LANG="en">X</SPAN></FONT></P>
		</TD>
		<TD WIDTH=34 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P LANG="en" ALIGN=CENTER STYLE="border: none; padding: 0in; widows: 0; orphans: 0">
			<BR>
			</P>
		</TD>
		<TD WIDTH=30 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P ALIGN=CENTER STYLE="border: none; padding: 0in; widows: 0; orphans: 0">
			<FONT FACE="Arial, serif"><SPAN LANG="en">X</SPAN></FONT></P>
		</TD>
	</TR>
</TABLE>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Массив
будет выглядеть следующим образом:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Courier New, serif">
= [[0, 0, 1], [</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">nil</SPAN></FONT><FONT FACE="Courier New, serif">,
0, </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">nil</SPAN></FONT><FONT FACE="Courier New, serif">],
[1, </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">nil</SPAN></FONT><FONT FACE="Courier New, serif">,
1]]</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Запись
в одну строку можно превратить в более
читаемый вид с сохранением функциональности:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Courier New, serif">
= [</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif">[0,
0, 1],</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif">[</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">nil</SPAN></FONT><FONT FACE="Courier New, serif">,
0, </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">nil</SPAN></FONT><FONT FACE="Courier New, serif">],</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif">[1,
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">nil</SPAN></FONT><FONT FACE="Courier New, serif">,
1]</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">]</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">При
желании можно добавить сколько угодно
пробелов.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
если вы не попробовали в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">REPL</SPAN></FONT><FONT FACE="Arial, serif">
все написанное выше, то перечитайте и
попробуйте.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
Создайте массив в 5 строк и 4 столбца,
заполните каждую строку случайным
значением от 1 до 5 (только одно случайное
значение для каждой строки). Пример для
массива 2 на 3:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">[</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif">[2,
2, 2],</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif">[5,
5, 5]</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">]</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
создайте массив в 4 строки и 5 столбцов,
заполните каждую строку случайным
значением от 1 до 5 (только одно случайное
значение для каждой строки).</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
создайте массив 5 на 4 и заполните весь
массив абсолютно случайными значениями
от 0 до 9.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_xb3oqdl3mhti"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt">Установка
</FONT></FONT><FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt"><SPAN LANG="en">gem</SPAN></FONT></FONT><FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt">’ов</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Все
наши операции в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">REPL</SPAN></FONT><FONT FACE="Arial, serif">
до текущего момента были не самыми
сложными. Однако, в случае с двумерными
массивами мы уже могли наблюдать потерю
наглядности. Например, создание массива
для игры в “Морской бой” выглядит
следующим образом:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">$
irb</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">&gt;
Array.new(10) { Array.new(10) }</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Arial, serif"><SPAN LANG="en">=&gt;
[[nil, nil, nil, nil, nil, nil, nil, nil, nil, nil], [nil, nil, nil,
nil, nil, nil, nil, nil, nil, nil], [nil, nil, nil, nil, nil, nil,
nil, nil, nil, nil], [nil, nil, nil, nil, nil, nil, nil, nil, nil,
nil], [nil, nil, nil, nil, nil, nil, nil, nil, nil, nil], [nil, nil,
nil, nil, nil, nil, nil, nil, nil, nil], [nil, nil, nil, nil, nil,
nil, nil, nil, nil, nil], [nil, nil, nil, nil, nil, nil, nil, nil,
nil, nil], [nil, nil, nil, nil, nil, nil, nil, nil, nil, nil], [nil,
nil, nil, nil, nil, nil, nil, nil, nil, nil]]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Синтаксис
верный, но как понять где пятая строка
и второй столбец? Приходится вглядываться
в “простыню” этих значений. Разработчики
языка руби знали, что нельзя написать
инструмент, который понравится всем. И
вместо того, чтобы завязывать разработчика
на фиксированный набор инструментов,
было решено добавить возможность
расширять экосистему языка таким
образом, чтобы каждый человек мог
написать (или дописать) что-то свое.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Разработчики
со всего мира воспользовались этой
возможностью и для языка руби было
создано множество </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">gem</SPAN></FONT><FONT FACE="Arial, serif">’ов
(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">gem</SPAN></FONT><FONT FACE="Arial, serif">,
читается как “джем” - драгоценный
камень, жемчужина, что перекликается с
названием “руби” - рубин). В других
языках </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">gem</SPAN></FONT><FONT FACE="Arial, serif">’ы
называются библиотеками (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">library</SPAN></FONT><FONT FACE="Arial, serif">)
или пакетами (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">packets</SPAN></FONT><FONT FACE="Arial, serif">).
Например, альтернатива команде “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">gem</SPAN></FONT><FONT FACE="Arial, serif">”
в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Node</SPAN></FONT><FONT FACE="Arial, serif">.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">js</SPAN></FONT><FONT FACE="Arial, serif">
команда “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">npm</SPAN></FONT><FONT FACE="Arial, serif">”
- сокращение от </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Node</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Packet</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Manager</SPAN></FONT><FONT FACE="Arial, serif">
(менеджер пакетов </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Node</SPAN></FONT><FONT FACE="Arial, serif">).</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Слово
“</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">gem</SPAN></FONT><FONT FACE="Arial, serif">”
звучит поинтереснее, чем просто “пакет”.
Но смысл один и тот же - просто какая-то
программа, или программный код, который
очень просто скачать или использовать,
если знаешь имя </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">gem</SPAN></FONT><FONT FACE="Arial, serif">’</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">a</SPAN></FONT><FONT FACE="Arial, serif">.
Для установки </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">gem</SPAN></FONT><FONT FACE="Arial, serif">’а
используется команда “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">gem</SPAN></FONT><FONT FACE="Arial, serif">”,
которая является частью пакета языка
руби (также как и “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">irb</SPAN></FONT><FONT FACE="Arial, serif">”
и “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ruby</SPAN></FONT><FONT FACE="Arial, serif">”).
</FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Давайте
попробуем установить какой-нибудь </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">gem</SPAN></FONT><FONT FACE="Arial, serif">:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
gem install cowsay</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">“<FONT FACE="Arial, serif"><SPAN LANG="en">Cowsay”
это “cow say” (“корова скажи”). </SPAN></FONT><FONT FACE="Arial, serif">Это
не очень популярный </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">gem</SPAN></FONT><FONT FACE="Arial, serif">,
который был создан обычным энтузиастом.
Этот </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">gem</SPAN></FONT><FONT FACE="Arial, serif">
добавляет в ваш </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">shell</SPAN></FONT><FONT FACE="Arial, serif">
команду “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">cowsay</SPAN></FONT><FONT FACE="Arial, serif">”,
которая принимает аргумент и выводит
на экран корову, которая что-то говорит:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">cowsay</SPAN></FONT><FONT FACE="Courier New, serif">
'Привет, Вася!'</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Courier New, serif">_______________</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">|
Привет, Вася! |</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Courier New, serif">---------------</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">      <FONT FACE="Courier New, serif">\
  ^__^</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">       <FONT FACE="Courier New, serif">\
 (</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">oo</SPAN></FONT><FONT FACE="Courier New, serif">)\_______</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">          <FONT FACE="Courier New, serif">(__)\
      )\/\</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">             
<FONT FACE="Courier New, serif">||----</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">w</SPAN></FONT><FONT FACE="Courier New, serif">
|</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">              <FONT FACE="Courier New, serif">||
    ||</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Существует
огромное количество </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">gem</SPAN></FONT><FONT FACE="Arial, serif">’ов
на все случаи жизни. К слову, этим и
славится язык руби (а также </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">).
Для любой задачи, которая придет вам в
голову наверняка существует какой-то
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">gem</SPAN></FONT><FONT FACE="Arial, serif">
(или пакет для </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">).</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Не
обязательно </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">gem</SPAN></FONT><FONT FACE="Arial, serif">
должен добавлять какую-то команду. Часто
бывает так, что </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">gem</SPAN></FONT><FONT FACE="Arial, serif">
предоставляет только определенный код,
который вы можете использовать в своей
программе, применив ключевое слово
`</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">require</SPAN></FONT><FONT FACE="Arial, serif">`
(с параметром - обычно именем </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">gem</SPAN></FONT><FONT FACE="Arial, serif">’а).</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Для
дальнейшего обучения нам потребуется
установить наш первый (уже второй) </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">gem</SPAN></FONT><FONT FACE="Arial, serif">,
который является довольно популярным
и практически стал стандартом в экосистеме
руби (такое часто случается, независимые
разработчики создают инструмент, который
всем нравится и этот инструмент становится
стандартом). Название </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">gem</SPAN></FONT><FONT FACE="Arial, serif">’а,
который мы будем устанавливать - “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">pry</SPAN></FONT><FONT FACE="Arial, serif">”
(читается как “прай”). Страница </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">gem</SPAN></FONT><FONT FACE="Arial, serif">’</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">a</SPAN></FONT><FONT FACE="Arial, serif">
на </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">GitHub</SPAN></FONT><FONT FACE="Arial, serif">:
</FONT><A HREF="https://github.com/pry/pry"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>://</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>github</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>.</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>com</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>/</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>pry</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>/</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>pry</U></SPAN></FONT></FONT></A><FONT FACE="Arial, serif">
(зайдите, чтобы взглянуть на документацию).
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Что же такое
pry?</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Вот
что говорит нам GitHub: “An IRB alternative and
runtime developer console”. </SPAN></FONT><FONT FACE="Arial, serif">Другими
словами, альтернатива уже известному
нам </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">REPL</SPAN></FONT><FONT FACE="Arial, serif">
- </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">IRB</SPAN></FONT><FONT FACE="Arial, serif">.
Если раньше мы вводили команду “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">irb</SPAN></FONT><FONT FACE="Arial, serif">”,
то теперь будем вводить команду “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">pry</SPAN></FONT><FONT FACE="Arial, serif">”.
Давайте же поскорее установим этот </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">gem</SPAN></FONT><FONT FACE="Arial, serif">
и посмотрим, чем он лучше:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">$
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">gem</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">install</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">pry</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">...<BR>$
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">pry</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">&gt;</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```
</FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Во-первых,
если мы введем определение нашего
массива в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">pry</SPAN></FONT><FONT FACE="Arial, serif">,
то значения будут подкрашены (чего нет
в “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">irb</SPAN></FONT><FONT FACE="Arial, serif">”):</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">$
pry<BR>&gt; arr = [[0, 0, 1], [nil, 0, nil], [1, nil, 1]]<BR>...</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```
</FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Цифры
подкрашиваются синим цветом, а </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">nil</SPAN></FONT><FONT FACE="Arial, serif">
- голубым. Казалось бы - ну и что? Это
кажется незаметной деталью, но при
работе с большим объемом данных визуальное
облегчение информации - большое подспорье!
Представьте количество дней, которое
вы в будущем проведете за компьютером
и представьте, что теперь они будут
немного лучше.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Второй
важный момент в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">pry</SPAN></FONT><FONT FACE="Arial, serif">
- конфигурация. Причем, получается
довольно любопытно. </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Gem</SPAN></FONT><FONT FACE="Arial, serif">
это, грубо говоря, плагин для языка (или
экосистемы - как будет угодно) руби. Но
и для “плагина” </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">pry</SPAN></FONT><FONT FACE="Arial, serif">
существует свое множество плагинов,
один из которых мы собираемся установить.
Это плагин для “улучшенного” (более
понятного) вывода информации на экран.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Gem</SPAN></FONT><FONT FACE="Arial, serif">
называется “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">awesome</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">print</SPAN></FONT><FONT FACE="Arial, serif">”.
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Gem</SPAN></FONT><FONT FACE="Arial, serif">
содержит в себе библиотеку кода, плагин
для </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">pry</SPAN></FONT><FONT FACE="Arial, serif">,
плагин для </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">irb</SPAN></FONT><FONT FACE="Arial, serif">
(нам не потребуется, т.к. в будущем будем
использовать только </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">pry</SPAN></FONT><FONT FACE="Arial, serif">).
Страница </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">gem</SPAN></FONT><FONT FACE="Arial, serif">’</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">a</SPAN></FONT><FONT FACE="Arial, serif">
на </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">GitHub</SPAN></FONT><FONT FACE="Arial, serif">:
</FONT><A HREF="https://github.com/awesome-print/awesome_print"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>://</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>github</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>.</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>com</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>/</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>awesome</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>-</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>print</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>/</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>awesome</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>_</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>print</U></SPAN></FONT></FONT></A><FONT FACE="Arial, serif">.
Пройдите по ссылке, чтобы ознакомиться
с документацией и понять, что делает
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">awesome</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">print</SPAN></FONT><FONT FACE="Arial, serif">.
Если ничего непонятно, то ничего
страшного, сейчас разберемся. Давайте
установим </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">awesome</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">print</SPAN></FONT><FONT FACE="Arial, serif">:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">gem</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">install</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">awesome</SPAN></FONT><FONT FACE="Courier New, serif">_</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">print</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Сам
по себе </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">gem</SPAN></FONT><FONT FACE="Arial, serif">
не создает никаких команд. Поэтому
давайте подключим его к </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">pry</SPAN></FONT><FONT FACE="Arial, serif">.
Как это сделать описано в документации.
Мы сделаем это вместе:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
cat &gt; ~/.pryrc</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">require
'awesome_print'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">AwesomePrint.pry!</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">^</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">D</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Т.е.
запускаем в терминале команду “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">cat</SPAN></FONT><FONT FACE="Arial, serif">”,
которая считывает из стандартного ввода
следующие две строки (мы должны их ввести
с клавиатуры). В конце мы нажимаем </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Ctrl</SPAN></FONT><FONT FACE="Arial, serif">+</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">D</SPAN></FONT><FONT FACE="Arial, serif">
- комбинацию, которая говорит о том, что
ввод закончен (в листинге выше это
обозначается как “^</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">D</SPAN></FONT><FONT FACE="Arial, serif">”).
Возникает вопрос - а откуда взялись эти
две строки и что они означают? Эти две
строки взялись из документации, а именно
из раздела «</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">PRY</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Integration</SPAN></FONT><FONT FACE="Arial, serif">»
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">readme</SPAN></FONT><FONT FACE="Arial, serif">
репозитория гитхаба. Строки означают
что-то, но на самом деле пока это неважно,
читайте их как “подключение </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">awesome</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">print</SPAN></FONT><FONT FACE="Arial, serif">
к </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">pry</SPAN></FONT><FONT FACE="Arial, serif">”.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Гем
“</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">awesome</SPAN></FONT><FONT FACE="Arial, serif">_</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">print</SPAN></FONT><FONT FACE="Arial, serif">”
подключается к “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">pry</SPAN></FONT><FONT FACE="Arial, serif">”
только один раз на вашем компьютере.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Теперь
запустим </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">pry</SPAN></FONT><FONT FACE="Arial, serif">
и введем массив, который мы использовали
для крестиков-ноликов:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
pry</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&gt;
arr = [[0, 0, 1], [nil, 0, nil], [1, nil, 1]]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">[</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif">[0]
[</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">        <FONT FACE="Courier New, serif">[0]
0,</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">        <FONT FACE="Courier New, serif">[1]
0,</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">        <FONT FACE="Courier New, serif">[2]
1</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif">],</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif">[1]
[</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">        <FONT FACE="Courier New, serif">[0]
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">nil</SPAN></FONT><FONT FACE="Courier New, serif">,</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">        <FONT FACE="Courier New, serif">[1]
0,</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">        <FONT FACE="Courier New, serif">[2]
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">nil</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif">],</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif">[2]
[</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">        <FONT FACE="Courier New, serif">[0]
1,</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">        <FONT FACE="Courier New, serif">[1]
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">nil</SPAN></FONT><FONT FACE="Courier New, serif">,</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">        <FONT FACE="Courier New, serif">[2]
1</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif">]</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">]</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Должно
получиться вот так: </FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><IMG SRC="2eaec5a5667bec5b244b5f4a53e23318_html_add6d722.png" NAME="image36.png" ALIGN=BOTTOM HSPACE=12 VSPACE=12 WIDTH=624 HEIGHT=436 BORDER=0></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Вау!
Вывод не только лучше, но и раскрашен в
разные цвета! Наша связка “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">pry</SPAN></FONT><FONT FACE="Arial, serif">”
с “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">awesome</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">print</SPAN></FONT><FONT FACE="Arial, serif">”
подкрашивает вывод, улучшает визуальную
структуру и даже показывает нам индексы,
чтобы мы легче могли добраться до нужного
элемента!  Сравните этот вывод со
стандартным выводом </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">IRB</SPAN></FONT><FONT FACE="Arial, serif">:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">$
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">irb</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">&gt;
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Arial, serif">
= [[0, 0, 1], [</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">nil</SPAN></FONT><FONT FACE="Arial, serif">,
0, </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">nil</SPAN></FONT><FONT FACE="Arial, serif">],
[1, </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">nil</SPAN></FONT><FONT FACE="Arial, serif">,
1]]</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Arial, serif">=&gt;
[[0, 0, 1], [</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">nil</SPAN></FONT><FONT FACE="Arial, serif">,
0, </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">nil</SPAN></FONT><FONT FACE="Arial, serif">],
[1, </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">nil</SPAN></FONT><FONT FACE="Arial, serif">,
1]]</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Примечание:
одна из основных функциональностей
“</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">pry</SPAN></FONT><FONT FACE="Arial, serif">”
это отладка программ. Мы займемся этим
позже.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
попробуйте в “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">pry</SPAN></FONT><FONT FACE="Arial, serif">”
вывести поле 10 на 10 для игры в “Морской
бой”.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_6vbr3bgpoul2"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt">Обращение
к массиву массивов</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Существует
небольшая хитрость для обращения к
массиву массивов (также говорят “к
двумерному массиву”, к “2</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">D</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">array</SPAN></FONT><FONT FACE="Arial, serif">”).
Хитрость заключается в том, что сначала
нужно обратиться к строке (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">row</SPAN></FONT><FONT FACE="Arial, serif">),
а потом к столбцу (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">column</SPAN></FONT><FONT FACE="Arial, serif">).
Способ обращения к обычному массиву мы
уже знаем. Для вывода значения используется
следующая конструкция:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Arial, serif">[4]</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Для
присваивания мы просто используем
оператор `=`:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Arial, serif">[4]
= 123</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Где
4 - это индекс массива. В случае с двумерным
массивом обычно используются двойные
квадратные скобки. Например, следующий
код обновит в 5-ой строке 9-ый столбец:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Arial, serif">[4][8]
= 123</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Такой
способ обращения может показаться
непривычным для обычного человека,
потому что человек привык сначала
указывать столбец, потом строку; сначала
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">X</SPAN></FONT><FONT FACE="Arial, serif">,
потом </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Y</SPAN></FONT><FONT FACE="Arial, serif">.
Но тем не менее, для доступа к массиву
нам нужно сначала указывать индекс
строки, а потом уже индекс столбца.
Причем, ничто не мешает записать нам
конструкцию присваивания иначе, она
будет намного понятнее (правда, длиннее):</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">row</SPAN></FONT><FONT FACE="Arial, serif">
= </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Arial, serif">[4]</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">row</SPAN></FONT><FONT FACE="Arial, serif">[8]
= 123</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">А
вот так можно вывести значение девятого
столбца в пятой строке (альтернативный
способ):</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">row</SPAN></FONT><FONT FACE="Courier New, serif">
= </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Courier New, serif">[4]
# на этом этапе </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">row</SPAN></FONT><FONT FACE="Courier New, serif">
уже будет одномерный (обычный) массив</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">column</SPAN></FONT><FONT FACE="Courier New, serif">
= </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">row</SPAN></FONT><FONT FACE="Courier New, serif">[8]</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">column</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Конечно,
альтернативным способом редко кто
пользуется, ведь общепринятый `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Arial, serif">[4][8]`
проще и короче. </FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">В
зависимости от типа задачи и от приложения
с которым вы работаете, может использоваться
разная терминология, обозначающая
строку и столбец. </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Рассмотрим
наиболее часто встречающиеся:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">`</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">row</SPAN></FONT><FONT FACE="Arial, serif">`
	- строка, `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">column</SPAN></FONT><FONT FACE="Arial, serif">`
	- столбец. Обращение к массиву:
	`</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Arial, serif">[</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">row</SPAN></FONT><FONT FACE="Arial, serif">][</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">column</SPAN></FONT><FONT FACE="Arial, serif">]`.
	</FONT>
	</P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">`</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">y</SPAN></FONT><FONT FACE="Arial, serif">`
	- строка, `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">x</SPAN></FONT><FONT FACE="Arial, serif">`
	- столбец. Обращение к массиву: `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Arial, serif">[</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">y</SPAN></FONT><FONT FACE="Arial, serif">][</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">x</SPAN></FONT><FONT FACE="Arial, serif">]`</FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">`</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">j</SPAN></FONT><FONT FACE="Arial, serif">`
	- строка, `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">i</SPAN></FONT><FONT FACE="Arial, serif">`
	- столбец. Обращение к массиву: `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Arial, serif">[</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">j</SPAN></FONT><FONT FACE="Arial, serif">][</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">i</SPAN></FONT><FONT FACE="Arial, serif">]`</FONT></P>
</UL>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Обратите
внимание, что название переменной для
индекса - `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">i</SPAN></FONT><FONT FACE="Arial, serif">`
(от слова `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">index</SPAN></FONT><FONT FACE="Arial, serif">`).
Если у нас есть более одной переменной
для индекса, берется следующая буква в
алфавите (`</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">j</SPAN></FONT><FONT FACE="Arial, serif">`,
а если массив трехмерный, то `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">k</SPAN></FONT><FONT FACE="Arial, serif">`).
Впрочем, эти правила не являются каким-то
стандартом, а всего-лишь наблюдением
авторов.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Попробуем
создать двумерный массив и обойти (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">to</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">traverse</SPAN></FONT><FONT FACE="Arial, serif">)
его. Это элементарная задача, которая
вам может встретиться на интервью: 2</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">D</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">array</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">traversal</SPAN></FONT><FONT FACE="Arial, serif">:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr
= [</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">%w(a
b c),</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">%w(d
e f),</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">%w(g
h i)  </SPAN></FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">]</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">0.upto(2)
do |j|</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">0.upto(2)
do |i|</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">print
arr[j][i]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Вывод
программы:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">abcdefghi</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Вверху
мы видим двойной цикл (иногда его называют
“вложенный цикл”, “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">double</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">loop</SPAN></FONT><FONT FACE="Arial, serif">”,
если имеют в виду цикл по `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">i</SPAN></FONT><FONT FACE="Arial, serif">`
- то “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">inner</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">loop</SPAN></FONT><FONT FACE="Arial, serif">”,
“внутренний цикл”). Как же он работает?
Мы уже знаем, что “цикл </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">j</SPAN></FONT><FONT FACE="Arial, serif">”
просто “проходит” по массиву. Он “не
знает”, что у нас массив массивов,
поэтому это обычная итерация по элементам
массива:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">%w(a
b c)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">%w(d
e f)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">%w(g
h i)  </SPAN></FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```
</FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Просто
каждый элемент - еще один массив. Поэтому
мы имеем право по нему пройти обычным
образом, как мы это уже делали. Можно
также записать нашу программу немного
иначе, помощью “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">each</SPAN></FONT><FONT FACE="Arial, serif">”:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en-US">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Courier New, serif"><SPAN LANG="en-US">
= [</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">%w(a
b c),</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">%w(d
e f),</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">%w(g
h i)  </SPAN></FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">]</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr.each
do |row|</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">row.each
do |value|</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">print</SPAN></FONT><FONT FACE="Courier New, serif"><SPAN LANG="en-US">
</SPAN></FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">value</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Разумеется,
что сам массив можно записать без помощи
“%</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">w</SPAN></FONT><FONT FACE="Arial, serif">”
(согласитесь, что читаемость этого
подхода немного ниже?):</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr
= [</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">['a',
'b', 'c'],</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">['d',
'e', 'f'],</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif">['</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">g</SPAN></FONT><FONT FACE="Courier New, serif">',
'</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">h</SPAN></FONT><FONT FACE="Courier New, serif">',
'</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">i</SPAN></FONT><FONT FACE="Courier New, serif">']
 </FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">]</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
обойдите массив выше “вручную”, без
помощи циклов, крест-накрест, таким
образом, чтобы вывести на экран строку
“</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">aeiceg</SPAN></FONT><FONT FACE="Arial, serif">”
(подпрограмма займет 6 строк - по 1 строке
для каждого элемента).</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
создайте 2</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">D</SPAN></FONT><FONT FACE="Arial, serif">
массив размером 3 на 3. Каждый элемент
будет иметь одинаковое значение
(например, “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">something</SPAN></FONT><FONT FACE="Arial, serif">”).
Сделайте так, чтобы каждый элемент
массива был защищен от “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">upcase</SPAN></FONT><FONT FACE="Arial, serif">!”.
Например, если мы вызовем `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Arial, serif">[2][2].</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">upcase</SPAN></FONT><FONT FACE="Arial, serif">!`,
этот вызов не изменит содержимое других
ячеек массива. Проверьте свое задание
в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">pry</SPAN></FONT><FONT FACE="Arial, serif">.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
к вам обратился предприниматель Джон
Смит. Джон говорит, что его бизнес
специализируется на создании телефонных
номеров для рекламы. Они хотят подписать
с вами контракт, но прежде хотелось бы
убедиться, что вы хороший программист,
можете работать с их требованиями, и
доставлять качественное программное
обеспечение.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Они
говорят: у нас есть номера телефонов с
буквами. Например, для бизнеса по продаже
матрасов существует номер “555-</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">MATRESS</SPAN></FONT><FONT FACE="Arial, serif">”,
который транслируется в “555-628-7377”.
Когда наши клиенты набирают буквенный
номер на клавиатуре телефона (см.картинку
ниже), он транслируется в цифровой.
Напишите программу, которая будет
переводить (транслировать) слово без
дефисов в телефонный номер.<BR><BR>Сигнатура
метода будет следующей:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en-US">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">def</SPAN></FONT><FONT FACE="Courier New, serif"><SPAN LANG="en-US">
</SPAN></FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">phone</SPAN></FONT><FONT FACE="Courier New, serif"><SPAN LANG="en-US">_</SPAN></FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">to</SPAN></FONT><FONT FACE="Courier New, serif"><SPAN LANG="en-US">_</SPAN></FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">number</SPAN></FONT><FONT FACE="Courier New, serif"><SPAN LANG="en-US">(</SPAN></FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">phone</SPAN></FONT><FONT FACE="Courier New, serif"><SPAN LANG="en-US">)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en-US">#
</SPAN></FONT><FONT FACE="Courier New, serif">ваш</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en-US">
</SPAN></FONT><FONT FACE="Courier New, serif">код</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en-US">
</SPAN></FONT><FONT FACE="Courier New, serif">тут</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en-US">...</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts
phone_to_number('555MATRESS') # должно напечатать
5556287377</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Иллюстрация
телефонной клавиатуры:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><IMG SRC="2eaec5a5667bec5b244b5f4a53e23318_html_42f2bd20.png" NAME="image16.png" ALIGN=BOTTOM HSPACE=12 VSPACE=12 WIDTH=624 HEIGHT=416 BORDER=0></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_errc0xim22gg"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt">Многомерные
массивы</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Существуют
также многомерные массивы. Если 2</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">D</SPAN></FONT><FONT FACE="Arial, serif">
массив это “массив массивов”, то 3</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">D</SPAN></FONT><FONT FACE="Arial, serif">
массив это “массив массивов массивов”.
Иногда такие массивы называют “тензор”.
Пример трехмерного массива:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Courier New, serif">
= [</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif">[</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif">%</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">w</SPAN></FONT><FONT FACE="Courier New, serif">(</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">a</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">b</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">c</SPAN></FONT><FONT FACE="Courier New, serif">),</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">%w(d
e f),</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">%w(g
h i)	</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">],</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">[</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">%w(aa
bb cc),</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">%w(dd
ee ff),</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">%w(gg
hh ii)  </SPAN></FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif">]</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">]</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Это
массив 2 на 3 на 3: два блока, в каждом
блоке 3 строки, в каждой строке 3 столбца.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Размерность
(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">dimension</SPAN></FONT><FONT FACE="Arial, serif">)
массива это просто его свойство. Не
обязательно знать размерность каждого
массива, важно лишь знать как правильно
к нему обратиться. Для обращения к
элементу “</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">f</SPAN></FONT><FONT FACE="Arial, serif">”
нам нужно написать `</FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Arial, serif">`.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">На
практике многомерные массивы встречаются
очень часто, но обычно в таких массивах
также присутствует также другая структура
данных - хеш (рассматривается далее). В
случае с многомерными массивами нам
нужно точно знать индексы определенных
элементов. Если добавляется строка или
столбец где-нибудь вначале, то индексы
смещаются. Поэтому на практике доступ
по индексу встречается лишь в простых
случаях.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Если
массив “миксуется” с хешем, то такую
структуру обычно называют </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JSON</SPAN></FONT><FONT FACE="Arial, serif">
(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Object</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Notation</SPAN></FONT><FONT FACE="Arial, serif">),
хотя в руби это название выглядит немного
необычно - причем тут </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">,
ведь это руби! Доступ к значениями хеша
осуществляется по ключу (а не по индексу),
где ключ обычно какая-нибудь строка.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
попробуйте создать массив, объявленный
выше в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">pry</SPAN></FONT><FONT FACE="Arial, serif">,
и обратиться к элементу “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ee</SPAN></FONT><FONT FACE="Arial, serif">”.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
посмотрите официальную документацию
к классу </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Array</SPAN></FONT><FONT FACE="Arial, serif">:
</FONT><A HREF="http://ruby-doc.org/core-2.5.1/Array.html"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>http</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>://</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>ruby</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>-</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>doc</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>.</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>org</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>/</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>core</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>-2.5.1/</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>Array</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>.</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>html</U></SPAN></FONT></FONT></A></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> 
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_2qux5wpl6pro"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt">Наиболее
часто встречающиеся методы класса </FONT></FONT><FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt"><SPAN LANG="en">Array</SPAN></FONT></FONT></P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Стоит
подробнее остановиться на наиболее
часто встречающихся методах класса
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Array</SPAN></FONT><FONT FACE="Arial, serif">,
т.к. эти методы широко используются не
только в руби, но и в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">rails</SPAN></FONT><FONT FACE="Arial, serif">.
Даже не имея опыта с фреймворком </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Ruby</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">on</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Rails</SPAN></FONT><FONT FACE="Arial, serif">,
понимая принципы работы рассмотренных
методов для массивов, легко догадаться
о том, что делает программа.</FONT></P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.22in; margin-bottom: 0.06in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_sb1fh5c3nlsw"></A>
<FONT COLOR="#434343"><FONT FACE="Arial, serif"><FONT SIZE=4>Метод
</FONT></FONT></FONT><FONT COLOR="#434343"><FONT FACE="Arial, serif"><FONT SIZE=4><SPAN LANG="en">empty</SPAN></FONT></FONT></FONT><FONT COLOR="#434343"><FONT FACE="Arial, serif"><FONT SIZE=4>?</FONT></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Знак
вопроса на конце метода означает, что
метод будет возвращать значение типа
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Boolean</SPAN></FONT><FONT FACE="Arial, serif">
(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">true</SPAN></FONT><FONT FACE="Arial, serif">
или </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">false</SPAN></FONT><FONT FACE="Arial, serif">).
Метод “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">empty</SPAN></FONT><FONT FACE="Arial, serif">?”
используется для того, чтобы убедиться
в том, что массив не пустой (или пустой).
Если массив пустой (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">empty</SPAN></FONT><FONT FACE="Arial, serif">),
то “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">empty</SPAN></FONT><FONT FACE="Arial, serif">?”
возвращает “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">true</SPAN></FONT><FONT FACE="Arial, serif">”:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">pry</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;
[].</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">empty</SPAN></FONT><FONT FACE="Courier New, serif">?</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Courier New, serif">=&gt;
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">true</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Важный
момент заключается в том, что объект
“</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">nil</SPAN></FONT><FONT FACE="Arial, serif">”
не реализует метод “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">empty</SPAN></FONT><FONT FACE="Arial, serif">?”.
Т.е. если вы не уверены, что какой-то
метод возвращает массив, необходимо
сделать проверку на </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">nil</SPAN></FONT><FONT FACE="Arial, serif">:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr
= some_method</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">if
!arr.nil? &amp;&amp; !arr.empty?</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">puts
arr.inspect</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Существует
одна важная деталь. Т.к. любой
руби-программист почти со 100% вероятностью
будет работать с </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">rails</SPAN></FONT><FONT FACE="Arial, serif">,
нужно знать, что проверка коллекции (в
т.ч.массива) в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">rails</SPAN></FONT><FONT FACE="Arial, serif">
выполняется иначе. Т.е. если вы оставите
этот синтаксис, то ошибки не будет,
просто есть более эффективный способ:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">if
!arr.blank?</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">puts
arr.inspect</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Или
используя прямо противоположный метод
“</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">present</SPAN></FONT><FONT FACE="Arial, serif">?”:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">if
arr.present?</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">puts
arr.inspect</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Другими
словами, когда фреймворка </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">rails</SPAN></FONT><FONT FACE="Arial, serif">
нет, используем “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">empty</SPAN></FONT><FONT FACE="Arial, serif">?”,
а когда работаем над </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">rails</SPAN></FONT><FONT FACE="Arial, serif">-приложением,
всегда используем “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">blank</SPAN></FONT><FONT FACE="Arial, serif">?”
и “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">present</SPAN></FONT><FONT FACE="Arial, serif">?”.
Эти методы реализованы для многих типов,
и при наличии вопросов, в будущем
рекомендуется обращаться к этой таблице:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><IMG SRC="2eaec5a5667bec5b244b5f4a53e23318_html_360bf131.png" NAME="image19.png" ALIGN=BOTTOM HSPACE=12 VSPACE=12 WIDTH=624 HEIGHT=169 BORDER=0></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Источник:
</FONT><A HREF="https://stackoverflow.com/a/20663389/337085"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>://</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>stackoverflow</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>.</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>com</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>/</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>a</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>/20663389/337085</U></FONT></FONT></A><FONT FACE="Arial, serif"><BR></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">TODO</SPAN></FONT><FONT FACE="Arial, serif">:
сделать свою таблицу</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Таблица
выше очень важная, стоит сделать особую
заметку в книге. Как видно, методы
“</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">blank</SPAN></FONT><FONT FACE="Arial, serif">?”
и “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">present</SPAN></FONT><FONT FACE="Arial, serif">?”
совершенно противоположные (последний
и предпоследний столбец). А из второго
столбца следует, что только </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">nil</SPAN></FONT><FONT FACE="Arial, serif">
и </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">false</SPAN></FONT><FONT FACE="Arial, serif">
вычисляются в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">false</SPAN></FONT><FONT FACE="Arial, serif">.
Другими словами, все конструкции ниже
вычисляются в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">true</SPAN></FONT><FONT FACE="Arial, serif">
и нет необходимости делать проверку (с
помощью `==`, если мы хотим получить тип
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Boolean</SPAN></FONT><FONT FACE="Arial, serif">):</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en-US">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">if</SPAN></FONT><FONT FACE="Courier New, serif"><SPAN LANG="en-US">
</SPAN></FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">true</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en-US">#
</SPAN></FONT><FONT FACE="Courier New, serif">будет</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en-US">
</SPAN></FONT><FONT FACE="Courier New, serif">выполнено</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en-US" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">if</SPAN></FONT><FONT FACE="Courier New, serif"><SPAN LANG="en-US">
''</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif">#
будет выполнено</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">if</SPAN></FONT><FONT FACE="Courier New, serif">
' '</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif">#
будет выполнено</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">if</SPAN></FONT><FONT FACE="Courier New, serif">
[]</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif">#
будет выполнено</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">#
...</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">И
так далее.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Также
из таблицы видно, что метод “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">empty</SPAN></FONT><FONT FACE="Arial, serif">?”
реализован для типов </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">String</SPAN></FONT><FONT FACE="Arial, serif">,
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Array</SPAN></FONT><FONT FACE="Arial, serif">,
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Hash</SPAN></FONT><FONT FACE="Arial, serif">.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.22in; margin-bottom: 0.06in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_adpim2yfcjon"></A>
<FONT COLOR="#434343"><FONT FACE="Arial, serif"><FONT SIZE=4>Методы
</FONT></FONT></FONT><FONT COLOR="#434343"><FONT FACE="Arial, serif"><FONT SIZE=4><SPAN LANG="en">length</SPAN></FONT></FONT></FONT><FONT COLOR="#434343"><FONT FACE="Arial, serif"><FONT SIZE=4>,
</FONT></FONT></FONT><FONT COLOR="#434343"><FONT FACE="Arial, serif"><FONT SIZE=4><SPAN LANG="en">size</SPAN></FONT></FONT></FONT><FONT COLOR="#434343"><FONT FACE="Arial, serif"><FONT SIZE=4>,
</FONT></FONT></FONT><FONT COLOR="#434343"><FONT FACE="Arial, serif"><FONT SIZE=4><SPAN LANG="en">count</SPAN></FONT></FONT></FONT></P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Методы
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">length</SPAN></FONT><FONT FACE="Arial, serif">
и </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">size</SPAN></FONT><FONT FACE="Arial, serif">
идентичны и реализованы для классов
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Array</SPAN></FONT><FONT FACE="Arial, serif">,
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">String</SPAN></FONT><FONT FACE="Arial, serif">,
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Hash</SPAN></FONT><FONT FACE="Arial, serif">:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">[11,
22, 33].size # =&gt; 3</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">[11,
22, 33].length # =&gt; 3</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">str
= 'something'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">str.size
# =&gt; 9</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">str.length
# =&gt; 9</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">hh
= { a: 1, b: 2 }</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">hh</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">size</SPAN></FONT><FONT FACE="Courier New, serif">
# =&gt; 2</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">hh</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">length</SPAN></FONT><FONT FACE="Courier New, serif">
# =&gt; 2</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Метод
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">count</SPAN></FONT><FONT FACE="Arial, serif">
выполняет ту же функцию, что и </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">length</SPAN></FONT><FONT FACE="Arial, serif">/</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">size</SPAN></FONT><FONT FACE="Arial, serif">,
но только для классов </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Array</SPAN></FONT><FONT FACE="Arial, serif">
и </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Hash</SPAN></FONT><FONT FACE="Arial, serif">
(не реализован в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">String</SPAN></FONT><FONT FACE="Arial, serif">).
Однако, метод </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">count</SPAN></FONT><FONT FACE="Arial, serif">
может принимать блок, можно использовать
его для каких-либо вычислений. Например,
посчитать количество нулей в массиве:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">pry</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;
[0, 0, 1, 1, 0, 0, 1, 0].</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">count</SPAN></FONT><FONT FACE="Courier New, serif">
{ |</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">x</SPAN></FONT><FONT FACE="Courier New, serif">|
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">x</SPAN></FONT><FONT FACE="Courier New, serif">
== 0 }</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">5</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Удобно
использовать метод </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">count</SPAN></FONT><FONT FACE="Arial, serif">
вместе с указателем на функцию. Если
метод “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">zero</SPAN></FONT><FONT FACE="Arial, serif">?”
реализован у всех элементов массива,
можно записать конструкцию выше иначе:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">[0,
0, 1, 1, 0, 0, 1, 0].</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">count</SPAN></FONT><FONT FACE="Courier New, serif">(&amp;:</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">zero</SPAN></FONT><FONT FACE="Courier New, serif">?)</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```
</FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Важно
заметить, что </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">count</SPAN></FONT><FONT FACE="Arial, serif">
с блоком обычно проходит по всему
массиву. Если вы используете метод
“</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">count</SPAN></FONT><FONT FACE="Arial, serif">”
в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Rails</SPAN></FONT><FONT FACE="Arial, serif">,
необходимо убедиться, чтобы запрос был
эффективным (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">rails</SPAN></FONT><FONT FACE="Arial, serif">
и </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">SQL</SPAN></FONT><FONT FACE="Arial, serif">
будут рассмотрены во второй части
книги).</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
с помощью указателя на функцию посчитайте
количество четных элементов в массиве
[11, 22, 33, 44, 55].</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.22in; margin-bottom: 0.06in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_lsevz1qv4kgi"></A>
<FONT COLOR="#434343"><FONT FACE="Arial, serif"><FONT SIZE=4>Метод
</FONT></FONT></FONT><FONT COLOR="#434343"><FONT FACE="Arial, serif"><FONT SIZE=4><SPAN LANG="en">include</SPAN></FONT></FONT></FONT><FONT COLOR="#434343"><FONT FACE="Arial, serif"><FONT SIZE=4>?</FONT></FONT></FONT></P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Метод
“</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">include</SPAN></FONT><FONT FACE="Arial, serif">?”
проверяет массив на наличие определенного
элемента и возвращает значение типа
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Boolean</SPAN></FONT><FONT FACE="Arial, serif">.
Например:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">pry</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;
[1, 2, 3, 5, 8].</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">include</SPAN></FONT><FONT FACE="Courier New, serif">?(3)</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">true</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Любопытная
особенность в том, что “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">include</SPAN></FONT><FONT FACE="Arial, serif">”
переводится на русский как “включать”
(в смысле “содержать”), тогда как
правильнее было бы написать “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">includes</SPAN></FONT><FONT FACE="Arial, serif">”
- “включает” (с “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">s</SPAN></FONT><FONT FACE="Arial, serif">”
в конце). В языке </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">
версии </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ES</SPAN></FONT><FONT FACE="Arial, serif">6
и выше проверка на наличие элемента в
массиве реализована как раз с помощью
правильного слова “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">includes</SPAN></FONT><FONT FACE="Arial, serif">”:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">node</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;
[1, 2, 3, 5, 8].</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">includes</SPAN></FONT><FONT FACE="Courier New, serif">(3);</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">true</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.22in; margin-bottom: 0.06in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_694fvzp12lw9"></A>
<FONT COLOR="#434343"><FONT FACE="Arial, serif"><FONT SIZE=4>Добавление
элементов</FONT></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Добавление
элементов в массив реализовано с помощью
уже знакомых нам методов “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">push</SPAN></FONT><FONT FACE="Arial, serif">”
и “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">pop</SPAN></FONT><FONT FACE="Arial, serif">”.
Эти методы производят операции с хвостом
массива: добавить элемент в конец,
извлечь последний. К слову, массив в
руби реализует также структуру данных
“стек”. Представьте себе “стек”
тарелок, когда одна тарелка стоит на
другой. Мы кладем одну наверх и берем
также сверху.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Но
есть операции “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">unshift</SPAN></FONT><FONT FACE="Arial, serif">”
и “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">shift</SPAN></FONT><FONT FACE="Arial, serif">”,
которые делают то же самое, что и “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">push</SPAN></FONT><FONT FACE="Arial, serif">”,
“</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">pop</SPAN></FONT><FONT FACE="Arial, serif">”,
но только с началом массива. Нередко у
программистов возникает путаница при
использовании </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">unshift</SPAN></FONT><FONT FACE="Arial, serif">
и </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">shift</SPAN></FONT><FONT FACE="Arial, serif">,
но важно помнить (или уметь посмотреть
в документации) следующее:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">unshift</SPAN></FONT><FONT FACE="Arial, serif">
	почти то же самое, что и </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">push</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">shift</SPAN></FONT><FONT FACE="Arial, serif">
	почти то же самое, что и </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">pop</SPAN></FONT></P>
</UL>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Полезная
метафора тут может быть такая: </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">shift</SPAN></FONT><FONT FACE="Arial, serif">
сдвигает элементы и возвращает тот
элемент, которому не досталось места.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.22in; margin-bottom: 0.06in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_kdrisv4obd3n"></A>
<FONT COLOR="#434343"><FONT FACE="Arial, serif"><FONT SIZE=4>Выбор
элементов по критерию (</FONT></FONT></FONT><FONT COLOR="#434343"><FONT FACE="Arial, serif"><FONT SIZE=4><SPAN LANG="en">select</SPAN></FONT></FONT></FONT><FONT COLOR="#434343"><FONT FACE="Arial, serif"><FONT SIZE=4>)</FONT></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Допустим,
у нас есть список работников, у которых
указан возраст. Нам нужно выбрать всех
мужчин, которым в следующем году на
пенсию. Для простоты предположим, что
одного работника представляет какой-либо
объект. Т.к. хеши мы еще не проходили, то
пусть это будет массив. Первый элемент
массива это будет возраст, второй - пол
(1 для мужчины, 0 для женщины). Знакомьтесь,
мужчина 30 лет:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">[30,
1]</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Женщина
25 лет:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">[25,
0]</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Таких
объектов существует множество (массив
объектов, в нашем случае двумерный
массив):</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">[
[30, 1], [25, 0], [64, 1], [64, 0], [33, 1] ] </FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Выбираем
(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">select</SPAN></FONT><FONT FACE="Arial, serif">)
мужчин в возрасте 64 лет:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
pry</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&gt;
arr = [ [30, 1], [25, 0], [64, 1], [64, 0], [33, 1] ]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">...<BR>&gt;
arr.select { |element| element[0] == 64 &amp;&amp; element[1] == 1 }</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">(выбран
1 элемент)</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Выбираем
всех мужчин:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
pry</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&gt;
arr = [ [30, 1], [25, 0], [64, 1], [64, 0], [33, 1] ]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">...<BR>&gt;
arr.select { |element| element[1] == 1 }</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">(выбрано
3 элемента)</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.22in; margin-bottom: 0.06in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_37brysul9y56"></A>
<FONT COLOR="#434343"><FONT FACE="Arial, serif"><FONT SIZE=4>Отсечение
элементов по критерию (</FONT></FONT></FONT><FONT COLOR="#434343"><FONT FACE="Arial, serif"><FONT SIZE=4><SPAN LANG="en">reject</SPAN></FONT></FONT></FONT><FONT COLOR="#434343"><FONT FACE="Arial, serif"><FONT SIZE=4>)</FONT></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Метод
“</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">reject</SPAN></FONT><FONT FACE="Arial, serif">”
класса </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Array</SPAN></FONT><FONT FACE="Arial, serif">
работает аналогично “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">select</SPAN></FONT><FONT FACE="Arial, serif">”,
но отсеивает элементы, удовлетворяющие
критерию.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Отсеять
всех мужчин старше 30 лет (и выслать
остальным повестку в военкомат):</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
pry</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&gt;
arr = [ [30, 1], [25, 0], [64, 1], [64, 0], [33, 1] ]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">...</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&gt;
arr.reject { |element| element[0] &gt;= 30 }</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">(выбран
1 элемент двадцати пяти лет, который
скоро пойдет в армию)</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.22in; margin-bottom: 0.06in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_pb0p9qrsfdod"></A>
<FONT COLOR="#434343"><FONT FACE="Arial, serif"><FONT SIZE=4>Метод
</FONT></FONT></FONT><FONT COLOR="#434343"><FONT FACE="Arial, serif"><FONT SIZE=4><SPAN LANG="en">take</SPAN></FONT></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Метод
“</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">take</SPAN></FONT><FONT FACE="Arial, serif">”
принимает параметр (число) и берет
определенное количество элементов в
начале массива:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">pry</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;
[11, 22, 33, 44, 55].</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">take</SPAN></FONT><FONT FACE="Courier New, serif">(2)</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Courier New, serif">=&gt;
[11, 22]</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```
</FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.22in; margin-bottom: 0.06in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_i1t0effgo2no"></A>
<FONT COLOR="#434343"><FONT FACE="Arial, serif"><FONT SIZE=4>Есть
ли хотя бы одно совпадение (</FONT></FONT></FONT><FONT COLOR="#434343"><FONT FACE="Arial, serif"><FONT SIZE=4><SPAN LANG="en">any</SPAN></FONT></FONT></FONT><FONT COLOR="#434343"><FONT FACE="Arial, serif"><FONT SIZE=4>?)</FONT></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Допустим,
у нас есть массив результатов лотереи.
Нам нужно проверить, есть ли хотя бы
один выигрыш. Из определения метода
(знак вопроса в конце) понятно, что метод
возвращает значение типа </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Boolean</SPAN></FONT><FONT FACE="Arial, serif">.
В блоке должна быть конструкция сравнения,
т.к. внутри метод “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">any</SPAN></FONT><FONT FACE="Arial, serif">?”
будет использовать то, что мы укажем в
блоке:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">$
pry</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">&gt;
[false, false, false, true, false].any? </SPAN></FONT></FONT><FONT FACE="Courier New, serif"><FONT SIZE=2>{
|</FONT></FONT><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">element</SPAN></FONT></FONT><FONT FACE="Courier New, serif"><FONT SIZE=2>|
</FONT></FONT><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">element</SPAN></FONT></FONT><FONT FACE="Courier New, serif"><FONT SIZE=2>
== </FONT></FONT><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">true</SPAN></FONT></FONT><FONT FACE="Courier New, serif"><FONT SIZE=2>
}</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">true</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Код
выше показывает что среди 5 билетов есть
1 выигрыш. Этот метод только сообщает о
том, что выигрыш имеется, он не говорит,
какой именно билет выиграл. Т.е. метод
не возвращает индекс. Чтобы найти индекс
(какой билет выиграл), принцип наименьшего
сюрприза подсказывает, что должен быть
метод “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">find</SPAN></FONT><FONT FACE="Arial, serif">_</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">index</SPAN></FONT><FONT FACE="Arial, serif">”.
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Проверим:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">$
pry</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">&gt;
[false, false, false, true, false].find_index { |element| element ==
true }</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">3</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Работает!</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.22in; margin-bottom: 0.06in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_rnluuy660hjd"></A>
<FONT COLOR="#434343"><FONT FACE="Arial, serif"><FONT SIZE=4>Все
элементы должны удовлетворять критерию
(</FONT></FONT></FONT><FONT COLOR="#434343"><FONT FACE="Arial, serif"><FONT SIZE=4><SPAN LANG="en">all</SPAN></FONT></FONT></FONT><FONT COLOR="#434343"><FONT FACE="Arial, serif"><FONT SIZE=4>?)</FONT></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Допустим,
у нас массив возрастов пользователей,
нам нужно убедиться, что все пользователи
взрослые (18 лет или более). Как это
сделать? Очень просто с помощью метода
“</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">all</SPAN></FONT><FONT FACE="Arial, serif">?”:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">$
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">pry</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">&gt;
[20, 34, 65, 23, 18, 44, 32].</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">all</SPAN></FONT><FONT FACE="Courier New, serif">?
{ |</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">element</SPAN></FONT><FONT FACE="Courier New, serif">|
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">element</SPAN></FONT><FONT FACE="Courier New, serif">
&gt;= 18 }</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">true</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.22in; margin-bottom: 0.06in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_5lofawzhbobc"></A>
<FONT COLOR="#434343"><FONT FACE="Arial, serif"><FONT SIZE=4>Несколько
слов о популярных методах класса </FONT></FONT></FONT><FONT COLOR="#434343"><FONT FACE="Arial, serif"><FONT SIZE=4><SPAN LANG="en">Array</SPAN></FONT></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Мы
рассмотрели некоторые методы класса
“</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Array</SPAN></FONT><FONT FACE="Arial, serif">”
(массив):</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">push</SPAN></FONT><FONT FACE="Arial, serif">,
	</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">pop</SPAN></FONT><FONT FACE="Arial, serif">
	- добавить элемент, извлечь элемент</FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">arr[i]
	- обратиться по индексу</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">empty?
	- проверка на пустоту</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">length</SPAN></FONT><FONT FACE="Arial, serif">,
	</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">size</SPAN></FONT><FONT FACE="Arial, serif">,
	</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">count</SPAN></FONT><FONT FACE="Arial, serif">
	- один и тот же метод с разными названиями
	для получения размера массива</FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">include?
	- проверка на наличие элемента</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">select</SPAN></FONT><FONT FACE="Arial, serif">,
	</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">reject</SPAN></FONT><FONT FACE="Arial, serif">
	- выбрать по какому-либо условию или
	отклонить</FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">take
	- взять определенное количество элементов</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">any</SPAN></FONT><FONT FACE="Arial, serif">?,
	</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">all</SPAN></FONT><FONT FACE="Arial, serif">?
	- проверка на соответствие условию
	одного или всех элементов</FONT></P>
</UL>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Запоминать
их не нужно, но можно сделать пометку в
книге для того, чтобы обратиться в
будущем. Когда вы захотите реализовать
какие-нибудь операции с массивом данных
в своем проекте, эта информация вам
обязательно пригодится. Более того, все
эти методы также реализованы в
веб-фреймворке </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Rails</SPAN></FONT><FONT FACE="Arial, serif">
и вы сможете использовать их в разных
ситуациях. </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Например:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Выбрать
	всех зарегистрированных пользователей</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Исключить
	тех, кто не подтвердил емайл</FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Выбрать
	по определенному критерию (возраст,
	пол, метод оплаты и т.д)</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Вывести
	в виде списка по 10 на каждой странице
	и т.д.</FONT></P>
</UL>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_yzoeh1yg4etr"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt">Символы</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Символы
(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">symbol</SPAN></FONT><FONT FACE="Arial, serif">)
в руби - почти то же самое, что и строки.
Символы являются экземпляром (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">instance</SPAN></FONT><FONT FACE="Arial, serif">)
класса </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Symbol</SPAN></FONT><FONT FACE="Arial, serif">
(а все строки являются экземплярами
класса </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">String</SPAN></FONT><FONT FACE="Arial, serif">).
Другими словами, символы представляет
класс </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Symbol</SPAN></FONT><FONT FACE="Arial, serif">,
а строки класс </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">String</SPAN></FONT><FONT FACE="Arial, serif">.
Записать символ очень просто:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">x</SPAN></FONT><FONT FACE="Arial, serif">
= :</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">something</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```
</FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Символы
часто встречаются, когда одной и той же
переменной в разных частях программы
присваивается одинаковое по смыслу
значение. Например:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">order</SPAN></FONT><FONT FACE="Arial, serif">.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">status</SPAN></FONT><FONT FACE="Arial, serif">
= :</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">confirmed</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">order</SPAN></FONT><FONT FACE="Arial, serif">.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">status</SPAN></FONT><FONT FACE="Arial, serif">
= :</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">cancelled</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```
</FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Символ
“:</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">confirmed</SPAN></FONT><FONT FACE="Arial, serif">”
может встречаться в других частях
программы. Но почему же используют
символы - спросит читатель, ведь вместо
символа всегда можно записать строку:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">order.status
= 'confirmed'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">order.status
= 'cancelled'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```
</FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Так
и есть, можно было бы вообще обойтись
без символов (и некоторые языки обходятся,
например </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">).
Но есть две причины по которым использование
символов целесообразно.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Во-первых,
символы являются неизменяемыми
(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">immutable</SPAN></FONT><FONT FACE="Arial, serif">).
Т.е. с ними нельзя выполнить “опасную”
операцию, как например со строкой (типа
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">upcase</SPAN></FONT><FONT FACE="Arial, serif">!).
Другими словами, используя символ, вы
показываете свое намерение: вот это
значение всегда одинаково во всем
приложении, и скорее всего существует
ограниченный набор похожих значений.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Это
примерно также, как и билет в театр.
Можно каждой бумажке от руки написать
“Сектор А”, а можно сделать печать
“Сектор А” и на определенных билетах
ее ставить. Ведь поставить печать -
занятие значительно менее ресурсоемкое,
чем писать что-то от руки. Тем более
каждую надпись нужно еще суметь разобрать,
а вот печать универсальна, точно знаешь
что это такое.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Во-вторых,
т.к. символы </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">immutable</SPAN></FONT><FONT FACE="Arial, serif">,
то целесообразно их использовать
повторно (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">reuse</SPAN></FONT><FONT FACE="Arial, serif">),
вместо того, чтобы выделять каждый раз
на них память. Скажем, если у вас есть
строка “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">something</SPAN></FONT><FONT FACE="Arial, serif">”
(9 байт) и вы определяете ее в 1000 разных
частях приложения, то это уже как минимум
9000 байт (на самом деле больше). Если это
символ, то из-за того, что символы в
памяти не повторяются, будет использовано
только 9 байт памяти. Если, конечно, вы
объявите новый символ “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">something</SPAN></FONT><FONT FACE="Arial, serif">_</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">else</SPAN></FONT><FONT FACE="Arial, serif">”,
то он тоже займет память, но только
однажды.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Выражаясь
более техническим языком, ссылки на
одинаковые символы всегда одинаковы.
Ссылки на строки не всегда одинаковы -
могут быть одинаковы, но не всегда.
Например, создадим массив строк “хитрым
способом” - когда для каждой операции
создания вызывается блок, и из блока
возвращается новая строка:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Arial, serif">
= </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Array</SPAN></FONT><FONT FACE="Arial, serif">.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">new</SPAN></FONT><FONT FACE="Arial, serif">(100)
{ '</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">something</SPAN></FONT><FONT FACE="Arial, serif">'
}</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Будет
создано 100 строк “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">something</SPAN></FONT><FONT FACE="Arial, serif">”,
эти строки будут находиться в разных
участках памяти, это будут разные
объекты. В этом легко убедиться,
идентификатор объектов будет разный:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">&gt;
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Arial, serif">[0].__</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">id</SPAN></FONT><FONT FACE="Arial, serif">__</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">70100682145140</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">&gt;
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Arial, serif">[1].__</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">id</SPAN></FONT><FONT FACE="Arial, serif">__</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">70100682144840</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Но
если создать массив символов точно
таким же способом, то идентификатор
объектов будет всегда одинаковым:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">$
pry</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">&gt;
arr = Array.new(100) { :something }</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">…</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">&gt;
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Arial, serif">[0].__</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">id</SPAN></FONT><FONT FACE="Arial, serif">__</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">2893788</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">&gt;
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Arial, serif">[1].__</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">id</SPAN></FONT><FONT FACE="Arial, serif">__</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">2893788</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Другими
словами, массив символов содержит ссылки
на один и тот же объект.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Еще
один положительный момент при использовании
символов: символы сравниваются по
ссылке. А ссылка это всего лишь значение
вида 0</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">xDEADBEEF</SPAN></FONT><FONT FACE="Arial, serif">,
которое помещается в регистр компьютера
(4-8 байт, в зависимости от архитектуры
процессора и др.настроек). </FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Поэтому
сравнить два символа - это операция
сравнения двух указателей (ссылок). А
операция сравнения двух строк реализована
через побайтное сравнение, т.к. два
разных объекта, находящихся в разных
участках памяти (и следовательно с
разными указателями на эти участки)
могут быть равны, а могут и нет. Поэтому
нужно сравнивать их до последнего байта.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Другими
словами, сравнение двух символов занимает
</FONT><FONT FACE="Arial, serif"><I>константное</I></FONT><FONT FACE="Arial, serif">
время (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">constant</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">time</SPAN></FONT><FONT FACE="Arial, serif">,
в компьютерной науке - </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">computer</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">science</SPAN></FONT><FONT FACE="Arial, serif">
- обозначается как </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">O</SPAN></FONT><FONT FACE="Arial, serif">(1)),
а операция сравнения двух строк занимает
</FONT><FONT FACE="Arial, serif"><I>линейное</I></FONT><FONT FACE="Arial, serif">
время (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">linear</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">time</SPAN></FONT><FONT FACE="Arial, serif">,
обозначается как </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">O</SPAN></FONT><FONT FACE="Arial, serif">(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">N</SPAN></FONT><FONT FACE="Arial, serif">)).</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Не
будет большой ошибки, если вы всегда
будете применять строки, программа
будет работать. Но ради экономии памяти,
ради небольшого выигрыша в быстродействии,
и ради демонстрации другим программистам
своих намерений стоит применять символы.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
напишите игру “камень, ножницы, бумага”
(`[:</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">rock</SPAN></FONT><FONT FACE="Arial, serif">,
:</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">scissors</SPAN></FONT><FONT FACE="Arial, serif">,
:</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">paper</SPAN></FONT><FONT FACE="Arial, serif">]`).
Пользователь делает свой выбор и играет
с компьютером. Начало игры может быть
таким:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">print
&quot;(R)ock, (S)cissors, (P)aper?&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">s
= gets.strip.capitalize</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">if
s == ...</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_43gh2yknrag9"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt">Структура
данных “Хеш” (</FONT></FONT><FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt"><SPAN LANG="en">Hash</SPAN></FONT></FONT><FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt">)</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Хеш
(также говорят хеш-таблица, </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">hashtable</SPAN></FONT><FONT FACE="Arial, serif">,
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">hash</SPAN></FONT><FONT FACE="Arial, serif">,
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">map</SPAN></FONT><FONT FACE="Arial, serif">,
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">dictionary</SPAN></FONT><FONT FACE="Arial, serif">,
в языке </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">
часто называют “объект”) и массив - две
основные структуры данных, которые
часто используются вместе. Хеш и массивы
- разные структуры данных, но они
преследуют одну цель - хранение и
извлечение данных. Различаются лишь
способы сохранения и извлечения.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Что
такое массив, как он хранит данные и как
мы извлекаем данные из массива?
Представьте, что у маленького ребенка
много разных игрушек. Мама положила на
полку все игрушки и каждому месту на
полке присвоила порядковый номер. Чтобы
найти игрушку в массиве, нам нужно
просмотреть всю полку. Если полка с
игрушками очень длинная, то это займет
какое-то время. Но зато если мы точно
знаем номер игрушки, мы можем найти ее
моментально.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Хеш
напоминает волшебную корзину. В ней нет
никакого порядка и мы не знаем как она
устроена (знаем конечно, но многие
программисты даже об этом не задумываются).
В эту корзину можно положить какой
угодно объект и сказать ей название:
“волшебная корзина, это мяч”. Потом
можно извлечь из этой корзины любой
объект по имени: “волшебная корзина,
дай мне эту вещь, про которую я говорил,
что она называется мяч”. Важно что мы
складываем объекты, указывая имя и
извлекаем по имени (имя объекта называется
ключом). Причем, извлечение происходит
моментально - таким образом работает
волшебная корзина.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Как
же работает волшебная корзина, почему
в случае поиска элемента в массиве нужно
просматривать весь массив, а в случае
поиска какого-либо объекта в хеше поиск
происходит моментально? Секрет в
организации. На самом деле в большой
корзине много маленьких корзин (они так
и называются </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">buckets</SPAN></FONT><FONT FACE="Arial, serif">).
Если упростить, то все маленькие корзины
внутри тоже пронумерованы, а объекты
складываются туда по какому-либо признаку
(скажем, по цвету). Если объектов много,
то и маленьких корзин должно быть больше.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Если
хеши так хороши, то почему бы их не
использовать всегда?</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><U>Во-первых,</U></FONT><FONT FACE="Arial, serif">
эта структура данных не гарантирует
порядок. Если мы добавляем данные в
массив с помощью </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">“push”,
то мы точно знаем, какой элемент был
добавлен сначала, какой после. </SPAN></FONT><FONT FACE="Arial, serif">В
хеше нет никакого порядка, как только
мы записали туда значение, нет возможности
сказать когда именно оно туда попало:
раньше или позже остальных.  </FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Примечание:
несмотря на то, что структура данных
“хеш” не гарантирует порядок, в руби
порядок гарантируется (однако, авторы
бы не рекомендовали на него надеяться).
Вот что говорит официальная документация
</FONT><A HREF="https://ruby-doc.org/core-2.5.1/Hash.html"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>://</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>ruby</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>-</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>doc</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>.</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>org</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>/</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>core</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>-2.5.1/</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>Hash</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>.</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>html</U></SPAN></FONT></FONT></A><FONT FACE="Arial, serif">:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><I>&gt;
Hashes enumerate their values </I></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I><B>in
the order</B></I></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>
that the corresponding keys were inserted.</I></SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Но
т.к. любой веб-разработчик должен хотя
бы на минимальном уровне знать </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">,
то посмотрим что говорит по этому поводу
документация по </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JS</SPAN></FONT><FONT FACE="Arial, serif">:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><I>&gt;
An object is a member of the type Object. It is an </I></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I><B>unordered</B></I></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>
collection of properties each of which contains a primitive value,
object, or function</I></SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Однако,
в новой версии языка </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">
(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ES</SPAN></FONT><FONT FACE="Arial, serif">6
и выше) класс </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Map</SPAN></FONT><FONT FACE="Arial, serif">
(альтернативная реализация хеша `</FONT><FONT FACE="Courier New, serif">{}</FONT><FONT FACE="Arial, serif">`)
будет возвращать значения из хеша в
порядке добавления. Правило хорошего
тона: при использовании хешей не надейтесь
на порядок.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><U>А
во-вторых</U></FONT><FONT FACE="Arial, serif">, для каждой
структуры данных существует такое
понятие как “худшее время исполнения
операции”: при неблагоприятных
обстоятельствах (скажем, все игрушки
оказались одного цвета и попали в одну
и ту же внутреннюю </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">маленькую
корзину) операции доступа, вставки и
извлечения для хеша работают за линейное
время (linear time, O(N)). </SPAN></FONT><FONT FACE="Arial, serif">Другими
словами, в худшем случае код для извлечения
какого-либо элемента из хеша будет
перебирать все элементы. А код для
извлечения элемента из массива по
индексу в худшем случае всегда занимает
константное время (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">constant</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">time</SPAN></FONT><FONT FACE="Arial, serif">,
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">O</SPAN></FONT><FONT FACE="Arial, serif">(1))
- т.е. грубо говоря - всегда одно обращение,
без прохода по массиву.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Конечно,
на практике худшие случаи встречаются
не часто, и основная причина по которой
программисты используют хеши - удобство
для человека. Гораздо проще сказать
“извлечь мяч”, чем “извлечь объект по
индексу 148”.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Объявить
хеш в вашей программе очень просто,
достаточно использовать фигурные скобки
(квадратные скобки используются для
массива):</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">$
pry</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">&gt;
obj = {}</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">...</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">&gt;
obj.class</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Hash
&lt; Object</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Имейте
в виду, что использовать переменную с
названием “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">hash</SPAN></FONT><FONT FACE="Arial, serif">”
нельзя, т.к. это зарезервированное
ключевое слово языка (но вы можете ввести
его в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">REPL</SPAN></FONT><FONT FACE="Arial, serif">
и посмотреть что произойдет). Поэтому
обычно авторы используют “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">obj</SPAN></FONT><FONT FACE="Arial, serif">”
(от слова </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">object</SPAN></FONT><FONT FACE="Arial, serif">)
или “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">hh</SPAN></FONT><FONT FACE="Arial, serif">”
(двойное </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">hh</SPAN></FONT><FONT FACE="Arial, serif">
говорит о том, что это что-то большее,
чем просто переменная).</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Говорят,
что хеш это </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">key</SPAN></FONT><FONT FACE="Arial, serif">-</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">value</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">storage</SPAN></FONT><FONT FACE="Arial, serif">
(хранилище типа ключ-значение), где
каждому ключу соответствует значение.
Например, ключ - “мяч” (строка), а значение
- сам физический объект “мяч”. Часто
хеш называют словарем (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">dictionary</SPAN></FONT><FONT FACE="Arial, serif">).
Что отчасти тоже верно, ведь словарь
слов это прекрасный пример хеша. Каждому
ключу (слово) соответствует значение
(описание слова и/или перевод). В языке
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Java</SPAN></FONT><FONT FACE="Arial, serif">
хеш раньше тоже назывался “словарем”,
но с седьмой версии это понятие вышло
из употребление и словарь начали называть
“</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">map</SPAN></FONT><FONT FACE="Arial, serif">”
(</FONT><A HREF="https://docs.oracle.com/javase/7/docs/api/java/util/Dictionary.html"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>://</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>docs</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>.</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>oracle</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>.</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>com</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>/</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>javase</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>/7/</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>docs</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>/</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>api</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>/</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>java</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>/</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>util</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>/</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>Dictionary</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>.</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>html</U></SPAN></FONT></FONT></A><FONT FACE="Arial, serif">).</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Ключом
и значением в хеше может быть любой
объект, но чаще всего ключ это строка
(или символ), а значение… </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Значение
это действительно объект, сложно
предсказать что это будет. </SPAN></FONT><FONT FACE="Arial, serif">Это
может быть строка, символ, массив, число,
другой хеш. Поэтому когда в руби определяют
хеш (записывают его в программе), в уме
обычно заранее знают какого типа значение
(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">value</SPAN></FONT><FONT FACE="Arial, serif">)
будет в нем содержаться.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Например,
давайте условимся, что ключом в хеше
будет какой-либо символ, а значением -
число. Запишем в наш хеш вес различных
мячей в граммах:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">obj</SPAN></FONT><FONT FACE="Arial, serif">
= {}</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">obj[:soccer_ball]
= 410</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">obj[:tennis_ball]
= 58</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">obj</SPAN></FONT><FONT FACE="Arial, serif">[:</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">golf</SPAN></FONT><FONT FACE="Arial, serif">_</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ball</SPAN></FONT><FONT FACE="Arial, serif">]
= 45 </FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Если
записать эту программу в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">REPL</SPAN></FONT><FONT FACE="Arial, serif">
и вывести объект на экран (написав
“</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">obj</SPAN></FONT><FONT FACE="Arial, serif">”),
то мы увидим следующую запись:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">{</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">:soccer_ball
=&gt; 410,</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">:tennis_ball
=&gt; 58,</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">      <FONT FACE="Courier New, serif"><SPAN LANG="en">:golf_ball
=&gt; 45</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">}</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Эта
запись полностью валидна с точки зрения
языка Руби, и мы могли бы инициализировать
наш хеш без записи значений (без
использования операции присвоения):</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">obj
= {</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">:soccer_ball
=&gt; 410,</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">:tennis_ball
=&gt; 58,</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">      <FONT FACE="Courier New, serif">:</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">golf</SPAN></FONT><FONT FACE="Courier New, serif">_</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">ball</SPAN></FONT><FONT FACE="Courier New, serif">
=&gt; 45</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">}</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Оператор
“=&gt;” в руби называется “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">hash</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">rocket</SPAN></FONT><FONT FACE="Arial, serif">”
(в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">
“</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">fat</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">arrow</SPAN></FONT><FONT FACE="Arial, serif">”,
но имеет другое значение). </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Однако,
запись с помощью “hash rocket” считается
устаревшей. </SPAN></FONT><FONT FACE="Arial, serif">Правильнее
было бы записать так:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">obj</SPAN></FONT><FONT FACE="Courier New, serif">
= {</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">soccer</SPAN></FONT><FONT FACE="Courier New, serif">_</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">ball</SPAN></FONT><FONT FACE="Courier New, serif">:
410,</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">tennis</SPAN></FONT><FONT FACE="Courier New, serif">_</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">ball</SPAN></FONT><FONT FACE="Courier New, serif">:
58,</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">golf</SPAN></FONT><FONT FACE="Courier New, serif">_</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">ball</SPAN></FONT><FONT FACE="Courier New, serif">:
45</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">}</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Обратите
внимание, что несмотря на то, что запись
выглядит иначе, если мы напишем в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">REPL</SPAN></FONT><FONT FACE="Arial, serif">
“</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">obj</SPAN></FONT><FONT FACE="Arial, serif">”,
то мы получим тот же вывод, что и выше.
Другими словами, ключи (:</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">soccer</SPAN></FONT><FONT FACE="Arial, serif">_</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ball</SPAN></FONT><FONT FACE="Arial, serif">,
:</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">tennis</SPAN></FONT><FONT FACE="Arial, serif">_</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ball</SPAN></FONT><FONT FACE="Arial, serif">,
:</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">golf</SPAN></FONT><FONT FACE="Arial, serif">_</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ball</SPAN></FONT><FONT FACE="Arial, serif">)
в этом случае являются типами </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Symbol</SPAN></FONT><FONT FACE="Arial, serif">.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Для
извлечения значения (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">value</SPAN></FONT><FONT FACE="Arial, serif">)
из хеша можно воспользоваться следующей
конструкцией:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
'Вес мяча для гольфа:'</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">obj</SPAN></FONT><FONT FACE="Courier New, serif">[:</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">golf</SPAN></FONT><FONT FACE="Courier New, serif">_</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">ball</SPAN></FONT><FONT FACE="Courier New, serif">]</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Обращение
к хешу очень похоже на обращение к
массиву. В случае с массивом - мы обращаемся
по индексу, в случае с хешем - по ключу.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Заметьте,
что символы это не то же самое, что и
строки. Если мы определяем хеш следующим
образом:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">obj
= {}</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">obj[:golf_ball]
= 45</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">obj['golf_ball']
= 45</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">То
в хеш будет добавлено две пары ключ-значение
(первый ключ типа </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Symbol</SPAN></FONT><FONT FACE="Arial, serif">,
второй типа </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">String</SPAN></FONT><FONT FACE="Arial, serif">:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">{
:</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">golf</SPAN></FONT><FONT FACE="Courier New, serif">_</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">ball</SPAN></FONT><FONT FACE="Courier New, serif">
=&gt; 45, &quot;</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">golf</SPAN></FONT><FONT FACE="Courier New, serif">_</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">ball</SPAN></FONT><FONT FACE="Courier New, serif">&quot;
=&gt; 45 }</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
используя инициализированный хеш вида:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">obj
= {</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">soccer_ball:
410,</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">tennis_ball:
58,</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">golf</SPAN></FONT><FONT FACE="Courier New, serif">_</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">ball</SPAN></FONT><FONT FACE="Courier New, serif">:
45</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">}</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Напишите
код, который адаптирует этот хеш для
условий на Луне. Известно, что вес на
луне в 6 раз меньше, чем вес на Земле.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
“лунный магазин”. Используя хеш с новым
весом из предыдущего задания напишите
программу, которая для каждого типа
спрашивает пользователя какое количество
мячей пользователь хотел бы купить в
магазине (ввод числа из консоли). В конце
программа выдает общий вес всех товаров
в корзине. Для сравнения программа
должна также выдавать общий вес всех
товаров, если бы они находились на Земле.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_q1g9xn9q5f53"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt">Другие
объекты в качестве значений</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Мы
уже разобрались с тем, что хеш это набор
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">key</SPAN></FONT><FONT FACE="Arial, serif">-</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">value</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">pairs</SPAN></FONT><FONT FACE="Arial, serif">
(пара ключ-значение), где </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">key</SPAN></FONT><FONT FACE="Arial, serif">
это обычно </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Symbol</SPAN></FONT><FONT FACE="Arial, serif">
или </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">String</SPAN></FONT><FONT FACE="Arial, serif">,
а </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">value</SPAN></FONT><FONT FACE="Arial, serif">
это объект. В нашем примере в качестве
объекта всегда было число. Но мы также
можем использовать объекты любого
другого типа в качестве значений, включая
строки, массивы и даже сами хеши.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">То
же самое и с массивами. В качестве
элементов массива могут быть числа,
строки, сами массивы (в этом случае
получаются двумерные, многомерные
массивы), а также и хеши. И эти хеши могут
содержать в себе другие хеши или массивы
массивов. Другими словами, при комбинации
массивов и хешей получается уникальная
структура данных, которую называют </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JSON</SPAN></FONT><FONT FACE="Arial, serif">
(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Object</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Notation</SPAN></FONT><FONT FACE="Arial, serif">
- мы уже говорили о том, что хеш в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">
часто называют “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">object</SPAN></FONT><FONT FACE="Arial, serif">”).
Несмотря на то, что это название изначально
появилось в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">,
в руби оно тоже широко используется.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Вот
как может выглядеть простая комбинация
массива и хеша:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">obj
= {</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">soccer_ball:
{ weight: 410, colors: [:red, :blue] },</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">tennis_ball:
{ weight: 58, colors: [:yellow, :white] },</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">golf_ball:
{ weight: 45, colors: [:white] }</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">}</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Для
каждого ключа выше мы определяем свой
хеш, который в свою очередь представляет
такие параметры как </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">weight</SPAN></FONT><FONT FACE="Arial, serif">
(вес, число, тип </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Integer</SPAN></FONT><FONT FACE="Arial, serif">)
и доступные для этого товара цвета
(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">colors</SPAN></FONT><FONT FACE="Arial, serif">,
массив символов). </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Несмотря
на то, что последнюю строку можно было
записать как</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">golf_ball:
{ weight: 45, color: :white }</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">(т.к.
мяч для гольфа доступен в одном цвете
- в белом), мы намеренно записываем этот
хеш универсальным образом, где &quot;:</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">white</SPAN></FONT><FONT FACE="Arial, serif">&quot;
это один элемент в массиве, который
доступен по ключу &quot;:</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">colors</SPAN></FONT><FONT FACE="Arial, serif">&quot;.
В этом случае говорят &quot;сохранить
схему [данных]&quot;. Схема данных - это
просто определенная структура, которой
мы решили придерживаться. </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Мы
делаем это по двум причинам:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Чтобы
	не было путаницы. Каждая строка будет
	похожа на предыдущую.</FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Чтобы
	оставался массив &quot;</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">colors</SPAN></FONT><FONT FACE="Arial, serif">&quot;,
	в который в будущем можно будет добавить
	мяч для гольфа другого цвета.</FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Чтобы
	код, который работает с этой структурой
	данных оставался одним и тем же. Если
	добавить для какой-то строки отдельное
	свойство (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">color</SPAN></FONT><FONT FACE="Arial, serif">),
	то придется делать проверку с помощью
	конструкции &quot;</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">if</SPAN></FONT><FONT FACE="Arial, serif">&quot;
	и иметь две ветки кода.  </FONT>
	</P>
</UL>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Другими
словами, обычно </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JSON</SPAN></FONT><FONT FACE="Arial, serif">-объекты
придерживаются какой-то определенной
структуры. Но как же получить доступ к
такому сложному объекту? Таким же
образом, каким мы получаем доступ к
массиву, с помощью нескольких операций
доступа. Выведем все цвета мяча для
тенниса:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr</SPAN></FONT><FONT FACE="Courier New, serif">
= </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">obj</SPAN></FONT><FONT FACE="Courier New, serif">[:</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">tennis</SPAN></FONT><FONT FACE="Courier New, serif">_</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">ball</SPAN></FONT><FONT FACE="Courier New, serif">][:</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">colors</SPAN></FONT><FONT FACE="Courier New, serif">]</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">arr</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Выведем
вес мяча для гольфа:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">weight
= obj[:golf_ball][:weight]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">weight</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Добавим
новый цвет &quot;:</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">green</SPAN></FONT><FONT FACE="Arial, serif">&quot;
в массив цветов мяча для тенниса:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">obj[:tennis_ball][:colors].push(:green)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Структура,
которую мы определили выше начинается
с открывающейся фигурной скобки. Это
означает, что </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JSON</SPAN></FONT><FONT FACE="Arial, serif">
имеет тип </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Hash</SPAN></FONT><FONT FACE="Arial, serif">.
Но структура </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JSON</SPAN></FONT><FONT FACE="Arial, serif">
может также быть массивом. Все зависит
от нужд нашего приложения. Если наша
задача - вывод списка, а не обращение к
хешу, как к источнику данных, то </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JSON</SPAN></FONT><FONT FACE="Arial, serif">
может быть записан другим образом:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">obj
= [</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">{
type: :soccer_ball, weight: 410, colors: [:red, :blue] },</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">{
type: :tennis_ball, weight: 58, colors: [:yellow, :white] },</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">{
type: :golf_ball, weight: 45, colors: [:white] }</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">]</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">По
сути эта структура ничто иное, как массив
объектов с каким-то свойствами:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">obj</SPAN></FONT><FONT FACE="Courier New, serif">
= [ {}, {}, {} ]</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Другими
словами, в зависимости от нашей задачи
мы можем использовать ту или иную
структуру данных, состоящую из массивов
и хешей.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
корзина пользователя в Интернет-магазине
определена следующим массивом (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">qty</SPAN></FONT><FONT FACE="Arial, serif">
- количество единиц товара, которое
пользователь хочет купить, </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">type</SPAN></FONT><FONT FACE="Arial, serif">
- тип):</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">cart
= [</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">{
type: :soccer_ball, qty: 2 },</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif">{
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">type</SPAN></FONT><FONT FACE="Courier New, serif">:
:</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">tennis</SPAN></FONT><FONT FACE="Courier New, serif">_</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">ball</SPAN></FONT><FONT FACE="Courier New, serif">,
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">qty</SPAN></FONT><FONT FACE="Courier New, serif">:
3 }</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">]</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">А
наличие на складе следующим хешем:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">inventory
= {</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">soccer_ball:
{ available: 2, price_per_item: 100 },</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">tennis_ball:
{ available: 1, price_per_item: 30 },</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">golf_ball:
{ available: 5, price_per_item: 5 }</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">}</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Написать
программу, которая выводит на экран
цену всех товаров в корзине (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">total</SPAN></FONT><FONT FACE="Arial, serif">),
а также сообщает - возможно ли удовлетворить
запрос пользователя - набрать все единицы
товара, которые есть на складе.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_wzy7fv8jb7dn"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt">Пример
</FONT></FONT><FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt"><SPAN LANG="en">JSON</SPAN></FONT></FONT><FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt">-структуры,
описывающей приложение</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Структура
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JSON</SPAN></FONT><FONT FACE="Arial, serif">
является довольно универсальным способом
записи практически любых данных.
Например, следующая структура определяет
</FONT><FONT FACE="Arial, serif"><I>состояние</I></FONT><FONT FACE="Arial, serif">
(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">state</SPAN></FONT><FONT FACE="Arial, serif">)
интерфейса простейшего приложения
“Задачи на сегодня” (также известным
как “Список дел”, “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">TODOs</SPAN></FONT><FONT FACE="Arial, serif">”,
“Купи батон” и т.д):</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">{</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">todos:
[{</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">text:
'Покушать',</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">completed:
true</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">},
{</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">text:
'Сходить в спортзал',</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">completed:
false</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">}],</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">visibility_fiter:
:show_completed</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">}</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">На
экране пользователя это приложение
может выглядеть следующим образом:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><IMG SRC="2eaec5a5667bec5b244b5f4a53e23318_html_fcc58b2b.png" NAME="image12.png" ALIGN=BOTTOM HSPACE=12 VSPACE=12 WIDTH=404 HEIGHT=249 BORDER=0></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Если
разобрать эту структуру данных, то
получается следующая простая конструкция:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">{</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">todos:
[ { ... }, { ... }, ... ],</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">visibility_fiter:
:show_completed</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">}</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">По
ключу “todos” в хеше имеется значение -
это массив. В массиве каждый элемент
это отдельный хеш (объект), который имеет
два свойства: текст и флаг завершенности
какого-либо дела (тип Boolean - либо true -
завершено, либо false - не завершено).</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Также
в главном хеше есть свойство
“visibility_filter” (фильтр видимости), который
принимает значение “show_completed” (показать
завершенные). Мы сами придумали название
этого символа. В какой-то части нашей
программы участок кода должен отвечать
за отображение только завершенных
данных. Несмотря на то, что в массиве
“todos” у нас два элемента, на экране
отображается только один.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Если
мы нажмем на переключатель, то экран
будет иметь следующий вид:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><IMG SRC="2eaec5a5667bec5b244b5f4a53e23318_html_34e23fcb.png" NAME="image24.png" ALIGN=BOTTOM HSPACE=12 VSPACE=12 WIDTH=404 HEIGHT=249 BORDER=0></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">И
состояние программы в этом случае будет
представлено немного измененным хешем.
Например, таким:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">{</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">todos:
[{</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">text:
'Покушать',</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">completed:
true</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">},
{</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">text:
'Сходить в спортзал',</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">completed:
false</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">}],</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">visibility_fiter:
:show_all</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">}</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Когда
добавляется какой-то элемент данных,
то значение просто добавляется в массив:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">{</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">todos:
[{</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">text:
'Покушать',</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">completed:
true</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">},
{</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">text:
'Сходить в спортзал',</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">completed:
false</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">},
{</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">text:
'Позвонить Геннадию',</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">completed:
false  </SPAN></FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">}],</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">visibility_fiter:
:show_all</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">}</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">А
экран программы при этом будет выглядеть
следующим образом:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><IMG SRC="2eaec5a5667bec5b244b5f4a53e23318_html_219182cc.png" NAME="image2.png" ALIGN=BOTTOM HSPACE=12 VSPACE=12 WIDTH=404 HEIGHT=249 BORDER=0></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><B>Задание:</B></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">
напишите хеш, который бы отображал
состояние следующего приложения:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><IMG SRC="2eaec5a5667bec5b244b5f4a53e23318_html_54ebe4f6.png" NAME="image29.png" ALIGN=BOTTOM HSPACE=12 VSPACE=12 WIDTH=489 HEIGHT=354 BORDER=0></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><B>Задание:</B></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">
напишите программу, которая будет
принимать хеш, который вы определили в
предыдущей задаче, и выводить результат
на экран. Убедитесь, что переключатель
работает и программа не выводит приход,
если переключатель включен. </SPAN></FONT>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.22in; margin-bottom: 0.06in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_a18yqrubdm50"></A>
<FONT COLOR="#434343"><FONT FACE="Arial, serif"><FONT SIZE=4><SPAN LANG="en">Англо-русский
словарь</SPAN></FONT></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Для
закрепления материала напишем простейшее
приложение “англо-русский словарь”.
Из самого названия приложения можно
догадаться какую структуру данных мы
будем использовать - хеш (который также
называется dictionary - словарь).</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Самое
основное в словаре - база данных. Речь
идет не о специализированной Системе
Управления Базами Данных (СУБД) типа
MySQL, Postgres, и т.д., а о базе данных в виде
обычной структуры в памяти. Она может
выглядеть следующим образом:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">dict
= {</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">'cat'
=&gt; 'кошка',</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">'dog'
=&gt; 'собака',</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">'girl'
=&gt; 'девушка'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">}</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Авторы
говорят “может выглядеть” из-за того,
что они не настаивают на определенной
точке зрения. Возможно, у вас будет
какая-нибудь другая идея. Но в нашем
случае подойдет простейшая структура
данных ключ-значение (key-value), где ключом
будет слово (тип String), а значением -
перевод (тип String).</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Эта
структура данных позволяет легко искать
вводимое пользователем слово в нашем
словаре. Под словом “легко” подразумевается
поиск с т.н. константным временем
(constant time, O(1)). Другими словами, сколько
бы слов мы не добавили в наш хеш, поиск
всегда будет занимать одно и то же время.
</SPAN></FONT>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Если
бы мы воспользовались структурой данных
“массив”, то задача тоже была бы решаема.
Например, можно было бы определить нашу
структуру данных следующим образом:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr
= [</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">{
word: 'cat', translation: 'кошка' },</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">{
word: 'dog', translation: 'собака' },</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">{
word: 'girl', translation: 'девушка' }  </SPAN></FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Но
для поиска элемента нам необходимо
перебрать весь массив (с помощью
конструкции each). Если элементов будет
много, то поиск будет занимать больше
времени. Другими словами, с возрастанием
размера массива возрастает и количество
элементов, которое требуется просмотреть
чтобы найти слово. В этом случае говорят,
что поиск будет занимать линейное время
(linear time, O(N)).</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Для
небольшого количества элементов нет
разницы как именно мы будем реализовывать
поиск. Более того, в новых версиях языка
руби хеш, который содержит не более 7
элементов реализован через массив.
Снаружи мы это никак не определим, т.к.
программист всегда использует API языка
и не лезет во внутренности. Но если
посмотреть исходный код языка и реализацию
на языке “Си”, то эти подробности видны.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">В
любом случае, хеш нам больше подходит,
даже если количество элементов небольшое.
Когда мы используем хеш (или другую
структуру данных), мы также показываем
свое намерение другим программистам:
“эта структура данных вот такая, а
следовательно я намереваюсь использовать
ее правильным образом”.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Конечно,
если бы для каждого слова мы точно знали
индекс, то поиск в массиве занимал бы
константное время. Но пользователь не
вводит индекс, он вводит слово. Поэтому
и нужна структура данных “хеш”. Поиск
в хеше выполняется простой конструкцией:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">dict[input]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Вся
программа выглядит довольно просто:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">dict
= {</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">'cat'
=&gt; 'кошка',</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">'dog'
=&gt; 'собака',</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">'girl'
=&gt; 'девушка'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">}</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">print
'Введите слово: '</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">input
= gets.chomp</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts
&quot;Перевод слова: #{dict[input]}&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Результат
работы программы:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Введите
слово: dog</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Перевод
слова: собака</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Заметьте,
что у нас получился англо-русский
словарь. Этот словарь невозможно
использовать как русско-английский,
потому что доступ к хешу всегда
осуществляется по ключу. Нет способа с
помощью которого мы могли бы по значению
(переводу) получить ключ (слово на
английском языке). Единственный способ
- создать еще один хеш, в этом случае
ключом было бы русское слово, а значением
английское - и получился бы русско-английский
словарь.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Константное
O(1) и линейное O(N) время это понятия о
т.н. Big-O (большое O), понятие из Computer
Science. Начинающему программисту нет
необходимости знать абсолютно все
структуры данных и сложные алгоритмы.
Однако, полезно задавать себе вопросы
о теоретической скорости работы той
или иной операции. Все популярные
структуры данных сведены в единую
таблицу, которую можно найти по адресу
</SPAN></FONT><A HREF="https://github.com/ro31337/bigoposter/blob/master/bigoposter.pdf"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https://github.com/ro31337/bigoposter/blob/master/bigoposter.pdf</U></SPAN></FONT></FONT></A></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Например,
из таблицы видно, что </SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>в
среднем (average)</I></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">
операция поиска в ма065ссиве занимает
линейное O(N) время, а операция поиска в
хеше константное O(1):</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><IMG SRC="2eaec5a5667bec5b244b5f4a53e23318_html_6c0fdfc8.png" NAME="image15.png" ALIGN=BOTTOM HSPACE=12 VSPACE=12 WIDTH=563 HEIGHT=303 BORDER=0></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><B>Задание:</B></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">
напишите “сложный” англо-русский
словарь, где каждому английскому слову
может соответствовать несколько
переводов (например: cat это “кот”,
“кошка”). </SPAN></FONT>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><B>Задание:</B></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">
задайте базу данных (хеш) своих контактов.
Для каждого контакта (фамилия) может
быть задано три параметра: email, cell_phone
(номер моб.телефона), work_phone (номер рабочего
телефона). Напишите программу, которая
будет спрашивать фамилию и выводить на
экран контактную информацию.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Сравнительная
таблица массивов и хешей</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<TABLE WIDTH=624 CELLPADDING=7 CELLSPACING=0>
	<COL WIDTH=193>
	<COL WIDTH=194>
	<COL WIDTH=193>
	<TR VALIGN=TOP>
		<TD WIDTH=193 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P LANG="en" STYLE="widows: 0; orphans: 0"><BR>
			</P>
		</TD>
		<TD WIDTH=194 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P STYLE="widows: 0; orphans: 0"><FONT FACE="Arial, serif"><SPAN LANG="en">Массив</SPAN></FONT></P>
		</TD>
		<TD WIDTH=193 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P STYLE="widows: 0; orphans: 0"><FONT FACE="Arial, serif"><SPAN LANG="en">Хеш</SPAN></FONT></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=193 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P STYLE="widows: 0; orphans: 0"><FONT FACE="Arial, serif"><SPAN LANG="en">Объявление</SPAN></FONT></P>
		</TD>
		<TD WIDTH=194 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P STYLE="widows: 0; orphans: 0"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr
			= []</SPAN></FONT></P>
		</TD>
		<TD WIDTH=193 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P STYLE="widows: 0; orphans: 0"><FONT FACE="Courier New, serif"><SPAN LANG="en">hh
			= {}</SPAN></FONT></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=193 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P STYLE="widows: 0; orphans: 0"><FONT FACE="Arial, serif"><SPAN LANG="en">Итерация</SPAN></FONT></P>
		</TD>
		<TD WIDTH=194 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P STYLE="margin-bottom: 0in; widows: 0; orphans: 0"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr.each
			do |element|</SPAN></FONT></P>
			<P STYLE="margin-bottom: 0in; widows: 0; orphans: 0">  <FONT FACE="Courier New, serif"><SPAN LANG="en">...</SPAN></FONT></P>
			<P STYLE="widows: 0; orphans: 0"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
		</TD>
		<TD WIDTH=193 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P STYLE="margin-bottom: 0in; widows: 0; orphans: 0"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">hh.each
			do |key, value|</SPAN></FONT></FONT></P>
			<P STYLE="margin-bottom: 0in; widows: 0; orphans: 0">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">...</SPAN></FONT></FONT></P>
			<P STYLE="margin-bottom: 0in; widows: 0; orphans: 0"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">end</SPAN></FONT></FONT></P>
			<P LANG="en" STYLE="margin-bottom: 0in; widows: 0; orphans: 0"><BR>
			</P>
			<P ALIGN=CENTER STYLE="margin-bottom: 0in; widows: 0; orphans: 0"><FONT FACE="Arial, serif"><SPAN LANG="en"><I>или</I></SPAN></FONT></P>
			<P LANG="en" STYLE="margin-bottom: 0in; widows: 0; orphans: 0"><BR>
			</P>
			<P STYLE="margin-bottom: 0in; widows: 0; orphans: 0"><FONT FACE="Courier New, serif"><SPAN LANG="en">hh.each_key
			do |key|</SPAN></FONT></P>
			<P STYLE="margin-bottom: 0in; widows: 0; orphans: 0">  <FONT FACE="Courier New, serif"><SPAN LANG="en">...</SPAN></FONT></P>
			<P STYLE="widows: 0; orphans: 0"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=193 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P STYLE="widows: 0; orphans: 0"><FONT FACE="Arial, serif"><SPAN LANG="en">Представление
			данных</SPAN></FONT></P>
		</TD>
		<TD WIDTH=194 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P ALIGN=CENTER STYLE="widows: 0; orphans: 0"><IMG SRC="2eaec5a5667bec5b244b5f4a53e23318_html_f2ba7133.png" NAME="image11.png" ALIGN=BOTTOM HSPACE=12 VSPACE=12 WIDTH=194 HEIGHT=37 BORDER=0><FONT FACE="Arial, serif"><SPAN LANG="en"><BR></SPAN></FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">0
			… N</SPAN></FONT></P>
		</TD>
		<TD WIDTH=193 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P ALIGN=CENTER STYLE="widows: 0; orphans: 0"><IMG SRC="2eaec5a5667bec5b244b5f4a53e23318_html_64f619b5.png" NAME="image3.png" ALIGN=BOTTOM HSPACE=12 VSPACE=12 WIDTH=145 HEIGHT=148 BORDER=0></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=193 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P STYLE="widows: 0; orphans: 0"><FONT FACE="Arial, serif"><SPAN LANG="en">Обращение</SPAN></FONT></P>
		</TD>
		<TD WIDTH=194 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P ALIGN=CENTER STYLE="widows: 0; orphans: 0"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr[0]</SPAN></FONT></P>
		</TD>
		<TD WIDTH=193 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P ALIGN=CENTER STYLE="widows: 0; orphans: 0"><FONT FACE="Courier New, serif"><SPAN LANG="en">hh[■]</SPAN></FONT></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=193 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P STYLE="widows: 0; orphans: 0"><FONT FACE="Arial, serif"><SPAN LANG="en">Смысл</SPAN></FONT></P>
		</TD>
		<TD WIDTH=194 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P STYLE="widows: 0; orphans: 0"><FONT FACE="Arial, serif"><SPAN LANG="en">Для
			представления последовательности
			данных, списков, элементов идущих
			по-порядку</SPAN></FONT></P>
		</TD>
		<TD WIDTH=193 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P STYLE="widows: 0; orphans: 0"><FONT FACE="Arial, serif"><SPAN LANG="en">Для
			хранения данных в общей куче, но с
			быстрым выбором по ключу. Для хранения
			настроек, опций, для передачи параметров
			в какой-либо метод</SPAN></FONT></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=193 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P STYLE="widows: 0; orphans: 0"><FONT FACE="Arial, serif"><SPAN LANG="en">Класс</SPAN></FONT></P>
		</TD>
		<TD WIDTH=194 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P ALIGN=CENTER STYLE="widows: 0; orphans: 0"><FONT FACE="Arial, serif"><SPAN LANG="en">Array</SPAN></FONT></P>
		</TD>
		<TD WIDTH=193 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P ALIGN=CENTER STYLE="widows: 0; orphans: 0"><FONT FACE="Arial, serif"><SPAN LANG="en">Hash</SPAN></FONT></P>
		</TD>
	</TR>
</TABLE>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_jypxv0pxlzdn"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt"><SPAN LANG="en">Наиболее
часто используемые методы класса Hash </SPAN></FONT></FONT>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">В
общем и целом, структура данных “хеш”
довольно простая. В языке руби существуют
некоторые методы, которые вам могут
встретиться чаще, чем остальные. В
остальных языках эти методы похожи.
Скажем, обращение к хешу (объекту) в
JavaScript выглядит следующим образом:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
node</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&gt;
hh = {};</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">{}</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&gt;
hh['something'] = 'blabla';</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">'blabla'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&gt;
hh</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">{
something: 'blabla' }</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```
</SPAN></FONT>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Различие
лишь в том, что в JavaScript не существует
типа Symbol, и в качестве ключей в большинстве
случаев используются строки.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Хеши
также реализованы в некоторых других
инструментах, например в базах данных.
Довольно известная база данных Redis ничто
иное как key-value storage (хранилище
“ключ-значение”). В предыдущих примерах
мы делали записную книжку. Но представим,
что нам нужно сохранять все эти данные
в случае перезапуска программы. Первый
вариант - сохранить все в файл. Этот
способ прекрасно работает, но возможно
он немного медленный, когда у вас есть
несколько тысяч пользователей. Второй
вариант - воспользоваться NoSQL базой
данных через особый API (интерфейс
взаимодействия).</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">В
любом случае, используете ли вы библиотеку
(gem), базу данных, язык руби или какой-то
другой, для хеша всегда существует два
основных метода:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">get(key)</SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">
	- получить значение (value)</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">set(key,
	value)</SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"> -
	установить значение для определенного
	ключа</SPAN></FONT></P>
</UL>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Документация
к NoSQL базе данных Redis
</SPAN></FONT><A HREF="https://github.com/redis/redis-rb"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https://github.com/redis/redis-rb</U></SPAN></FONT></FONT></A><FONT FACE="Arial, serif"><SPAN LANG="en">
говорит нам то же самое:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">redis.set(&quot;mykey&quot;,
&quot;hello world&quot;)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">#
=&gt; &quot;OK&quot;</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">redis.get(&quot;mykey&quot;)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">#
=&gt; &quot;hello world&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Если
посмотреть в Википедии, то Redis это ничто
иное как хранилище ключ-значение:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><I>&gt;
Redis is... key-value store…</I></SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Тут
у читателя возникает вопрос - а зачем
мне Redis-хеш, когда у меня есть хеш в языке
руби? Во-первых, хеш в языке руби не
сохраняет данные на диск. А во-вторых,
Redis предназначен для эффективного
хранения многих миллионов пар
“ключ-значение”, а хеш в языке руби
обычно не хранит много пар.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Ниже
мы рассмотрим наиболее часто встречающиеся
методы класса Hash. Все эти методы также
описаны в документации
</SPAN></FONT><A HREF="https://ruby-doc.org/core-2.5.1/Hash.html"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https://ruby-doc.org/core-2.5.1/Hash.html</U></SPAN></FONT></FONT></A></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_4t0xvvtsn4bj"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt"><SPAN LANG="en">Установка
значения по-умолчанию</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Иногда
полезно устанавливать значения в хеше
по-умолчанию. Следует сделать заметку
в книге, т.к. эта возможность часто
забывается, но на практике потребность
в значении по-умолчанию часто возникает
на интервью. Одна из подобных задач -
есть какое-то предложение, необходимо
сосчитать частотность слов и вывести
список. Например, слово “the” встречается
2 раза, слово “dog” 1 раз и так далее.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Как
мы будем решать эту задачу? Представим,
что у нас есть строка “the quick brown fox jumps
over the lazy dog”. Разобьем ее на части:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">str
= 'the quick brown fox jumps over the lazy dog'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr
= str.split(' ')</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">У
нас получился массив слов, давайте
обойдем этот массив и занесем каждое
значение в хеш, где ключом будет слово,
а значением - количество повторов этого
слова. Попробуем для начала количество
повторов установить в единицу. Как это
сделать? Очень просто:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">hh
= {}</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr.each
do |word|</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">hh[word]
= 1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Далее
нам каким-то образом нужно проверить:
встречается ли слово в хеше. Если
встречается, то увеличить счетчик на
1. Если не встречается, то добавить новое
слово.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr.each
do |word|</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">if
hh[word].nil?</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">hh[word]
= 1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">else</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">hh[word]
+= 1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Код
программы целиком выглядел бы следующим
образом:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">str
= 'the quick brown fox jumps over the lazy dog'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr
= str.split(' ')</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">hh
= {}</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr.each
do |word|</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">if
hh[word].nil?</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">hh[word]
= 1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">else</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">hh[word]
+= 1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts
hh.inspect</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Программа
работает, и результат работы выглядит
следующим образом:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">{&quot;the&quot;=&gt;2,
&quot;quick&quot;=&gt;1, &quot;brown&quot;=&gt;1, &quot;fox&quot;=&gt;1,
&quot;jumps&quot;=&gt;1, &quot;over&quot;=&gt;1, &quot;lazy&quot;=&gt;1,
&quot;dog&quot;=&gt;1}</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">В
самом деле, у нас два слова “the”, а
остальных по одному. Но эту программу
можно было бы значительно облегчить,
если знать, что в хеше можно установить
значение по-умолчанию:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">str
= 'the quick brown fox jumps over the lazy dog'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr
= str.split(' ')</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">hh
= Hash.new(0)</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr.each
do |word|</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">hh[word]
+= 1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts
hh.inspect</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Девять
строк кода вместо тринадцати!</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Строка
`</SPAN></FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">Hash.new(0)</SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">`
говорит языку руби о том, что если слово
не найдено, то будет возвращено
автоматическое значение - ноль. Если бы
мы объявили хеш без значения по-умолчанию,
то мы получили бы ошибку “NoMethodError:
undefined method `+' for nil:NilClass”, ведь руби попытался
бы сложить “nil” и единицу, а этого делать
нельзя:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
pry</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">[1]
pry(main)&gt; nil + 1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">NoMethodError:
undefined method `+' for nil:NilClass</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">В
этом случае говорят, что метод “+” не
реализован в классе nil.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><B>Задание:</B></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">
напишите программу, которая считает
частотность букв и выводит на экран
список букв и их количество в предложении.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_e1by6g2es42r"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt"><SPAN LANG="en">Передача
опций в методы</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Допустим,
что нам нужно вызвать какой-то метод и
передать ему несколько параметров.
Например, пользователь выбрал определенное
количество футбольных мячей, мячей для
тенниса, и мячей для гольфа. Мы хотим
написать метод, который считает общий
вес. Это может быть сделано обычным
способом:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">def
total_weight(soccer_ball_count, tennis_ball_count, golf_ball_count)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">#
...</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">В
этом случае вызов выглядел бы следующим
образом:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">x
= total_weight(3, 2, 1)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Три
футбольных мяча, два мяча для тенниса,
один для гольфа. Согласитесь, что когда
мы смотрим на запись “</SPAN></FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">total_weight(3,
2, 1)</SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">” не
очень понятно, что именно означают эти
параметры. Это </SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>мы</I></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">
знаем, что сначала идут футбольные мячи,
потом должны идти мячи для тенниса,
потом для гольфа. Но чтобы это понять
другому программисту, нужно посмотреть
на сам метод.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Это
не очень удобно, поэтому некоторые IDE
(Integrated Development Environment, редакторы кода,
среды разработки) автоматически
подсказывают что именно это за параметр.
Например, такая функциональность есть
в RubyMine. Однако, в силу динамической
природы языка RubyMine не всегда может
определить правильное название
параметров. Да и многие руби программисты
используют текстовые редакторы попроще.
</SPAN></FONT>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Поэтому
многие программисты предпочитали
передавать в методы хеш с параметрами:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">def
total_weight(options)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">a
= options[:soccer_ball_count]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">b
= options[:tennis_ball_count]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">c
= options[:golf_ball_count]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">puts
a</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">puts
b</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">puts
c</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">#
...</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">params
= { soccer_ball_count: 3, tennis_ball_count: 2, golf_ball_count: 1 }</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">x
= total_weight(params)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Согласитесь,
что код</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">total_weight({
soccer_ball_count: 3, tennis_ball_count: 2, golf_ball_count: 1 })</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">выглядит
более понятным, чем просто “</SPAN></FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">total_weight(3,
2, 1)</SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">”.
Несмотря на то, что запись выше выглядит
длиннее, у нее есть два преимущества.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Во-первых,
точно видно какие параметры мы передаем,
т.к. мы явно указываем названия этих
параметров</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><BR>А
во-вторых, порядок параметров в хеше не
имеет значения. В случае с “</SPAN></FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">total_weight(3,
2, 1)</SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">” нам
нужно соблюдать порядок и всегда помнить:
первый элемент это количество футбольных
мячей и т.д. В случае с хешем можно указать
обратный порядок и это не будет
ошибкой:<BR><BR>```<BR></SPAN></FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">total_weight({
golf_ball_count: 1, tennis_ball_count: 2, soccer_ball_count: 3
})</SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><BR>```<BR><BR>Программа
получается более наглядная, и нам не
нужно помнить про порядок! Позднее
синтаксис был упрощен, и теперь для
вызова функции, которая принимает хеш
с параметрами не нужно указывать фигурные
скобки, метод все равно будет принимать
хеш:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```<BR></SPAN></FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">total_weight(golf_ball_count:
1, tennis_ball_count: 2, soccer_ball_count: 3)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```
<BR></SPAN></FONT><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Теперь
метод для подсчета веса можно переписать
иначе:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">def
total_weight(options)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">a
= options[:soccer_ball_count]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">b
= options[:tennis_ball_count]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">c
= options[:golf_ball_count]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">puts
a</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">puts
b</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">puts
c</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">#
...</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">x
= total_weight(soccer_ball_count: 3, tennis_ball_count: 2,
golf_ball_count: 1)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Но
что будет, если мы вызовем этот метод
вообще без каких-либо аргументов? По
идее, метод должен вернуть ноль. Но мы
получаем сообщение об ошибке:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">ArgumentError:
wrong number of arguments (given 0, expected 1)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Руби
нам говорит о том, что метод ожидает 1
параметр, а мы ничего не предоставили.
С точки зрения бизнес-логики может
показаться, что это правильно - “не
нужно вызывать неправильно то, что
что-то считает. Если хотите посчитать
общий вес, то укажите сколько мячей или
укажите явно - ноль мячей для футбола,
ноль для тенниса, ноль для гольфа”. Это
кажется разумным, но давайте представим,
что total_weight может вызываться и без
параметров. В этом случае, например,
метод должен возвращать вес пустой
коробки (29 грамм). Что же нам делать?</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Решение
очень простое: сделать так, чтобы параметр
options принимал какое-либо значение
по-умолчанию. Например, пустой хеш. Если
хеш будет пустой, то переменные “a, b, c”
будут инициализированы значением nil и
метод можно будет вызывать без параметров.
Указать значение по-умолчанию можно в
определении метода с помощью знака
“равно”:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">def
total_weight(options={})</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">...</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Важное
примечание: несмотря на то, что “равно
с пробелами” выглядит нагляднее, в
руби-сообществе существует два мнения
по этому поводу. Раньше было принято
использовать равно без пробелов (но
только при определении параметров
метода по-умолчанию). Сейчас чаще всего
встречается “равно с пробелами”.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">В
зависимости от предпочтений, которые
существуют в вашей команде, инструмент
статического анализа кода Rubocop может
выдать предупреждение:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">#
не рекомендуется указывать пробелы</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">def
total_weight(options = {})</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">...</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Код
нашей программы полностью теперь
выглядит так:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">def
total_weight(options={})</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">a
= options[:soccer_ball_count]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">b
= options[:tennis_ball_count]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">c
= options[:golf_ball_count]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">puts
a</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">puts
b</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">puts
c</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">#
...</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">x
= total_weight(soccer_ball_count: 3, tennis_ball_count: 2,
golf_ball_count: 1)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Можно
вызвать “total_weight” без параметров и не
будет ошибки (попробуйте самостоятельно
в pry). Давайте теперь перепишем эту
программу, чтобы она на самом деле
считала вес посылки вместе с коробкой:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">def
total_weight(options={})</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">a
= options[:soccer_ball_count]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">b
= options[:tennis_ball_count]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">c
= options[:golf_ball_count]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">(a
* 410) + (b * 58) + (c * 45) + 29</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">x
= total_weight(soccer_ball_count: 3, tennis_ball_count: 2,
golf_ball_count: 1)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Программа
работает и правильно считает. 3 футбольных
мяча, 2 теннисных и 1 мяч для гольфа все
вместе весят 1420 грамм. Попробуем вызвать
метод “total_weight” без параметров:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">...</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&gt;
total_weight</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">NoMethodError:
undefined method `*' for nil:NilClass</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">О
нет, ошибка! В чем же дело? Конечно, ведь
если мы не указываем параметр, то его
нет и в хеше. И когда мы пытаемся прочитать
переменные “a, b, c”, то все они принимают
значения nil. А nil нельзя умножать:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
pry</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&gt;
nil * 410</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">NoMethodError:
undefined method `*' for nil:NilClass</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Тут
мы можем прибегнуть к хитрости и
логическому оператору “или”. Попробуйте
догадаться, что выведет на экран
программа:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">if
nil || true</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">puts
'Yay!'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```
</SPAN></FONT>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Программа
выведет “Yay!”, потому что руби увидит
nil, это выражение его не удовлетворит,
потом встретит логический оператор
“или” и решит вычислить то, что находится
после этого логического оператора. А
после находится “true”, и результат
выражения “nil || true” равняется в итоге
“true” (истина), которое передается
оператору “if” (если). Получается
конструкция “если истина, то вывести
на экран Yay!”.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Теперь
попробуйте догадаться, чему будет равно
значение переменной “x”:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">x
= nil || 123</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Правильный
ответ: 123. Эту же хитрость мы можем
применить и к переменным “a, b, c” следующим
образом:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">a
= options[:soccer_ball_count] || 0</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Другими
словами, если значение в хеше “options”
не указано (равно nil), то переменной “a”
будет присвоено значение “0”.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Код
программы целиком:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">def
total_weight(options={})</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">a
= options[:soccer_ball_count] || 0</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">b
= options[:tennis_ball_count] || 0</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">c
= options[:golf_ball_count] || 0</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">(a
* 410) + (b * 58) + (c * 45) + 29</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">x
= total_weight(soccer_ball_count: 3, tennis_ball_count: 2,
golf_ball_count: 1)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Теперь
метод “</SPAN></FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">total_weight</SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">”
работает без параметров и возвращает
29. Мы можем также передать один или
несколько параметров:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&gt;
total_weight(tennis_ball_count: 2, golf_ball_count: 1)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">190</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```
</SPAN></FONT>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Получился
работоспособный метод, который принимает
хеш с параметрами, который выглядит
понятно, и в который можно передать
любое количество параметров. </SPAN></FONT>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Представим
теперь, что в технический отдел пришел
директор продаж с новым требованием к
нашей программе: “если пользователь
не заказывает мячи для гольфа, мы даем
ему один в подарок!” Это требование
легко реализовать в нашей функции. Код
метода получился бы таким:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">def
total_weight(options={})</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">a
= options[:soccer_ball_count] || 0</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">b
= options[:tennis_ball_count] || 0</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">c
= options[:golf_ball_count] || 1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">(a
* 410) + (b * 58) + (c * 45) + 29</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Мы
рассмотрели передачу опций в метод с
помощью хешей. Этот способ широко
используется, особенно когда количество
параметров метода больше пяти. Похожие
решения также существуют в других
языках. </SPAN></FONT>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><B>Задание:</B></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">
Центр Управления Полетами поручил вам
задание написать метод “launch” (от англ.
“запуск”), который будет принимать
набор опций в виде хеша и отправлять в
космос астронавтов “Белку” и/или
“Стрелку”. Метод должен принимать
следующие параметры:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">`angle`
	- угол запуска ракеты. Если не задан, то
	значение по-умолчанию равно 90 (градусов)</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">`astronauts`
	- массив символов (:belka, :strelka), если не
	задан, то в космос нужно отправлять и
	Белку, и Стрелку.</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">`delay`
	- количество секунд через которые
	запустить ракету, если не задано, то
	равно пяти</SPAN></FONT></P>
</UL>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Метод
должен вести подсчет оставшихся до
запуска секунд (например: “Осталось
секунд: 5 4 3 2 1”). После истечения задержки,
метод должен выводить сообщение о том,
какой астронавт (астронавты) запущены,
а также под каким углом была запущена
ракета. Метод может принимать любое
количество параметров (ноль, один, два,
три). Возможные варианты вызова метода:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">`launch`</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">`launch(angle:
	91)`</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">`launch(delay:
	3)`</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">`launch(delay:
	3, angle: 91)`</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">`launch(astronauts:
	[:belka])`</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">и
	т.д. </SPAN></FONT>
	</P>
</UL>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_epgqalpec0vo"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt"><SPAN LANG="en">Набор
ключей (HashSet)</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">В
языке руби существует возможность
вывести список ключей в каком-либо хеше.
Работает этот метод довольно предсказуемо:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
pry</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&gt;
hh = {}</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">=&gt;
{}</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&gt;
hh[:red] = 'ff0000'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">=&gt;
&quot;ff0000&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&gt;
hh[:green] = '00ff00'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">=&gt;
&quot;00ff00&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&gt;
hh[:blue] = '0000ff'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">=&gt;
&quot;0000ff&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&gt;
hh.keys</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">=&gt;
[:red, :green, :blue]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Выше
мы определили хеш с ключом типа Symbol и
значением типа String. К слову, строковые
значения это общепринятое трехбайтное
(в виде строки) обозначение цветов RGB,
где первый байт отвечает за R(ed) - красный,
второй за G(reen) - зеленый, третий за (B)lue
- синий.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Получение
списка ключей - не самая часто встречающаяся
операция. Однако, иногда возникает
необходимость использовать только
ключи в структуре данных “хеш”. Это
можно сделать через хеш, задавая любые
значения (например, true), но есть специальная
структура данных, которая содержит
только ключи (без значений). Она называется
HashSet (в руби просто Set):</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><I>(англ.)
&gt; Set implements a collection of unordered values with no
duplicates</I></SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><I>(по-русски)
&gt; Set представляет (реализует) собой
коллекцию неупорядоченных неповторяющихся
значений (то есть без дубликатов)</I></SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">“<FONT FACE="Arial, serif"><SPAN LANG="en">Set”
в переводе с английского языка это
набор, множество. Т.е. это просто набор
каких-то данных, объединенным каким-то
признаком.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Напишем
небольшую программу для демонстрации
структуры данных HashSet: есть предложение
в нижнем регистре, нужно определить:
все ли буквы английского языка используются
в этом предложении? Известно, что
предложение “quick brown fox jumps over the lazy dog”
использует все буквы английского языка,
поэтому его используют для визуального
тестирования шрифтов. А вот в “brown fox
jumps over the lazy dog” (без слова quick) нет буквы
“q”.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Нам
нужно написать метод, который будет
возвращать true, если в предложении
содержатся все буквы и false если каких-то
букв не хватает. Как мы могли бы написать
эту программу?</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Подход
простой: делаем итерацию по каждому
символу, если это не пробел, то добавляем
в структуру данных “хеш”. Т.к. в хеше
не может быть дублированных значений,
то максимальное количество ключей в
хеше - 26 (количество букв английского
алфавита). Если количество букв 26, то
все буквы были использованы.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Что
не так с обычным хешем в этой задаче?
То, что добавляя в хеш мы должны указывать
какое-то значение:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">hh[letter]
= true</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```
</SPAN></FONT>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Мы
можем указать true, false, любую строку - это
совершенно не важно, этот объект не
несет никакой смысловой нагрузки.
Поэтому хорошо бы иметь хеш без значений,
чтобы можно было сэкономить память и,
самое главное, показать намерение —
“значение нам не важно”. В этом случае
идеально подходит структура данных
HashSet. Код программы может выглядеть
следующим образом:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
импортируем пространство имен, т.к. set</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
не определен в пространстве имен
по-умолчанию</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">require
'set'</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
наш метод, который принимает строку</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">def
f(str)</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
инициализируем set</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">set
= Set.new</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
итерация по каждому символу в строке</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">str.each_char
do |c|</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
только если символ между a и z (игнорируем
пробелы и все остальное)</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">if
c &gt;= 'a' &amp;&amp; c &lt;= 'z'</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">      <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
добавляем в set</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">      <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">set.add(c)</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">end</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">end</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
результат выражения true, если есть все
английские буквы в наборе</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">set.size
== 26</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">end</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
выведет true, т.к. в этом предложении
используются все буквы англ. алфавита</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">puts
f('quick brown fox jumps over the lazy dog')</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Вопрос
“чем отличается Hash от HashSet” часто можно
встретить на интервью. Незнание этих
деталей </SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>не</I></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">
говорит о том, что вы не можете
программировать. Но </SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>знание</I></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">
говорит о том, что у вас есть опыт в
программировании и вы понимаете некоторые
тонкости.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">К
слову, одна из ошибок, которую можно
было бы сделать в этом задании - разбить
строку на символы методом split:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">&gt;
&quot;quick brown fox jumps over the lazy dog&quot;.split('')</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">=&gt;
[&quot;q&quot;, &quot;u&quot;, &quot;i&quot;, &quot;c&quot;, &quot;k&quot;,
&quot; &quot;, &quot;b&quot;, &quot;r&quot;, &quot;o&quot;, &quot;w&quot;,
&quot;n&quot;, &quot; &quot;, &quot;f&quot;, &quot;o&quot;, &quot;x&quot;,
&quot; &quot;, &quot;j&quot;, &quot;u&quot;, &quot;m&quot;, &quot;p&quot;,
&quot;s&quot;, &quot; &quot;, &quot;o&quot;, &quot;v&quot;, &quot;e&quot;,
&quot;r&quot;, &quot; &quot;, &quot;t&quot;, &quot;h&quot;, &quot;e&quot;,
&quot; &quot;, &quot;l&quot;, &quot;a&quot;, &quot;z&quot;, &quot;y&quot;,
&quot; &quot;, &quot;d&quot;, &quot;o&quot;, &quot;g&quot;]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">В
этом случае произошло бы выделение
дополнительной памяти. Представьте,
что строка имеет размер в несколько
гигабайт. Зачем формировать массив и
расходовать память, когда можно просто
воспользоваться итерацией по символам
средствами класса String?</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Другая
возможная ошибка в этом упражнении -
итерация строки до конца. Если строка
довольно большая, а распределение
символов равномерно, то вероятность
того, что все символы встретятся где-то
вначале очень высока. Поэтому проверка
на размер HashSet довольно полезна и в
теории должна сэкономить вычислительные
ресурсы.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><B>Задание</B></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">:
в программе выше допущена ошибка, которая
приведет к большим расходам вычислительных
ресурсов на больших строках. Сможете
ли вы ее увидеть?</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><B>Задание:</B></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">
после того, как вы прочитали эту главу,
попробуйте потренироваться и написать
эту программу самостоятельно, не
подсматривая в книгу.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_5jkx324o6rww"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt"><SPAN LANG="en">Итерация
по хешу</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Итерация
по хешу используется не часто: основное
назначение хеша все-таки в добавлении
и извлечении конкретного элемента. Но
иногда она встречается. Мы уже знаем,
что итерация по массиву имеет следующий
вид:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr.each
do |element|</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">#
do something with element</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Итерация
по всем парам ключ-значение имеет похожий
вид:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">hh
= {</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">soccer_ball:
410,</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">tennis_ball:
58,</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">golf_ball:
45</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">}</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">hh.each
do |k, v|</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">puts
&quot;Вес #{k} равняется #{v}&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Результат
работы программы:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Вес
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">soccer</SPAN></FONT><FONT FACE="Courier New, serif">_</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">ball</SPAN></FONT><FONT FACE="Courier New, serif">
равняется 410</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Вес
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">tennis</SPAN></FONT><FONT FACE="Courier New, serif">_</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">ball</SPAN></FONT><FONT FACE="Courier New, serif">
равняется 58</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Вес
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">golf</SPAN></FONT><FONT FACE="Courier New, serif">_</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">ball</SPAN></FONT><FONT FACE="Courier New, serif">
равняется 45</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Переменные
“</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">k</SPAN></FONT><FONT FACE="Arial, serif">”
и “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">v</SPAN></FONT><FONT FACE="Arial, serif">”
означают “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">key</SPAN></FONT><FONT FACE="Arial, serif">”
(ключ) и “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">value</SPAN></FONT><FONT FACE="Arial, serif">”
(значение) соответственно. </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Если
значение не нужно, то переменную “v”
можно опустить, написать с подчеркиванием
вначале или вообще заменить на
подчеркивание. </SPAN></FONT><FONT FACE="Arial, serif">Это
не синтаксис языка, а общепринятые
соглашения о наименовании (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">naming</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">conventions</SPAN></FONT><FONT FACE="Arial, serif">),
с помощью которых другим программистам
будет известно о ваших намерениях:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">hh
= {</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">soccer_ball:
410,</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">tennis_ball:
58,</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">golf_ball:
45</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">}</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">hh.each
do |k, _|</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT><FONT FACE="Courier New, serif">
&quot;На складе есть #{</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">k</SPAN></FONT><FONT FACE="Courier New, serif">}&quot;</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Код
выше можно записать немного иначе, если
воспользоваться методом “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">each</SPAN></FONT><FONT FACE="Arial, serif">_</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">key</SPAN></FONT><FONT FACE="Arial, serif">”
класса </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Hash</SPAN></FONT><FONT FACE="Arial, serif">.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><B>Задание:</B></FONT><FONT FACE="Arial, serif">
имеются следующие данные:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">data</SPAN></FONT><FONT FACE="Courier New, serif">
= {</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">soccer</SPAN></FONT><FONT FACE="Courier New, serif">_</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">ball</SPAN></FONT><FONT FACE="Courier New, serif">:
{ </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">name</SPAN></FONT><FONT FACE="Courier New, serif">:
'Футбольный мяч', </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">weight</SPAN></FONT><FONT FACE="Courier New, serif">:
410, </FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">qty</SPAN></FONT><FONT FACE="Courier New, serif">:
5 },</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">tennis_ball:
{ name: 'Мяч для тенниса', weight: 58, qty: 10 },</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">golf_ball:
{ name: 'Мяч для гольфа', weight: 45, qty: 15 }</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">}</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Написать
программу, которая будет выводить на
экран:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">На
складе есть:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Футбольный
мяч, вес 410 грамм, количество: 5 шт.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Мяч
для тенниса, вес 58 грамм, количество: 10
шт.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif">Мяч
для гольфа, вес 45 грамм, количество: 15
шт.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_372nnfccvess"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt">Метод
</FONT></FONT><FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt"><SPAN LANG="en">dig</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Допустим,
у нас есть структура данных с несколькими
уровнями вложенности:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=1 STYLE="font-size: 8pt"><SPAN LANG="en">users
= [</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><FONT SIZE=1 STYLE="font-size: 8pt"><SPAN LANG="en">{
first: 'John', last: 'Smith', address: { city: 'San Francisco',
country: 'US' } },</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><FONT SIZE=1 STYLE="font-size: 8pt"><SPAN LANG="en">{
first: 'Pat', last: 'Roberts', address: { country: 'US' } },</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><FONT SIZE=1 STYLE="font-size: 8pt">{
</FONT></FONT><FONT FACE="Courier New, serif"><FONT SIZE=1 STYLE="font-size: 8pt"><SPAN LANG="en">first</SPAN></FONT></FONT><FONT FACE="Courier New, serif"><FONT SIZE=1 STYLE="font-size: 8pt">:
'</FONT></FONT><FONT FACE="Courier New, serif"><FONT SIZE=1 STYLE="font-size: 8pt"><SPAN LANG="en">Sam</SPAN></FONT></FONT><FONT FACE="Courier New, serif"><FONT SIZE=1 STYLE="font-size: 8pt">',
</FONT></FONT><FONT FACE="Courier New, serif"><FONT SIZE=1 STYLE="font-size: 8pt"><SPAN LANG="en">last</SPAN></FONT></FONT><FONT FACE="Courier New, serif"><FONT SIZE=1 STYLE="font-size: 8pt">:
'</FONT></FONT><FONT FACE="Courier New, serif"><FONT SIZE=1 STYLE="font-size: 8pt"><SPAN LANG="en">Schwartzman</SPAN></FONT></FONT><FONT FACE="Courier New, serif"><FONT SIZE=1 STYLE="font-size: 8pt">'
}</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=1 STYLE="font-size: 8pt">]</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Структура
имеет определенную схему. Т.е. для каждой
записи (пользователя) формат данных
одинаковый. Но иногда данных по какому-то
параметру нет. Скажем, во второй записи
отсутствует город. В третьей записи
вообще нет адреса. Мы хотим вывести на
экран все города из этого массива.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Первое,
что приходит на ум - итерация по массиву
и “обычное” обращение к хешу:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">users.each
do |user|</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">puts
user[:address][:city]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Попробуем
запустить эту программу:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">San
Francisco</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">-:8:in
`block in &lt;main&gt;': undefined method `[]' for nil:NilClass
(NoMethodError).</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Программа
выдает ошибку. В чем же дело? Давайте
попробуем обратиться к каждому
пользователю отдельно:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
pry</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&gt;
users[0][:address][:city]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">=&gt;
&quot;San Francisco&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&gt;
users[1][:address][:city]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">=&gt;
nil</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&gt;
users[2][:address][:city]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">NoMethodError:
undefined method `[]' for nil:NilClass</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Для
первого пользователя конструкция
сработала. Для второго пользователя
тоже - результат равен </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">nil</SPAN></FONT><FONT FACE="Arial, serif">.
Для третьего пользователя `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">users</SPAN></FONT><FONT FACE="Arial, serif">[2][:</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">address</SPAN></FONT><FONT FACE="Arial, serif">]`
уже равно </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">nil</SPAN></FONT><FONT FACE="Arial, serif">.
А когда мы делаем `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">nil</SPAN></FONT><FONT FACE="Arial, serif">[:</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">city</SPAN></FONT><FONT FACE="Arial, serif">]`,
то мы получаем ошибку, потому что
обращение к каким-либо элементам в
классе </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">nil</SPAN></FONT><FONT FACE="Arial, serif">
не реализовано.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Так
как же нам написать программу? Воспользуемся
конструкцией </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">if</SPAN></FONT><FONT FACE="Arial, serif">:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">users</SPAN></FONT><FONT FACE="Courier New, serif">.</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">each</SPAN></FONT><FONT FACE="Courier New, serif">
</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">do</SPAN></FONT><FONT FACE="Courier New, serif">
|</FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">user</SPAN></FONT><FONT FACE="Courier New, serif">|</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">if
user[:address]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">puts
user[:address][:city]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Ура!
Программа работает и ошибку не выдает.
</SPAN></FONT><FONT FACE="Arial, serif">Мы написали хороший
код. Но давайте немного усложним структуру
данных, добавив в хеш “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">address</SPAN></FONT><FONT FACE="Arial, serif">”
еще один объект:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">street:
{ line1: '...', line2: '...' }</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Другими
словами, будет </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">street</SPAN></FONT><FONT FACE="Arial, serif">-адрес,
который всегда состоит из двух строк.
Структура данных полностью будет
выглядеть следующим образом (по сравнению
с вариантом выше эта структура также
визуально оптимизирована):</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">users
= [</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">{</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">        <FONT FACE="Courier New, serif"><SPAN LANG="en">first:
'John',</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">        <FONT FACE="Courier New, serif"><SPAN LANG="en">last:
'Smith',</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">        <FONT FACE="Courier New, serif"><SPAN LANG="en">address:
{</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">            <FONT FACE="Courier New, serif"><SPAN LANG="en">city:
'San Francisco',</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">            <FONT FACE="Courier New, serif"><SPAN LANG="en">country:
'US',</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">            <FONT FACE="Courier New, serif"><SPAN LANG="en">street:
{</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">               
<FONT FACE="Courier New, serif"><SPAN LANG="en">line1: '555 Market
Street',</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">               
<FONT FACE="Courier New, serif"><SPAN LANG="en">line2: 'apt 123'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">            <FONT FACE="Courier New, serif"><SPAN LANG="en">}</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">        <FONT FACE="Courier New, serif"><SPAN LANG="en">}</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">},</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">{
first: 'Pat', last: 'Roberts', address: { country: 'US' } },</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">{
first: 'Sam', last: 'Schwartzman' }</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Теперь
наша задача - вывести line1 из street-адреса.
Как мы напишем эту программу? Первое,
что приходит на ум:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">users.each
do |user|</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">if
user[:address]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">puts
user[:address][:street][:line1]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Но
код выше споткнется уже не на третьей,
а на второй записи. `user[:address][:street]` будет
nil. Запишем этот код иначе:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">users.each
do |user|</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">if
user[:address] &amp;&amp; user[:address][:street]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">puts
user[:address][:street][:line1]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Работает,
но пришлось добавить второе условие.
Другими словами, чем сложнее конструкция
и больше уровней вложенности, тем больше
проверок на nil необходимо сделать. Это
не очень удобно, и в версии 2.3.0 языка
руби (проверить свою версию можно с
помощью `ruby -v`) был представлен новый
метод dig (англ. “копать”):</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">users.each
do |user|</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">puts
user.dig(:address, :street, :line1)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Этот
метод принимает любое количество
параметров и обращается к сложной
структуре данных без ошибок. Если
какой-то из ключей в цепочке не найден,
то возвращается значение nil.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Примечание:
когда вы будете работать с Rails, вы
столкнетесь с похожим методом “try” и
т.н. safe navigation operator (тоже был представлен
впервые в версии 2.3.0): `&amp;.`, в других
языках программирования обозначается
как `?.` (иногда ошибочно говорят “Elvis
operator” -- это понятие относится к немного
другой конструкции). Safe navigation operator похож
по своей сути на метод dig. Мы рекомендуем
взглянуть на страницу в Википедии для
того, чтобы иметь представление зачем
это нужно:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><A HREF="https://en.wikipedia.org/wiki/Safe_navigation_operator"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https://en.wikipedia.org/wiki/Safe_navigation_operator</U></SPAN></FONT></FONT></A></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_ctjrmngxd3f1"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt"><SPAN LANG="en">Проверка
наличия ключа</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">В
некоторых случаях необходимо просто
проверить наличие ключа в хеше. Это
можно сделать без извлечения значения
с помощью метода “has_key?”:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
pry</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&gt;
hh = { login: 'root', password: '123456' }</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">...</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&gt;
hh.has_key?(:password)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">true</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&gt;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```
</SPAN></FONT>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">“<FONT FACE="Arial, serif"><SPAN LANG="en">has_key?”
проверяет только наличие ключа, но не
выполняет никаких действий со значением.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><B>Задание:</B></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">
объясните чем отличается JSON вида</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">{</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">&quot;books&quot;:
[</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">{</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">      <FONT FACE="Courier New, serif"><SPAN LANG="en">&quot;id&quot;:
1,</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">      <FONT FACE="Courier New, serif"><SPAN LANG="en">&quot;name&quot;:
&quot;Tom Sawyer and Huckleberry Finn&quot;,</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">},</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">{</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">      <FONT FACE="Courier New, serif"><SPAN LANG="en">&quot;id&quot;:
2,</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">      <FONT FACE="Courier New, serif"><SPAN LANG="en">&quot;name&quot;:
&quot;Vingt mille lieues sous les mers&quot;,</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">}</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">}</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">От</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">{</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">&quot;books&quot;:
{</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">        <FONT FACE="Courier New, serif"><SPAN LANG="en">&quot;1&quot;:
{</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">            <FONT FACE="Courier New, serif"><SPAN LANG="en">&quot;name&quot;:
&quot;Tom Sawyer and Huckleberry Finn&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">        <FONT FACE="Courier New, serif"><SPAN LANG="en">},</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">        <FONT FACE="Courier New, serif"><SPAN LANG="en">&quot;2&quot;:
{</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">            <FONT FACE="Courier New, serif"><SPAN LANG="en">&quot;name&quot;:
&quot;Vingt mille lieues sous les mers&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">        <FONT FACE="Courier New, serif"><SPAN LANG="en">}</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">}</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">}</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">В
какой из структур данных выше поиск
книги константный O(1), а в какой линейный
O(N)? Каким образом предпочтительнее
объявить структуру? Какое количество
хешей и массивов используется в каждом
из примеров? Как добавить книгу в каждом
из случаев?</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.28in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_xirj2udqr88x"></A>
<FONT FACE="Arial, serif"><FONT SIZE=5 STYLE="font-size: 20pt"><SPAN LANG="en">Введение
в ООП </SPAN></FONT></FONT>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Существует
мнение, что Объектно-Ориентированное
Программирование (ООП) является чем-то
сложным, загадочным и недостижимым. Но
на самом деле это довольно просто, если
мы говорим о тех вещах, с которыми вам
придется сталкиваться ежедневно.
Правильное ООП может сильно облегчить
жизнь программиста и проекта, но требует
намного больше brain power, чем обычное ООП,
которое повсеместно используется.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">В
этой книге мы рассмотрим обычное ООП
для начинающих. Если вам интересна тема
правильного ООП, мы рекомендуем прочитать
книгу “Elegant Objects” Егора Бугаенко. </SPAN></FONT>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_ubn68hmt0yqa"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt"><SPAN LANG="en">Классы
и объекты</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Само
название “Объектно-ориентированное
программирование” подразумевает, что
где-то должен быть объект. Что же такое
объект? Из обычной жизни мы знаем, что
все вокруг объекты. Например, книга на
столе. Человек, идущий по улице. Автомобиль
BMW E34, который едет по дороге. Но если
присмотреться, то автомобиль BMW E34 - это
определенный </SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>класс</I></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">
объектов. Среди всего множества
автомобилей, автомобили этой модели
точно такие же, абсолютно одинаковые.
Но все-таки это разные экземпляры. </SPAN></FONT>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Самый
простейший пример класса это чертеж,
который все чертили в школе:</SPAN></FONT></P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><IMG SRC="2eaec5a5667bec5b244b5f4a53e23318_html_604002.png" NAME="image31.png" ALIGN=BOTTOM HSPACE=12 VSPACE=12 WIDTH=624 HEIGHT=413 BORDER=0><FONT FACE="Arial, serif"><SPAN LANG="en"><I>Рис.
Пример чертежа. Источник:
</I></SPAN></FONT><A HREF="https://ru.wikipedia.org/wiki/%D0%A7%D0%B5%D1%80%D1%82%D1%91%D0%B6"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><I><U>https://ru.wikipedia.org/wiki/Чертёж</U></I></SPAN></FONT></FONT></A></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">На
чертеже изображается какая-либо деталь,
ее размеры, различные параметры: ширина,
высота и т.д. Класс это примерно то же
самое, что чертеж, рисунок или шаблон
какой-то детали. Сам по себе этот шаблон
в принципе бесполезен. Зачем нужны
шаблоны? Шаблоны нужны для того, чтобы
по ним что-то можно было сделать. Т.е. мы
посмотрели на чертеж и уже на основе
чертежа мы можем создать какую-то деталь.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Объект
- как раз и есть эта деталь, которая
создается на основе шаблона, или класса.
У объекта есть также второе имя -
“экземпляр” (instance) или “экземпляр
класса” (class instance).</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Классы
и объекты в программировании это почти
то же самое, что классы и объекты в жизни.
Шаблон один, объектов много. По одному
чертежу можно создать сколько угодно
деталей:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><SPAN STYLE="background: #ffff00">TODO:</SPAN></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">
сделать 3D модель детали вверху и
нарисовать несколько деталей</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Также
и класс - один, объектов много. Мы можем
объявить один класс и создать на его
основе множество объектов:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">class
Car</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">car1
= Car.new</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">car2
= Car.new</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">car3
= Car.new</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Все
эти объекты будут храниться в памяти
компьютера. Вот в общем-то и все объяснение,
теперь вы знаете что такое классы и что
такое объекты.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_f5pji7cc3p88"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt"><SPAN LANG="en">Состояние</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Состояние
(state) - важное понятие в объектно-ориентированном
языке. Руби это объектно-ориентированный
язык. Другие примеры объектно-ориентированных
языков: Java, C#, JavaScript. Существуют также
другие, частично объектно-ориентированные
языки (Golang -
</SPAN></FONT><A HREF="https://golang.org/doc/faq#Is_Go_an_object-oriented_language"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https://golang.org/doc/faq#Is_Go_an_object-oriented_language</U></SPAN></FONT></FONT></A><FONT FACE="Arial, serif"><SPAN LANG="en">),
т.н. функциональные языки программирования
(Erlang/Elixir, Haskell) и пр.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Основное
отличие объектно-ориентированного
языка от не-объектно-ориентированного
в том, что в объектно-ориентированном
языке есть такое понятие как </SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>состояние</I></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">
объекта. Что же такое состояние?</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Обратимся
к нашему примеру с автомобилем BMW модели
E34. Итак, где-то на заводе в Германии
существует чертеж этого автомобиля,
именно этой модели. По этому чертежу
фабрикой было выпущено множество
экземпляров автомобиля. Но автомобиль
собран из отдельных деталей:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Двигатель</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Лобовое
	стекло</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Кузов</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Двери</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Колеса,
	и т.д.</SPAN></FONT></P>
</UL>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Все
эти объекты бездушные, не живые, и не
представляют никакой ценности. Кто в
своем уме купит колесо от автомобиля
просто ради того, чтобы принести его
домой? В этом нет никакого смысла. Но
будучи собранным, автомобиль превращается
в </SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>живой
организм</I></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">,
в объект, у него появляется </SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>состояние</I></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Несмотря
на то, что все выпущенные машины на
заводе за много лет были одинаковыми,
у всех у них на данный момент сейчас
совершенно разное состояние. Состояние
отличает один конкретный автомобиль
от множества точно таких же. В чем же
выражается это состояние?</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Во-первых,
пробег. Автомобиль довольно сложный
механизм, и вряд ли у двух автомобилей
существует одинаковый пробег с точностью
до метра. Во-вторых, это может быть любой
другой параметр: например, бензин в
баке. Количество бензина в баке отражает
состояние конкретного объекта “автомобиль
BMW марки E34”. Мы знаем, что количество
бензина меняется: мы можем приехать на
заправку и изменить состояние этого
объекта, долив бензина. В-третьих, включен
автомобиль или выключен - это тоже
состояние.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Другими
словами, в объектно-ориентированном
языке объект - это живой механизм, у
которого есть состояние. Это состояние
каким-то образом можно менять. Это можно
делать извне, а можно делать и изнутри.
Если мы подходим к автомобилю и открываем
дверь, то мы меняем объект извне. А если
заводим его, находясь в автомобиле - то
меняем состояние изнутри. Автомобиль
сам может менять свое состояние. Например,
когда двигатель нагревается до
определенной температуры, включается
принудительное охлаждение.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Попробуем
написать программу, которая продемонстрирует
вышесказанное:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">class
Car</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
initialize</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">@state
= :closed</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
open</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">@state
= :open</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
how_are_you</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">puts
&quot;My state is #{@state}&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">car1
= Car.new</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">car1.how_are_you</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">car2
= Car.new</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">car2.open</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">car2.how_are_you</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">Результат
работы программы:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">My
state is closed</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">My
state is open</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Мы
создали класс “Car” - начертили “чертеж”
автомобиля с помощью языка руби. Далее
мы создали объект (экземпляр) с помощью
конструкции “Car.new” и присвоили переменной
“car1” </SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>ссылку</I></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">
на этот объект. Важно отметить, что
переменная car1 не “содержит” сам объект,
это просто ссылка на область памяти где
на самом деле этот объект хранится.
Можно вспомнить аналогию с подъездом.
Звонок - это ссылка на квартиру. Также
и тут: переменная - это ссылка на объект.
Мы можем иметь любое количество
переменных, указывающих на один и тот
же объект. Захотим и присвоим переменной
car777 значение car1:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">car777
= car1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Далее
в нашей программе мы спрашиваем у объекта
- “how are you”, на что объект сообщает о
своем состоянии. Первый объект сообщил,
что “My state is closed” (мое состояние -
закрыто), но почему это произошло? Дело
в том, что мы объявили метод initialize:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
initialize</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">@state
= :closed</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Этот
метод всегда вызывается при создании
нового объекта. Другими словами, когда
вы пишите `Car.new`, будет вызван метод
`initialize`. Непонятно почему в языке руби
выбрали такое длинное слово в котором
легко сделать ошибку. Согласитесь, что
гораздо проще выглядел бы такой код:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">class
Car</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
new</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">#
...</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">Car.new</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```
</SPAN></FONT>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Но
к сожалению приходится использовать
длинное слово “initialize”. Кстати, этот
метод называется “конструктор”, и в
языке JavaScript версии ES6 и выше он именуется
именно так:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">class
Car {</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">constructor()
{</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">   
<FONT FACE="Courier New, serif"><SPAN LANG="en">console.log('hello
from constructor!');</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">}</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">}</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">let
car1 = new Car();</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Если
запустить программу выше (например, `$
node` и вставить текст), то мы увидим
сообщение “hello from constructor!”. Т.е. метод
был вызван при создании объекта. Тот же
самый код в руби выглядит следующим
образом:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">class
Car</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
initialize</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">puts
'hello from constructor!'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">car1
= Car.new</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Это
один из не самых очевидных моментов в
языке Ruby - пишем “new”, а вызывается
“initialize”.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Для
чего существует конструктор? Для того,
чтобы определить начальное состояние
объекта. Скажем, при выпуске автомобиля
мы хотим чтобы: двери автомобиля были
закрыты, окна были закрыты, капот и
багажник были закрыты, все выключатели
были переведены в положение “Выключено”
и т.д.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Вы,
наверное, обратили внимание, что мы
использовали знак “@” (читается как
“at”) перед переменной “state” в
конструкторе. Этот знак говорит о том,
что это будет “instance variable” - переменная
экземпляра. Мы как-то говорили об этом
в предыдущих главах. Но вообще, существует
три типа переменных:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><B>Локальные
переменные</B></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">.
Это переменные, объявленные в каком-то
методе. Эти переменные недоступны из
других методов. Если вы напишите вот
такой код, то программа выдаст ошибку,
потому что переменная “aaa” не определена
в методе “m2”:<BR><BR>```<BR></SPAN></FONT><FONT FACE="Courier New, serif"><SPAN LANG="en">class
Foo</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
m1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">aaa
= 123</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">puts
aaa</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
m2</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">puts
aaa</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">foo
= Foo.new</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">foo.m1
# сработает, будет выведено 123</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">foo.m2
# будет ошибка, переменная не определена</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><B>Instance
variables</B></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">
- переменные экземпляра класса. К ним
можно обращаться только через “@”:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">class
Foo</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
initialize</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">@aaa
= 123</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
m1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">puts
@aaa</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
m2</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">puts
@aaa</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">foo
= Foo.new</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">foo.m1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">foo.m2</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Эти
переменные определяют состояние объекта.
Желательно объявлять instance variables в
конструкторе, чтобы показать намерение:
вот эта переменная будет отвечать за
состояние, мы будем ее использовать.
Однако, не будет синтаксической ошибки
если вы объявите instance variable в каком-то
методе. Просто этот метод должен быть
вызван прежде, чем какой-либо другой
метод обратится к этой переменной (а
конструктор вызывается всегда при
создании объекта). Объявляем переменную
в методе “m1” и используем ее в методе
“m2”:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">class
Foo</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
m1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">@aaa
= 123</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">puts
@aaa</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
m2</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">puts
@aaa</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">foo
= Foo.new</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">foo.m1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">foo.m2</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Результат
работы программы:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">123</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">123</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Если
в программе выше поменять две последние
строки местами, то фактического сообщения
об ошибке не будет, программа сработает,
но на экран будет выведена только одна
строка:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">123</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Руби
попытается вызвать метод “m2”, т.к.
переменная экземпляра класса не
объявлена, то ее значение будет равно
по-умолчанию nil, а `puts nil` не выводит на
экран строку. В этом заключается первая
любопытная особенность instance variable - если
эта переменная не объявлена, то ее
значение по-умолчанию равно nil. Если
локальная переменная не объявлена, то
будет ошибка исполнения программы.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><B>Class
variables</B></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">
- переменные класса, переменные шаблона,
иногда называются статическими
переменными. Совершенно бесполезный
тип переменных с префиксом “@@”. Смысл
в том, что какое-то значение можно будет
менять между всеми экземплярами класса.
На практике это встречается довольно
редко. </SPAN></FONT>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Можно
выделить еще два типа переменных:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Глобальные
	переменные (с префиксом `$`) - обратиться
	к этим переменным можно из любого места
	программы. Однако, из-за этой особенности
	возникает большой соблазн их использовать,
	что только приводит к запутанности
	программы.</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Специальные
	переменные. Например, переменная `ARGV`
	содержит аргументы, переданные в
	программу. А переменная `ENV` содержит
	параметры окружения (environment) - т.е.
	параметры, которые заданы в вашей
	оболочке (shell).</SPAN></FONT></P>
</UL>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Другими
словами, для создания программ в общем
случае необходимо усвоить разницу между
локальными переменными и instance variables
(переменными экземпляра класса, которые
определяют состояние объекта).</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">А
теперь вопрос. Что делает следующая
программа?</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts
aaa</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Кто-то
скажет “выводит переменную `aaa` на
экран”. И будет прав, ведь можно записать
программу полностью следующим образом:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">aaa
= 123</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts
aaa</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```
</SPAN></FONT>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Но
что если мы запишем программу иначе:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">def
aaa</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">rand(1..9)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts
aaa</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Программа
будет выводить случайное значение (в
пределах от 1 до 9). Другими словами, мы
не можем точно сказать что именно
означает `puts aaa`, мы только знаем, что
`aaa` - это или переменная, или метод, или
что-то еще. Про “что-то еще” мы поговорим
подробнее в следующих главах, когда
будем говорить о специальном методе
“method_missing” (“метод отсутствует”). </SPAN></FONT>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">А
пока наш класс выглядит следующим
образом:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><IMG SRC="2eaec5a5667bec5b244b5f4a53e23318_html_d75ba0dd.png" NAME="image6.png" ALIGN=BOTTOM HSPACE=12 VSPACE=12 WIDTH=177 HEIGHT=150 BORDER=0></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Из
картинки видно, что полезных методов
только два (два красных круга внизу и
один конструктор). Т.е. снаружи мы можем
только открыть дверь и попросить
рассказать о своем состоянии (или создать
объект с помощью конструктора). Состояние
хранится в instance variable, и по-умолчанию мы
никак не можем обратиться непосредственно
к этой переменной снаружи. Состояние
может быть каким угодно, мы можем завести
10 переменных, и внутри объекта реализовать
любую сложную логику, но </SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>интерфейс
взаимодействия</I></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">
(API, или сигнатуры методов) остается
прежним.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Если
продолжить аналогию с реальным
автомобилем, то внутри класса мы, может
быть, захотим играть музыку. Но до тех
пор, пока мы не реализовали это в API
нашего объекта, о внутреннем состоянии
никто не узнает - играет музыка внутри
автомобиля или нет. Это называется
</SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>инкапсуляция</I></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Но,
допустим, вы ехали по улице и решили
подвезти прекрасную девушку. Вы
остановились, но девушка такая скромная,
что не будет сама открывать дверь. Она
бы и рада зайти к вам в машину, но хочет
видеть, что дверь открыта. Она хочет
прочитать состояние нашего объекта и
не хочет говорить “how are you” первому
встречному. Другими словами, мы хотим
всем разрешить читать состояние объекта.
Что делать в этом случае?</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Самый
простой способ - добавить метод с любым
названием, который будет возвращать
состояние. Мы могли бы добавить метод
“aaa”, но давайте назовем его “state”. Код
класса полностью:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">class
Car</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
initialize</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">@state
= :closed</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">#
новый метод</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
state</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">@state</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
open</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">@state
= :open</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
how_are_you</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">puts
&quot;My state is #{@state}&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Получился
следующий класс:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><IMG SRC="2eaec5a5667bec5b244b5f4a53e23318_html_3783925b.png" NAME="image20.png" ALIGN=BOTTOM HSPACE=12 VSPACE=12 WIDTH=202 HEIGHT=202 BORDER=0></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Т.е.
само состояние “@state” недоступно, но
есть вариант его прочитать с помощью
метода “state”. Название состояния и
методы похожи и состоят из одного слова,
но это для руби это две разные вещи. Мы
могли бы назвать метод “aaa”, в этом бы
не было ошибки. Отлично, теперь девушка
видит, что машина открыта, она может
прочитать состояние с помощью метода
“state”.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Но
вот незадача - снаружи увидеть состояние
можно (метод “state”), снаружи можно
открыть дверь (“open”), но изменить
состояние можно только изнутри. Что в
общем-то и нормально -- может быть не
потребуется интерфейса для закрытия
двери снаружи. Но что если потребуется?
Задача программиста - подумать о
бизнес-логике, о том, как будет
использоваться тот или иной компонент.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Если
мы точно знаем, что понравимся девушке,
то интерфейс закрытия двери снаружи
можно не реализовывать. А что если мы
захотим закрывать дверь снаружи?
Согласитесь, для автомобиля это полезная
функциональность. Мы бы могли написать
метод close:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">def
close</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">@state
= :closed</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">И
проблема была бы решена. Вот один из
конечных вариантов класса:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><IMG SRC="2eaec5a5667bec5b244b5f4a53e23318_html_1dfbb976.png" NAME="image14.png" ALIGN=BOTTOM HSPACE=12 VSPACE=12 WIDTH=200 HEIGHT=228 BORDER=0></P>
<P LANG="en" ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%">
<BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Но
что если мы, например, захотим завести
автомобиль? Во-первых, наше состояние
могло бы быть совокупностью описаний:
open, closed, engine_on, engine_off (можно было бы
представить его в виде массива). А
во-вторых, пришлось бы добавлять еще
два метода: on, off. В этом случае к четырем
публичным методам прибавилось бы еще
два. Получается довольно сложный класс.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Иногда
полезно просто оставить возможность
управления состоянием извне: делай что
хочешь, открывай двери, заводи двигатель,
включай музыку. Как вы понимаете, это
не всегда приводит к хорошим последствиям,
но вполне практикуется.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Для
того, чтобы разрешить полное управление
переменной экземпляра класса (в нашем
случае “@state”), можно написать следующий
код:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">attr_reader
:state</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">attr_writer
:state</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```
</SPAN></FONT>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Этот
код просто создает в классе два метода,
для чтения переменной и для ее записи:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">def
state</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">@state</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">def
state=(value)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">@state
= value</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Первый
метод нам уже знаком - мы его создали
для возврата состояния. Второй метод
по сути уже содержит в себе знак равно
и используется для присваивания. Но
attr_reader и attr_writer можно заменить на
всего-лишь одну строку:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">attr_accessor
:state</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">(Не
путайте “attr_accessor” и “attr_accessible”, которое
используется во фреймворке Rails, это
разные понятия, но слова выглядят
одинаково).</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Весь
наш класс можно свести к такому простому
коду:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">class
Car</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">attr_accessor
:state</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
initialize</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">@state
= :closed</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
how_are_you</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">puts
&quot;My state is #{@state}&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Пример
использования:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">car1
= Car.new</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">car1.state
= :open</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">car2
= Car.new</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">car2.state
= :broken</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">car1.how_are_you</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">car2.how_are_you</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Результат
работы программы:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">My
state is open</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">My
state is broken</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Визуальное
представление класса:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><IMG SRC="2eaec5a5667bec5b244b5f4a53e23318_html_2f608e39.png" NAME="image8.png" ALIGN=BOTTOM HSPACE=12 VSPACE=12 WIDTH=166 HEIGHT=115 BORDER=0></P>
<P LANG="en" ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%">
<BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><B>Задание:</B></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">
напишите класс Monkey (“обезьянка”). В
классе должно быть 1) реализовано два
метода: run, stop; 2) каждый из методов должен
менять состояние объекта; 3) you must expose
the state of an object так, чтобы можно было узнать
о состоянии класса снаружи, но нельзя
было его модифицировать (к сожалению,
точно перевести на русский язык выражение
“expose the state” не получилось. Посмотрите
перевод слова “expose” в словаре). Создайте
экземпляр класса Monkey, вызовите методы
объекта и проверьте работоспособность
программы.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><B>Задание:</B></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">
сделайте так, чтобы при инициализации
класса Monkey экземпляру присваивалось
случайное состояние. Создайте массив
из десяти обезьянок. Выведите состояние
всех элементов массива на экран.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Читайте
также:
</SPAN></FONT><A HREF="https://vk.com/@physics_math-skryvaite-sekrety-inkapsuliruite-detali-realizacii"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https://vk.com/@physics_math-skryvaite-sekrety-inkapsuliruite-detali-realizacii</U></SPAN></FONT></FONT></A><FONT FACE="Arial, serif"><SPAN LANG="en">
</SPAN></FONT>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_1ricdyu5cylv"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt"><SPAN LANG="en">Состояние,
пример программы</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Вроде
бы более или менее что такое состояние
понятно. Но как оно используется на
практике? В чем его преимущество? Зачем
держать состояние внутри объекта и
зачем нужна инкапсуляция?</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Как
уже было замечено выше, объект это живой
организм. На практике оказалось полезным
не заводить несколько переменных с
разными именами, а инкапсулировать их
под одной крышей. Представим, что у нас
есть робот, который движется по земле,
а мы на него смотрим сверху вниз. Робот
начинает движение в какой-то точке и
может ходить вверх, вниз, влево и вправо
произвольное количество шагов.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Кажется,
что мы могли бы обойтись и без класса.
Завели бы две переменных: x, y. Если робот
ходит вправо, к переменной “x” прибавляется
единица. Если вверх, то к переменной “y”
прибавляется единица. Не нужны никакие
объекты и классы. Все это так, но сложность
возникает когда нужно создать двух
роботов.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Что
получается? Нужно завести 4 переменные,
по 2 на каждого робота. Первую пару мы
назовем “x1” и “y1”, вторую “x2” и “y2”.
Уже неудобно, но можно и обойтись. Но
что если роботов будет больше? “Можно
обойтись массивом”, - скажет читатель
и будет прав. Можно создать массив
переменных. Это просто будет какая-то
структура данных, и какие-то методы
будут знать как с ней работать. Но
постойте, работать со структурой данных
сложнее, чем просто с переменными!</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Намного
проще написать `x = x + 1`, чем например
`x[5] = x[5] + 1`. Другими словами, объекты и
классы облегчают создание программы.
Давайте создадим описанный класс робота:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">class
Robot</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">attr_accessor
:x, :y</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
initialize</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">@x
= 0</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">@y
= 0</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
right</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">self.x
+= 1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
left</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">self.x
-= 1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
up</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">self.y
+= 1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
down</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">self.y
-= 1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">robot1
= Robot.new</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">robot1.up</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">robot1.up</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">robot1.up</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">robot1.right</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts
&quot;x = #{robot1.x}, y = #{robot1.y}&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```
</SPAN></FONT>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Во-первых
обратите внимание на альтернативный
синтаксис обращения к переменной
экземпляра (instance variable) - через `self.` вместо
`@`. Если не указать `self.` или `@`, то руби
подумает, что мы хотим объявить локальную
переменную в методе (даже если похожая
переменная или accessor-метод уже существует).</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">А
во-вторых, попробуйте догадаться что
выведет на экран программа? Правильный
ответ:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">x
= 1, y = 3</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Робот
сделал 4 шага и его координаты равны 1
по “x” и 3 по “y”.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Для
того, чтобы создать 10 таких роботов, мы
просто создаем массив:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr
= Array.new(10) { Robot.new }</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">А
теперь применим трюк и для каждого
робота из массива вызовем случайный
метод:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr.each
do |robot|</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">m
= [:right, :left, :up, :down].sample</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">robot.send(m)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Трюк
заключается в двух строках внутри блока.
Первая строка выбирает случайный символ
из массива и присваивает его переменной
m. Вторая строка “отправляет сообщение”
объекту - это просто такой способ вызвать
метод (в руби могли бы назвать этот метод
более понятным словом: “call” вместо
“send”).</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Другими
словами, выше мы не только создали
объекты определенного рода, но и смогли
относительно легко произвести
взаимодействие с целой группой объектов.
Согласитесь, это намного проще, чем
взаимодействовать с объектами по-одиночке.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Ради
наглядного эксперимента “вообразим”
на экране компьютера плоскость размером
60 на 25 и поставим каждого робота в
середину. Каждую секунду будем проходить
по массиву роботов, менять их положение
случайным образом и перерисовывать
нашу плоскость, отображая роботов
звездочкой. Посмотрим, как роботы будут
расползаться по экрану в случайном
порядке.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Ниже
приведен код такой программы с
комментариями.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">#
Класс робота</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">class
Robot</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">#
Акцессоры - чтобы можно было узнать
координаты снаружи</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">attr_accessor
:x, :y</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">#
Конструктор, принимает хеш. Если не
задан - будет пустой хеш.</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">#
В хеше мы ожидаем два параметра - начальные
координаты робота,</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">#
если не заданы, будут по-умолчанию равны
нулю.</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
initialize(options={})</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">@x
= options[:x] || 0</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">@y
= options[:y] || 0</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
right</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">self.x
+= 1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
left</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">self.x
-= 1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
up</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">self.y
+= 1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
down</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">self.y
-= 1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">#
Класс &quot;Командир&quot;, который будет
командовать и двигать роботов</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">class
Commander</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">#
Дать команду на движение робота. Метод
принимает объект</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">#
и посылает (send) ему случайную команду.</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
move(who)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">m
= [:right, :left, :up, :down].sample</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">who.send(m)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">#
Создать объект командира,</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">#
командир в этом варианте программы
будет один</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">commander
= Commander.new</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">#
Массив из 10 роботов</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">arr
= Array.new(10) { Robot.new }</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">#
В бесконечном цикле (для остановки
программы нажмите ^C)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">loop
do</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">#
Хитрый способ очистить экран</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">puts
&quot;\e[H\e[2J&quot;</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">#
Рисуем воображаемую сетку. Сетка
начинается от -30 до 30 по X,</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">#
и от 12 до -12 по Y</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">(12).downto(-12)
do |y|</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">(-30).upto(30)
do |x|</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">      <FONT FACE="Courier New, serif"><SPAN LANG="en">#
Проверяем, есть ли у нас в массиве робот
с координатами x и y</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">      <FONT FACE="Courier New, serif"><SPAN LANG="en">found
= arr.any? { |robot| robot.x == x &amp;&amp; robot.y == y }</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">      <FONT FACE="Courier New, serif"><SPAN LANG="en">#
Если найден, рисуем звездочку, иначе
точку</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">      <FONT FACE="Courier New, serif"><SPAN LANG="en">if
found</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">        <FONT FACE="Courier New, serif"><SPAN LANG="en">print
'*'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">      <FONT FACE="Courier New, serif"><SPAN LANG="en">else</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">        <FONT FACE="Courier New, serif"><SPAN LANG="en">print
'.'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">      <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">#
Просто переводим строку:</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">puts</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">#
Каждого робота двигаем в случайном
направлении</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">arr.each
do |robot|</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">   
<FONT FACE="Courier New, serif"><SPAN LANG="en">commander.move(robot)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">#
Задержка в полсекунды</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">sleep
0.5</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Результат
работы программы после нескольких
итераций:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">.............................................................</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">.............................................................</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">.............................................................</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">.............................*...............................</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">.............................................................</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">...........................*.......*.........................</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">.............................................................</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">...........................*.................................</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">............................*................................</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">...............................*.*...........................</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">............................*................................</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">.............................................................</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">.............................................................</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">.............................................................</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">........................*.......*............................</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">.............................................................</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">.............................................................</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">.............................................................</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">.............................................................</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Демо:
</SPAN></FONT><A HREF="https://asciinema.org/a/jMB47AhjBnxgMofSgIVzHObIH"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https://asciinema.org/a/jMB47AhjBnxgMofSgIVzHObIH</U></SPAN></FONT></FONT></A></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><B>Задание:</B></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">
пусть метод initialize принимает опцию -
номер робота. Сделайте так, чтобы номер
робота был еще одним параметром, который
будет определять его состояние (также
как и координаты). Измените методы up и
down - если номер робота четный, эти методы
не должны производить операции над
координатами. Измените методы left и right
- если номер робота нечетный, эти методы
также не должны производить никаких
операций над координатами. Попробуйте
догадаться, что будет на экране при
запуске программы.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_3y41rm23spo3"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt"><SPAN LANG="en">Полиморфизм
и duck typing</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">В
объектно-ориентированном программировании
много замысловатых понятий и определений.
Однако, не все зарабатывающие программисты
могут точно сказать что же такое
полиморфизм и что такое duck typing. Происходит
это потому, что некоторые принципы с
легкостью усваиваются на практике, и
часто откровение приходит потом: “ах
вот что такое полиморфизм!”. </SPAN></FONT>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Давайте
заглянем в словарь, чтобы разобраться
с этимологией самого загадочного слова
- “полиморфизм”. Что это означает? Сайт
wiktionary подсказывает: “возможность
существования чего-либо в различных
формах”, биологическое: “наличие в
пределах одного вида резко отличных по
облику особей, не имеющих переходных
форм”. Другими словами, что-то похожее,
но “резко отличное”. Ничего себе!</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Если
рассматривать полиморфизм в
программировании, то его можно
проиллюстрировать известной шуткой.
Брутальный байкер в кожаной куртке,
весь в цепях с огромной злой собакой
вызывает лифт, открываются двери - в
лифте дедушка и бабушка божий одуванчик.
Байкер заходит в лифт и командует громким
голосом: “сидеть!”. Садятся трое: собака,
бабушка и дедушка.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">См.
также отрывок видео из “Полицейской
академии”: </SPAN></FONT><A HREF="https://www.youtube.com/watch?v=GLc9n3MV9ZE"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https://www.youtube.com/watch?v=GLc9n3MV9ZE</U></SPAN></FONT></FONT></A></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Что
же произошло? Программист бы сказал,
что у всех объектов одинаковый интерфейс.
Объекты разные, но все объекты восприняли
команду, которую отправил байкер:
`obj.send(:sit)` и не выдали ошибки.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Для
того, чтобы сделать подобное в
статически-типизированных языках,
необходимо на самом деле объявить
интерфейс. Пример программы на C#:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">interface
IListener {</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">void
Sit();</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">}</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">class
Dog : IListener {</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">public
void Sit() {</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">        <FONT FACE="Courier New, serif"><SPAN LANG="en">//
...</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">}</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">}</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">class
Human : IListener {</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">public
void Sit() {</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">        <FONT FACE="Courier New, serif"><SPAN LANG="en">//
...</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">}</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">}</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Мы
объявили интерфейс “слушатель”. И
собака с человеком реализуют этот
интерфейс каким-то образом. Другими
словами, мы можем приказать собаке
сидеть: `dog.Sit()` и приказать сидеть
человеку: `human.Sit()`. Только в случае наличия
интерфейса программа на C# будет работать.
Точнее, байкер сможет обратиться к
произвольному объекту зная только его
интерфейс и не зная точно к кому именно
он обращается (который называется
“слушатель”, “listener”).</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Но
в языке руби интерфейсов нет. Это язык
с динамической типизацией, и вместо
интерфейсов в руби есть duck typing (что
переводится как “утиная типизация” -
но так редко кто говорит, говорят в
основном по-английски). Duck typing сводится
к следующему простому принципу:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><I>If
it </I></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I><B>walks</B></I></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>
like a duck, and it </I></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I><B>quacks</B></I></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>
like a duck, then it has to be a duck.</I></SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><I>(Перевод:
если что-то </I></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I><B>ходит</B></I></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>
как утка и </I></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I><B>квакает</B></I></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>
как утка, то это должно быть утка)</I></SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Но
какой же в этом смысл? А смысл в следующем.
Если есть какие-либо классы, у которых
есть одинаковые методы, то с точки зрения
потребителя это одинаковые классы.
Другими словами, с точки зрения байкера
в шутке выше человек и собака это одно
и тоже, потому что объекты реализуют
одинаковый интерфейс с одним методом
</SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><B>sit</B></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">.
Сама утка может быть реализована
следующим образом:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">class
Duck</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
walk</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
quack</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Если
мы реализуем два этих метода в собаке,
то с точки зрения командира уток это
будет утка. Командир будет приказывать
собаке квакать и она будет квакать. Так
работают динамически типизированные
языки (руби, JavaScript, python и т.д.). Пример
программы:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">#
Утка</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">class
Duck</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
walk</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
quack</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">#
Собака</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">class
Dog</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
walk</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
quack</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">#
Утиный командир, который дает команды</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">class
DuckCommander</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
command(who)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">who.walk</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">who.quack</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">#
Создадим утку и собаку</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">duck
= Duck.new</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">dog
= Dog.new</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">#
Покажем, что утиный командир может
командовать собакой</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">#
и уткой, и при этом не возникнет никакой
ошибки</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">dc
= DuckCommander.new</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">dc.command(duck)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">dc.command(dog)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">--
Но зачем это все? -- спросит читатель --
Это все сложно, какое этому может быть
применение в реальной жизни? </SPAN></FONT>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">На
самом деле это облегчает программы.
Попробуем добавить в нашу программу с
десятью роботами еще один класс - собаку.
И представим, что собаке надо пройти из
левого верхнего угла в нижний правый и
не столкнуться с роботами. Если робот
поймал собаку - игра окончена.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">С
чего начать? Во-первых, собака должна
быть как-то иначе отображена на экране.
Робот это звездочка. Пусть у собаки
будет символ “@”. Вспомним “интерфейс”
робота (а точнее duck typing), какие в нем
реализованы методы? Up, down, left, right, x, y. Это
подходит и для собаки. Чтобы различать
робота и собаку, добавим еще один метод,
`label`:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">class
Robot</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">#
...</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
label</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">'*'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">class
Dog</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">#
...</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
label</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">'@'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">В
итоге у нас получилось два “совершенно
одинаковых” класса и в то же время
разных. Помните что такое полиморфизм?
“Возможность существования чего-либо
в различных формах”. Одинаковы классы
тем, что они реализуют единый интерфейс,
они одинаковы с точки зрения потребителя
этих классов. Разные они в том плане,
что называются они по-разному и содержат
разную реализацию. Робот может ходить
во все стороны и выглядит как звездочка.
Собака может ходить только слева направо
и сверху вниз (см.код ниже), и выглядит
как ‘@’.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Давайте
немного изменим программу, которую мы
уже писали выше и посмотрим что такое
полиморфизм на практике.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
Класс робота</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">class
Robot</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
Акцессоры - чтобы можно было узнать
координаты снаружи</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">attr_accessor
:x, :y</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
Конструктор, принимает хеш. Если не
задан - будет пустой хеш.</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
В хеше мы ожидаем два параметра - начальные
координаты робота,</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
если не заданы, будут по-умолчанию равны
нулю.</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">def
initialize(options={})</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">@x
= options[:x] || 0</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">@y
= options[:y] || 0</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">end</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">def
right</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">self.x
+= 1</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">end</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">def
left</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">self.x
-= 1</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">end</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">def
up</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">self.y
+= 1</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">end</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">def
down</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">self.y
-= 1</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">end</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
Новый метод - как отображать робота на
экране</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">def
label</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">'*'</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">end</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">end</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
Класс собаки, тот же самый интерфейс,
но некоторые методы пустые.</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">class
Dog</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
Акцессоры - чтобы можно было узнать
координаты снаружи</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">attr_accessor
:x, :y</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
Конструктор, принимает хеш. Если не
задан - будет пустой хеш.</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
В хеше мы ожидаем два параметра - начальные
координаты собаки,</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
если не заданы, будут по-умолчанию равны
нулю.</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">def
initialize(options={})</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">@x
= options[:x] || 0</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">@y
= options[:y] || 0</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">end</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">def
right</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">self.x
+= 1</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">end</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
Пустой метод, но он существует. Когда
вызывается,</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
ничего не делает.</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">def
left</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">end</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
Тоже пустой метод.</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">def
up</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">end</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">def
down</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">self.y
-= 1</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">end</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
Как отображаем собаку.</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">def
label</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">'@'</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">end</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">end</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
Класс &quot;Командир&quot;, который будет
командовать, и двигать роботов</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
и собаку. ЭТОТ КЛАСС ТОЧНО ТАКОЙ ЖЕ, КАК
В ПРЕДЫДУЩЕМ ПРИМЕРЕ.</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">class
Commander</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
Дать команду на движение объекта. Метод
принимает объект</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
и посылает (send) ему случайную команду.</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">def
move(who)</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">m
= [:right, :left, :up, :down].sample</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
Вот он, полиморфизм! Посылаем команду,
но не знаем кому!</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">who.send(m)</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">end</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">end</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
Создать объект командира,</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
командир в этом варианте программы
будет один.</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">commander
= Commander.new</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
Массив из 10 роботов и...</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">arr
= Array.new(10) { Robot.new }</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
...и одной собаки. Т.к. собака реализует
точно такой же интерфейс,</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
все объекты в массиве &quot;как будто&quot;
одного типа.</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">arr.push(Dog.new(x:
-12, y: 12))</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
В бесконечном цикле (для остановки
программы нажмите ^C)</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">loop
do</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
Хитрый способ очистить экран</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">puts
&quot;\e[H\e[2J&quot;</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
Рисуем воображаемую сетку. Сетка
начинается от -12 до 12 по X,</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
и от 12 до -12 по Y</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">(12).downto(-12)
do |y|</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">(-12).upto(12)
do |x|</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">      <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
Проверяем, есть ли у нас в массиве кто-то
с координатами x и y.</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">      <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
Заменили &quot;any?&quot; на &quot;find&quot; и записали
результат в переменную</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">      <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">somebody
= arr.find { |somebody| somebody.x == x &amp;&amp; somebody.y == y }</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">      <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
Если кто-то найден, рисуем label. Иначе
точку.</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">      <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">if
somebody</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">        <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
ВОТ ОН, ПОЛИМОРФИЗМ!</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">        <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
Рисуем что-то, &quot;*&quot; или &quot;@&quot;, но
что это - мы не знаем!</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">        <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">print
somebody.label</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">      <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">else</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">        <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">print
'.'</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">      <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">end</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">end</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
Просто переводим строку:</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">puts</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">end</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
Проверка столкновения. Если есть два
объекта с одинаковыми</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
координатами и их &quot;label&quot; не равны,
то значит робот поймал собаку.</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">game_over
= arr.combination(2).any? do |a, b|</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">a.x
== b.x &amp;&amp; \</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">a.y
== b.y &amp;&amp; \</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">a.label
!= b.label</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">end</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">if
game_over</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">puts
'Game over'</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">exit</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">end</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
Каждого объекта двигаем в случайном
направлении</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">arr.each
do |somebody|</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
Вызываем метод move, все то же самое, что
и в предыдущем</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
варианте. Командир не знает кому он
отдает приказ.</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">   
<FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">commander.move(somebody)</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">end</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
Задержка в полсекунды</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">sleep
0.5</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">end</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Несколько
оговорок по поводу программы выше.
Во-первых, чтобы собака примерно ходила
по диагонали, размер поля был уменьшен
до 12х12. Во-вторых, класс Commander остался
точно таким же. Он не изменился, потому
что этот класс изначально подразумевал
duck typing - “если это ходит вверх, вниз,
влево, вправо, то мне не важно кто это,
робот или собака”. В-третьих, мы
использовали хитрый способ определения
столкновения. Он был честно найден в
Интернете по запросу “ruby any two elements of
array site:stackoverflow.com” -- часто программисту
нужно только уметь найти правильный
ответ!</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Результат
работы программы:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">.........................</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">.........*...............</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">.........................</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">...........*.............</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">........@................</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">...............*.*.......</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">........*.....*..........</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">.........................</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">............*............</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">...*.....................</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```
</SPAN></FONT>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Демо:
</SPAN></FONT><A HREF="https://asciinema.org/a/KsenHLiaRbTilZa081EhZSFXF"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https://asciinema.org/a/KsenHLiaRbTilZa081EhZSFXF</U></SPAN></FONT></FONT></A></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><B>Задание:</B></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">
удалите все комментарии в программе
выше. Способны ли вы разобраться в том,
что происходит?</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><B>Задание:</B></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">
добавьте на поле еще 3 собаки.</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><B>Задание:</B></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">
исправьте программу: если </SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>все</I></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">
собаки дошли до правого или нижнего
края поля, выводить на экран “Win!”</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_ogblxvc0tacp"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt"><SPAN LANG="en">Наследование</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><I>--
Что такое наследование?</I></SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><I>--
Быстрый способ разбогатеть!</I></SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Наследование
это третий кит, на котором стоит
объектно-ориентированное программирование
после инкапсуляции и полиморфизма. Но
в то же время, наследование - весьма
противоречивый концепт. Существует
множество мнений по этому поводу. Тем
не менее, сначала мы рассмотрим
возможность, которую нам предлагает
язык руби, а потом поговорим о том, почему
это плохо.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Давайте
представим, что на поле с роботами и
собаками мы захотели добавить еще одного
игрока, человека (класс “Human”). Всего в
игре получилось бы три типа: `Robot`, `Dog`,
`Human`. Что сделал бы начинающий
ООП-программист, знакомый с наследованием?
Он бы сделал следующий трюк.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Очевидно,
что есть методы `up`, `down`, `left`, `right` - которые
выполняют какие-то действия. Очевидно,
что есть методы `x`, `y` (переменные
экземпляра `@x` и `@y`, но `attr_accessor` добавляет
методы, которые называются getter и setter).
Есть метод label - который для каждого типа
разный. Методы `up`, `down`, `left`, `right` реализуют
какую-то функциональность, которая
почти всегда одинакова.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Другими
словами, есть что-то повторяющееся, а
есть что-то совершенно уникальное для
каждого объекта (label). Пока наши методы
`up`, `down`, `left`, `right` относительно простые
- всего 1 строка и мы по сути копируем
эти методы из объекта в объект:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">class
Robot</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
right</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">self.x
+= 1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
left</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">self.x
-= 1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
up</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">self.y
+= 1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
down</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">self.y
-= 1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">class
Dog</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">#
...</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
right</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">self.x
+= 1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
down</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">self.y
-= 1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">class
Human</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
right</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">self.x
+= 1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
left</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">self.x
-= 1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
up</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">self.y
+= 1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
down</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">self.y
-= 1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```
</SPAN></FONT>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Но
что если каждый из этих методов будет
по 10 строк или мы вдруг захотим что-нибудь
улучшить (например, добавить координату
“z”, чтобы получить трехмерное поле)?
Придется копировать этот код между
всеми классами. И если возникнет
какая-либо ошибка, придется исправлять
сразу в трех местах.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Поэтому
начинающий ООП-программист видит
повторяющуюся функциональность и
говорит: “ага! Вот это повторяется!
Почему бы нам не воспользоваться
наследованием? Есть робот, у которого
есть все нужные методы, так почему бы
не “переиспользовать” (reuse, share) уже
встречающуюся функциональность?”:</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">class
Robot</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">attr_accessor
:x, :y</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
initialize(options={})</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">@x
= options[:x] || 0</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">@y
= options[:y] || 0</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
right</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">self.x
+= 1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
left</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">self.x
-= 1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
up</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">self.y
+= 1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
down</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">self.y
-= 1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
label</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">'*'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">class
Dog &lt; Robot</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
up</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
left</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
label</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">'@'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">class
Human &lt; Robot</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
label</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">'H'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Мы
использовали символ “&lt;”, который
говорит о том, что Человек и Собака
являются классами, производными от
робота. Сам символ как бы подсказывает,
что вся функциональность из робота
“поступает” в человека и собаку: `class
Human &lt; Robot`, `class Dog &lt; Robot`. Говорят “класс
Human наследует функциональность класса
Robot”. </SPAN></FONT>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><IMG SRC="2eaec5a5667bec5b244b5f4a53e23318_html_80be26c4.png" NAME="image22.png" ALIGN=BOTTOM HSPACE=12 VSPACE=12 WIDTH=240 HEIGHT=442 BORDER=0></P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><I>Рис.
Отображение диаграммы классов в RubyMine</I></SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">После
того, как классы определены таким
образом, мы можем создавать экземпляры
класса обычным способом:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">robot
= Robot.new</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">human
= Human.new</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">dog
= Dog.new</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">В
классе `Human` все методы, за исключением
`label` являются реализацией из класса
`Robot`. Но если вы посмотрите на код и
диаграмму, то вы увидите, что в классе
`Dog`, помимо `label`, реализованы свои
собственные классы `up` и `left`. А все
остальное также берется из класса Robot.
 </SPAN></FONT>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Этот
подход кажется гениальным! Посудите
сами, класс `Dog` занимал 28 строк, а сейчас
занимает 11. Класс Human мог бы занимать 28
строк, а занимает всего 5. Просто потому
что мы воспользовались наследованием!
Если мы применим наследование к нашему
примеру программы, которую мы писали
ранее, то программа будет прекрасно
работать. Но, к сожалению, есть один
неприятный момент.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Этот
момент </SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>не</I></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">
технический. Другими словами, в техническом
плане все прекрасно. Представьте, что
к вам приходит коммерсант, который
просит написать программу. Вы пишите
программу, она работает и вы получаете
деньги. Коммерсант не заглядывает в
код, т.к. он не понимает, как этот код
работает. Достаточно результата на
экране.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Так
пишется большинство программ, ведь
деньги платит бизнес. А бизнесу важно,
чтобы работали бизнес-процессы. Чтобы
люди, например, развлекались глядя на
то, как четыре собаки хотят пересечь
поле с роботами (и, возможно, делали
ставки). Бизнесу важно, чтобы пользователи
вводили значения в поля и формы и на
выходе выдавался правильный конечный
результат. Бизнесу не важно что именно
происходит внутри и как именно работает
программа, работа программы - всегда
(или почти всегда) на совести программиста.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Но
с точки зрения профессиональной
разработки наша программа написана
неправильно. Неправильно, потому что
объектно-ориентированное программирование
очень просто использовать не по-назначению.
Это является ошибкой многих программистов,
и вообще есть мнение, что “наследование”
в объектно-ориентированном программировании
не должно существовать
(</SPAN></FONT><A HREF="https://www.yegor256.com/2016/09/13/inheritance-is-procedural.html"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https://www.yegor256.com/2016/09/13/inheritance-is-procedural.html</U></SPAN></FONT></FONT></A><FONT FACE="Arial, serif"><SPAN LANG="en">).</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Давайте
разберемся что же в нашей программе
неправильно. Если вкратце - то мы
позаимствовали функциональность робота,
но сделали это без уважения. Определение
наследования из Википедии:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><I>Наследование
— концепция согласно которой тип данных
может наследовать данные и функциональность
некоторого существующего типа, способствуя
повторному использованию компонентов
программного обеспечения.</I></SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Вроде
бы все правильно. Есть тип данных Human,
есть тип данных Dog. Есть существующий
тип Robot. Мы использовали наследование
и способствовали повторному использованию
кода, так в чем же дело? Для этого обратимся
к определению слова “Inherit” (наследовать)
в Оксфордском словаре:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><I>Derive
(a quality, characteristic, or predisposition) genetically from one's
parents or ancestors.</I></SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><I>Перевод:
Получать (качество, характеристику,
предрасположенность) генетически от
какого-либо родителя или предка.</I></SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Дело
в том, что у человека с роботом и у собаки
с роботом нет ничего общего. Они не могут
получить характеристики робота
генетически. То, что мы сделали - генная
инженерия, мы просто скопировали
функциональность и “притворились”,
что робот - это предок человека и собаки.
Такого ведь не бывает в реальном мире?
Более того, методы робота становятся
основной для двух остальных классов,
и, следовательно, при изменении робота
нам нужно думать о том, чтобы случайно
“не повредить” человека и собаку.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Робот
уже не живой организм. Вроде бы он
независимый и у него нет ничего общего
с человеком и собакой, но нам нужно
держать в голове мысль о том, что у робота
существует два потомка. И вся эта
сложность только из-за того, чтобы
избежать дублирования кода и сделать
нашу программу короче!</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Другими
словами, мы выбрали неправильную
абстракцию. Это самая часто встречающаяся
ошибка объектно-ориентированных
программистов. Конечно, ошибки делать
всегда хорошо, мы на них учимся. Но чтобы
увидеть ошибку в объектно-ориентированном
проектировании, требуется опыт. А само
объектно-ориентированное программирование
требует б</SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>о</I></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">льшей
силы мысли. </SPAN></FONT>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Начинающему
программисту очень просто попасть в
ловушку и выбрать неправильную абстракцию.
Сэнди Мэтз говорит о том, что дублирование
кода обходится значительно дешевле (в
будущем), чем неверная абстракция. И
если вы не уверены в выбранной абстракции,
то лучше продублировать код (см.
</SPAN></FONT><A HREF="https://www.sandimetz.com/blog/2016/1/20/the-wrong-abstraction"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https://www.sandimetz.com/blog/2016/1/20/the-wrong-abstraction</U></SPAN></FONT></FONT></A><FONT FACE="Arial, serif"><SPAN LANG="en">).
Получается, что все это наследование,
которое мы только что разобрали, не
нужно и можно было просто обойтись
дублированием кода?</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Да,
можно было просто обойтись дублированием
кода. Это то, с чем стараются бороться
некоторые команды любыми средствами.
Однако, дублирование кода не всегда
плохо. Скажем, в тестировании программ
(разбирается дальше в этой книге)
дублирование кода не является большой
проблемой. Если мы говорим не о тестах,
а об обычных программах, то в некоторых
случаях тоже лучше продублировать код,
чем пытаться от него избавиться (если
вы упоминаете об этом на интервью, то
вашу точку зрения нужно будет
аргументированно подтвердить).</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">В
руби существует отдельный механизм для
дублирования кода - модули. Т.е. первый
способ избавления от неверной абстракции
может состоять в создании и использовании
модуля.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_2y6bhp8q4jw9"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt"><SPAN LANG="en">Модули</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Модуль
(module) - это участок программы, который
можно “включить” (include) в тот или иной
класс:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">module
MyModule</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">attr_accessor
:x, :y</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
initialize(options={})</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">@x
= options[:x] || 0</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">@y
= options[:y] || 0</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
right</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">self.x
+= 1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
left</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">self.x
-= 1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
up</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">self.y
+= 1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
down</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">self.y
-= 1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">class
Robot</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">include
MyModule</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
label</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">'*'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">class
Dog</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">include
MyModule</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
up</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
left</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
label</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">'@'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">class
Human</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">include
MyModule</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
label</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">'H'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Выше
мы определили модуль с помощью конструкции
`module … end` и включили его в наши классы
с помощью ключевого слова `include`. Диаграмма
классов при этом выглядит следующим
образом:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><IMG SRC="2eaec5a5667bec5b244b5f4a53e23318_html_83f3f23f.png" NAME="image32.png" ALIGN=BOTTOM HSPACE=12 VSPACE=12 WIDTH=316 HEIGHT=351 BORDER=0></P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><I>Рис.
Диаграмма классов, построенная в
RubyMine. Три класса делят (share, или копируют)
функциональность с помощью модуля.</I></SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Визуально
это похоже на наследование, но только
в случае с модулями все немного более
честно. Мы не говорим о том, что мы нашли
что-то генетически общее между этими
сущностями. Мы не говорим о том, что мы
выделили главную абстракцию и несколько
ее подвидов. Мы заявляем честно - мы
скопировали код из модуля в эти три
класса.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_ena2zn108d47"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt"><SPAN LANG="en">Subtyping
(субтипирование) против наследования</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Помимо
модулей существует еще один, более
верный способ “наследовать данные и
функциональность, способствуя повторному
использованию”. Речь идет не о том,
чтобы бездумно использовать механизм
наследования для копирования методов
и переменных из любого объекта в любой
другой, а о том, чтобы на самом деле
выделить подтипы.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Например,
утка, кукушка и страус это подтипы одного
типа - птица:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><IMG SRC="2eaec5a5667bec5b244b5f4a53e23318_html_a8ce33b4.png" NAME="image5.png" ALIGN=BOTTOM HSPACE=12 VSPACE=12 WIDTH=354 HEIGHT=148 BORDER=0></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">В
этом случае на основе нашего жизненного
опыта мы можем сказать - да, подтипы
правильные, а значит и абстракция целиком
верна. И это, кстати, то что разрешает
(enables) полиморфизм. Вне зависимости от
того, какая именно это птица, мы можем:
напоить птицу, накормить птицу, выпустить
погулять и так далее. </SPAN></FONT>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">С
технической точки зрения, в языке руби
subtyping осуществляется также, как и
наследование. Например:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">class
Птица</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">class
Утка &lt; Птица</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">class
Кукушка &lt; Птица</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">class
Страус &lt; Птица</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">В
языке C# мы бы воспользовались интерфейсами
(а не наследованием):</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">interface
Птица {</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">	void
Накормить();</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">	void
Напоить();	</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">}</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">interface
Утка : Птица {</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">}</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">interface
Кукушка : Птица {</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">}</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">interface
Страус : Птица {</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">}</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Особенность
интерфейсов в том, что в них нет кода -
только определение методов. Поэтому
нельзя бездумно скопировать код. Но в
динамически типизированных языках типа
руби, мы или держим интерфейсы в голове,
или вводим некий абстрактный класс
(“Птица” выше) и используем наследование.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Для
записи программы с человеком, роботом
и собакой можно было бы использовать
следующий подход. Ввести некий абстрактный
класс, который не имеет смысла сам по
себе. И унаследовать от него все три
сущности. Например, можно ввести
абстрактный класс Player (игрок) и создать
следующую взаимосвязь между классами:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><IMG SRC="2eaec5a5667bec5b244b5f4a53e23318_html_ed6ecbc8.png" NAME="image1.png" ALIGN=BOTTOM HSPACE=12 VSPACE=12 WIDTH=295 HEIGHT=348 BORDER=0></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Этот
подход очень похож на использование
модулей. Правда, в этом случае мы точно
говорим - мы видим абстракцию, это некий
“игрок”. Чего бы не случилось в игре,
у игрока будут всегда реализованы методы
left, right, up, down, label, всегда будут известны
координаты. Любой метод, который будет
принимать объект Dog, Human или Robot может
рассчитывать на то, что эти методы
присутствуют. Мы также даем понять, что
Dog, Human и Robot - это разные сущности. У них
есть что-то общее, они являются игроками
на поле. Но мы не наследуем человека от
робота, как это было раньше. Все общее
между этими объектами - методы игрока.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><B>Задание:</B></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">
не подсматривая в код, который написан
чуть ниже, попробуйте написать программу
по диаграмме классов на представленном
рисунке.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Код
программы выглядит следующим образом:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">class
Player</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">attr_accessor
:x, :y</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
initialize(options={})</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">@x
= options[:x] || 0</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">@y
= options[:y] || 0</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
right</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">self.x
+= 1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
left</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">self.x
-= 1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
up</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">self.y
+= 1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
down</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">self.y
-= 1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
label</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">class
Robot &lt; Player</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
label</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">'*'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">class
Dog &lt; Player</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
up</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
left</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
label</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">'@'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">class
Human &lt; Player</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
label</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">'H'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Мы
использовали subtyping и одновременно
наследование для копирования
функциональности. К сожалению или к
счастью, в языке руби нет интерфейсов,
поэтому сделать классический subtyping и
определить конкретный интерфейс (тип)
не получится. </SPAN></FONT>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Руби
является очень гибким языком и дает
свободу: все, что вы делаете, остается
на вашей совести. Выделить абстракцию
можно множеством способов. Более того,
язык руби не запрещает создавать
экземпляр абстрактного класса Player. Все
из-за того, что в руби нет понятия об
абстрактных классах. Также ничто не
мешает программисту изменить классы
Dog, Human или Robot, добавив в каждый из этих
классов разные методы, которые бы
“испортили” универсальный интерфейс.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Возможно,
это не такая большая проблема, когда
программа небольшая. Но представьте,
что вы пришли на новую работу и перед
вами большой проект. Программист Геннадий
создал класс Player, вы посмотрели через
git (система контроля версий и изменений
файлов) -  файл “player.rb” был добавлен 5
лет назад. Программист Геннадий больше
не работает в компании. Как узнать о его
намерении? Можно ли сейчас, через 5 лет,
создавать экземпляр класса Player? А если
очень хочется?</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">В
любом случае, использовать или не
использовать наследование в языке руби
- решать вам. Если вы не уверены в выбранной
абстракции, используйте модули и честно
копируйте код. Если вам кажется, что
абстракция правильная, то создавайте
абстрактный класс, который будет
содержать общие для всех подклассов
методы и данные.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_73ngqgh5g3oy"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt"><SPAN LANG="en">Статические
методы</SPAN></FONT></FONT></P>
<P LANG="en" ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%">
<BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Существуют
методы экземпляра класса (instance methods), а
существуют методы класса (class methods). В
других языках программирования методы
класса называются &quot;статические
методы&quot;. То же самое можно сказать и
про переменные, существуют instance variables,
а существуют class variables. Разницу между
двумя разными типами методов (и переменных)
необходимо усвоить, т.к. она часто
встречается в литературе. Но в чем же
заключается эта разница?</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Представьте
себе чертёж какой-либо детали. На чертеже
присутствует рисунок, в котором указаны
размеры, по этому образцу будет
изготавливаться деталь. Это все переменные
и методы экземпляра, они не имеют смысла
без создания экземпляра этой детали.
Но внизу чертежа есть также место, в
котором указан автор чертежа. Представьте,
что было изготовлено 1000 деталей и вдруг
меняется автор. Каким-то образом
оказалось, что на самом деле над чертежом
работал не Иванов, а Сидоров. Поэтому
берут стерку, и стирают фамилию &quot;Иванов&quot;
на самом чертеже и пишут новую.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Для
тысячи изготовленных деталей это не
очень важно, они будут прекрасно работать
и без этой мета-информации. Но если
кто-то спросит &quot;А кто сделал такой
хороший болт?&quot;, то ответ уже будет
другим. Так вот, мета-информация это и
есть переменные и методы класса (class
methods, class variables, часто говорят &quot;статические
методы&quot;, &quot;статические переменные&quot;).
А размеры и другие технические детали
это обычные переменные и методы экземпляра
(instance methods, instance variables).</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Многие
программисты не любят статические
методы и переменные, и этому есть
объяснение. Наверное, не очень приятно
когда при изготовлении деталей в
какую-либо рабочую тетрадь была записана
фамилия инженера &quot;Иванов&quot;, а потом
эта фамилия на чертеже поменялась.
Придется просматривать все рабочие
тетради и делать там исправления. Но
это еще пол-беды. Представьте, что на
чертеже указан материал изготовления,
и материал был &quot;сталь&quot;, а стал
&quot;пластик&quot;. Уже готовые детали,
которые захотят узнать о том, из чего
они сделаны будут получать неправильный
ответ.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Поэтому
статические методы и статические
переменные нужно использовать с
осторожностью, особенно когда в одном
классе существуют как статические, так
и нестатические переменные или методы.
Для лучшего понимания рассмотрим класс
со статическим методом:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">class
Person</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">def
self.say_something</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">	puts
'Hi there!'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Person.say_something</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">В
последней строке мы вызываем этот класс
особым образом, указывая имя класса и
после этого название метода. Обратите
внимание, что мы не создаем экземпляра
класса. Сравните этот код с аналогичным,
но без использования статического
метода:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">class
Person</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">def
say_something</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">	puts
'Hi there!'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">dude
= Person.new</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">dude.say_something</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Мы
объявили переменную `dude`, которая
представляет собой экземпляр какого-то
человека. И после этого мы просим этот
экземпляр что-нибудь сказать.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Кажется,
что две программы выше выполняют одну
и ту же функцию, но все меняется, когда
появляется состояние. Представим, что
нам нужно чтобы человек сказал свое
имя. Что мы сделаем, когда мы объявляем
программу обычным образом? Передадим
в конструктор имя, которое и будет частью
состояния:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">class
Person</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">def
initialize(name)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">	@name
= name</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">def
say_your_name</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">	puts
&quot;My name is #{@name}&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">dude
= Person.new('Sam')</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">dude.say_your_name</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Все,
что написано выше до последней строки
- подготовительная работа для создания
живого организма. Когда он создан,
вызывается `dude.say_your_name`. Объект `dude` живой,
у него есть состояние. Можно было бы
задать и другие параметры - давление
крови, список друзей и так далее. Но
когда мы говорим про статический класс,
все выглядит иначе. Чтобы вывести имя
нам нужно передать его в качестве
аргумента:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">class
Person</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">def
self.say_your_name(name)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">	puts
&quot;My name is #{name}&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Person.say_your_name('Sam')</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Несмотря
на то, что программа выглядит проще, в
ней нет живого объекта. Есть только имя,
которое существует независимо ни от
чего. Мы вроде бы обращаемся к человеку
(ведь класс называется &quot;Person&quot;), но
этот класс не представляет живого
человека. Можно написать:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Person.say_your_name('Sam')</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Person.say_your_name('Pat')</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Person.say_your_name('Val')</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">И
все это будет исполнено. Это не выглядит
естественно. Программа выглядела бы
более правильно, если бы класс и методы
назывались иначе:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">class
Megaphone</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">def
self.say_loudly(whatever)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">	puts
whatever.upcase</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Megaphone.say_loudly('Hello')</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Т.е.
существует какой-то мегафон, возможно
в единственном виде, нигде таких больше
нет. И в этот мегафон можно что-то сказать,
и он будет говорить громко. В этом случае
использование статического метода
выглядит оправдано, с некоторыми
оговорками. Даже в этом случае мы можем
сказать &quot;а ведь мегафон может быть
разного цвета, иметь разные характеристики&quot;.
Возможно это не важно сейчас, но вы
никогда не знаете что будет в будущем,
вдруг потребуется раскрасить мегафон
в разные цвета?</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Мы
пришли к выводу, что иногда статические
методы использовать оправдано, а иногда
в них не много смысла. Многие профессиональные
программисты советуют избегать
статических методов, но правда состоит
в том, что статические методы присутствуют
в сторонних библиотеках, фреймворках,
а также в самом языке руби. Поэтому вам
придется с ними сталкиваться.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Правило
хорошего тона заключается в том, чтобы
использовать статические методы там,
где состояния нет и точно не будет. Но
в этом случае инструмент статического
анализа кода Rubocop может выдать
предупреждение о том, что &quot;если не
планируется создавать экземпляры
класса, то лучше использовать модули&quot;,
см.
https://github.com/rubocop-hq/ruby-style-guide#modules-vs-classes</SPAN></FONT><A HREF="https://github.com/rubocop-hq/ruby-style-guide#modules-vs-classes"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https://github.com/rubocop-hq/ruby-style-guide#modules-vs-classes</U></SPAN></FONT></FONT></A></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Поэтому
более правильным будет использовать
модуль, а не статический класс:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">module
Megaphone</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">module_function</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">def
say_loudly(whatever)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">	puts
whatever.upcase</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Megaphone.say_loudly('Hello')</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">(значение
module_function объясняется по той же ссылке
чуть ниже)</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Так
мы и пришли к выводу, что делать классы
только со статическими методами не
рекомендуется - нужно использовать
модули. А модуль это по сути набор
методов, сгруппированных по какому-либо
признаку. По какому именно признаку -
решает только программист. В языке руби
существуют модули, которые предназначены
для работы с файловой системой.
Предполагается, что файловая системе
одна, и мы можем только записать или
только прочитать данные, и не может
существовать более одной файловой
системы в одной операционной системе
(что в общем-то неправда, но мы можем с
этим согласиться).</SPAN></FONT></P>
<P LANG="en" ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%">
<BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_pbfldm3zsf3"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt"><SPAN LANG="en">Вся
правда про ООП</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Объектно-ориентированное
программирование было создано как
средство для борьбы с возрастающей
сложностью и запутанностью кода. Основная
задача ООП сугубо экономическая -
избавиться от дублирования кода,
упростить систему, сделать ее более
поддерживаемой, и сократить финансовые
расходы на разработку.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Однако,
существует множество других мнений.
Некоторые программисты считают, что
“дублирование кода значительно дешевле,
чем неправильно выбранная абстракция”.
В этом есть определенный смысл, ведь
ООП это не только инкапсуляция, полиморфизм
и наследование. Это также приемы и
шаблоны проектирования, которые имеют
свои преимущества и недостатки.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Чтобы
правильно применить шаблон, нужна не
только теоретическая подготовка, но и
опыт. Часто случается, что над проектом
работает несколько программистов, при
этом некоторые программисты уходят из
команды и новые приходят на их место.
Существует ли гарантия того, что абсолютно
все из них будут знакомы с шаблонами
проектирования и смогут понять все
тонкости ООП?</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Да
и у людей с серьезной теоретической
базой и многолетним опытом может быть
свой взгляд на вещи. Часто эти взгляды
сходятся, и сторонники и противники ООП
разделяются на два лагеря. Вот что
говорят про ООП некоторые известные
профессионалы:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Эдсгер
Вибе Дейкстра (нидерландский учёный,
труды которого оказали влияние на
развитие информатики и информационных
технологий):</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">“<FONT FACE="Arial, serif"><SPAN LANG="en"><I>Объектно-ориентированные
программы предлагаются как альтернатива
правильным</I></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">”.</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">“<FONT FACE="Arial, serif"><SPAN LANG="en"><I>Объектно-ориентированное
программирование исключительно плохая
идея, которая могла зародиться только
в Калифорнии</I></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">”</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">&quot;TUG
LINES,&quot; Issue 32, August 1989</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Пол
Грэм (американский предприниматель,
эссеист, программист): “</SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>ООП
представляет собой обоснованный способ
написания спагетти-кода</I></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">”,
</SPAN></FONT><A HREF="http://www.paulgraham.com/hundred.html"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>http://www.paulgraham.com/hundred.html</U></SPAN></FONT></FONT></A></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Роберт
Пайк (канадский программист, разработчик
операционных систем, один из разработчиков
языка программирования Go): “</SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>ООП,
идея которого не более чем программирование
с использованием данных, привязанных
к определенному поведению - мощнейшая
идея! Но не всегда лучшая идея… Иногда
данные это просто данные, а функции это
просто функции</I></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">”.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">См.
еще
</SPAN></FONT><A HREF="https://www.yegor256.com/2016/08/15/what-is-wrong-object-oriented-programming.html"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https://www.yegor256.com/2016/08/15/what-is-wrong-object-oriented-programming.html</U></SPAN></FONT></FONT></A></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Язык
руби предлагает разработчику простоту
и намеренно упрощает классическое ООП,
реализованное в Си++ и Java. Несмотря на
то, что иногда простота и свобода
использования языка руби способствует
написанию не самого качественного кода,
практика показала, что руби имеет право
не только называться объектно-ориентированным
языком, но и может эффективно решать
реальные бизнес-задачи.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Ключ
к эффективному созданию объектно-ориентированных
программ заключается в том, чтобы не
усложнять архитектуру, а упрощать.
Иногда нужно идти на компромиссы:
дублирование кода - не такая уж и плохая
вещь, если концепция и общее видение в
голове еще не утряслось. Часто понимание
системы, принципов взаимодействия
разных сущностей приходит со временем.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">При
создании программ помните, что у кода
есть два читателя: человек и компьютер.
Компьютеру все равно как вы пишите
программу, если она работает. Человеку
нужно время. Часто этот человек не вы
сами, а ваш коллега, который может быть
только через несколько лет будет смотреть
на ваш код. Так постарайтесь его сделать
простым! Написать сложный код просто,
а написать простой - сложно. Желаем
успехов в объектно-ориентированном
программировании!</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_jk8eym9fo0i2"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt"><SPAN LANG="en">Отладка
программ</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Отладка
(debugging) это ничто иное как процесс поиска
багов (ошибок). Само слово “debugging”
говорит об избавлении от багов (de-bug).
Когда компьютеры были очень простыми,
об отладке программ в том виде, в котором
она существует сейчас, никто не слышал.
Однако, существовали способы проверить
работоспособность готового кода. Но
зачем проверять код?</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Обычно
небольшая программа работает без
каких-либо проблем, но когда программа
становится сложнее, возникает вероятность
возникновения ошибки. Например, в вашей
программе одна конструкция if...else, то
существует два варианта работы программы,
в зависимости от условия “if”. Если
таких конструкции две, то вариантов
работы программы уже четыре, т.к. в каждом
условии “if” запускается та или иная
ветвь кода. Для десяти условий “if”
вариантов выполнения одной и той же
программы может быть уже 1024. И это если
не учитывать ввода пользователя.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">В
реальной жизни обычного программиста
отладка занимает примерно столько же
времени, сколько и написание кода.
Авторам книги удавалось создать
приложение практически без использования
отладчика, путем упрощения программы,
правильного (на наш скромный взгляд)
использования объектно-ориентированного
программирования и тестов (см.
</SPAN></FONT><A HREF="https://github.com/ro31337/libretaxi"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https://github.com/ro31337/libretaxi</U></SPAN></FONT></FONT></A><FONT FACE="Arial, serif"><SPAN LANG="en">).
Однако, любому начинающему программисту
просто критически необходимо знать о
том, как отлаживать программу.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Существует
несколько способов отладки программы,
написанной на языке руби. Вот некоторые
из них:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">С
	использованием вывода в консоль (puts,
	print)</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">С
	использованием консольного отладчика</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">С
	использованием отладчика, встроенного
	в текстовый редактор или среду разработки
	(IDE)</SPAN></FONT></P>
</UL>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Рассмотрим
подробнее каждый из способов выше.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Отладка
с использованием вывода информации в
консоль</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Это
один из самых эффективных способов
отладки программы, несмотря на кажущуюся
простоту. В любом месте программы мы
можем написать выражение:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">puts
something.inspect</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">“<FONT FACE="Arial, serif"><SPAN LANG="en">inspect”
это метод, который реализован в объекте
любого типа. Этот метод возвращает
строковое представление объекта.
Внимательный читатель спросит - а зачем
использовать “puts something.inspect”, когда
можно просто написать “puts something”?</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Дело
в том, что `puts nil` и `puts &quot;&quot;` выведут на
экран пустую строку. Тогда как с “.inspect”
на экран будет выведено `nil` и `&quot;&quot;`
соответственно:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">$
pry</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">&gt;
puts nil</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">&gt;
puts nil.inspect</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">nil</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">&gt;
puts &quot;&quot;</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">&gt;
puts &quot;&quot;.inspect</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">&quot;&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Для
тех, кто работает с фреймворком Rails,
полезна будет следующая конструкция:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">puts
'=' * 80</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">puts
something.inspect</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">puts
'=' * 80</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Код
выше напишет 80 знаков “равно”, потом
переменную, а потом еще 80 знаков “равно”.
Вывод переменной в этом случае не
затеряется среди “простыни” служебных
сообщений. Чтобы прервать выполнение
программы на этом участке кода, можно
воспользоваться ключевым словом “raise”,
которое выбросит исключение (стандартную
ошибку) и завершит работу:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">puts
'=' * 80</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">puts
something.inspect</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">puts
'=' * 80</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">raise</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Т.к.
руби - язык с динамической типизацией,
по исходному коду не всегда можно сказать
где именно определен тот или иной метод,
пока программа не запустится и не дойдет
до определенной точки. В RubyMine существует
комбинация клавиш Cmd + B (на macOS) или Ctrl +
B (на ОС Windows и Linux), которая покажет где
именно находится тот или иной метод.
Однако, RubyMine не всегда способен определить
точное месторасположение вызываемой
функции. В этом случае поможет следующая
конструкция:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">puts
method(:something).source_location</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```
</SPAN></FONT>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Если
в объекте определен метод “something”, то
на экран будет выведен путь к файлу с
номером строки. Если код выполняется в
цикле, то иногда полезно комбинировать
“if” и “puts”:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">puts
something.inspect if i == 100</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">В
случае если требуется узнать стек вызова
(последовательность вызова функций),
можно вывести массив “caller”. Это
зарезервированное слово, которое
доступно в любом месте:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">def
random_pow</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">pow(rand(1..10))</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">def
pow(x)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">puts
&quot;=&quot; * 80</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">puts
caller</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">puts
&quot;=&quot; * 80</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">x
** 2</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">puts
random_pow</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Результат
работы программы:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">========================================================</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">-:2:in
`random_pow'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">-:12:in
`&lt;main&gt;'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">========================================================</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">64</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Мы
видим, что первый вызов функции
“random_pow” произошел на 12 строке, а второй
вызов на 2-ой. Таким образом, `caller` ничто
иное как call stack (стек вызовов).</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">В
языке JavaScript существует похожий метод
отладки, только вместо `puts` нужно
использовать `console.log`, который может
принимать один или несколько параметров
и также выводит информацию в консоль:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">console.log(some_variable);</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Существует
похожий метод, который выводит более
подробную информацию об объекте:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">console.dir(some_variable);</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">О
том, что такое JavaScript консоль мы поговорим
в разделе про отладку с IDE.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_5ja4mwffmrct"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt"><SPAN LANG="en">Отладка
с использованием консольного отладчика</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Мы
уже знакомы с альтернативным REPL, который
называется Pry. В pry реализовано больше
возможностей, чем в irb. Также pry может
использоваться не только как REPL, но и
как отладчик. В этой главе мы рассмотрим
минимальные возможности pry в качестве
отладчика. Умение пользоваться этим
инструментом может сэкономить вам массу
времени.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Если
по каким-то причинам pry еще не установлен
в вашей системе (а это можно проверить
с помощью консольной команды `which pry`),
то это легко исправить с помощью команды:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">$
gem install pry pry-doc</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```
 </SPAN></FONT>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">С
помощью этой команды мы устанавливаем
два gem’a. Сам pry и pry-doc, который является
плагином для pry и предоставляет расширенную
документацию по “нативным” (native) методам
языка руби. </SPAN></FONT>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Запускать
pry мы уже умеем. А команда “help” выводит
справку по возможным командам:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">$
pry</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">&gt;
help</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">По
каждой команде из этого списка можно
получить подробную справку, если ввести
название команды и через пробел в конце
добавить `-h`. Возможности pry раскрываются
более полно не в качестве REPL, а в качестве
отладчика. Посмотрим на программу,
которая возводит в квадрат какое-то
случайное число:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">def
random_pow</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">pow(rand(1..10))</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">def
pow(x)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">x
^ 2</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">puts
random_pow</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">После
того как мы запустили эту программу, на
экран было выведено число 6. Очень
странно, ведь функция rand на второй строке
генерирует целое случайное число от 1
до 10, а следовательно возможный результат
это одно из следующих значений: 1, 4, 9,
16, 25, 36, 49, 64, 81, 100 (в программе намеренно
допущена ошибка, сможете ли вы ее
увидеть?).</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Как
найти ошибку в этой программе? Один из
способов - воспользоваться puts и привести
программу к следующему виду:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">def
random_pow</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">pow(rand(1..10))</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">def
pow(x)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">puts
&quot;Pow parameter: #{x}&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">x
^ 2</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">puts
random_pow</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">После
запуска программы мы можем увидеть
передаваемый в функцию параметр и
результат вычисления:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Pow
parameter: 3</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Хм.
Входной параметр 3, а тройка в квадрате
это 9, но никак не 1. Что же тут происходит?
В случае с такой простой программой
опытный программист найдет ответ
довольно быстро. Но когда программа
большая, а функция скрыта и “добраться”
до ее вызова сложно (например, нужно
пройти через несколько этапов -
регистрация, подтверждение емайла, и
т.д.), изменять каждый раз программу и
проходить эту последовательность
действий может быть очень накладно -
потребуется много времени. Поэтому нам
нужен другой способ.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Программисты
говорят - нужно установить breakpoint (точку
остановки) в определенном месте программы.
И когда программа дойдет до этой точки,
она будет остановлена и управление
будет передано человеку. Человек с
помощью специальных инструментов сможет
проанализировать программу именно в
этой точке: посмотреть на переменные,
переданные параметры, на стек вызова,
другими словами - иметь на руках какой-то
текущий контекст, а не просто код на
экране и теоретическое представление
о том, как он работает.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Давайте
установим breakpoint с помощью pry:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">require
'pry'</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">def
random_pow</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">pow(rand(1..10))</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">def
pow(x)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">binding.pry</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">x
^ 2</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">puts
random_pow</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Первая
строка говорит о том, что мы требуем
(require) загрузки библиотеки “pry”.
По-умолчанию, для быстроты выполнения
программы, абсолютно все установленные
gem’ы не загружаются. Поэтому нужно
воспользоваться специальным синтаксисом
и написать “require”. Разумеется, что gem
при этом должен быть установлен в вашей
системе. С точки зрения руби gem это просто
сторонний код, который написал какой-то
неизвестный разработчик. Поэтому при
установке gem’ов (команда “gem install …”)
они скачиваются из Интернета, а при
“require” они загружаются в память с вашего
диска.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Примечание:
в будущем вы будете использовать
фреймворк Rails, в котором достаточно
поместить gem в специальный список (файл
`Gemfile`), и если все сделать правильно, то
все gem’ы из этого списка будут загружены
в память автоматически.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">“<FONT FACE="Arial, serif"><SPAN LANG="en">binding.pry”
мы поместили на ту же строку, где раньше
был puts с выводом отладочной информации.
“binding.pry” это специальный синтаксис,
который нужно запомнить. Он говорит о
том, что в этом месте должна произойти
остановка программы и должен быть вызван
отладчик.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Обратите
внимание, что раньше мы запускали “pry”
непосредственно из командной строки.
А в этот раз мы запустили программу
обычным способом:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">$
ruby app.rb</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Программа
запустилась, было определено два метода,
был запущен метод random_pow, который в свою
очередь вызвал pow, и в котором мы в итоге
оказались:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
ruby app.rb</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">From:
/Users/ro/work/book/app.rb @ line 8 Object#pow:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">     <FONT FACE="Courier New, serif"><SPAN LANG="en">7:
def pow(x)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Courier New, serif"><SPAN LANG="en">=&gt;
 8:   binding.pry</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">     <FONT FACE="Courier New, serif"><SPAN LANG="en">9:
  x ^ 2</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">10:
end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">[1]
pry(main)&gt;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Сейчас
вместо “пустого” состояния pry, которое
мы раньше получали при запуске “pry” из
терминала, мы находимся в состоянии
запущенной программы, но с тем же самым
инструментом “pry”. Что это нам дает в
плане отладки:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Мы
	можем посмотреть значения переменных
	(например, переменной “x”)</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Мы
	можем изменить значения переменных</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Мы
	можем вызвать какой-либо метод один
	или несколько раз</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Мы
	можем вставить (например, скопированный
	из буфера обмена код) и посмотреть как
	он работает</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Мы
	можем попытаться вычислить результат
	выполнения следующей строки (например,
	путем ее копирования или просто ввода
	с клавиатуры) и посмотреть что произойдет</SPAN></FONT></P>
</UL>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Другие
возможности “pry”, когда мы находимся
в точке остановки:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Команда
	“next” выполнит следующую строку. После
	этого снова можно посмотреть значение
	переменных, чтобы понять что не так с
	программой</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Команда
	“exit” вернет выполнение в программу</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Команда
	“whereami” (от англ. Where Am I - где я?) может
	быть полезна когда, например, после
	вывода большого текста на экран (или
	очистки экрана кодом из нашей программы)
	мы все еще хотим знать в каком месте
	программы мы в данный момент находимся</SPAN></FONT></P>
</UL>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Научиться
пользоваться сразу всеми командами за
один раз вряд ли получится, поэтому выше
перечислены только основные команды
без которых не обойтись. Рекомендуем
почаще пользоваться командой “help” и
пробовать новые возможности.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Но
что делать в нашем случае и как найти
ошибку? Давайте попробуем вывести
текущее значение “x”, а потом ввести с
клавиатуры следующую строку (`x ^ 2`) и
посмотреть на результат выполнения
этой операции:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">[2]
pry(main)&gt; whereami</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">From:
/Users/ro/work/book/app.rb @ line 8 Object#pow:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">     <FONT FACE="Courier New, serif"><SPAN LANG="en">7:
def pow(x)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Courier New, serif"><SPAN LANG="en">=&gt;
 8:   binding.pry</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">     <FONT FACE="Courier New, serif"><SPAN LANG="en">9:
  x ^ 2</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">10:
end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">[3]
pry(main)&gt; x</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">2</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">[4]
pry(main)&gt; x ^ 2</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">0</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Любопытно!
С помощью отладчика мы узнали, что
значение “x” равно двум, а результат
вычисления выражения “x ^ 2” равен нулю.
Что является не тем результатом, который
мы ожидаем. Мы ожидаем, что два в квадрате
будет равно четырем, но не нулю!. Другими
словами, с помощью “pry” удалось найти
ту строку, в которой присутствует ошибка.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Запись
`x ^ 2` является неправильной в языке руби
(но правильной в некоторых других
языках). Для возведения в степень
необходимо использовать `**`. Правильная
программа должна выглядеть следующим
образом:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">def
random_pow</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">pow(rand(1..10))</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">def
pow(x)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">puts
&quot;=&quot; * 80</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">puts
caller</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">puts
&quot;=&quot; * 80</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">x
** 2 # ПРАВИЛЬНОЕ ВОЗВЕДЕНИЕ В КВАДРАТ</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">puts
random_pow</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Мы
познакомились с основными возможностями
pry. Отныне если в вашей программе возникнет
ошибка, вы будете знать как ее найти:
установить breakpoint и попытаться понять
что происходит во время работы программы.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Отдельно
хотелось бы отметить малознакомую, но
полезную команду `system('reset')`. Эта команда
не является стандартной в pry: `system` это
просто метод языка руби, который выполняет
команду оболочки `reset` (не путайте с
командой `reboot`, которая перезагружает
компьютер). Если ввести `system('ls')`, то можно
получить список файлов в текущей
директории, а `system('pwd')` покажет путь к
текущей директории процесса.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Справка
по `reset` (запустите `man reset` в вашем терминале)
говорит о том, что команда используется
для сброса настроек оболочки в настройки
по-умолчанию.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Что
же это могут быть за настройки и зачем
вызывать `reset` из “pry”? Если вы разрабатываете
небольшую программу, то эта команда вам
не нужна. Но на практике программист
обычно работает с (относительно) большим
Rails-проектом. В больших проектах существует
множество gem’ов, которые в зависимости
от разных обстоятельств, могут выводить
в консоль отладочную информацию в самый
неподходящий момент. Такая же отладочная
информация может поступать и от самого
приложения (например, вывод отладочной
информации в консоль по таймауту). Иногда
эта информация сбивает каким-то образом
настройки терминала и возникает
необходимость вернуть эти настройки
обратно без перезапуска отладчика.
Сделать это можно с помощью `system('reset')`
или просто взяв слово `reset` в обратные
кавычки (backticks):</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">[1]
pry(main)&gt; `reset`</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">(произошла
очистка экрана)</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">&quot;&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">[2]
pry(main)&gt;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_k2r81j1kv7sr"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt"><SPAN LANG="en">Отладка
с использованием графического отладчика</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">До
этого момента мы использовали только
консольные инструменты для отладки.
Некоторые программисты предпочитают
не только консольные инструменты
отладки, но и консольные инструменты
разработки - например, текстовые
редакторы, которые работают только в
вашем терминале (например, Vim, Emacs и
другие).</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Преимущество
консольных инструментов в том, что они
работают на любом “хосте”: на компьютере
разработчика или на удаленном сервере
с установленным Linux (который, в большинстве
случаев, настроен исключительно на
обслуживание подключений, но никак не
для разработки). Другими словами, имея
навык работы с консольными инструментами
можно отладить программу не только на
локальном компьютере, а практически на
любом сервере - достаточно доступа по
SSH.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Однако,
удобство графических средств отладки
сложно переоценить. Авторы книги не
часто практикуют отладку программ на
руби в графической среде разработки,
но упомянуть о ней стоит. Вот как выглядит
отладчик в платной IDE RubyMine:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><IMG SRC="2eaec5a5667bec5b244b5f4a53e23318_html_a8ba852a.png" NAME="image35.png" ALIGN=BOTTOM HSPACE=12 VSPACE=12 WIDTH=624 HEIGHT=517 BORDER=0></P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><I>Рис.
Графический отладчик в IDE RubyMine.</I></SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial Unicode MS, serif"><SPAN LANG="en">Как
видно из рисунка, для отладки программы
в RubyMine нет необходимости вводить
“binding.pry” и устанавливать gem “pry”
(правда, RubyMine автоматически установит
другой gem). Слева от шестой строки
(см.рисунок выше) с помощью указателя
мыши можно активировать breakpoint: появится
красный кружок. Отладка запускается из
меню: Run → Debug:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><IMG SRC="2eaec5a5667bec5b244b5f4a53e23318_html_dc614b51.png" NAME="image10.png" ALIGN=BOTTOM HSPACE=12 VSPACE=12 WIDTH=284 HEIGHT=146 BORDER=0></P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><I>Рис.
Запуск отладки в RubyMine</I></SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial Unicode MS, serif"><SPAN LANG="en">Когда
отладчик запущен и программа остановилась
в точке остановки, мы, также как и в pry,
можем выполнять команды в консоли,
переходить к следующей строке (F8 вместе
“next”), добавлять другие точки остановки
и пользоваться всеми преимуществами
графической IDE (например, перейти с
помощью комбинации ⌘ + B в определение
какого-либо метода).</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Использовать
графический отладчик немного проще,
чем pry. Однако, один из недостатков
RubyMine заключается в сложности настройки
самой среды. Некоторые опции могут
находиться в не самых очевидных местах:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><IMG SRC="2eaec5a5667bec5b244b5f4a53e23318_html_3413495a.png" NAME="image27.png" ALIGN=BOTTOM HSPACE=12 VSPACE=12 WIDTH=624 HEIGHT=308 BORDER=0>
</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><I>Рис.
Настройка RVM в RubyMine</I></SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Но
с другой стороны, это дело привычки.
Также эта среда разработки является
платной (требуется годовая подписка),
и техническая поддержка всегда готова
ответить на ваши вопросы (в т.ч. на русском
языке).</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_dyhr4eprgaws"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt"><SPAN LANG="en">Практическое
занятие: подбор пароля и спасение планеты</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Мы
познакомились с отладчиком, а значит
теперь сможем не только создавать
программы, но и более уверенно работать
с кодом. Отладчик позволяет приостановить
выполнение программы и заглянуть внутрь,
а это значит что мы сможем наблюдать за
поведением программы когда это поведение
от нас не зависит.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Представьте,
что вы создаете программу, которая
скачивает какие-то данные из сети. Все
написано верно, но ответ от сервера это
всегда неопределенность. Иногда может
случиться так, что сервер выдает ошибку.
Иногда нет соединения с Интернетом.
Иногда приходит ответ в совершенно
неожиданном формате. В таких случаях
можно установить брейкпоинт и посмотреть
на сам ответ.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">В
этой главе мы сделаем практическое
упражнение. Машины захватили мир, вас
зовут Джон, и вы должны спасти планету.
Для того, чтобы это сделать, нужно пройти
на центральный сервер и ввести пароль.
Однако, вам известно только имя
пользователя - “admin”. Пароль предстоит
подобрать.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Для
выполнения этого упражнения нам
потребуется установить Docker (далее
“докер”, также известный как “Docker for
developers” или “Docker community edition (CE)”). Скачать
докер для Windows или macOS можно на официальном
сайте: </SPAN></FONT><A HREF="https://www.docker.com/get-started"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https://www.docker.com/get-started</U></SPAN></FONT></FONT></A><FONT FACE="Arial, serif"><SPAN LANG="en">.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Для
Linux возможна установка тремя совершенно
разными способами: 1) через добавление
репозитория 2) через скачку deb-файла 3)
через вспомогательный скрипт. Все
способы установки описаны на сайте
</SPAN></FONT><A HREF="https://docs.docker.com/install/linux/docker-ce/ubuntu/"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https://docs.docker.com/install/linux/docker-ce/ubuntu/</U></SPAN></FONT></FONT></A><FONT FACE="Arial, serif"><SPAN LANG="en">,
но самая простая установка докера на
Linux - через скрипт:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">$
curl -fsSL https://get.docker.com -o get-docker.sh</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">$
sudo sh get-docker.sh</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> 
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">После
этого возможно потребуется перезагрузить
компьютер и терминал. Проверьте, что
докер установлен и работает:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">$
docker -v</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Docker
version 17.06.2-ce, build cec0b72</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">После
того, как докер установлен, можно
приступать к “поднятию” тренировочного
хоста. Если вкратце, то докер это система
виртуализации. Она позволяет запустить
на вашем компьютере мини-операционные
системы. Эти мини-ОС созданы на базе
Linux. Другими словами, на вашем компьютере
может быть запущена сотня мини-линуксов.
Но откуда возникла эта необходимость?</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Дело
в том, что программисты работают с
большим количеством дополнительного
(third party) софта. Например, базы данных,
веб-серверы, системы кеширования.
Программные системы становятся все
сложнее, и для локальной разработки
порой нужно установить несколько
совершенно разных баз данных. Но вот
незадача, бывает так, что две базы данных
требуют совершенно разной, несовместимой
конфигурации. Можно настроить свой
компьютер двумя разными способами, но
эти способы несовместимы друг с другом
(например, требуется разная версия
Linux). Что же делать?</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">На
помощь пришел докер. Он позволяет
изолировать выполнение программ внутри
своей мини-ОС. И позволяет запустить
несколько таких мини-ОС одновременно,
потому что они изолированы друг от
друга. С помощью нехитрых параметров
можно сделать так, чтобы программист
видел только порты этих мини-ОС (например,
порт 1234 и 5555) и не беспокоился о том, что
там внутри.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Образ
такой мини-ОС создали для вас авторы
этой книги. Вы можете скачать его и
запустить на своем компьютере с помощью
следующей команды оболочки:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">$
docker rm xxx; docker run -it --name xxx -p 4567:4567
ro31337/rubybook-save-the-planet</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Команда
выше состоит из двух команд:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">`docker
	rm xxx` - удаляет контейнер с именем “xxx”
	(если он существует)</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">`docker
	run -it --name xxx -p 4567:4567 ro31337/rubybook-save-the-planet`
	(запускает контейнер и “пробрасывает”
	порт 4567 на локальный хост)</SPAN></FONT></P>
</UL>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">(т.к.
общая команда оболочки разделена с
помощью точки с запятой, а не с помощью
`&amp;&amp;`, то при отсутствии контейнера
`xxx`, выполнение не прервется).</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Вывод
команды (чтобы завершить выполнение
контейнера, нажмите Ctrl + C):</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2 STYLE="font-size: 9pt"><SPAN LANG="en">Unable
to find image 'ro31337/rubybook-save-the-planet:latest' locally</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2 STYLE="font-size: 9pt"><SPAN LANG="en">latest:
Pulling from ro31337/rubybook-save-the-planet</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2 STYLE="font-size: 9pt"><SPAN LANG="en">...</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2 STYLE="font-size: 9pt"><SPAN LANG="en">Digest:
sha256:2502efd4cb6dde62b9998bb5ca203830d013e58b15f68410d07bcd34a83c4127</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2 STYLE="font-size: 9pt"><SPAN LANG="en">Status:
Downloaded newer image for ro31337/rubybook-save-the-planet:latest</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2 STYLE="font-size: 9pt"><SPAN LANG="en">[2018-08-15
02:25:13] INFO  WEBrick 1.4.2</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2 STYLE="font-size: 9pt"><SPAN LANG="en">[2018-08-15
02:25:13] INFO  ruby 2.5.1 (2018-03-29) [x86_64-linux]</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2 STYLE="font-size: 9pt"><SPAN LANG="en">==
Sinatra (v2.0.3) has taken the stage on 4567 for development with
backup from WEBrick</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2 STYLE="font-size: 9pt"><SPAN LANG="en">[2018-08-15
02:25:13] INFO  WEBrick::HTTPServer#start: pid=1 port=4567</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Попробуйте
пройти по адресу </SPAN></FONT><A HREF="http://localhost:4567/"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>http://localhost:4567/</U></SPAN></FONT></FONT></A><FONT FACE="Arial, serif"><SPAN LANG="en">,
вы должны увидеть наш экспериментальный
веб-сайт:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><IMG SRC="2eaec5a5667bec5b244b5f4a53e23318_html_51c7b300.png" NAME="image34.png" ALIGN=BOTTOM HSPACE=12 VSPACE=12 WIDTH=624 HEIGHT=461 BORDER=0></P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><I>Рис.
Сайт к которому попробуем подобрать
пароль.</I></SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Все,
что мы можем сделать - ввести неправильный
логин и пароль (попробуйте это сделать).
Мы знаем только логин (“admin”), но каким
образом можно узнать пароль и спасти
планету от машин?</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Во-первых,
нам потребуется файл с паролями. Он уже
находится на нашем хосте по адресу
</SPAN></FONT><A HREF="http://localhost:4567/passwords.txt"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>http://localhost:4567/passwords.txt</U></SPAN></FONT></FONT></A><FONT FACE="Arial, serif"><SPAN LANG="en">
- в нем представлены 10 тысяч самых
популярных паролей. Вы можете скачать
этот файл к себе в директорию с помощью
команды wget:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">$
wget http://localhost:4567/passwords.txt</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Точно
известно, что один из паролей в этом
списке является правильным. Давайте
подумаем еще - как мы можем использовать
язык руби и наши знания для того, чтобы
продвинуться дальше?</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Первым
правильным шагом была бы итерация по
этому списку. Все равно пароль должен
быть сохранен в какой-нибудь переменной
в нашей программе. Поэтому вначале
неплохо было бы разобраться как именно
мы можем выполнить итерацию по каждой
строке из файла `passwords.txt`.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Существует
несколько методов прохода по каждой
строке какого-либо текстового файла:  </SPAN></FONT>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Прочитать
	содержимое файла в память как большую
	строку, разбить на строки с помощью
	`.split(&quot;\n&quot;)`</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Получить
	содержимое строк какого-либо файла
	сразу в виде массива, и сделать обход
	массива</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Воспользоваться
	методом, который специально предназначен
	для чтения строк из файлов</SPAN></FONT></P>
</UL>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Все
методы имеют право на реализацию. Но мы
воспользуемся последним вариантом,
т.к. “под капотом” этот метод не читает
файлы в память целиком, а читает только
строки: одну за одной. Представьте, что
у вас есть огромный файл на сотни
гигабайт, и вы хотите сделать проход по
каждой строке. Наверное, не имеет смысла
читать его целиком в память, когда можно
обойтись без этого и читать по одной
строке?</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Постойте,
скажет внимательный читатель, так ведь
в любом случае мы файл прочитаем целиком.
Так какая разница - прочитать его сразу
или постепенно? Дело в том, что при чтении
по одной строке руби будет “избавляться”
от предыдущих строк. Это будет происходить
автоматически с помощью механизма
“сборки мусора” (garbage collection или GC).</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Руби
достаточно умен, и когда какое-то значение
уже не нужно, участок памяти будет
помечен к удалению. Позднее, когда будет
достигнут какой-то предел (он зависит
от разных настроек), все эти помеченные
участки будут освобождены. А это значит,
что на это место можно будет записать
новые данные. Таким образом, мы читаем
файл целиком, но читаем его частями. И
файл целиком в памяти никогда не хранится.
Впрочем, для нашей задачи это несущественные
технические детали.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Давайте
посмотрим на метод `each_line` из класса `IO`
(“IO” расшифровывается как “input output”
- “ввод вывод”, этот класс отвечает за
операции ввода-вывода, т.к. за работу с
диском). Небольшая документация по этому
методу доступна по ссылке
</SPAN></FONT><A HREF="http://ruby-doc.org/core-2.5.1/IO.html#method-i-each_line"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>http://ruby-doc.org/core-2.5.1/IO.html#method-i-each_line</U></SPAN></FONT></FONT></A><FONT FACE="Arial, serif"><SPAN LANG="en">
</SPAN></FONT>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><B>Задание:</B></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">
не подсматривая решение данное ниже,
попробуйте обратиться к документации
и написать программу, которая считывает
из файла все строки и выводит на экран
длину каждой строки. Проверьте свой
результат.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Ниже
представлен код программы, которая
считывает каждую строку в файле
`passwords.txt` и выводит ее длину:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">File.new('passwords.txt').each
do |line|</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">password
= line.chomp</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">puts
password.size</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Запустим
программу:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">$
ruby ruby save_the_planet.rb</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Результат
работы программы:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">…</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">6</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">5</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">8</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">6</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">6</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Ура!
Мы получили что-то на экране. Однако,
настоящий программист никогда себе не
верит. Надо каким-то образом проверить,
что программа работает. Давайте
воспользуемся особенностью оболочки,
которая называется “pipe” (“труба”). С
помощью “pipe” (`|`) мы перенаправим вывод
куда-нибудь еще. Например, в shell-команду
`wc -l`. Справка по `wc` (запустите `man wc`)
сообщает нам о флаге `-l`:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><I>&gt;
The number of lines...</I></SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Другими
словами, в каждой операционной системе
(помимо Windows) существует команда “wc”,
которая расшифровывается как “word
count”. Если запустить ее с параметром
`-l`, то она посчитает строки (lines). Мы
подаем на стандартный ввод этойт команды
результат работы нашей программы. И
считаем количество строк. Должно быть
10000: под одной строке (в виде цифры, но
это не важно) на каждую строку из файла
“passwords.txt”:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">$
ruby save_the_planet.rb | wc -l</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">   <FONT FACE="Arial, serif"><SPAN LANG="en">10000</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Отлично,
результат совпадает и идентичен
результату подсчета строк в самом файле
`passwords.txt`:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">$
cat passwords.txt | wc -l</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">   <FONT FACE="Arial, serif"><SPAN LANG="en">10000</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Т.к.
после запуска `ruby save_the_planet.rb` в терминале
нам видны длины последних строк, попробуем
вывести на экран пять последних строк
из файла `passwords.txt` с помощью команды
`tail`:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">$
tail -5 passwords.txt</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">eighty</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">epson</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">evangeli</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">eeeee1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">eyphed</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```
</SPAN></FONT>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">И
попробуем сравнить длины этих пяти слов
с тем, что выводит наша программа в самом
конце:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">6</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">5</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">8</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">6</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">6</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Создавая
любую программу, необходимо двигаться
постепенно и проверять себя на каждом
шаге. Ошибка, которую начинающий
программист мог допустить в этом примере
- забытый оператор `chomp`. В итоге вывод
выглядел бы как `8, 7, 10, 8, 8`, а это на два
символа больше в каждом слове. Файл
`passwords.txt` содержит нестандартное (для
ОС семейства Linux) окончание строки: CRLF
(“\r\n”) вместо LF (“\n”).</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Следующий
шаг в нашем задании - непосредственно
отправка данных на сервер. Давайте
посмотрим на то, как это происходит,
когда пользователь вводит какие-либо
данные. Для этого нам понадобится браузер
Chrome. Откройте нашу тестовую страницу
</SPAN></FONT><A HREF="http://localhost:4567"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>http://localhost:4567</U></SPAN></FONT></FONT></A><FONT FACE="Arial, serif"><SPAN LANG="en">
</SPAN></FONT>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Нажмите
правой кнопкой (или двумя пальцами
одновременно на macOS) на любой свободной
области и выберите опцию “Inspect” из
выпадающего меню:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><IMG SRC="2eaec5a5667bec5b244b5f4a53e23318_html_f5033fcd.png" NAME="image21.png" ALIGN=BOTTOM HSPACE=12 VSPACE=12 WIDTH=214 HEIGHT=286 BORDER=0>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><I>Рис.
Контекстное меню в Google Chrome. При выборе
“Inspect” вызывается Chrome Developer Tools.</I></SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Внизу
появится панель, которая называется
“Chrome Developer Tools”:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><IMG SRC="2eaec5a5667bec5b244b5f4a53e23318_html_3cec2e13.png" NAME="image39.png" ALIGN=BOTTOM HSPACE=12 VSPACE=12 WIDTH=624 HEIGHT=441 BORDER=0></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Это
мощный инструмент, который содержит в
себе навигатор по элементам HTML (вкладка
“Elements” - активна на рисунке выше),
JavaScript консоль (REPL, вкладка “Console”),
отладчик (вкладка “Sources”), анализатор
сетевых пакетов (вкладка “Network”) и
многое другое.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">В
зависимости от предпочтений и размера
экрана вашего компьютера, инструмент
можно расположить в разных частях
страницы или в виде отдельного окна:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><IMG SRC="2eaec5a5667bec5b244b5f4a53e23318_html_d1358eaa.png" NAME="image25.png" ALIGN=BOTTOM HSPACE=12 VSPACE=12 WIDTH=228 HEIGHT=220 BORDER=0></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">На
данном этапе нас будет интересовать
вкладка “Network” - анализатор сетевых
пакетов. Откройте эту вкладку, заполните
поля логин и пароль на самой странице
(не важно что вы введете, можно ввести
“admin” и “123456”), и нажмите на кнопку
“Login”, после этого вы увидите сообщение
об ошибке на странице (ожидаемо, ведь
пароль нам неизвестен), и строку с кодом
200 чуть ниже:</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><IMG SRC="2eaec5a5667bec5b244b5f4a53e23318_html_10f0a3c1.png" NAME="image38.png" ALIGN=BOTTOM HSPACE=12 VSPACE=12 WIDTH=624 HEIGHT=435 BORDER=0></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">При
нажатии на эту строку можно увидеть
основные параметры запроса:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><IMG SRC="2eaec5a5667bec5b244b5f4a53e23318_html_5a1a1803.png" NAME="image7.png" ALIGN=BOTTOM HSPACE=12 VSPACE=12 WIDTH=342 HEIGHT=195 BORDER=0></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Нас
интересуют четыре параметра:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Request
	URL (иногда говорят “endpoint”):
	`http://localhost:4567/login`</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Request
	Method (или просто “method”): `POST`</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">`username`</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">`password`</SPAN></FONT></P>
</UL>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">К
сожалению, Chrome Developer Tools не позволяют
увидеть оригинальный запрос в текстовом
виде. Однако, такие инструменты как
Fiddler (преимущественно для Windows, существуют
бета-версии для macOS и Linux) или Charles Proxy
(платный, для macOS) позволяют увидеть
запрос в “сыром” виде:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><IMG SRC="2eaec5a5667bec5b244b5f4a53e23318_html_a6a37645.png" NAME="image17.png" ALIGN=BOTTOM HSPACE=12 VSPACE=12 WIDTH=624 HEIGHT=305 BORDER=0></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Другими
словами, если мы подключимся с помощью
какой-нибудь простой программы (например,
telnet) и отправим текст, который виден на
рисунке, то мы получим точно такой же
ответ от сервера, который получает
браузер.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><B>Задание:</B></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">
современные инструменты позволяют
представить ответ от сервера в виде
таблиц и структурированных данных, хотя
на самом деле протокол HTTP это всего лишь
текст, разбитый на несколько строк. Это
касается как запросов (request), так и ответов
(response, reply). Попробуйте зайти в на свой
любимый сайт с помощью пароля и посмотреть
на этот запрос в Chrome Developer Tools. Сравните
этот запрос с “сырыми” данными, которые
вы можете получить при помощи других
инструментов.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Примечание:
во время работы с некоторыми
прокси-инструментами авторы заметили
нестабильность в работе docker. Если
соединения с localhost не будет, возможно
придется перезагрузить компьютер или
перезапустить docker контейнер.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><B>Задание:</B></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">
попробуйте подключиться к локальному
серверу с помощью telnet и отправить
GET-запрос вручную: `telnet localhost 4567`. После
того, как подключение установится,
введите `GET / HTTP/1.0` и два раза нажмите
Enter. </SPAN></FONT>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><B>Задание:</B></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">
попробуйте подключиться к локальному
серверу с помощью telnet и отправить
POST-запрос вручную: `telnet localhost 4567`. После
того, как подключение установится,
вставьте следующий текст и нажмите
Enter:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">POST
/login HTTP/1.0</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">Content-length:
30</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">username=admin&amp;password=123456</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">После
того, как мы разобрались с тем, что GET и
POST запросы и ответы это всего лишь текст,
осталось научить руби делать то же
самое. К счастью, для этих целей в руби
существует специальная библиотека
“net/http”:
</SPAN></FONT><A HREF="https://ruby-doc.org/stdlib-2.5.1/libdoc/net/http/rdoc/Net/HTTP.html"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https://ruby-doc.org/stdlib-2.5.1/libdoc/net/http/rdoc/Net/HTTP.html</U></SPAN></FONT></FONT></A><FONT FACE="Arial, serif"><SPAN LANG="en">
Давайте напишем минимальную программу,
которая отправляет POST-запрос с именем
пользователя “admin” и паролем “123456”.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><B>Задание:</B></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">
попробуйте написать эту программу
самостоятельно, изучив документацию,
и сравните результат с написанным ниже.
Программа должна выводить на экран
ответ от сервера, который содержит
строку “Wrong username or password, please try again”.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Код
рабочей программы всего 5 строк (одна
из которых пустая):</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">require
'net/http'</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">uri
= URI('http://localhost:4567/login')</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">res
= Net::HTTP.post_form(uri, username: 'admin', password: '123456')</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts
res.body</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```
</SPAN></FONT>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">По
большей части этот код скопирован из
документации. Первая строка подключает
библиотеку. Третья строка создает объект
`uri`, т.н. Universal Resource Identifier. Он называется
так потому, что содержит в себе 4
составляющих: протокол (http), имя хоста
(localhost), порт (4567), путь (`/login`). Четвертая
строка это всего лишь вызов метода
`post_form` из библиотеки “net/http”, в который
мы передаем uri и хеш с параметрами. Эту
строку можно было бы записать иначе,
явно указав хеш:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">res
= Net::HTTP.post_form(uri, { username: 'admin', password: '123456' })</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Но
в этом случае инструмент статического
анализа кода Rubocop выдал бы предупреждение:
“Redundant Curly Braces” (“фигурные скобки без
необходимости”).</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Последняя,
пятая строка выводит на экран содержимое
ответа:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&lt;!DOCTYPE
html&gt;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&lt;html
lang=&quot;en&quot;&gt;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">&lt;head&gt;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">&lt;meta
charset=&quot;utf-8&quot;&gt;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">   
<FONT FACE="Courier New, serif"><SPAN LANG="en">&lt;title&gt;App&lt;/title&gt;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">&lt;meta
name=&quot;viewport&quot; content=&quot;width=device-width,
initial-scale=1.0&quot;&gt;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">&lt;link
rel=&quot;stylesheet&quot; href=&quot;tacit-css.min.css&quot;/&gt;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">&lt;/head&gt;</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">&lt;body
&gt;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">&lt;div&gt;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">      <FONT FACE="Courier New, serif"><SPAN LANG="en">&lt;p&gt;Wrong
username or password, please try again&lt;/p&gt;</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">&lt;/div&gt;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">&lt;/body&gt;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&lt;/html&gt;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Давайте
попробуем совместить две программы:
программу для итерации по строкам из
файла и программу для создания http
запросов:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">require
'net/http'</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">uri
= URI('http://localhost:4567/login')</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">File.new('passwords.txt').each
do |line|</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">password
= line.chomp</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">puts
&quot;Trying #{password}...&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">res
= Net::HTTP.post_form(uri, username: 'admin', password: password)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">puts
res.body</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Программа
работает, пробует каждый пароль из файла
и выводит на экран результат. Т.к. пароль
точно в этом списке, то однажды эта
программа выведет какой-то другой
результат. И все, что нам остается -
наблюдать. Но есть два момента, которые
могут быть улучшены:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Для
	наблюдений в “ручном” режиме и в
	реальном времени скорость программы
	слишком высока (около 10 паролей в
	секунду). Человек не сможет распознать
	какой-то другой вывод (какой именно это
	будет вывод - мы не знаем). Этого можно
	избежать, если добавить задержку.</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Нет
	различия между правильным и неправильным
	вариантом. Если пароль правильный -
	программа продолжает перебирать
	остальные.</SPAN></FONT></P>
</UL>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Эти
два недочета легко исправить с помощью
условия: если в теле ответа `res.body`
содержится слово “Wrong”, то нужно
продолжать. Иначе - выходить из программы.
Давайте внесем это изменение и посмотрим
на результат:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">require
'net/http'</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">uri
= URI('http://localhost:4567/login')</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">File.new('passwords.txt').each
do |line|</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">password
= line.chomp</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">puts
&quot;Trying #{password}...&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">res
= Net::HTTP.post_form(uri, username: 'admin', password: password)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">if
res.body.include?('Wrong')</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">#
не делать ничего, просто продолжать</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">else</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">puts
&quot;Password found: #{password}&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">exit</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Результат
работы программы:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Trying
password...</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Trying
123456...</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Trying
12345678...</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Trying
1234...</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Trying
qwerty...</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Trying
12345...</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">...</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Password
found: (чтобы вам было интереснее, мы не
стали его приводить в книге)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Ура,
мы нашли пароль и спасли планету!
Попробуем ввести логин “admin” и пароль
в веб-интерфейсе и мы получим следующий
результат на экране:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><IMG SRC="2eaec5a5667bec5b244b5f4a53e23318_html_8ae851dd.png" NAME="image37.png" ALIGN=BOTTOM HSPACE=12 VSPACE=12 WIDTH=624 HEIGHT=461 BORDER=0></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><B>Задание:</B></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">
попробуйте запустить программу и спасти
планету. Подумайте как можно улучшить
конструкцию “if” чтобы она была более
наглядной и лаконичной.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><B>Задание:</B></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">
когда правильный пароль найден, введите
текст ниже в своей текстовый редактор
и замените “123456” на найденный пароль:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">POST
/login HTTP/1.0</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">Content-length:
30</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">username=admin&amp;password=123456</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Скопируйте
текст в буфер обмена, попробуйте
подключиться к локальному серверу с
помощью `telnet localhost 4567`, отправьте
скопированный POST-запрос вручную и
нажмите Enter. Убедитесь, что ответ от
сервера содержит слово “Congratulations”.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_ceimkglnmcsl"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt"><SPAN LANG="en">Немного
про виртуализацию, Docker, основные команды
Docker</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Т.к.
мы затронули тему виртуализации и
контейнеров, стоит ознакомиться с
основными понятиями. На сегодняшний
день существуют три основных подхода
к виртуализации.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Первый
- запуск операционных систем внутри
вашей собственной ОС. Например, у вас
установлена ОС Windows и вы хотите запустить
ОС Linux </SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>не
выходя из Windows</I></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">.
В этом случае можно воспользоваться
такими решениями как VirtualBox (бесплатно)
или VMWare Workstation (работает лучше, но не
бесплатно). Таким же образом можно
запускать, например, Windows не выходя из
Linux.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><IMG SRC="2eaec5a5667bec5b244b5f4a53e23318_html_5ed83540.png" NAME="image40.png" ALIGN=BOTTOM HSPACE=12 VSPACE=12 WIDTH=624 HEIGHT=351 BORDER=0></P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><I>Рис.
Linux Mint запущен внутри Windows с помощью
VMWare Workstation</I></SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Преимущество
этого способа - операционные системы
“думают”, что они запущены на отдельном
компьютере и ведут себя точно также,
как если бы их установили на другой
компьютер. Программы для виртуализации
позволяют видеть настоящий графический
экран запущенной операционной системы
при помощи виртуализации, подключать
устройства (например, по USB), проигрывать
звук одновременно из двух ОС.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Недостатков
у этого способа виртуализации несколько.
Во-первых, образы получаются довольно
тяжеловесными. Даже Linux с графической
подсистемой требует нескольких гигабайт
места на диске и как минимум одного
гигабайта оперативной памяти для работы.
Во-вторых, из-за полной виртуализации
и требований памяти сложно запустить
несколько работающих контейнеров,
операционная система начинает
подтормаживать. В-третьих, как правило,
отсутствует интерфейс командной строки
- невозможно из терминала включать,
выключать, останавливать, запускать
команды внутри контейнера.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Второй
подход к виртуализации - использование
инструмента, который называется vagrant.
Он позволяет не только запускать, но и
конфигурировать (provisioning) запускаемый
контейнер с помощью отдельного файла
(Vagrantfile). В этом файле можно прописать
конкретные шаги, указать начальный
образ ОС, задать общую (shared) папку, которая
будет доступна, например, и на Windows, и на
Linux.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Этот
инструмент является более гибким и
рассчитан на разработчиков. Вся
“стандартная” функциональность
по-умолчанию выключена. Например, для
того, чтобы “пробросить” звук из
контейнера наружу, придется написать
отдельный скрипт.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Преимущество
инструмента заключается в наличии
скриптового синтаксиса (который, кстати,
ничто иное как программа на языке руби).
У программистов появилась возможность
обмениваться небольшими программами
в виде </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Vagrantfile</SPAN></FONT><FONT FACE="Arial, serif">.
На основе </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Vagrantfile</SPAN></FONT><FONT FACE="Arial, serif">
каждый раз создается один и тот же, точно
такой же, контейнер.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Vagrant</SPAN></FONT><FONT FACE="Arial, serif">
является надстройкой над </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">VirtualBox</SPAN></FONT><FONT FACE="Arial, serif">
(или </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">VMWare</SPAN></FONT><FONT FACE="Arial, serif">),
а поэтому позволяет запускать любые
операционные системы внутри контейнера
(в т.ч. </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Windows</SPAN></FONT><FONT FACE="Arial, serif">).
Если речь идет про </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Linux</SPAN></FONT><FONT FACE="Arial, serif">,
то программисты предпочитают запускать
эту ОС в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Vagrant</SPAN></FONT><FONT FACE="Arial, serif">
без графической подсистемы. </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Это
экономит память и позволяет запускать
несколько контейнеров одновременно.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Часто
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Vagrant</SPAN></FONT><FONT FACE="Arial, serif">
используется в виде окружения для
разработки, т.к. </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Vagrant</SPAN></FONT><FONT FACE="Arial, serif">
позволяет задать т.н. “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">shared</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">folder</SPAN></FONT><FONT FACE="Arial, serif">”
- папку, которая будет доступна внутри
контейнера и снаружи. В этом случае
запуск программ происходит внутри
контейнера, а редактирование исходного
кода происходит снаружи. Например, вы
можете редактировать файлы в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Windows</SPAN></FONT><FONT FACE="Arial, serif">,
а запускать программы в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Linux</SPAN></FONT><FONT FACE="Arial, serif">.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Представьте,
что вы устроились на новую работу
программистом, первый день, вам дают
новый компьютер и инструкцию. В инструкции
написано: </FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><I>Дорогой
друг! Добро пожаловать в нашу команду.
Мы работаем над проектом Х, это
веб-приложение на </I></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>Ruby</I></SPAN></FONT><FONT FACE="Arial, serif"><I>
</I></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>on</I></SPAN></FONT><FONT FACE="Arial, serif"><I>
</I></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>Rails</I></SPAN></FONT><FONT FACE="Arial, serif"><I>,
для того, чтобы ты смог начать разработку,
тебе необходимо установить:</I></FONT></P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><I>MySQL
	(займет 1 час)</I></SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><I>Ruby,
	node.js, rvm, nvm (3 часа)</I></SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><I>Установить
	redis (20 минут)</I></SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><I>Установить
	</I></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>git</I></SPAN></FONT><FONT FACE="Arial, serif"><I>
	и задать его параметры (1 час)</I></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%">“<FONT FACE="Arial, serif"><SPAN LANG="en"><I>Склонировать”
	последнюю версию кода </I></SPAN></FONT>
	</P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><I>Запустить
	команды для обновления базы данных</I></FONT></P>
</UL>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">На
каждый пункт - отдельная инструкция.
Где и какую версию взять, как поставить,
какие параметры указать при установке
и так далее. Но более профессиональная
команда разработчиков могла бы дать
другие инструкции:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><I>Дорогой
друг! Добро пожаловать в нашу команду.
Мы работаем над проектом Х, это
веб-приложение на </I></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>Ruby</I></SPAN></FONT><FONT FACE="Arial, serif"><I>
</I></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>on</I></SPAN></FONT><FONT FACE="Arial, serif"><I>
</I></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>Rails</I></SPAN></FONT><FONT FACE="Arial, serif"><I>.
Для того, чтобы ты смог начать разработку,
тебе достаточно установить </I></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>Vagrant</I></SPAN></FONT><FONT FACE="Arial, serif"><I>,
“склонировать” этот репозиторий и
запустить “</I></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>vagrant</I></SPAN></FONT><FONT FACE="Arial, serif"><I>
</I></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>up</I></SPAN></FONT><FONT FACE="Arial, serif"><I>”.
Процесс займет какое-то время, но все
произойдет автоматически, а ты пока
можешь попить кофе. Когда все будет
готово, ты увидишь рабочую программу!
Если что-то пойдет не так, то это будет
наша проблема, ведь у нас существует
единый контейнер, это единый стандарт
среды разработки для всех членов команды,
и мы поддерживаем этот контейнер в
актуальном состоянии.</I></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Третий
способ виртуализации - </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Docker</SPAN></FONT><FONT FACE="Arial, serif">,
с которым мы уже немного знакомы. Докер
позволяет запускать легковесные
контейнеры, которые были созданы
специально для виртуализации. Например,
образ на основе </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Linux</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">alpine</SPAN></FONT><FONT FACE="Arial, serif">
может занимать всего 5 мегабайт.
Следовательно, на одном компьютере
можно запустить десятки и даже сотни
таких легковесных контейнеров.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">При
работе с докером полезно отличать
контейнер (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">container</SPAN></FONT><FONT FACE="Arial, serif">)
от образа (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">image</SPAN></FONT><FONT FACE="Arial, serif">).
Образ - это какой-то шаблон, как чертёж,
класс в программировании. Сам по себе
образ не является живым организмом, он
просто хранится на диске, в сети (например,
в хранилище образов, которое называется
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Docker</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Hub</SPAN></FONT><FONT FACE="Arial, serif">).
Но контейнер это уже деталь, изготовленная
на основе чертежа, это экземпляр класса,
объект. </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Поэтому
возможны следующие основные операции:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">с
	контейнером: создать и запустить (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">run</SPAN></FONT><FONT FACE="Arial, serif">
	и </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">start</SPAN></FONT><FONT FACE="Arial, serif">),
	остановить (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">stop</SPAN></FONT><FONT FACE="Arial, serif">),
	удалить (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">rm</SPAN></FONT><FONT FACE="Arial, serif">),
	просмотреть список запущенных (&quot;</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ps</SPAN></FONT><FONT FACE="Arial, serif">&quot;
	- от &quot;</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">process</SPAN></FONT><FONT FACE="Arial, serif">
	</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">status</SPAN></FONT><FONT FACE="Arial, serif">&quot;)</FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">с
	образом (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">image</SPAN></FONT><FONT FACE="Arial, serif">):
	удалить (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">rmi</SPAN></FONT><FONT FACE="Arial, serif">),
	просмотреть список доступных (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">images</SPAN></FONT><FONT FACE="Arial, serif">)</FONT></P>
</UL>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Имея
в голове представление об образах и
контейнерах гораздо проще понять работу
с докером. У нас нет цели дать исчерпывающее
руководство по этому инструменту, но
некоторые команды могут быть полезны
на начальном этапе:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">`docker
	version` - показывает версию докера</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">`</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">docker</SPAN></FONT><FONT FACE="Arial, serif">
	</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ps</SPAN></FONT><FONT FACE="Arial, serif">`
	- показывает список запущенных контейнеров
	(аналогично </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">shell</SPAN></FONT><FONT FACE="Arial, serif">-команде
	`</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ps</SPAN></FONT><FONT FACE="Arial, serif">`)</FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">`</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">docker</SPAN></FONT><FONT FACE="Arial, serif">
	</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ps</SPAN></FONT><FONT FACE="Arial, serif">
	-</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">a</SPAN></FONT><FONT FACE="Arial, serif">`
	- показать список всех контейнеров</FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">`docker
	images` - список образов</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">`</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">docker</SPAN></FONT><FONT FACE="Arial, serif">
	</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">rm</SPAN></FONT><FONT FACE="Arial, serif">
	</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">container</SPAN></FONT><FONT FACE="Arial, serif">_</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">name</SPAN></FONT><FONT FACE="Arial, serif">`
	- удалить контейнер по имени</FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">`</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">docker</SPAN></FONT><FONT FACE="Arial, serif">
	</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">rm</SPAN></FONT><FONT FACE="Arial, serif">
	</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">f</SPAN></FONT><FONT FACE="Arial, serif">767</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ff</SPAN></FONT><FONT FACE="Arial, serif">6</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ecebf</SPAN></FONT><FONT FACE="Arial, serif">`
	- удалить контейнер по </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ID</SPAN></FONT></P>
</UL>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Запуск
контейнера нам уже знаком:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">docker
run -it --name xxx -p 4567:4567 ro31337/rubybook-save-the-planet</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Посмотреть
справку по команде &quot;</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">run</SPAN></FONT><FONT FACE="Arial, serif">&quot;
можно с помощью команды оболочки `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">docker</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">run</SPAN></FONT><FONT FACE="Arial, serif">
--</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">help</SPAN></FONT><FONT FACE="Arial, serif">`
(вместо &quot;</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">run</SPAN></FONT><FONT FACE="Arial, serif">&quot;
можно ввести любую другую команду
докера).</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Полезны
также следующие команды (они используются
как основа для скрипта ниже):</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">`</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">docker</SPAN></FONT><FONT FACE="Arial, serif">
	</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ps</SPAN></FONT><FONT FACE="Arial, serif">
	-</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">a</SPAN></FONT><FONT FACE="Arial, serif">
	-</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">q</SPAN></FONT><FONT FACE="Arial, serif">`
	- вывести список всех идентификаторов
	существующих контейнеров</FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">`</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">docker</SPAN></FONT><FONT FACE="Arial, serif">
	</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">images</SPAN></FONT><FONT FACE="Arial, serif">
	-</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">q</SPAN></FONT><FONT FACE="Arial, serif">`
	- вывести список всех идентификаторов
	существующих образов</FONT></P>
</UL>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Скрипт,
который позволяет остановить все
контейнеры, удалить все контейнеры и
удалить все образы:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">docker
stop $(docker ps -a -q)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">docker
rm $(docker ps -a -q)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">docker
rmi $(docker images -q)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Скрипт
выше можно использовать в случае когда
что-то пошло не так, и вы хотите начать
с чистого листа.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_70o2hevxe03e"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt"><SPAN LANG="en">Ruby</SPAN></FONT></FONT><FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt">
</FONT></FONT><FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt"><SPAN LANG="en">Version</SPAN></FONT></FONT><FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt">
</FONT></FONT><FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt"><SPAN LANG="en">Manager</SPAN></FONT></FONT><FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt">
(</FONT></FONT><FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt"><SPAN LANG="en">RVM</SPAN></FONT></FONT><FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt">)</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Информация
в этом разделе является очень важной
для любого начинающего руби программиста.
Возможно, стоило бы дать эту информацию
в самом начале, но наша основная задача
заключалась в быстром старте. А информация
про менеджер версий руби (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ruby</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">version</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">manager</SPAN></FONT><FONT FACE="Arial, serif">
или сокращенно </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">rvm</SPAN></FONT><FONT FACE="Arial, serif">)
может потребовать понимания и привычки.
Поэтому мы не хотели пугать новичков
переде тем, как они напишут первую
программу и сделают что-то осмысленное.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Примечание:
если информация из этой главы вам
покажется сложной, можно отложить ее
до лучших времен.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Rvm</SPAN></FONT><FONT FACE="Arial, serif">
это надстройка для вашей оболочки
(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">shell</SPAN></FONT><FONT FACE="Arial, serif">),
которой может являться или </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">bash</SPAN></FONT><FONT FACE="Arial, serif">,
или </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">zsh</SPAN></FONT><FONT FACE="Arial, serif">,
или что-то еще (например, </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">RubyMine</SPAN></FONT><FONT FACE="Arial, serif">).
Каждый программист запускает программу
в своем терминале с помощью команды
`</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ruby</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">app</SPAN></FONT><FONT FACE="Arial, serif">.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">rb</SPAN></FONT><FONT FACE="Arial, serif">`.
Но откуда берется исполняемый файл
`</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ruby</SPAN></FONT><FONT FACE="Arial, serif">`?
Давайте посмотрим что выдает команда
`</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">which</SPAN></FONT><FONT FACE="Arial, serif">`
на системе без </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">rvm</SPAN></FONT><FONT FACE="Arial, serif">:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">$
which ruby</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">/usr/bin/ruby</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Другими
словами, интерпретатор руби находится
в `/</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">usr</SPAN></FONT><FONT FACE="Arial, serif">/</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">bin</SPAN></FONT><FONT FACE="Arial, serif">/</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ruby</SPAN></FONT><FONT FACE="Arial, serif">`.
Если удалить этот файл, то программы
запускаться не будут. Но откуда система
знает, что руби нужно брать именно из
каталога `/</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">usr</SPAN></FONT><FONT FACE="Arial, serif">/</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">bin</SPAN></FONT><FONT FACE="Arial, serif">`?
Давайте посмотрим значение переменной
`$</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">PATH</SPAN></FONT><FONT FACE="Arial, serif">`
(путь) в нашей оболочке (ваш вывод может
немного отличаться):</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">$
echo $PATH</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Ага,
переменная `$</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">PATH</SPAN></FONT><FONT FACE="Arial, serif">`
содержит несколько директорий, разделенных
двоеточием:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">/usr/local/bin</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">/</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">usr</SPAN></FONT><FONT FACE="Arial, serif">/</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">bin</SPAN></FONT><FONT FACE="Arial, serif">
	(директория с интерпретатором руби)</FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">/bin</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">/usr/sbin</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">/sbin</SPAN></FONT></P>
</UL>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Когда
вы вводите команду `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ruby</SPAN></FONT><FONT FACE="Arial, serif">`
оболочка пытается найти файл в первой
директории, если не находит то во второй
и так далее. Если переопределить эту
переменную особым образом, то можно
заставить оболочку искать исполняемый
файл где-либо еще (вы уже поняли, что для
переопределения надо добавлять новый
путь в начало, а не в конец). Но где
добавлять этот путь?</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Настройки
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">bash</SPAN></FONT><FONT FACE="Arial, serif">
хранятся в вашем домашнем каталоге
(получить путь к дом.каталогу можно с
помощью команды `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">echo</SPAN></FONT><FONT FACE="Arial, serif">
$</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">HOME</SPAN></FONT><FONT FACE="Arial, serif">`
или `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">echo</SPAN></FONT><FONT FACE="Arial, serif">
~`) в файле с именем `.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">bashrc</SPAN></FONT><FONT FACE="Arial, serif">`.
Настройки </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">zsh</SPAN></FONT><FONT FACE="Arial, serif">
хранятся в `~/.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">zshrc</SPAN></FONT><FONT FACE="Arial, serif">`.
Возможно, в этих файлах уже есть
определение переменной `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">PATH</SPAN></FONT><FONT FACE="Arial, serif">`.
Но зачем это нужно нам?</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Дело
в том, что на самом деле существует много
различных языков руби. Да-да, тот руби,
про который мы все это время говорили
это не просто руби, а руби какой-то
определенной версии. Узнать свою версию
можно с помощью команды:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">$
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ruby</SPAN></FONT><FONT FACE="Arial, serif">
-</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">v</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">ruby</SPAN></FONT><FONT FACE="Arial, serif">
2.3.3</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">p</SPAN></FONT><FONT FACE="Arial, serif">222
(2016-11-21 </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">revision</SPAN></FONT><FONT FACE="Arial, serif">
56859) [</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">universal</SPAN></FONT><FONT FACE="Arial, serif">.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">x</SPAN></FONT><FONT FACE="Arial, serif">86_64-</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">darwin</SPAN></FONT><FONT FACE="Arial, serif">17]</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Системный
руби - тот самый, который находится в
директории `/</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">usr</SPAN></FONT><FONT FACE="Arial, serif">/</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">bin</SPAN></FONT><FONT FACE="Arial, serif">`
и который поставляется вместе с вашей
операционной системой (если это не
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Windows</SPAN></FONT><FONT FACE="Arial, serif">).
Скорее системный руби не является самой
последней версией языка. Вполне вероятно,
что существуют более актуальные версии,
с новыми возможностями и улучшенной
производительностью. Но как об этом
узнать и как пользоваться всегда самой
последней версией?</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Но
не будем спешить. &quot;</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">C</SPAN></FONT><FONT FACE="Arial, serif">амая
последняя версия языка руби&quot; скорее
всего вам не понравится. Дело не в том,
что руби плохой, а в том, что самая
последняя и самая свежая версия языка
руби (а также многих других программных
продуктов) не самая стабильная. Существуют
т.н. &quot;ночные сборки&quot; (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">nightly</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">builds</SPAN></FONT><FONT FACE="Arial, serif">).
Смысл в том, что все изменения, которые
произошли за последний день собираются
в одну ветку и в автоматическом режиме
компилируются.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Краткая
справка: компиляция это трансляция
исходного кода в код машинный. А вот
программы, написанные на руби, не
компилируются, а интерпретируются: мы
ведь запускаем программы с помощью
команды `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ruby</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">app</SPAN></FONT><FONT FACE="Arial, serif">.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">rb</SPAN></FONT><FONT FACE="Arial, serif">`,
а не просто `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">app</SPAN></FONT><FONT FACE="Arial, serif">`.
Поэтому такого понятия как &quot;сборка&quot;
(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">build</SPAN></FONT><FONT FACE="Arial, serif">)
в руби не существует. Однако, по привычке
многие программисты называют &quot;билдом&quot;
успешный запуск всех тестов. </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Сам
же язык руби написан на языке Си. Если
вызвать команду `show-method loop` в &quot;pry&quot;,
то можно в этом убедиться. </SPAN></FONT><FONT FACE="Arial, serif">Поэтому
ночная сборка самого языка существует.Однако,
по привычке многие программисты называют
&quot;билдом&quot; успешный запуск всех
тестов. </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Сам
же язык руби написан на языке Си. Если
вызвать команду `show-method loop` в &quot;pry&quot;,
то можно в этом убедиться. </SPAN></FONT><FONT FACE="Arial, serif">Поэтому
ночная сборка самого языка существует.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">К
слову, известный браузер </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Firefox</SPAN></FONT><FONT FACE="Arial, serif">
тоже существует в виде ночных сборок.
Вот что такое ночная сборка по версии
команды разработчиков </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Firefox</SPAN></FONT><FONT FACE="Arial, serif">
(с сайта </FONT><A HREF="https://wiki.mozilla.org/Nightly"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>://</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>wiki</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>.</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>mozilla</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>.</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>org</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>/</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>Nightly</U></SPAN></FONT></FONT></A><FONT FACE="Arial, serif">):</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><I>&gt;
Каждый день разработчики </I></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>Mozilla</I></SPAN></FONT><FONT FACE="Arial, serif"><I>
пишут код, который сливается в общий
репозиторий кода, и каждый день этот
код компилируется. Таким образом
создается пре-релизная версия </I></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>Firefox</I></SPAN></FONT><FONT FACE="Arial, serif"><I>,
основанная на этом коде с целью
тестирования. Вот что мы называем ночной
сборкой. Когда этот код становится
стабильным, он сливается в репозиторий
со стабильным кодом (</I></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>Beta</I></SPAN></FONT><FONT FACE="Arial, serif"><I>
и </I></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>Dev</I></SPAN></FONT><FONT FACE="Arial, serif"><I>
</I></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>edition</I></SPAN></FONT><FONT FACE="Arial, serif"><I>),
где этот код будет отполирован пока мы
не достигнем уровня качества, который
позволит нам выпустить новую окончательную
версию </I></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><I>Firefox
для сотен миллионов людей.</I></SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Помимо
ночной сборки языка руби существует
также и </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">preview</SPAN></FONT><FONT FACE="Arial, serif">-сборка,
которая отличается от ночной тем, что
она немного стабильнее. Но сборка,
которая интересует нас так и называется
- &quot;стабильная&quot; (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">stable</SPAN></FONT><FONT FACE="Arial, serif">).
Поэтому мы не заинтересованы в самой
последней версии языка, нас интересует
стабильная версия. Чтобы узнать какая
именно версия стабильная, можно пройти
на официальный сайт в раздел &quot;</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Downloads</SPAN></FONT><FONT FACE="Arial, serif">&quot;
</FONT><A HREF="https://www.ruby-lang.org/en/downloads/"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>://</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>www</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>.</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>ruby</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>-</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>lang</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>.</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>org</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>/</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>en</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>/</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>downloads</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>/</U></FONT></FONT></A><FONT FACE="Arial, serif">,
где будет написано:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">&gt;
The current stable version is...</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Можно
скачать эту версию на свой компьютер.
Файл обычно скачивается в виде
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">tar</SPAN></FONT><FONT FACE="Arial, serif">.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">gz</SPAN></FONT><FONT FACE="Arial, serif">-архива,
поэтому потребуется его распаковать:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">$
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">tar</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">xzf</SPAN></FONT><FONT FACE="Arial, serif">
~/</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Downloads</SPAN></FONT><FONT FACE="Arial, serif">/</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ruby</SPAN></FONT><FONT FACE="Arial, serif">-</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">X</SPAN></FONT><FONT FACE="Arial, serif">.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Y</SPAN></FONT><FONT FACE="Arial, serif">.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Z</SPAN></FONT><FONT FACE="Arial, serif">.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">tar</SPAN></FONT><FONT FACE="Arial, serif">.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">gz</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Но
распаковав этот файл вы увидите исходный
код языка, а не готовый исполняемый файл
(войдите в директорию: `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">cd</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ruby</SPAN></FONT><FONT FACE="Arial, serif">-</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">X</SPAN></FONT><FONT FACE="Arial, serif">.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Y</SPAN></FONT><FONT FACE="Arial, serif">.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Z</SPAN></FONT><FONT FACE="Arial, serif">`
и выполните команду `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ls</SPAN></FONT><FONT FACE="Arial, serif">
-</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">lah</SPAN></FONT><FONT FACE="Arial, serif">`).
Поэтому язык руби нужно &quot;собрать&quot;,
просто для того, чтобы у вас в итоге
получился исполняемый файл, с помощью
которого уже можно будет запускать
программы:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">$
cd ruby-X.Y.Z</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">$
./configure</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">checking
for ruby... /usr/bin/ruby</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">tool/config.guess
already exists</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">tool/config.sub
already exists</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">checking
build system type... x86_64-apple-darwin17.6.0</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">checking
host system type... x86_64-apple-darwin17.6.0</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">checking
target system type... x86_64-apple-darwin17.6.0</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">checking
for clang... clang</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">checking
for gcc... (cached) clang</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">...</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">$
make</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Arial, serif"><SPAN LANG="en">CC
= clang</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Arial, serif"><SPAN LANG="en">LD
= ld</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">...</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">После
сборки в текущей директории появится
бинарный исполняемый файл, который
можно запустить:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">$
./ruby -v</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">ruby
2.5.1p57 (2018-03-29 revision 63029) [x86_64-darwin17]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Префикс
`./` говорит о том, что нужно запустить
файл в текущей директории, а не тот,
который находится у вас в пути (переменная
оболочки `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">PATH</SPAN></FONT><FONT FACE="Arial, serif">`).
Сравните с тем, что написано выше:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">$
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ruby</SPAN></FONT><FONT FACE="Arial, serif">
-</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">v</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">ruby</SPAN></FONT><FONT FACE="Arial, serif">
2.3.3</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">p</SPAN></FONT><FONT FACE="Arial, serif">222
(2016-11-21 </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">revision</SPAN></FONT><FONT FACE="Arial, serif">
56859) [</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">universal</SPAN></FONT><FONT FACE="Arial, serif">.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">x</SPAN></FONT><FONT FACE="Arial, serif">86_64-</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">darwin</SPAN></FONT><FONT FACE="Arial, serif">17]</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">```</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Если
выполнить команду `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">sudo</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">make</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">install</SPAN></FONT><FONT FACE="Arial, serif">`,
то можно заменить системный руби только
что скомпилированной версией языка.
Вот только на </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">macOS</SPAN></FONT><FONT FACE="Arial, serif">
новая версия языка будет установлена
в /</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">usr</SPAN></FONT><FONT FACE="Arial, serif">/</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">local</SPAN></FONT><FONT FACE="Arial, serif">/</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">bin</SPAN></FONT><FONT FACE="Arial, serif">.
А текущий системный руби установлен в
/</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">usr</SPAN></FONT><FONT FACE="Arial, serif">/</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">bin</SPAN></FONT><FONT FACE="Arial, serif">.
Но это не проблема, т.к. первая директория
находится перед последней в переменной
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">PATH</SPAN></FONT><FONT FACE="Arial, serif">
(выполните команду `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">echo</SPAN></FONT><FONT FACE="Arial, serif">
$</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">PATH</SPAN></FONT><FONT FACE="Arial, serif">`).
Необходимо перезапустить ваш терминал
чтобы оболочка приняла изменения (или
выполнить команду `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">source</SPAN></FONT><FONT FACE="Arial, serif">
~/.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">bashrc</SPAN></FONT><FONT FACE="Arial, serif">`,
`</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">source</SPAN></FONT><FONT FACE="Arial, serif">
~/.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">zshrc</SPAN></FONT><FONT FACE="Arial, serif">`
- в зависимости от типа используемой
оболочки).</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Согласитесь,
что все это как-то сложно и не очень
удобно. Но зачем это сделано? Дело в том,
что руби один, а операционных систем
много. Это не только </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Windows</SPAN></FONT><FONT FACE="Arial, serif">,
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">macOS</SPAN></FONT><FONT FACE="Arial, serif">,
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Linux</SPAN></FONT><FONT FACE="Arial, serif">,
но также и разные версии этих операционных
систем. Каждая ОС имеет свои настройки,
которые оказывают влияние на
производительность. Чтобы язык руби
использовал все эти возможности,
необходимо &quot;собрать&quot; (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">build</SPAN></FONT><FONT FACE="Arial, serif">)
этот язык на точно таком же компьютере
как у вас (или на вашем собственном).
Ведь даже на одинаковых операционных
системах может отличаться тип процессора!
А одна оптимизация на уровне процессора
работает на одном компьютере, и не
работает на другом. Например, один
компьютер может быть новее, с более
мощным и усовершенствованным процессором,
а другой с устаревшим.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Мы
собрали язык руби, обновили системный
руби, и больше через этот этап мы проходить
не будем! Но, как говорил Стив Джобс,
&quot;</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">there</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">is</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">one</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">more</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">thing</SPAN></FONT><FONT FACE="Arial, serif">&quot;.
Не все так просто в мире разработки (и
именно за это нам платят деньги).</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Вы,
наверное, обратили внимание, что версия
почему-то выражается в трех цифрах. Не
руби 1, 10, 42, а руби 2.3.3, руби 2.5.1 и так
далее. Зачем нужны три цифры вместо
одной?</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Существует
такое понятие как “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Semantic</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Versioning</SPAN></FONT><FONT FACE="Arial, serif">”
(или сокращенно “</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">SemVer</SPAN></FONT><FONT FACE="Arial, serif">”,
“семантические версии” или “семантическая
версионность”). Подробная информация
по </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">semver</SPAN></FONT><FONT FACE="Arial, serif">
доступна по адресу </FONT><A HREF="https://semver.org/lang/ru/"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>://</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>semver</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>.</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>org</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>/</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>lang</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>/</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>ru</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>/</U></FONT></FONT></A><FONT FACE="Arial, serif">.
Вот краткая справка с этого сайта:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">===</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Учитывая
номер версии МАЖОРНАЯ.МИНОРНАЯ.ПАТЧ,
следует увеличивать:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">МАЖОРНУЮ
версию, когда сделаны обратно несовместимые
изменения </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">API</SPAN></FONT><FONT FACE="Arial, serif">.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">МИНОРНУЮ
версию, когда вы добавляете новую
функциональность, не нарушая обратной
совместимости.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">ПАТЧ-версию,
когда вы делаете обратно совместимые
исправления.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Дополнительные
обозначения для предрелизных и
билд-метаданных возможны как дополнения
к МАЖОРНАЯ.МИНОРНАЯ.ПАТЧ формату.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">===</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Другими
словами, в версии руби 2.3.1 мажорная
версия это 2, минорная это 3, а патч это
1. </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Попробуем
в этом разобраться, потому что это важно.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Дело
в том, что процесс разработки любой
программы может включать:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">исправление
	багов - увеличивается патч-версия</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">улучшение
	функциональности (добавление фич) -
	увеличивается минорная версия</FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">серьезные
	изменения всей программы - увеличивается
	мажорная версия</FONT></P>
</UL>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">В
случае исправления багов программа
остается в принципе такой же. Две версии
может и отличаются, но ненамного. Две
версии языка руби в этом случае были бы
абсолютно идентичными, за исключением
каких-то, возможно редких, исправленных
багов. Можно было бы заменить одну версию
на другую без особых проблем. Но чтобы
понять какая версия лучше, увеличивают
патч.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Например,
программа была версии 0.1.0 (рекомендуемая
начальная версия в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">semver</SPAN></FONT><FONT FACE="Arial, serif">),
а стала 0.1.1. </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Значит
что-то исправили и 0.1.1 лучше. </SPAN></FONT><FONT FACE="Arial, serif">Или,
например, программа была версии 0.1.9, а
стала 0.1.10. Что-то исправили в версии
0.1.9 и увеличили патч-версию на единицу.
Но по сути 0.1.10 можно заменить даже на
0.1.0, ничего страшного не должно произойти.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">В
случае улучшения функциональности
какой-либо программы, в старых версиях
этой функциональности не существует.
Что это означает для языка руби? Например,
в новой версии появляется новый оператор
&quot;</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">yeah</SPAN></FONT><FONT FACE="Arial, serif">&quot;,
который выводит на экран строку &quot;</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Oh</SPAN></FONT><FONT FACE="Arial, serif">,
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">yeah</SPAN></FONT><FONT FACE="Arial, serif">!&quot;.
Мы пишем программу на новой версии, а
потом по какой-то причине &quot;откатываемся&quot;
на старую. Но в старой версии нет этого
оператора и наша программа не работает!
Чтобы дать остальным понять, что эта
программа новая и обратно с нее
откатываться нельзя, мы увеличиваем
минорную версию </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">(та,
что посередине), а заодно и сбрасываем
патч-версию в ноль. </SPAN></FONT><FONT FACE="Arial, serif">Например,
программа была 0.1.10, а будет 0.2.0. Разумеется,
что новая версия включает в себе все
патчи из предыдущей. Но т.к. она содержит
новую функциональность, минорная версия
увеличена на единицу.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Если
посмотреть на язык руби, то версия 2.3.3
и 2.5.1 отличается на 2 по минорной версии.
Это значит, что в версии 2.4.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">x</SPAN></FONT><FONT FACE="Arial, serif">
и 2.5.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">x</SPAN></FONT><FONT FACE="Arial, serif">
была представлена какая-то новая
функциональность. И если написать
программу на 2.5.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">x</SPAN></FONT><FONT FACE="Arial, serif">
с использованием этой функциональности,
то она не будет работать на всех версиях
ниже (на 2.4.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">x</SPAN></FONT><FONT FACE="Arial, serif">,
2.3.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">x</SPAN></FONT><FONT FACE="Arial, serif">
и т.д.).</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Мажорную
версию увеличивают в двух случаях:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">С
	нуля до единицы когда софт точно готов
	к использованию в </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">production</SPAN></FONT><FONT FACE="Arial, serif">
	(об этом не говорится в документации к
	</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">semver</SPAN></FONT><FONT FACE="Arial, serif">)</FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">С
	единицы выше - когда вводятся
	обратно-несовместимые изменения
	(говорят &quot;</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">breaks</SPAN></FONT><FONT FACE="Arial, serif">
	</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">backwards</SPAN></FONT><FONT FACE="Arial, serif">
	</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">compatibility</SPAN></FONT><FONT FACE="Arial, serif">&quot;)
	или когда происходит серьезное
	обновление.</FONT></P>
</UL>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Другими
словами, если версия была 0.2.0, а стала
1.0.0, то есть большая вероятность того,
что программы написанные на 0.2.0 не будут
работать в версии 1.0.0. </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Другими
словами, при увеличении мажорной версии
все что вы написали раньше превращается
в тыкву! </SPAN></FONT><FONT FACE="Arial, serif">Приходится
переписывать все заново!</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Но
это в самом худшем случае. Обычно при
обновлении мажорной версии даются
подробные инструкции о том, как перейти
именно на новейшую версию. Отсюда
возникает философия разработки любого
программного продукта, а в особенности
фреймворка или языка программирования.
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Как развивать
программу?</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Что
	делать, быстро двигаться вперед, не
	оглядываясь на то, что было сделано
	ранее, ломать обратную совместимость
	и забыть про прошлое?</FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Или
	все-таки исповедовать консервативный
	подход - поддерживать старые версии,
	т.к. существует множество уже написанного
	кода. Выкатывать новую версию означает
	в какой-то момент перестать поддерживать
	старую. Но у старой версии есть
	пользователи, что с ними делать?</FONT></P>
</UL>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Многие
команды, отвечающие за выпуск языков,
фреймворков и других программных
продуктов пытаются найти баланс.
Например, открыто заявляют о том, какие
версии поддерживаются (</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">maintained</SPAN></FONT><FONT FACE="Arial, serif">),
какие уже пришли к </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">EOL</SPAN></FONT><FONT FACE="Arial, serif">
(</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">of</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">life</SPAN></FONT><FONT FACE="Arial, serif">
- конец жизни), а какие поддерживаются
сейчас только в режиме исправления
проблем с безопасностью </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">(security
maintenance phase). </SPAN></FONT><FONT FACE="Arial, serif">В любом
случае, руби не стоит на месте, компании
вынуждены переходить с более старых
версий на новые. Ведь никто не хочет
оказаться наедине с версией языка </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ruby</SPAN></FONT><FONT FACE="Arial, serif">,
которой уже пришел </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">EOL</SPAN></FONT><FONT FACE="Arial, serif">.
Поэтому компании платят деньги нам,
программистам, и мы аккуратно переводим
системы с одной версии на другую </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">(и
тут нам очень помогают наши юнит-тесты).</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Мы
разобрались с проблемами, которые
существуют в виду того, что язык руби
растет и развивается. И у бизнеса
возникает резонный вопрос: &quot;окей,
версии языка бывают разные, где-то можно
обновить версию языка на новую, где-то
нельзя и приходиться пользоваться
старой, но системный руби-то всегда
одной версии! Что нам делать, если у нас
два проекта? Один требует старой, другой
новой версии. Каждый раз перекомпилировать
руби и устанавливать его в систему? А
если проекта два и один через </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">API</SPAN></FONT><FONT FACE="Arial, serif">
общается с другим, и при этом их нужно
запустить на одном и том же компьютере?&quot;.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Но
все гениальное просто! Давайте просто
создадим директорию, в которой будем
хранить все версии языка:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">2.5.1</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">2.3.3</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">2.0.0</SPAN></FONT></P>
</UL>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">и
так далее. Каждый руби назовем по-своему:
`</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ruby</SPAN></FONT><FONT FACE="Arial, serif">-2.5.1`,
`</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ruby</SPAN></FONT><FONT FACE="Arial, serif">-2.3.3`,
и т.д. И вместо запуска `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ruby</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">app</SPAN></FONT><FONT FACE="Arial, serif">.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">rb</SPAN></FONT><FONT FACE="Arial, serif">`
будем использовать `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ruby</SPAN></FONT><FONT FACE="Arial, serif">-2.5.1
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">app</SPAN></FONT><FONT FACE="Arial, serif">.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">rb</SPAN></FONT><FONT FACE="Arial, serif">`.
Отличное решение! Но... </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">there</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">is</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">one</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">more</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">thing</SPAN></FONT><FONT FACE="Arial, serif">.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Помимо
исполняемого файла `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ruby</SPAN></FONT><FONT FACE="Arial, serif">`
существует еще исполняемый файл `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">gem</SPAN></FONT><FONT FACE="Arial, serif">`
(введите `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">which</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">gem</SPAN></FONT><FONT FACE="Arial, serif">`
чтобы посмотреть где этот исполняемый
файл находится). Концепция </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">gem</SPAN></FONT><FONT FACE="Arial, serif">'ов
это концепция дополнительных библиотек
от авторов со всего мира, которые
скачиваются из Интернета при выполнении
команды `</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">gem</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">install</SPAN></FONT><FONT FACE="Arial, serif">
…` и куда-то помещаются на вашем жестком
диске.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">При
этом каждый </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">gem</SPAN></FONT><FONT FACE="Arial, serif">
имеет параметр, который называется
`</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">required</SPAN></FONT><FONT FACE="Arial, serif">_</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">ruby</SPAN></FONT><FONT FACE="Arial, serif">_</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">version</SPAN></FONT><FONT FACE="Arial, serif">`.
Другими словами, если вы установили </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">gem</SPAN></FONT><FONT FACE="Arial, serif">
для версии 2.5.1, не факт что он будет
работать для версии 2.3.3. Поэтому вместе
с созданием директории для разных версий
руби нам нужно еще создать директории
для разных версий </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">gem</SPAN></FONT><FONT FACE="Arial, serif">’ов.
Получается, что иметь на одном компьютере
сразу несколько версий руби невозможно?
</FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Возможно.
Если бы мы продолжали наши эксперименты,
то рано или поздно мы бы нашли способ
самостоятельно установить разные версии
руби таким образом, чтобы все прекрасно
работало. </SPAN></FONT><FONT FACE="Arial, serif">Однако,
эта проблема беспокоила не только нас.
Программисты со всего мира пришли к
выводу, что должны быть способы проще.
И родилась концепция “менеджера версий
руби” - </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Ruby</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Version</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Manager</SPAN></FONT><FONT FACE="Arial, serif">,
или </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">RVM</SPAN></FONT><FONT FACE="Arial, serif">.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">RVM</SPAN></FONT><FONT FACE="Arial, serif">
сам по себе не является чем-то уникальным
для руби. Для других языков тоже существуют
менеджеры версий. Например, для языка
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">JavaScript</SPAN></FONT><FONT FACE="Arial, serif">
существует </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">NVM</SPAN></FONT><FONT FACE="Arial, serif">
- </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Node</SPAN></FONT><FONT FACE="Arial, serif">.</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">js</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Version</SPAN></FONT><FONT FACE="Arial, serif">
</FONT><FONT FACE="Arial, serif"><SPAN LANG="en">Manager</SPAN></FONT><FONT FACE="Arial, serif">.
Мы рассмотрим </FONT><FONT FACE="Arial, serif"><SPAN LANG="en">rvm</SPAN></FONT><FONT FACE="Arial, serif">,
но основные концепции также справедливы
и для многих других языков.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Для
начала про установку. Инструкции для
установки доступны на сайте </FONT><A HREF="https://rvm.io/"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>://</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>rvm</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>.</U></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>io</U></SPAN></FONT></FONT><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><U>/</U></FONT></FONT></A><FONT FACE="Arial, serif">,
а краткая справка сообщает о том, что
это такое:</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">&gt;
RVM это инструмент для командной строки,
который позволяет вам легко установить,
управлять, и работать с несколькими
руби-окружениями: от интерпретаторов
до наборов gem’ов</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Sets
of gems - набор gem’ов (или gemset) важное понятие,
мы вскоре с ним познакомимся. RVM
устанавливается с помощью двух команд
(скопируйте их с сайта rvm, т.к. команды
ниже могут устареть):</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
gpg --keyserver hkp://keys.gnupg.net --recv-keys
409B6B1796C275462A1703113804BB82D39DC0E3
7D2BAF1CF37B13E2069D6956105BD0E739499BDB</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
\curl -sSL https://get.rvm.io | bash -s stable</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Если
присмотреться к логам установки, то
можно увидеть следующий текст (у вас он
может быть немного другим):</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2 STYLE="font-size: 9pt"><SPAN LANG="en">Installing
RVM to /Users/ro/.rvm/</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2 STYLE="font-size: 9pt"><SPAN LANG="en">	Adding
rvm PATH line … /Users/ro/.bashrc /Users/ro/.zshrc.</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2 STYLE="font-size: 9pt"><SPAN LANG="en">	Adding
rvm loading line to ... /Users/ro/.bash_profile /Users/ro/.zlogin.</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2 STYLE="font-size: 9pt"><SPAN LANG="en">Installation
of RVM in /Users/ro/.rvm/ is almost complete:</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2 STYLE="font-size: 9pt"><SPAN LANG="en">*
To start using RVM you need to run `source
/Users/ro/.rvm/scripts/rvm`</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2 STYLE="font-size: 9pt"><SPAN LANG="en">	in
all your open shell windows, in rare cases you need to reopen all
shell windows.</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Установщик
рекомендует вам выполнить `source
/Users/ro/.rvm/scripts/rvm`, если вы хотите начать
использовать rvm без перезапуска терминала.
Теперь мы можем запустить rvm и посмотреть
его версию:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">$
rvm -v</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">rvm
1.29.4 (latest) by Michal Papis, Piotr Kuczynski, Wayne E. Seguin
[https://rvm.io]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Или
справку:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">$
rvm --help</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">Usage:</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">	rvm
[--debug][--trace][--nice] &lt;command&gt; &lt;options&gt;</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">for
example:</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">	rvm
list            	# list installed interpreters</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">	rvm
list known      	# list available interpreters</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">	rvm
install &lt;version&gt;   # install ruby interpreter</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">	rvm
use &lt;version&gt;   	# switch to specified ruby interpreter</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">	rvm
remove &lt;version&gt;	# remove ruby interpreter</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">	rvm
get &lt;version&gt;   	# upgrade rvm: stable, master</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">...</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Установщик
rvm также изменил переменную PATH, о которой
мы говорили выше. При этом rvm установил
себя в домашнюю директорию в каталог
`.rvm` (можете посмотреть ее содержимое с
помощью `ls -lah ~/.rvm`). “Перехватив” таким
образом путь, rvm будет “подсовывать”
вам ту или иную версию руби в зависимости
от обстоятельств. Но какие это
обстоятельства и каким образом rvm будет
“подсовывать” вам ту или иную версию
руби?</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Тут
заключается магия rvm, за которые этот
менеджер версий многие не любят. Секрет
заключается в том, что rvm подменяет
команду оболочки `cd` (change directory - сменить
директорию). Когда вы меняете директорию,
rvm пытается определить какой руби нужно
использовать сейчас. Алгоритм очень
простой (о нем чуть ниже) и у rvm есть два
варианта действий после того, как вы
сменили директорию:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Молча
	(или почти молча) “Подсунуть” вам
	нужную версию руби, чтобы вы ничего не
	заметили</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Не
	делать ничего</SPAN></FONT></P>
</UL>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Но
как именно rvm решает, что нужно подсунуть
вам какую-то версию, в чем заключается
алгоритм? Все очень просто: в руби-сообществе
было достигнуто соглашение о том, текущая
версия руби для определенного проекта
должна храниться в файле `.ruby-version` (с
точкой вначале) в директории проекта.
Этот файл должен просто содержать строку
с версией руби, например `2.5.1`. И при смене
директории в терминале, rvm попробует
“подсунуть” вам эту версию руби “почти
молча”: если она еще не была скачена из
интернета, то rvm сообщит об этом.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Давайте
создадим любую директорию, попробуем
войти в нее, записать в `.ruby-version` версию
руби, потом выйти из директории и снова
в нее войти - это нужно для того, чтобы
сработал rvm, ведь изначально файла
`.ruby-version` в директории не будет. Но прежде,
чем это сделать, посмотрим на текущий
руби и его версию:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">$
ruby -v</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">ruby
2.5.1p57 (2018-03-29 revision 63029) [x86_64-darwin17]</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">$
which ruby</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">/usr/local/bin/ruby</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Теперь
можно попробовать магию rvm:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
mkdir rvm-test </SPAN></FONT><FONT COLOR="#b7b7b7"><FONT FACE="Courier New, serif"><SPAN LANG="en">#
создаем rvm-test</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
cd rvm-test </SPAN></FONT><FONT COLOR="#b7b7b7"><FONT FACE="Courier New, serif"><SPAN LANG="en">#
переходим в эту директорию</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
echo &quot;2.3.1&quot; &gt; .ruby-version </SPAN></FONT><FONT COLOR="#b7b7b7"><FONT FACE="Courier New, serif"><SPAN LANG="en">#
записываем версию 2.3.1 в наш файл</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
cd .. </SPAN></FONT><FONT COLOR="#b7b7b7"><FONT FACE="Courier New, serif"><SPAN LANG="en">#
выходим на уровень вверх</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
cd rvm-test </SPAN></FONT><FONT COLOR="#b7b7b7"><FONT FACE="Courier New, serif"><SPAN LANG="en">#
и снова переходим в эту директорию</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">Required
ruby-2.3.1 is not installed.</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">To
install do: 'rvm install &quot;ruby-2.3.1&quot;'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Вот
это да! Получилось! RVM выдал нам сообщение
о том, что руби версии 2.3.1 не установлен
и сразу же команду для установки
(напоминаем, что список всех команд
доступен в справке: `rvm --help`).</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Запустим
эту команду, RVM попробует найти уже
откомпилированный (бинарный) файл этой
версии ruby именно для вашей операционной
системы где-то у себя на серверах:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Searching
for binary rubies, this might take some time.</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">No
binary rubies available for: osx/10.13/x86_64/ruby-2.3.1.</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Если
файл не будет найден, то будет этой
версии будет скачан с официального
сайта и будет откомпилирован на вашем
компьютере! Согласитесь, что это немного
проще, чем компиляция с помощью
`./configure`, `make` и т.д., которую мы делали
ранее?</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">После
того как файл будет откомпилирован и
установлен, мы сможем проверить версию
воспользоваться установленной версией
языка руби:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">$
ruby -v</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">ruby
2.3.1p112 (2016-04-26 revision 54768) [x86_64-darwin17]</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">$
which ruby</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">/Users/ro/.rvm/rubies/ruby-2.3.1/bin/ruby</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Другими
словами, rvm подменил нам руби на тот,
который был указан в `.ruby-version`:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<TABLE WIDTH=624 CELLPADDING=7 CELLSPACING=0>
	<COL WIDTH=141>
	<COL WIDTH=147>
	<COL WIDTH=292>
	<TR VALIGN=TOP>
		<TD WIDTH=141 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P LANG="en" STYLE="border: none; padding: 0in; widows: 0; orphans: 0">
			<BR>
			</P>
		</TD>
		<TD WIDTH=147 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P STYLE="border: none; padding: 0in; widows: 0; orphans: 0"><FONT FACE="Arial, serif"><SPAN LANG="en">Было:</SPAN></FONT></P>
		</TD>
		<TD WIDTH=292 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P STYLE="border: none; padding: 0in; widows: 0; orphans: 0"><FONT FACE="Arial, serif"><SPAN LANG="en">Стало:</SPAN></FONT></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=141 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P STYLE="border: none; padding: 0in; widows: 0; orphans: 0"><FONT FACE="Arial, serif"><SPAN LANG="en">Версия
			руби:</SPAN></FONT></P>
		</TD>
		<TD WIDTH=147 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P><FONT FACE="Arial, serif"><SPAN LANG="en">ruby </SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><B>2.5.1</B></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">p57</SPAN></FONT></P>
		</TD>
		<TD WIDTH=292 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P><FONT FACE="Arial, serif"><SPAN LANG="en">ruby </SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en"><B>2.3.1</B></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">p112
			</SPAN></FONT>
			</P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=141 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P STYLE="border: none; padding: 0in; widows: 0; orphans: 0"><FONT FACE="Arial, serif"><SPAN LANG="en">Путь
			к руби:</SPAN></FONT></P>
		</TD>
		<TD WIDTH=147 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P><FONT FACE="Arial, serif"><SPAN LANG="en">/usr/local/bin/ruby</SPAN></FONT></P>
		</TD>
		<TD WIDTH=292 BGCOLOR="#ffffff" STYLE="border: 1.00pt solid #000001; padding: 0.07in">
			<P><FONT FACE="Arial, serif"><SPAN LANG="en">/Users/ro/.rvm/rubies/ruby-2.3.1/bin/ruby</SPAN></FONT></P>
		</TD>
	</TR>
</TABLE>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">При
этом старый файл `/usr/local/bin/ruby` остался
на диске. Просто была подмена PATH,
переменной, которая отвечает за пути к
файлам. И теперь наша оболочка просто
обращается к другой директории. И все
это в автоматическом (окей,
полу-автоматическом) режиме.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Иметь
`.ruby-version` в директории проекта очень
важно, т.к. другие программисты будут
точно знать какой версией руби вы
пользовались, когда создавали работали
над проектом. Этот файл позволит избежать
вопросов в команде “а какую версию руби
мне устанавливать для проекта Х?”. Это,
как говорят, single source of truth (единый источник
истины). Если версия обновилась, то вся
команда будет знать, где смотреть. Более
того - если этой версии на компьютере
разработчика нет, то RVM подскажет как
ее установить.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Выше
мы установили нужную версию руби, зная
про секрет RVM. Но можно ли как-нибудь
установить версию руби без этого секрета,
без создания `.ruby-version`?</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Можно.
Воспользуемся двумя командами:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">`rvm
	list known` - выдает список доступных версий
	руби. Нас интересует версии MRI.</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">`rvm
	install ...` - установить руби определенной
	версии, вместо троеточия необходимо
	указать версию языка.</SPAN></FONT></P>
</UL>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">$
rvm install 2.5.1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Searching
for binary rubies, this might take some time.</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">No
binary rubies available for: osx/10.12/x86_64/ruby-2.5.1.</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Continuing
with compilation. Please read 'rvm help mount' to get more
information on binary rubies.</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">...</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Выше
мы ввели команду для установки руби
версии “2.5.1”. Появилась отладочная
информация, которая сказала о том, что
скомпилированной (готовой) версии руби
2.5.1 для нашей операционной системы
(macOS 10.12) пока не существует, поэтому
сейчас будет скачаен и откомпилирован
исходный код языка руби на нашем
компьютере.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Как
вы могли заметить, RVM пытается найти
где-то на своих серверах версии руби по
следующим признакам:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">`osx`
	- тип ОС, может быть Linux, Windows или что-то
	еще (теоретически)</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">`10.12`
	- версия ОС, существует множество разных
	версий как macOS, так и остальных ОС</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">`x86_64`
	- архитектура процессора</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">`ruby-2.5.1`
	- версия языка</SPAN></FONT></P>
</UL>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Если
перемножить количество всевозможных
типов ОС на количество различных версий
этих ОС, на количество возможных
архитектур процессора (не так много), и
на количество версий языка, то получится
довольно большое число. Другими словами,
RVM держит на своих серверах тысячи
откомпилированных версий руби. Некоторые
из этих версий были откомпилированы на
точно таких же компьютерах, как и у вас.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Возникает
вопрос: а зачем нужны откомпилированные
версии? Дело в том, что скачивание
откомпилированной версии занимает
секунды, а компиляция - во много раз
больше. Также можно было бы откомпилировать
одну версию руби сразу для определенного
семейства ОС (например, для macOS от 9 до
10 версий), но каждая ОС может содержать
свои настройки производительности или
тонкие моменты, о которых компилятору
хорошо бы знать.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Но
с точки зрения “потребителя” особенности
работы RVM не очень важны, нас интересует
вопрос как установить и использовать
RVM без дот-файла (файла, начинающегося
с точки: `.ruby-version`). Мы разобрались с тем,
как установить: например, `rvm install 2.5.1`.
Но что же с использованием?</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Представьте,
что установлено несколько версий: 1, 2,
3. Если дот-файлов в каталогах нет, то
нам надо как-то выбирать какую именно
версию мы хотим использовать. Для этого
существует команда оболочки `use`, с очень
простым синтаксисом:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
</SPAN></FONT><FONT FACE="Courier New, serif"><SPAN LANG="en"><B>rvm
use 2.5.1</B></SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">Using
/Users/ro/.rvm/gems/ruby-2.5.1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
</SPAN></FONT><FONT FACE="Courier New, serif"><SPAN LANG="en"><B>ruby
-v</B></SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">ruby
2.5.1p57 (2018-03-29 revision 63029) [x86_64-darwin16]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
</SPAN></FONT><FONT FACE="Courier New, serif"><SPAN LANG="en"><B>rvm
use 2.3.1</B></SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">Using
/Users/ro/.rvm/gems/ruby-2.3.1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
</SPAN></FONT><FONT FACE="Courier New, serif"><SPAN LANG="en"><B>ruby
-v</B></SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">ruby
2.3.1p112 (2016-04-26 revision 54768) [x86_64-darwin16]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Чтобы
вывести список всех установленных руби
существует команда `list`:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
</SPAN></FONT><FONT FACE="Courier New, serif"><SPAN LANG="en"><B>rvm
list</B></SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">   <FONT FACE="Courier New, serif"><SPAN LANG="en">ruby-2.3.1
[ x86_64 ]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">   <FONT FACE="Courier New, serif"><SPAN LANG="en">ruby-2.4.2
[ x86_64 ]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Courier New, serif"><SPAN LANG="en">*
ruby-2.5.0 [ x86_64 ]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">=&gt;
ruby-2.5.1 [ x86_64 ]</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">#
=&gt; - current</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">#
=* - current &amp;&amp; default</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">#
 * - default</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Также
в RVM существует такое понятие как
“default” версия (версия по-умолчанию).
Другими словами та версия, которая будет
автоматически использоваться при
открытии терминала. Ее можно установить
с помощью команды `alias`:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
</SPAN></FONT><FONT FACE="Courier New, serif"><SPAN LANG="en"><B>rvm
alias create default 2.5.1</B></SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">Creating
alias default for ruby-2.5.1.....</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
</SPAN></FONT><FONT FACE="Courier New, serif"><SPAN LANG="en"><B>rvm
use default</B></SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">Using
/Users/ro/.rvm/gems/ruby-2.5.1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Отныне
каждый раз когда мы будем говорить `rvm
use default` будет использоваться версия
2.5.1.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">На
этом наше знакомство с инструментом
RVM закончено. Возможно, что где-то вы
услышите выражение “gemset”, которое
означает ничто иное как “набор gem’ов”.
Но сейчас оно все реже используется,
т.к. при использовании инструмента
Bundler последних версий отпадает
необходимость в таком понятии как
“gemset”. По сути понятие о gemset’ах это
возможность иметь разные наборы gem’ов
для одной и той же версии руби. Но Bundler
уже позволяет иметь разные наборы
gem’ов, и каждый раз когда вы вносите
исправления в Gemfile и вводите “bundle”, все
происходит автоматически и без каких-либо
проблем.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Запоминать
все настройки RVM не нужно, но иметь
представление о том, что это такое
полезно, ведь помимо RVM существуют очень
похожие инструменты для других языков:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">NVM
	- Node.js Version Manager для JavaScript</SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">VirtualEnv
	для Python</SPAN></FONT></P>
</UL>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">И
т.д.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_bahhamdge7z2"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt"><SPAN LANG="en">Тестирование</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Перед
тем, как мы познакомимся с тестированием,
необходимо определиться а что же такое
тестирование. Это понятие достаточно
широкое, а следовательно могут существовать
разные типы тестов.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Например,
перед тем как настоящий инженер захочет
послушать только что собранный из
радиодеталей приёмник, он быстро включит
и выключит питание чтобы посмотреть -
не пойдет ли дым, не допущена ли где-нибудь
фундаментальная ошибка. Такое тестирование
называют smoke-тестами (smoke - дым). Затем
инженер может приступить к &quot;happy path&quot;
(дословно: &quot;счастливый путь&quot;) тесту:
включить приёмник и посмотреть - идет
ли звук и настраивается ли он на частоту
хотя бы какой-нибудь радиостанции.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Перед
запуском в продажу могут быть другие
тесты. Например, нагрузочные: посмотреть
как приёмник расходует батарею. А также
тесты на качество сборки, на стабильность
работы и так далее. Количество и глубина
этих тестов зависят от требований.
Делаем ли мы радиоприёмник для розничной
продажи или это военный образец? Ответы
на эти фундаментальные вопросы определяют
какое именно тестирование нам нужно.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Похожая
картина наблюдается и при разработке
программ. Существует большое количество
тестов для программ: ручные тесты,
автоматизированные, юнит-тесты (модульные
тесты), интеграционные тесты, нагрузочные.
Чтобы познакомиться со всеми типами
тестов потребуется не один день. Мы
рассмотрим тесты, с которыми чаще всего
встречается программист: это юнит-тесты
(unit tests, от англ. &quot;unit&quot; - модуль или
часть). Что же такое юнит-тест и зачем
он нужен?</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Не
так давно про тесты никто не думал.
Программы создавали в текстовом
редакторе, проверяли их работу и сразу
же запускали (или отправляли своим
клиентам на дискетах, CD-ROM'ах, а позднее
и через Интернет). Если возникала какая-то
ошибка, то ее исправляли. Таким образом,
в новой версии (новом релизе) программы
могло быть исправлено несколько ошибок.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Но
сложность программ возрастала. Возрастало
и количество разработчиков в командах.
Нередко получалось так, что небольшое,
казалось бы, улучшение вызывает ошибку.
Эти ошибки, конечно, отлавливались
командой ручных тестировщиков. Но от
времени появления ошибки до момента ее
выявления могло пройти несколько дней.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Поэтому
возник вопрос о выявлении ошибок на
более ранних этапах. Если существует
какая-то часть программы, можно ли
каким-то образом хотя бы сделать &quot;защиту
от дурака&quot;? По аналогии с реальной
жизнью: вы выходите из дома и знаете,
что утюг и газовая плита выключены, но
на всякий случай вы делаете то, что
называется double check (двойная проверка).
В 99% случаев все будет так, как вы ожидаете,
но в 1% случаев эта двойная проверка даст
положительный результат. Тем более,
цена двойной проверки очень мала.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">В
программировании есть что-то подобное,
но:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">вместо
	проверки утюга и газовой плиты проверяется
	множество частей разной программы
	(например, один небольшой авторский
	проект LibreTaxi.org содержит более 500 тестов).</SPAN></FONT></P>
</UL>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">вместо
	проверки только один раз, проверка
	происходит после каждого изменения.</SPAN></FONT></P>
</UL>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Согласитесь,
что это удобно: разработчик изменил
программу, запустил тесты и проверил
что ничего фундаментального не сломалось.
Если сломалось, то тут же исправил. В
итоге, от появления ошибки до момента
ее выявления прошли минуты, но никак не
дни (запуск 500 тестов занимает около
двух минут). Получается, что на относительно
небольшом проекте на каждые 100 изменений
будет запущено по 500 тестов на каждое
изменение, что в общей сложности дает
50 тысяч запусков разных тестов. Этот
подход позволил значительно улучшить
качество написанных программ. Однако,
у юнит-тестирования есть и недостатки.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Во-первых,
вместе с написанием кода программы
программисты также должны писать тесты.
Несмотря на то, что тесты писать легче,
все равно необходимо уделять этому
какое-то время. Для создания хороших
тестов необходимо иметь знания фреймворков
для юнит-тестирования, знания общепринятых
подходов, и какой-то минимальный опыт.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Во-вторых,
юнит-тестирование никогда не покрывает
абсолютно все участки кода. Десять
конструкций &quot;if...else&quot; уже дают 1024
(двойка в десятой степени) возможных
вариантов выполнения вашей программы.
В некоторых проектах используют такое
выражение как &quot;покрытие кода&quot; (code
coverage), которое выражается в процентах.
Например, говорят: &quot;code coverage для нашего
проекта составляет 80%&quot; (при этом это
является предметом гордости). На самом
деле вопрос в том, как считаются эти
проценты. Да, отдельные модули могут
быть покрыты тестами. Но даже 100% покрытие
не является панацеей от абсолютно всех
ошибок: возможных вариантов выполнения
программы всегда во много раз больше,
чем тестов, которые может написать
человек.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">В-третьих,
существует особенность о которой редко
говорят. Юнит-тесты обычно пишут сразу
после написания какого-либо кода. Но на
начальном этапе программный дизайн
функциональности обычно еще не
зафиксирован.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Как
художник перед написанием полотна
рисует этюды, так и программист чаще
всего (порой даже неосознанно) сначала
делает работоспособный набросок. Этот
набросок потом может меняться, ведь со
временем мысль в голове имеет свойство
оформляться в более изящные формы. Так
почему какая-то часть программы не может
быть улучшена сразу после того, как она
была написана в текстовом редакторе?</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Юнит-тесты
фиксируют дизайн программы на этапе
когда дизайн еще достаточно свеж и может
поменяться. Если поспешить с написанием
юнит-тестов, то есть вероятность того,
что тесты нужно будет переписывать.   </SPAN></FONT>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Но
несмотря на все недостатки, юнит-тестирование
оказало неоценимый вклад в развитие
индустрии программных продуктов.
Юнит-тестирование является стандартом
в индустрии, и абсолютно для каждого
языка программирования существует
фреймворк для создания тестов (очень
часто таких фреймворков существует
сразу несколько). В нашей книге мы
рассмотрим более наиболее популярный
фреймворк для языка руби, который
называется Rspec.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.25in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_1eyte5o7hnz5"></A>
<FONT FACE="Arial, serif"><FONT SIZE=4 STYLE="font-size: 16pt"><SPAN LANG="en">RSpec</SPAN></FONT></FONT></P>
<P LANG="en" ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%">
<BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Совершенно
нет необходимости рассматривать
стандартную библиотеку для тестирования,
т.к. очень высока вероятность, что вы
будете использовать не стандартную
библиотеку, а очень популярный фреймворк,
который называется RSpec. В списке
инструментов для тестирования
</SPAN></FONT><A HREF="https://github.com/markets/awesome-ruby#testing"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https://github.com/markets/awesome-ruby#testing</U></SPAN></FONT></FONT></A><FONT FACE="Arial, serif"><SPAN LANG="en">
он занимает первое место.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Нужно
отметить, что существует множество
мнений по поводу лучшего фреймворка
для создания тестов. Например, один из
создателей фреймворка Rails DHH не любит
RSpec, о чем не стесняется говорить:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">&gt;
RSpec раздражает меня эстетически: без
ощутимой выгоды в обмен на сложность,
которую он привносит в юнит тесты</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Источник:
</SPAN></FONT><A HREF="https://twitter.com/dhh/status/52807321499340800"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https://twitter.com/dhh/status/52807321499340800</U></SPAN></FONT></FONT></A><FONT FACE="Arial, serif"><SPAN LANG="en">
(и др.)</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Но
руби-сообщество придерживается другого
мнения. Хотя и с мнением DHH можно
согласиться: когда тесты разрастаются
и начинаются умные (“smart”) трюки RSpec’а,
то тесты на самом деле становятся менее
читаемы. Это чем-то похоже на спортивную
машину, которая едет по загруженному
шоссе, постоянно перестраивается, но в
итоге все равно едет в общем потоке.
Поэтому иногда лучше быть не smart, а simple
(проще), и писать более понятные тесты.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Плюс,
изначальная конфигурация RSpec может
занять какое-то время у начинающего
программиста. Но хорошая новость в том,
что этот инструмент уже прошел фазу
взросления, и на подавляющее большинство
проблем, с которыми вы можете столкнуться,
уже будет готовый ответ в Интернете.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">На
практике качество тестов в проекте
очень зависит от команды. Неважно каким
именно инструментом вы пользуетесь:
если бы существовал инструмент, который
решает все проблемы, то ему не было бы
цены. И вопрос читаемых тестов это не
вопрос инструмента, а вопрос баланса
smart vs simple.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Основой
RSpec является т.н. DSL - Domain Specific Language
(“предметно-ориентированный язык”).
Само название говорит о том, что это
какой-то язык, созданный специально для
описания каких-то предметов,  </SPAN></FONT>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Это,
можно сказать, особый синтаксис, который
появляется в языке после установки
gem’a “rspec”. Помимо стандартных ключевых
слов, появляются новые: describe, it, let, before,
after. В этой книге мы не рассматривали
как именно работает механизм DSL. Для
наших целей пока достаточно знать, что
этот механизм позволяет создавать свой
синтаксис внутри языка руби.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Попробуем
установить и настроить rspec с нуля и
написать первый тест. Для начала установим
последнюю версию стабильную версию
руби. Для этого введем команду `rvm list
known`, она покажет список доступных версий
языка для установки. Нас интересует
версия “MRI” (Matz's Ruby Interpreter, версия языка
от создателя языка руби Юкихиро Мацумото,
эта версия является основной). Для
установки достаточно ввести:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">$
rvm install 2.5.1</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```
 </SPAN></FONT>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Или
любую другую версию без суффикса
“-preview”. После этого создадим каталог
приложения и “закрепим” версию руби
за этим приложением:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
mkdir rspec_demo</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
cd rspec_demo</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
echo &quot;2.5.1&quot; &gt; .ruby-version</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Проверим,
что версия установленная версия руби
соответствует ожидаемой (ваш вывод
может немного отличаться):</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">$
ruby -v</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">ruby
2.5.1p57 (2018-03-29 revision 63029) [x86_64-darwin17]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Если
изменения не были “подхвачены”,
необходимо выйти и снова войти в каталог:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">$
cd ..</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">$
cd rspec_demo</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Раньше
мы устанавливали gem’ы (дополнительные
библиотеки) с помощью команды “gem install
…”, но полезно где-то держать список
всех необходимых gem’ов для вашего
приложения. Для этих целей есть специальный
файл, который называется Gemfile. Лучше
создать его с помощью команды:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">$
bundle init</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Gemfile
будет выглядеть следующим образом:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">#
frozen_string_literal: true</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">source
&quot;https://rubygems.org&quot;</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">git_source(:github)
{|repo_name| &quot;https://github.com/#{repo_name}&quot; }</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">#
gem &quot;rails&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Теперь
необходимо установить rspec. Это можно
сделать при помощи команды `gem install
rspec`, но раз уж мы договорились держать
все одном месте, изменим Gemfile на следующий:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">source
&quot;https://rubygems.org&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">gem
&quot;rspec&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">И
введем команду bundle (“связка”, “связать”):</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">$
bundle</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">…</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Fetching
rspec 3.8.0</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Installing
rspec 3.8.0</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Bundle
complete! 1 Gemfile dependency, 7 gems now installed.</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Use
`bundle info [gemname]` to see where a bundled gem is installed.</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Если
вы посмотрите на текущую директорию,
то увидите файл `Gemfile.lock`. Этот файл был
создан автоматически, не рекомендуется
менять его вручную. Он указывает какие
именно версии gem’ов были использованы
для вашего приложения. Как и все в этом
мире, gem’ы обновляются и могут менять
версии. Не факт, что следующая версия
будет совместима с предыдущей. Но вы же
хотите, чтобы ваша программа работала
через 5-10 лет? Поэтому мы “локаем” (от
слова “lock” - “замок”) ее на определенные
версии gem’ов, и в будущем автоматического
обновления gem’ов не будет. Не переживайте,
мы всегда сможем обновить gem’ы вручную,
когда мы этого захотим.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">В
директории вашего приложения должно
быть три файла: `.ruby-version`, `Gemfile`,
`Gemfile.lock` (воспользуйтесь командой `ls
-a`, т.к. все файлы, начинающиеся с точки
не выводятся с помощью команды `ls`). Но
возникает вопрос - если rspec был установлен,
то куда?</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Все
верно, когда мы ввели команду “bundle”,
пакет “rspec” был скачан из Интернета и
размещен где-то в вашей файловой системе.
Команда `gem which rspec` поможет вам увидеть
точный путь, но знать точный путь обычно
никогда не требуется. Все остальные
программисты вашей команды будут также
вводить “bundle” и на основе трех файлов
смогут “воссоздать” точно такую же
среду исполнения, какая сейчас существует
на вашем компьютере, с точно такими же
gem’ами. Правда, может отличаться номер
патча. Например, версия руби “ruby 2.5.1p57”
согласно SEMVER (</SPAN></FONT><A HREF="http://www.semver.org"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>www.semver.org</U></SPAN></FONT></FONT></A><FONT FACE="Arial, serif"><SPAN LANG="en">)
говорит о том, что патч в руби версии
“2.5.1” это единица. Но метка “p57” по
сути тоже означает номер патча: пятьдесят
седьмой патч. Это, скажем так, тоже патч,
но еще менее значимый. Какие-то очень
незначительные изменения, исправление
багов, улучшение безопасности. Звучит
сложно? Но за это нам и платят деньги!</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Команда
`rspec --help` поможет определить что делать
дальше: нас интересует команда `rspec
--init`:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">$
rspec --init</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">create
  .rspec</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">create
  spec/spec_helper.rb</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Было
создано два файла (`.rspec` и `spec_helper.rb`) и
одна директория `spec`. Теперь можно
поговорить о том, что такое “spec”. Это
то же самое, что и тест. Это слово
образовано от другого слова: “specification”
(спецификация). По-русски иногда говорят
“спек” или “спеки”.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Файл
`spec_helper.rb` достаточно объемный (порядка
сотни строк), но по большей части это
комментарии. Этот файл является
вспомогательным и служит для настройки
инструмента “rspec”. Настраивать на
данном этапе мы ничего не будем, поэтому
оставим все настройки по-умолчанию.
Посмотрим на структуру нашего приложения:</SPAN></FONT></P>
<P LANG="en" ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%">
<BR>
</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><IMG SRC="2eaec5a5667bec5b244b5f4a53e23318_html_64343691.png" NAME="image41.png" ALIGN=BOTTOM HSPACE=12 VSPACE=12 WIDTH=213 HEIGHT=206 BORDER=0></P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><I>Рис.
Структура приложения без какого-либо
“полезного” кода.</I></SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Что
видно из этого рисунка? Программа еще
не написана, но уже существует 5 файлов!
Два файла являются т.н. dot-файлами
(dotfiles, начинаются с точки). Есть файл с
подчеркиванием (snake_case), есть файл с
дефисом (kebab-case). Есть файлы, начинающиеся
с большой буквы, есть файлы начинающиеся
с маленькой буквы. Есть файлы с расширением,
есть без. Остается только сказать, что
мы живем не в идеальном мире, а
перфекционисты в программировании
могут почувствовать себя не очень уютно.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Давайте
напишем какой-нибудь “полезный” код,
а потом покроем его тестами. И тут сразу
же нужно сделать отступление. В сообществе
разработчиков не утихают дебаты по
поводу правильного подхода: что нужно
делать сначала: писать полезный код, а
потом тесты? Или же сначала создавать
тесты, а потом код? (т.н. Test Driven Development,
TDD).</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">На
сайте Youtube есть видео дебатов DHH (одного
из создателей фреймворка Rails), Кента
Бека (основателя методологии TDD) и Мартина
Фаулера (известного автора трудов по
основам объектно-ориентированного
программирования и проектирования).
Авторы этой книги солидарны с DHH и
придерживаются мнения, что сначала
нужно написать код, а потом покрывать
существующий код тестами. </SPAN></FONT>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Наш
“полезный” код уже нам знаком: </SPAN></FONT>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">def
total_weight(options={})</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">a
= options[:soccer_ball_count] || 0</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">b
= options[:tennis_ball_count] || 0</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">c
= options[:golf_ball_count] || 0</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">(a
* 410) + (b * 58) + (c * 45) + 29</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">x
= total_weight(soccer_ball_count: 3, tennis_ball_count: 2,
golf_ball_count: 1)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Мы
рассматривали этот метод, когда считали
общий вес заказа. Выше мы умножаем
количество футбольных мячей “a” на вес
каждого футбольного мяча (410 грамм),
количество мячей для тенниса “b” на
вес каждого мяча для тенниса (58 грамм),
количество мячей для гольфа “c” на вес
каждого мяча для гольфа (45 грамм) и
прибавляем вес коробки (29 грамм).</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Сейчас
с этим методом все в порядке. Но почему
именно этот метод стоит покрыть тестами?
Чтобы ответить на этот вопрос, подумаем
что может пойти не так.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Во-первых,
речь идет о деньгах - о стоимости посылки.
Там где деньги, там нужен точный расчет
и нужна надежность. Какой-нибудь
программист через год или два может
заглянуть в этот метод и добавить новую
функциональность. Например, новый тип
мячей. Чтобы убедиться в том, что ничего
не сломано, нужно хотя бы запустить этот
метод и сравнить результат с ожидаемым.
Но лучше делать это автоматически.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Во-вторых,
кто-то может посчитать, что конструкция
`|| 0` лишняя. Это мнение имеет право на
существование, т.к. следующий код вполне
работоспособен (попробуйте запустить
в pry):</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">def
total_weight(options={})</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">a
= options[:soccer_ball_count]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">b
= options[:tennis_ball_count]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">c
= options[:golf_ball_count]</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">(a
* 410) + (b * 58) + (c * 45) + 29</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">x
= total_weight(soccer_ball_count: 3, tennis_ball_count: 2,
golf_ball_count: 1)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Но
только до той поры, пока код вызывается
со всеми параметрами. Когда один из них
отсутствует, будет выдана ошибка:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
pry</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">...</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">x
= total_weight(soccer_ball_count: 3, tennis_ball_count: 2)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">NoMethodError:
undefined method `*' for nil:NilClass</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">from
(pry):12:in `total_weight'</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Хороший
тест предотвратит эту ошибку. </SPAN></FONT>
</P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">В-третьих,
представьте какой-нибудь более сложный
сценарий. Например, если общий вес мячей
больше определенного значения, то
требуются две коробки. Или мы знаем, что
при покупке хотя бы одного мяча для
тенниса в коробку кладется рекламный
буклет весом 25 грамм.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Конечно,
можно было бы обойтись и без тестов.
Достаточно написать правильный метод,
проверить его вручную (например, в pry) и
использовать в приложении. Но согласитесь,
что неплохо бы было дать другим
программистам возможность проверить
написанный вами код. А еще лучше сделать
так, чтобы этот код был представлен в
общем наборе тестов, среди всех других
проверок, чтобы одной с помощью одной
консольной команды можно было запустить
все тесты сразу и убедиться, что все
впорядке.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Добавим
в наше приложение одну директорию `lib`
и два файла: `shipment.rb` и `app.rb`:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><IMG SRC="2eaec5a5667bec5b244b5f4a53e23318_html_399f6547.png" NAME="image42.png" ALIGN=BOTTOM HSPACE=12 VSPACE=12 WIDTH=221 HEIGHT=256 BORDER=0></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">`app.rb`
будет выглядеть следующим образом:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">require
'./lib/shipment'</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">x
= Shipment.total_weight(soccer_ball_count: 3, tennis_ball_count: 2,
golf_ball_count: 1)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">puts
x</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">`lib/shipment.rb`
будет содержать упомянутую выше функцию,
но код будет представлен в виде модуля:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">module
Shipment</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">module_function</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">def
total_weight(options={})</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">a
= options[:soccer_ball_count] || 0</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">b
= options[:tennis_ball_count] || 0</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">c
= options[:golf_ball_count] || 0</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><SPAN LANG="en">(a
* 410) + (b * 58) + (c * 45) + 29</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Можно
было бы создать класс и объявить метод
в виде метода класса `self.total_weight`, но не
рекомендуется создавать классы, когда
мы не собираемся создавать их экземпляры
(см.
</SPAN></FONT><A HREF="https://github.com/rubocop-hq/ruby-style-guide#modules-vs-classes"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https://github.com/rubocop-hq/ruby-style-guide#modules-vs-classes</U></SPAN></FONT></FONT></A><FONT FACE="Arial, serif"><SPAN LANG="en">).
Поэтому мы ограничимся модулем и
специальным синтаксисом `module_function`.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">При
запуске `app.rb` на экран выводится вес
отправления:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">$
ruby app.rb</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">1420</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Выше
мы разбили программу на две части (на
два юнита): часть, которая содержит
логику `shipment.rb`. И часть, которая вызывает
логику `app.rb`. Мы создадим тест для первого
юнита, `shipment.rb`, который содержит основную
логику. Второй юнит пока не является
чем-то сложным, поэтому покрывать тестом
мы его не будем.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Добавьте
в директорию `spec` файл `shipment_spec.rb`:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><IMG SRC="2eaec5a5667bec5b244b5f4a53e23318_html_a38771e8.png" NAME="image43.png" ALIGN=BOTTOM HSPACE=12 VSPACE=12 WIDTH=222 HEIGHT=301 BORDER=0></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Cо
следующим содержимым:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">require
'./lib/shipment'</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">describe
Shipment do</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">it
'should work without options' do</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">   
<FONT FACE="Courier New, serif"><SPAN LANG="en">expect(Shipment.total_weight).to
eq(29)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">И
запустите тесты (параметры устанавливают
форматирование в значение “d” -
documentation, в этом случае rspec выводит имена
тестов):</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
rspec -f d</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en"><B>Shipment</B></SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en"><B>should
work without options</B></SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">Finished
in 0.00154 seconds (files took 0.09464 seconds to load)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en"><B>1
example, 0 failures</B></SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Тест
отлично отработал, но что же произошло
в программе? Давайте разберемся. Вот
код программы с комментариями:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
подключаем юнит</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">require
'./lib/shipment'</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
специальный синтаксис, который дословно
говорит:</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
&quot;описываем Shipment (отправление)&quot;</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">describe
Shipment do</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
специальный синтаксис, который дословно
говорит:</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
&quot;это должно работать без опций&quot;</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
(то, что в кавычках - это строка, мы сами
её пишем, слово &quot;it&quot; служебное)</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">it
'should work without options' do</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">#
ожидаем, что общий вес отправления будет
равен 29 (eq от англ.&quot;equal&quot;)</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">   
<FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">expect(Shipment.total_weight).to
eq(29)</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">end</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">end</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Согласитесь,
что код выглядит не вполне обычно. То,
что вы видите выше это т.н. rspec DSL (Domain
Specific Language - язык предметной области). Он
работает только в rspec. Давайте добавим
еще один тест и посмотрим на результат:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">require
'./lib/shipment'</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">describe
Shipment do</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">it
'should work without options' do</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">   
<FONT FACE="Courier New, serif"><SPAN LANG="en">expect(Shipment.total_weight).to
eq(29)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">it
'should calculate shipment with only one item' do</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">   
<FONT FACE="Courier New, serif"><SPAN LANG="en">expect(Shipment.total_weight(soccer_ball_count:
1)).to eq(439)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">   
<FONT FACE="Courier New, serif"><SPAN LANG="en">expect(Shipment.total_weight(tennis_ball_count:
1)).to eq(87)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">   
<FONT FACE="Courier New, serif"><SPAN LANG="en">expect(Shipment.total_weight(golf_ball_count:
1)).to eq(74)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Результат:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
rspec -f d</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">Shipment</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">should
work without options</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><SPAN LANG="en">should
calculate shipment with only one item</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">Finished
in 0.00156 seconds (files took 0.09641 seconds to load)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">2
examples, 0 failures</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Что
произошло выше? “It should calculate shipment with
only one item” дословно переводится как “это
должно рассчитывать отправление только
с одной вещью”. Другими словами, как
раз то, что мы желаем проверить: код
должен работать в тех случаях, когда
программист передает только 1 аргумент
в функцию `total_weight`. Кстати, вместо
непонятных цифр 439, 87, 74 лучше написать
ожидаемый результат в виде сложения. В
будущем возможно потребуется заменить
29 на какое-то другое значение, да и
вообще, полезно иметь возможность понять
откуда взялись эти цифры:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">expect(Shipment.total_weight(soccer_ball_count:
1)).to eq(410 + 29)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">expect(Shipment.total_weight(tennis_ball_count:
1)).to eq(58 + 29)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">expect(Shipment.total_weight(golf_ball_count:
1)).to eq(45 + 29)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Давайте
подробнее разберем строку:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">expect(something).to
eq(some_value)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">которая
также может быть представлена как:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">expect(something).to
be(some_value)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">О
разнице между &quot;eq&quot; и &quot;be&quot; немного
ниже. Эта строка похожа на предложение
в английском языке. Например, мама
говорит мальчику: &quot;Son, when you go to school, I
expect you to be a good boy&quot; (&quot;Сынок, когда ты
идешь в школу, я ожидаю, что ты будешь
хорошим мальчиком&quot;). На языке RSpec DSL
это может быть записано следующим
образом:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">expect(son).to
be(a_good_boy)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Или
немного иначе:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">expect(son).not_to
be(a_bad_boy)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Если
бы мы записывали программу на чистом
руби, то мы скорее всего написали бы
что-то вроде:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">if
son != a_good_boy</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">panic</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">end</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Но
RSpec дает нам возможность записать все
в виде одной строки, и в более естественном
(с точки зрения RSpec) виде. Под капотом
там, конечно, используется обычная
конструкция &quot;if&quot;. Другими словами,
в тестах мы не пишем &quot;if&quot;, а сообщаем
о наших ожиданиях. Мы не используем
императивный стиль, а используем
декларативный. Мама не говорит мальчику
что конкретно делать (&quot;не обижай
девочек&quot;, &quot;учись хорошо&quot;), она
говорит что она от него ожидает (&quot;будь
хорошим&quot;). Другими словами, это spec,
спецификация, которая где-то задана и
которой надо соответствовать.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Выражения
типа `expect(son).to` и `expect(son).not_to` являются
ожиданием (expectation). А выражения `eq(...)` (от
слова &quot;equal&quot;), `be(...)` называют матчерами
(matchers). Матчеры и ожидания бывают разных
типов. Обычно ожидания могут принимать
или вид выражения, или вид блока:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Выражение
(expression) в ожидании используется, когда
мы проверяем какое-то существительное,
или результат действия. Например:
мальчик, вес мяча, вес посылки:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">expect(son).to
be(a_good_boy)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">expect(soccer_ball_weight).to
eq(410)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">expect(Shipment.total_weight(soccer_ball_count:
1)).to eq(439)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Блоки
в ожидании используются когда требуется
или проверить что-то во время операции,
или сделать какое-то измерение. Например:
проверить, что метод выдает исключение,
если запущен с определенными параметрами;
проверить, что метод меняет состояние
экземпляра класса - например, добавляем
товар в корзину, а общее количество
элементов в корзине увеличилось на
один. Если в случае выражений мы просто
помещали их в скобки, то в случае с
блоками мы передаем их в фигурных
скобках:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">expect
{ Shipment.total_weight(ford_trucks: 100) }.to raise_error</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">expect
{ some_order.add(item) }.to change { order.item_count }.by(1)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Синтаксис
является немного необычным и требует
привыкания. Ожидания и стандартные
матчеры доступны на официальном сайте
по адресу
</SPAN></FONT><A HREF="https://relishapp.com/rspec/rspec-expectations/docs/built-in-matchers"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https://relishapp.com/rspec/rspec-expectations/docs/built-in-matchers</U></SPAN></FONT></FONT></A><FONT FACE="Arial, serif"><SPAN LANG="en">.
Хочется заметить, что из практики
программирования этого набора обычно
достаточно.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">У
нас нет задачи дать полную справку по
rspec, но следует упомянуть о различии
матчеров &quot;eq&quot; и &quot;be&quot;. &quot;Be&quot;
означает &quot;быть&quot;, т.е. быть в смысле
&quot;точно вот этим&quot;. А &quot;eq&quot; означает
&quot;равен&quot; (&quot;equals&quot;). Т.е. не обязательно
быть точно таким же, но нужно равняться.
Например, надписи на заборах из трех
букв обычно равны (&quot;eq&quot;), но каждая
из них уникальная по-своему, поэтому
нельзя применить к ним матчер &quot;be&quot;.
Ведь надпись может быть нарисована
разной краской, разным размером и т.д.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Т.к.
все в руби объект, то это важно. Например,
переменные &quot;a&quot; и &quot;b&quot; ниже равны,
но их идентификаторы разные, т.к. это
разные объекты и они расположены в
разных областях памяти:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">$
pry</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&gt;
a = &quot;XXX&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&gt;
b = &quot;XXX&quot;</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&gt;
a == b</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Courier New, serif"><SPAN LANG="en">=&gt;
true</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><SPAN LANG="en">&gt;
a.__id__ == b.__id__</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"> <FONT FACE="Courier New, serif"><SPAN LANG="en">=&gt;
false</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Давайте
напишем еще один тест для нашей программы:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">it
'should calculate shipment with multiple items' do</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">expect(</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">     
<FONT FACE="Courier New, serif"><FONT SIZE=1 STYLE="font-size: 8pt"><SPAN LANG="en">Shipment.total_weight(soccer_ball_count:
3, tennis_ball_count: 2, golf_ball_count: 1)</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">    <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">).to
eq(1420)</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">end</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Ради
удобства чтения выражение, которое мы
хотим проверить было перенесено на
отдельную строку. Результат выполнения
всех тестов:</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">$
rspec -f d</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Shipment</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">should
work without options</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">should
calculate shipment with only one item</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Arial, serif"><SPAN LANG="en">should
calculate shipment with multiple items</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Finished
in 0.00291 seconds (files took 0.19016 seconds to load)</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">3
examples, 0 failures</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Все
это хорошо, но выше был дан пример
тестирования &quot;статического&quot; метода,
или метода класса (точнее модуля, что
почти одно и то же), но не экземпляра.
Заметьте, что мы нигде не создавали
никакого объекта, а вызывали класс
напрямую. В случае наличия объекта для
тестирования все становится намного
интереснее.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Можно
долго рассказывать про rspec и существуют
отдельные книги на эту тему (например,
</SPAN></FONT><A HREF="https://leanpub.com/everydayrailsrspec"><FONT COLOR="#1155cc"><FONT FACE="Arial, serif"><SPAN LANG="en"><U>https://leanpub.com/everydayrailsrspec</U></SPAN></FONT></FONT></A><FONT FACE="Arial, serif"><SPAN LANG="en">),
но самый лучший совет, который могут
дать авторы: при написании программ
старайтесь думать о том, как вы будете
тестировать написанный вами код.
Существует множество приёмов, но наша
задача - познакомить вас с синтаксисом
и дать основы.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><B>Задание:</B></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">
попробуйте заменить 1420 выше на 1421 и
посмотрите что произойдет (тест не
должен сработать).</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en"><B>Задание:</B></SPAN></FONT><FONT FACE="Arial, serif"><SPAN LANG="en">
код файла `shipment.rb` был изменен: если в
метод “total_weight” не переданы аргументы,
генерируется ошибка (также говорят
“выбрасывается исключение”):</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">module
Shipment</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">module_function</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">def
total_weight(options={})</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">	raise
&quot;Can't calculate weight with empty options&quot; if
options.empty?</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">	a
= options[:soccer_ball_count] || 0</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">	b
= options[:tennis_ball_count] || 0</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">	c
= options[:golf_ball_count] || 0</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">	(a
* 410) + (b * 58) + (c * 45) + 29</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%">  <FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">end</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Courier New, serif"><FONT SIZE=2><SPAN LANG="en">end</SPAN></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">```</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif"><SPAN LANG="en">Измените
тест таким образом, чтобы тест проверял,
что ошибка на самом деле генерируется.</SPAN></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.28in; line-height: 115%; page-break-inside: avoid; page-break-after: avoid"><A NAME="_dzq7m7357sso"></A>
<FONT FACE="Arial, serif"><FONT SIZE=5 STYLE="font-size: 20pt"><SPAN LANG="en">Заключение</SPAN></FONT></FONT></P>
<P LANG="en" STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Мы
рассмотрели лишь некоторые возможности
языка Руби, выполнили задания, заложили
фундамент, который позволит уверенно
двигаться дальше. Для любого программиста
очень важно понимание основ и возможностей
инструментов.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Знания,
изложенные в этой книге, в течение
нескольких лет собирались из разных
источников. Они дают неоспоримое
преимущество перед другими учащимися.
Возможно, вам придется обращаться к
этой книге снова -- это нормальный
процесс, т.к. полученная информация
усваивается постепенно, оседает слоями,
каждый раз дополняя общее понимание. </FONT>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, serif">Если
какие-то моменты оказались сложны для
вашего понимания, мы рекомендуем
вернуться к прочитанному материалу
через 2-3 месяца. Авторы желают успехов,
не останавливаться на достигнутом,
двигаться вперед к намеченной цели --
удаленная работа, которая даёт свободу
и финансовую независимость.</FONT></P>
<P STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0.11in"><BR><BR>
</P>
<DIV TYPE=FOOTER>
	<P ALIGN=RIGHT STYLE="margin-top: 0.46in; margin-bottom: 0.11in"><SDFIELD TYPE=PAGE SUBTYPE=RANDOM FORMAT=PAGE>182</SDFIELD></P>
</DIV>
</BODY>
</HTML>